
2022-03-21 14:30:24,822 p=94780 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from 
ansible-core in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 14:30:25,079 p=94780 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 
2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 14:30:25,083 p=94780 u=moonja n=ansible | [WARNING]: While constructing a mapping from /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/install.yml, line 308,
column 3, found a duplicate dict key (when). Using last defined value only.

2022-03-21 14:30:25,135 p=94780 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/upgrade.yml is empty and had no tasks to include

2022-03-21 14:30:25,150 p=94780 u=moonja n=ansible | PLAY [all] *************************************************************************************************************************
2022-03-21 14:30:25,182 p=94780 u=moonja n=ansible | TASK [Gathering Facts] *************************************************************************************************************
2022-03-21 14:30:27,294 p=94780 u=moonja n=ansible | ok: [co7-master]
2022-03-21 14:30:27,312 p=94780 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 14:30:27,316 p=94780 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 14:30:27,338 p=94780 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 14:30:27,355 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : Install rpm packages of dependenies to need installing packages regarding kubernates] ******************
2022-03-21 14:30:28,464 p=94780 u=moonja n=ansible | ok: [co7-node01] => (item=firewalld)
2022-03-21 14:30:28,464 p=94780 u=moonja n=ansible | ok: [co7-node03] => (item=firewalld)
2022-03-21 14:30:28,474 p=94780 u=moonja n=ansible | ok: [co7-node02] => (item=firewalld)
2022-03-21 14:30:28,487 p=94780 u=moonja n=ansible | ok: [co7-master] => (item=firewalld)
2022-03-21 14:30:29,200 p=94780 u=moonja n=ansible | ok: [co7-node01] => (item=python3)
2022-03-21 14:30:29,214 p=94780 u=moonja n=ansible | ok: [co7-master] => (item=python3)
2022-03-21 14:30:29,217 p=94780 u=moonja n=ansible | ok: [co7-node02] => (item=python3)
2022-03-21 14:30:29,218 p=94780 u=moonja n=ansible | ok: [co7-node03] => (item=python3)
2022-03-21 14:30:30,046 p=94780 u=moonja n=ansible | ok: [co7-node01] => (item=python3-libselinux)
2022-03-21 14:30:30,105 p=94780 u=moonja n=ansible | ok: [co7-node03] => (item=python3-libselinux)
2022-03-21 14:30:30,112 p=94780 u=moonja n=ansible | ok: [co7-master] => (item=python3-libselinux)
2022-03-21 14:30:30,125 p=94780 u=moonja n=ansible | ok: [co7-node02] => (item=python3-libselinux)
2022-03-21 14:30:30,137 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : Start and enable firewalld.] ***************************************************************************
2022-03-21 14:30:31,438 p=94780 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:30:31,451 p=94780 u=moonja n=ansible | changed: [co7-master]
2022-03-21 14:30:31,455 p=94780 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:30:31,470 p=94780 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:30:31,480 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : Open Firewall] *****************************************************************************************
2022-03-21 14:30:32,397 p=94780 u=moonja n=ansible | changed: [co7-node02] => (item=5432)
2022-03-21 14:30:32,428 p=94780 u=moonja n=ansible | changed: [co7-node03] => (item=5432)
2022-03-21 14:30:32,429 p=94780 u=moonja n=ansible | changed: [co7-master] => (item=5432)
2022-03-21 14:30:32,440 p=94780 u=moonja n=ansible | changed: [co7-node01] => (item=5432)
2022-03-21 14:30:32,451 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : Whitelist of Ip addresses] *****************************************************************************
2022-03-21 14:30:33,195 p=94780 u=moonja n=ansible | changed: [co7-node01] => (item=co7-master)
2022-03-21 14:30:33,196 p=94780 u=moonja n=ansible | changed: [co7-node02] => (item=co7-master)
2022-03-21 14:30:33,209 p=94780 u=moonja n=ansible | changed: [co7-node03] => (item=co7-master)
2022-03-21 14:30:33,216 p=94780 u=moonja n=ansible | changed: [co7-master] => (item=co7-master)
2022-03-21 14:30:33,797 p=94780 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node01)
2022-03-21 14:30:33,836 p=94780 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node01)
2022-03-21 14:30:33,847 p=94780 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node01)
2022-03-21 14:30:33,855 p=94780 u=moonja n=ansible | changed: [co7-master] => (item=co7-node01)
2022-03-21 14:30:34,404 p=94780 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node02)
2022-03-21 14:30:34,469 p=94780 u=moonja n=ansible | changed: [co7-master] => (item=co7-node02)
2022-03-21 14:30:34,472 p=94780 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node02)
2022-03-21 14:30:34,477 p=94780 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node02)
2022-03-21 14:30:35,091 p=94780 u=moonja n=ansible | changed: [co7-master] => (item=co7-node03)
2022-03-21 14:30:35,110 p=94780 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node03)
2022-03-21 14:30:35,127 p=94780 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node03)
2022-03-21 14:30:35,279 p=94780 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node03)
2022-03-21 14:30:35,289 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : Bounce firewalld] **************************************************************************************
2022-03-21 14:30:36,976 p=94780 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:30:36,996 p=94780 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:30:37,017 p=94780 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:30:37,020 p=94780 u=moonja n=ansible | changed: [co7-master]
2022-03-21 14:30:37,033 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : Copy the vmwawre-postgres rpm file to all hosts in cluster] ********************************************
2022-03-21 14:30:38,899 p=94780 u=moonja n=ansible | changed: [co7-master]
2022-03-21 14:30:38,906 p=94780 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:30:38,921 p=94780 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:30:38,924 p=94780 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:30:38,934 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : Install dependency rpm package for pgautofailover] *****************************************************
2022-03-21 14:30:45,703 p=94780 u=moonja n=ansible | ok: [co7-master] => (item=python2-psutil)
2022-03-21 14:30:45,750 p=94780 u=moonja n=ansible | ok: [co7-node02] => (item=python2-psutil)
2022-03-21 14:30:45,765 p=94780 u=moonja n=ansible | ok: [co7-node03] => (item=python2-psutil)
2022-03-21 14:30:45,766 p=94780 u=moonja n=ansible | ok: [co7-node01] => (item=python2-psutil)
2022-03-21 14:30:52,459 p=94780 u=moonja n=ansible | ok: [co7-node03] => (item=python3)
2022-03-21 14:30:52,469 p=94780 u=moonja n=ansible | ok: [co7-node02] => (item=python3)
2022-03-21 14:30:52,648 p=94780 u=moonja n=ansible | ok: [co7-node01] => (item=python3)
2022-03-21 14:30:53,038 p=94780 u=moonja n=ansible | ok: [co7-master] => (item=python3)
2022-03-21 14:30:53,049 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : Install VMware Postgres on all hosts as root] **********************************************************
2022-03-21 14:31:22,290 p=94780 u=moonja n=ansible | changed: [co7-master]
2022-03-21 14:31:23,698 p=94780 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:31:24,881 p=94780 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:31:27,009 p=94780 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:31:27,019 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 14:31:27,070 p=94780 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:31:27,071 p=94780 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:31:27,082 p=94780 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:31:27,736 p=94780 u=moonja n=ansible | changed: [co7-master]
2022-03-21 14:31:27,746 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:31:27,784 p=94780 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "pg_autoctl version 1.4.2\npg_autoctl extension version 1.4\ncompiled with PostgreSQL 11.12 (VMware Postgres 11.12.0) on x86_64-redhat-linux-gnu, compiled by gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-44), 64-bit\ncompatible with Postgres 10, 11, 12, and 13"
}
2022-03-21 14:31:27,800 p=94780 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:31:27,801 p=94780 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:31:27,813 p=94780 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:31:27,822 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 14:31:27,870 p=94780 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:31:27,871 p=94780 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:31:27,883 p=94780 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:31:28,401 p=94780 u=moonja n=ansible | changed: [co7-master]
2022-03-21 14:31:28,412 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:31:28,448 p=94780 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "pg_ctl (PostgreSQL) 11.12 (VMware Postgres 11.12.0)"
}
2022-03-21 14:31:28,464 p=94780 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:31:28,465 p=94780 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:31:28,476 p=94780 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:31:28,486 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : Getting process IDs of the pg_autoctl process] *********************************************************
2022-03-21 14:31:29,169 p=94780 u=moonja n=ansible | ok: [co7-master]
2022-03-21 14:31:29,169 p=94780 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 14:31:29,177 p=94780 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 14:31:29,183 p=94780 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 14:31:29,193 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : Printing the process IDs obtained] *********************************************************************
2022-03-21 14:31:29,239 p=94780 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 14:31:29,248 p=94780 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 14:31:29,260 p=94780 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 14:31:29,275 p=94780 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 14:31:29,286 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : Stop pgautofailover service of systemd] ****************************************************************
2022-03-21 14:31:29,335 p=94780 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 14:31:29,338 p=94780 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:31:29,354 p=94780 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:31:29,370 p=94780 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:31:29,380 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:31:29,415 p=94780 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 14:31:29,431 p=94780 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 14:31:29,433 p=94780 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 14:31:29,445 p=94780 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 14:31:29,455 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : Create the monitor node] *******************************************************************************
2022-03-21 14:31:29,488 p=94780 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:31:29,503 p=94780 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:31:29,515 p=94780 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:31:41,294 p=94780 u=moonja n=ansible | fatal: [co7-master]: FAILED! => {"ansible_job_id": "68479039438.18711", "changed": true, "cmd": "( cd /var/lib/pgsql ; pg_autoctl create monitor --auth trust --ssl-self-signed --pgdata monitor )", "delta": "0:00:06.736812", "end": "2022-03-21 14:31:36.792424", "finished": 1, "msg": "non-zero return code", "rc": 12, "results_file": "/var/lib/pgsql/.ansible_async/68479039438.18711", "start": "2022-03-21 14:31:30.055612", "started": 1, "stderr": "14:31:30 18721 INFO  Using default --ssl-mode \"require\"\n14:31:30 18721 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n14:31:30 18721 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n14:31:30 18721 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n14:31:30 18721 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/monitor/server.crt -keyout /var/lib/pgsql/monitor/server.key -subj \"/CN=postgres-haproxy01\"\n14:31:30 18721 INFO  Started pg_autoctl postgres service with pid 18725\n14:31:30 18721 INFO  Started pg_autoctl monitor-init service with pid 18726\n14:31:30 18725 INFO   /usr/bin/pg_autoctl do service postgres --pgdata monitor -v\n14:31:30 18726 WARN  Failed to resolve DNS name \"postgres-haproxy01\": Name or service not known\n14:31:30 18726 WARN  Failed to find IP address for hostname \"postgres-haproxy01\", see above for details\n14:31:30 18726 WARN  Failed to grant connection to local network.\n14:31:30 18721 ERROR pg_autoctl service monitor-init exited with exit status 12\n14:31:30 18721 INFO  Restarting service monitor-init\n14:31:30 18729 WARN  Failed to resolve DNS name \"postgres-haproxy01\": Name or service not known\n14:31:30 18729 WARN  Failed to find IP address for hostname \"postgres-haproxy01\", see above for details\n14:31:30 18729 WARN  Failed to grant connection to local network.\n14:31:31 18721 ERROR pg_autoctl service monitor-init exited with exit status 12\n14:31:31 18721 INFO  Restarting service monitor-init\n14:31:31 18730 WARN  Failed to resolve DNS name \"postgres-haproxy01\": Name or service not known\n14:31:31 18730 WARN  Failed to find IP address for hostname \"postgres-haproxy01\", see above for details\n14:31:31 18730 WARN  Failed to grant connection to local network.\n14:31:31 18721 ERROR pg_autoctl service monitor-init exited with exit status 12\n14:31:31 18721 INFO  Restarting service monitor-init\n14:31:36 18731 WARN  Failed to resolve DNS name \"postgres-haproxy01\": Name or service not known\n14:31:36 18731 WARN  Failed to find IP address for hostname \"postgres-haproxy01\", see above for details\n14:31:36 18731 WARN  Failed to grant connection to local network.\n14:31:36 18721 ERROR pg_autoctl service monitor-init exited with exit status 12\n14:31:36 18721 INFO  Restarting service monitor-init\n14:31:36 18862 WARN  Failed to resolve DNS name \"postgres-haproxy01\": Name or service not known\n14:31:36 18862 WARN  Failed to find IP address for hostname \"postgres-haproxy01\", see above for details\n14:31:36 18862 WARN  Failed to grant connection to local network.\n14:31:36 18721 ERROR pg_autoctl service monitor-init exited with exit status 12\n14:31:36 18721 INFO  Restarting service monitor-init\n14:31:36 18863 WARN  Failed to resolve DNS name \"postgres-haproxy01\": Name or service not known\n14:31:36 18863 WARN  Failed to find IP address for hostname \"postgres-haproxy01\", see above for details\n14:31:36 18863 WARN  Failed to grant connection to local network.\n14:31:36 18721 ERROR pg_autoctl service monitor-init exited with exit status 12\n14:31:36 18721 FATAL pg_autoctl service monitor-init has already been restarted 5 times in the last 6 seconds, stopping now\n14:31:36 18725 INFO  Postgres controller service received signal SIGTERM, terminating\n14:31:36 18721 FATAL Something went wrong in sub-process supervision, stopping now. See above for details.\n14:31:36 18721 INFO  Stop pg_autoctl", "stderr_lines": ["14:31:30 18721 INFO  Using default --ssl-mode \"require\"", "14:31:30 18721 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic", "14:31:30 18721 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.", "14:31:30 18721 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details", "14:31:30 18721 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/monitor/server.crt -keyout /var/lib/pgsql/monitor/server.key -subj \"/CN=postgres-haproxy01\"", "14:31:30 18721 INFO  Started pg_autoctl postgres service with pid 18725", "14:31:30 18721 INFO  Started pg_autoctl monitor-init service with pid 18726", "14:31:30 18725 INFO   /usr/bin/pg_autoctl do service postgres --pgdata monitor -v", "14:31:30 18726 WARN  Failed to resolve DNS name \"postgres-haproxy01\": Name or service not known", "14:31:30 18726 WARN  Failed to find IP address for hostname \"postgres-haproxy01\", see above for details", "14:31:30 18726 WARN  Failed to grant connection to local network.", "14:31:30 18721 ERROR pg_autoctl service monitor-init exited with exit status 12", "14:31:30 18721 INFO  Restarting service monitor-init", "14:31:30 18729 WARN  Failed to resolve DNS name \"postgres-haproxy01\": Name or service not known", "14:31:30 18729 WARN  Failed to find IP address for hostname \"postgres-haproxy01\", see above for details", "14:31:30 18729 WARN  Failed to grant connection to local network.", "14:31:31 18721 ERROR pg_autoctl service monitor-init exited with exit status 12", "14:31:31 18721 INFO  Restarting service monitor-init", "14:31:31 18730 WARN  Failed to resolve DNS name \"postgres-haproxy01\": Name or service not known", "14:31:31 18730 WARN  Failed to find IP address for hostname \"postgres-haproxy01\", see above for details", "14:31:31 18730 WARN  Failed to grant connection to local network.", "14:31:31 18721 ERROR pg_autoctl service monitor-init exited with exit status 12", "14:31:31 18721 INFO  Restarting service monitor-init", "14:31:36 18731 WARN  Failed to resolve DNS name \"postgres-haproxy01\": Name or service not known", "14:31:36 18731 WARN  Failed to find IP address for hostname \"postgres-haproxy01\", see above for details", "14:31:36 18731 WARN  Failed to grant connection to local network.", "14:31:36 18721 ERROR pg_autoctl service monitor-init exited with exit status 12", "14:31:36 18721 INFO  Restarting service monitor-init", "14:31:36 18862 WARN  Failed to resolve DNS name \"postgres-haproxy01\": Name or service not known", "14:31:36 18862 WARN  Failed to find IP address for hostname \"postgres-haproxy01\", see above for details", "14:31:36 18862 WARN  Failed to grant connection to local network.", "14:31:36 18721 ERROR pg_autoctl service monitor-init exited with exit status 12", "14:31:36 18721 INFO  Restarting service monitor-init", "14:31:36 18863 WARN  Failed to resolve DNS name \"postgres-haproxy01\": Name or service not known", "14:31:36 18863 WARN  Failed to find IP address for hostname \"postgres-haproxy01\", see above for details", "14:31:36 18863 WARN  Failed to grant connection to local network.", "14:31:36 18721 ERROR pg_autoctl service monitor-init exited with exit status 12", "14:31:36 18721 FATAL pg_autoctl service monitor-init has already been restarted 5 times in the last 6 seconds, stopping now", "14:31:36 18725 INFO  Postgres controller service received signal SIGTERM, terminating", "14:31:36 18721 FATAL Something went wrong in sub-process supervision, stopping now. See above for details.", "14:31:36 18721 INFO  Stop pg_autoctl"], "stdout": "", "stdout_lines": []}
2022-03-21 14:31:41,303 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:31:41,324 p=94780 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:31:41,339 p=94780 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:31:41,352 p=94780 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:31:41,362 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of monitor instance] *******************************************************
2022-03-21 14:31:41,399 p=94780 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:31:41,400 p=94780 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:31:41,412 p=94780 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:31:41,422 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : Copy systemd service file of monitor instance] *********************************************************
2022-03-21 14:31:41,458 p=94780 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:31:41,459 p=94780 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:31:41,470 p=94780 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:31:41,482 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start systemd service of monitor instance] **************************************************
2022-03-21 14:31:41,502 p=94780 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:31:41,520 p=94780 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:31:41,533 p=94780 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:31:41,542 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:31:41,578 p=94780 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:31:41,579 p=94780 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:31:41,591 p=94780 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:31:41,600 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 14:31:41,621 p=94780 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:31:41,639 p=94780 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:31:41,652 p=94780 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:31:41,661 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the current state of monitor instance] **********************************************************
2022-03-21 14:31:41,682 p=94780 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:31:41,697 p=94780 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:31:41,710 p=94780 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:31:41,720 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:31:41,757 p=94780 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:31:41,758 p=94780 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:31:41,770 p=94780 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:31:41,780 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the current state of monitor] *******************************************************************
2022-03-21 14:31:41,802 p=94780 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:31:41,818 p=94780 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:31:41,832 p=94780 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:31:41,843 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:31:41,864 p=94780 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:31:41,912 p=94780 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:31:41,927 p=94780 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:31:41,938 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : Create primiary instance. It will automatically be set by the monitor as the primary node with read-write capability (PGDATA = /var/lib/pgpsql/ha)] ***
2022-03-21 14:31:41,973 p=94780 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:31:41,984 p=94780 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:31:48,686 p=94780 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:31:48,694 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:31:48,732 p=94780 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "65037811788.21513",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ;  pg_autoctl create postgres --pgdata \"ha\" --auth trust --ssl-self-signed --username ha-admin --dbname \"appdb\" --hostname \"co7-node01\" --pgctl /bin/pg_ctl --monitor 'postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require' )",
        "delta": "0:00:01.270685",
        "end": "2022-03-21 14:31:43.819610",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/65037811788.21513",
        "start": "2022-03-21 14:31:42.548925",
        "started": 1,
        "stderr": "14:31:42 21523 INFO  Using default --ssl-mode \"require\"\n14:31:42 21523 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n14:31:42 21523 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n14:31:42 21523 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n14:31:42 21523 INFO  Started pg_autoctl postgres service with pid 21528\n14:31:42 21523 INFO  Started pg_autoctl node-init service with pid 21529\n14:31:42 21528 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v\n14:31:42 21529 FATAL The state file \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\" exists and there's no init in progress\n14:31:42 21529 INFO  HINT: use `pg_autoctl run` to start the service.\n14:31:42 21523 WARN  pg_autoctl service node-init exited with exit status 0\n14:31:42 21528 INFO  Postgres controller service received signal SIGTERM, terminating\n14:31:42 21523 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "14:31:42 21523 INFO  Using default --ssl-mode \"require\"",
            "14:31:42 21523 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "14:31:42 21523 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "14:31:42 21523 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "14:31:42 21523 INFO  Started pg_autoctl postgres service with pid 21528",
            "14:31:42 21523 INFO  Started pg_autoctl node-init service with pid 21529",
            "14:31:42 21528 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v",
            "14:31:42 21529 FATAL The state file \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\" exists and there's no init in progress",
            "14:31:42 21529 INFO  HINT: use `pg_autoctl run` to start the service.",
            "14:31:42 21523 WARN  pg_autoctl service node-init exited with exit status 0",
            "14:31:42 21528 INFO  Postgres controller service received signal SIGTERM, terminating",
            "14:31:42 21523 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 14:31:48,733 p=94780 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:31:48,741 p=94780 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:31:48,752 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of pirmary instance] *******************************************************
2022-03-21 14:31:48,786 p=94780 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:31:48,797 p=94780 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:31:55,257 p=94780 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:31:55,267 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:31:55,310 p=94780 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "230542595291.21902",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl -q show systemd --pgdata ~postgres/ha > pgautofailover.service )",
        "delta": "0:00:00.031440",
        "end": "2022-03-21 14:31:49.407930",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/230542595291.21902",
        "start": "2022-03-21 14:31:49.376490",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 14:31:55,311 p=94780 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:31:55,320 p=94780 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:31:55,333 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : Copy primary systemd service file of primary instance] *************************************************
2022-03-21 14:31:55,367 p=94780 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:31:55,378 p=94780 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:31:55,813 p=94780 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:31:55,824 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start primary systemd service of primary instance] ******************************************
2022-03-21 14:31:55,858 p=94780 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:31:55,872 p=94780 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:31:57,036 p=94780 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:31:57,047 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 14:31:57,083 p=94780 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:31:57,096 p=94780 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:31:57,816 p=94780 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:31:57,826 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the state of primary instance] ******************************************************************
2022-03-21 14:31:57,862 p=94780 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:31:57,872 p=94780 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:32:00,779 p=94780 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": true, "cmd": "( source ~/.bash_profile ; pg_autoctl show state )", "delta": "0:00:02.404000", "end": "2022-03-21 14:32:00.757188", "msg": "non-zero return code", "rc": 6, "start": "2022-03-21 14:31:58.353188", "stderr": "14:31:58 22734 WARN  Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\", retrying until the server is ready\n14:32:00 22734 ERROR Connection to database failed: could not connect to server: Connection refused\n14:32:00 22734 ERROR \tIs the server running on host \"co7-master\" (192.168.0.81) and accepting\n14:32:00 22734 ERROR \tTCP/IP connections on port 5432?\n14:32:00 22734 ERROR Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\" after 23 attempts in 2 seconds, pg_autoctl stops retrying now\n14:32:00 22734 ERROR Failed to retrieve current state from the monitor", "stderr_lines": ["14:31:58 22734 WARN  Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\", retrying until the server is ready", "14:32:00 22734 ERROR Connection to database failed: could not connect to server: Connection refused", "14:32:00 22734 ERROR \tIs the server running on host \"co7-master\" (192.168.0.81) and accepting", "14:32:00 22734 ERROR \tTCP/IP connections on port 5432?", "14:32:00 22734 ERROR Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\" after 23 attempts in 2 seconds, pg_autoctl stops retrying now", "14:32:00 22734 ERROR Failed to retrieve current state from the monitor"], "stdout": "", "stdout_lines": []}
2022-03-21 14:32:00,788 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:32:00,809 p=94780 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:32:00,820 p=94780 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:32:00,830 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : Create secondary instance. It will automatically be set by the monitor as the secondary  node with read-write capability (PGDATA = /var/lib/pgpsql/ha)] ***
2022-03-21 14:32:07,172 p=94780 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:32:07,172 p=94780 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:32:07,182 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:32:07,209 p=94780 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "ansible_job_id": "175318724510.20637",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ;  pg_autoctl create postgres --pgdata \"ha\" --auth trust --ssl-self-signed --username ha-admin --dbname \"appdb\" --hostname \"co7-node02\" --pgctl /bin/pg_ctl --monitor 'postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require' )",
        "delta": "0:00:00.240777",
        "end": "2022-03-21 14:32:01.637722",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/175318724510.20637",
        "start": "2022-03-21 14:32:01.396945",
        "started": 1,
        "stderr": "14:32:01 20647 INFO  Using default --ssl-mode \"require\"\n14:32:01 20647 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n14:32:01 20647 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n14:32:01 20647 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n14:32:01 20647 INFO  Started pg_autoctl postgres service with pid 20652\n14:32:01 20652 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v\n14:32:01 20647 INFO  Started pg_autoctl node-init service with pid 20653\n14:32:01 20653 FATAL The state file \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\" exists and there's no init in progress\n14:32:01 20653 INFO  HINT: use `pg_autoctl run` to start the service.\n14:32:01 20647 WARN  pg_autoctl service node-init exited with exit status 0\n14:32:01 20652 INFO  Postgres controller service received signal SIGTERM, terminating\n14:32:01 20647 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "14:32:01 20647 INFO  Using default --ssl-mode \"require\"",
            "14:32:01 20647 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "14:32:01 20647 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "14:32:01 20647 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "14:32:01 20647 INFO  Started pg_autoctl postgres service with pid 20652",
            "14:32:01 20652 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v",
            "14:32:01 20647 INFO  Started pg_autoctl node-init service with pid 20653",
            "14:32:01 20653 FATAL The state file \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\" exists and there's no init in progress",
            "14:32:01 20653 INFO  HINT: use `pg_autoctl run` to start the service.",
            "14:32:01 20647 WARN  pg_autoctl service node-init exited with exit status 0",
            "14:32:01 20652 INFO  Postgres controller service received signal SIGTERM, terminating",
            "14:32:01 20647 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 14:32:07,224 p=94780 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "ansible_job_id": "822724583294.20045",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ;  pg_autoctl create postgres --pgdata \"ha\" --auth trust --ssl-self-signed --username ha-admin --dbname \"appdb\" --hostname \"co7-node03\" --pgctl /bin/pg_ctl --monitor 'postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require' )",
        "delta": "0:00:00.240686",
        "end": "2022-03-21 14:32:01.641092",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/822724583294.20045",
        "start": "2022-03-21 14:32:01.400406",
        "started": 1,
        "stderr": "14:32:01 20055 INFO  Using default --ssl-mode \"require\"\n14:32:01 20055 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n14:32:01 20055 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n14:32:01 20055 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n14:32:01 20055 INFO  Started pg_autoctl postgres service with pid 20060\n14:32:01 20055 INFO  Started pg_autoctl node-init service with pid 20061\n14:32:01 20060 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v\n14:32:01 20061 FATAL The state file \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\" exists and there's no init in progress\n14:32:01 20061 INFO  HINT: use `pg_autoctl run` to start the service.\n14:32:01 20055 WARN  pg_autoctl service node-init exited with exit status 0\n14:32:01 20060 INFO  Postgres controller service received signal SIGTERM, terminating\n14:32:01 20055 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "14:32:01 20055 INFO  Using default --ssl-mode \"require\"",
            "14:32:01 20055 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "14:32:01 20055 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "14:32:01 20055 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "14:32:01 20055 INFO  Started pg_autoctl postgres service with pid 20060",
            "14:32:01 20055 INFO  Started pg_autoctl node-init service with pid 20061",
            "14:32:01 20060 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v",
            "14:32:01 20061 FATAL The state file \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\" exists and there's no init in progress",
            "14:32:01 20061 INFO  HINT: use `pg_autoctl run` to start the service.",
            "14:32:01 20055 WARN  pg_autoctl service node-init exited with exit status 0",
            "14:32:01 20060 INFO  Postgres controller service received signal SIGTERM, terminating",
            "14:32:01 20055 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 14:32:07,234 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of secondary instance] *****************************************************
2022-03-21 14:32:13,528 p=94780 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:32:13,528 p=94780 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:32:13,536 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:32:13,561 p=94780 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "ansible_job_id": "617665533103.21018",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl -q show systemd --pgdata ~postgres/ha > pgautofailover.service )",
        "delta": "0:00:00.032128",
        "end": "2022-03-21 14:32:07.869291",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/617665533103.21018",
        "start": "2022-03-21 14:32:07.837163",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 14:32:13,576 p=94780 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "ansible_job_id": "636601926022.20426",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl -q show systemd --pgdata ~postgres/ha > pgautofailover.service )",
        "delta": "0:00:00.032086",
        "end": "2022-03-21 14:32:07.869228",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/636601926022.20426",
        "start": "2022-03-21 14:32:07.837142",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 14:32:13,586 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : Copy secondary systemd service file of secondary instance] *********************************************
2022-03-21 14:32:14,023 p=94780 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:32:14,049 p=94780 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:32:14,060 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start secondary systemd service of secondary instance] **************************************
2022-03-21 14:32:14,792 p=94780 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:32:14,794 p=94780 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:32:14,804 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 14:32:15,465 p=94780 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:32:15,466 p=94780 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:32:15,474 p=94780 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the state of secondary instance] ****************************************************************
2022-03-21 14:32:18,363 p=94780 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "cmd": "( source ~/.bash_profile ; pg_autoctl show state )", "delta": "0:00:02.354955", "end": "2022-03-21 14:32:18.320207", "msg": "non-zero return code", "rc": 6, "start": "2022-03-21 14:32:15.965252", "stderr": "14:32:16 21850 WARN  Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\", retrying until the server is ready\n14:32:18 21850 ERROR Connection to database failed: could not connect to server: Connection refused\n14:32:18 21850 ERROR \tIs the server running on host \"co7-master\" (192.168.0.81) and accepting\n14:32:18 21850 ERROR \tTCP/IP connections on port 5432?\n14:32:18 21850 ERROR Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\" after 19 attempts in 2 seconds, pg_autoctl stops retrying now\n14:32:18 21850 ERROR Failed to retrieve current state from the monitor", "stderr_lines": ["14:32:16 21850 WARN  Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\", retrying until the server is ready", "14:32:18 21850 ERROR Connection to database failed: could not connect to server: Connection refused", "14:32:18 21850 ERROR \tIs the server running on host \"co7-master\" (192.168.0.81) and accepting", "14:32:18 21850 ERROR \tTCP/IP connections on port 5432?", "14:32:18 21850 ERROR Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\" after 19 attempts in 2 seconds, pg_autoctl stops retrying now", "14:32:18 21850 ERROR Failed to retrieve current state from the monitor"], "stdout": "", "stdout_lines": []}
2022-03-21 14:32:18,364 p=94780 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "cmd": "( source ~/.bash_profile ; pg_autoctl show state )", "delta": "0:00:02.356156", "end": "2022-03-21 14:32:18.322091", "msg": "non-zero return code", "rc": 6, "start": "2022-03-21 14:32:15.965935", "stderr": "14:32:16 21258 WARN  Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\", retrying until the server is ready\n14:32:18 21258 ERROR Connection to database failed: could not connect to server: Connection refused\n14:32:18 21258 ERROR \tIs the server running on host \"co7-master\" (192.168.0.81) and accepting\n14:32:18 21258 ERROR \tTCP/IP connections on port 5432?\n14:32:18 21258 ERROR Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\" after 19 attempts in 2 seconds, pg_autoctl stops retrying now\n14:32:18 21258 ERROR Failed to retrieve current state from the monitor", "stderr_lines": ["14:32:16 21258 WARN  Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\", retrying until the server is ready", "14:32:18 21258 ERROR Connection to database failed: could not connect to server: Connection refused", "14:32:18 21258 ERROR \tIs the server running on host \"co7-master\" (192.168.0.81) and accepting", "14:32:18 21258 ERROR \tTCP/IP connections on port 5432?", "14:32:18 21258 ERROR Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\" after 19 attempts in 2 seconds, pg_autoctl stops retrying now", "14:32:18 21258 ERROR Failed to retrieve current state from the monitor"], "stdout": "", "stdout_lines": []}
2022-03-21 14:32:18,366 p=94780 u=moonja n=ansible | PLAY RECAP *************************************************************************************************************************
2022-03-21 14:32:18,366 p=94780 u=moonja n=ansible | co7-master                 : ok=16   changed=8    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2022-03-21 14:32:18,366 p=94780 u=moonja n=ansible | co7-node01                 : ok=19   changed=11   unreachable=0    failed=1    skipped=16   rescued=0    ignored=0   
2022-03-21 14:32:18,366 p=94780 u=moonja n=ansible | co7-node02                 : ok=19   changed=11   unreachable=0    failed=1    skipped=25   rescued=0    ignored=0   
2022-03-21 14:32:18,366 p=94780 u=moonja n=ansible | co7-node03                 : ok=19   changed=11   unreachable=0    failed=1    skipped=25   rescued=0    ignored=0   
2022-03-21 14:39:47,965 p=98793 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from 
ansible-core in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 14:39:48,342 p=98793 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 
2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 14:39:48,348 p=98793 u=moonja n=ansible | [WARNING]: While constructing a mapping from /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/install.yml, line 308,
column 3, found a duplicate dict key (when). Using last defined value only.

2022-03-21 14:39:48,413 p=98793 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/upgrade.yml is empty and had no tasks to include

2022-03-21 14:39:48,430 p=98793 u=moonja n=ansible | PLAY [all] *************************************************************************************************************************
2022-03-21 14:39:48,461 p=98793 u=moonja n=ansible | TASK [Gathering Facts] *************************************************************************************************************
2022-03-21 14:39:50,817 p=98793 u=moonja n=ansible | ok: [co7-master]
2022-03-21 14:39:50,824 p=98793 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 14:39:50,839 p=98793 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 14:39:50,840 p=98793 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 14:39:50,857 p=98793 u=moonja n=ansible | TASK [pgfailover-postgres : Disable port from public zone] *************************************************************************
2022-03-21 14:39:51,929 p=98793 u=moonja n=ansible | changed: [co7-master] => (item=5432)
2022-03-21 14:39:51,930 p=98793 u=moonja n=ansible | changed: [co7-node03] => (item=5432)
2022-03-21 14:39:51,947 p=98793 u=moonja n=ansible | changed: [co7-node02] => (item=5432)
2022-03-21 14:39:51,960 p=98793 u=moonja n=ansible | changed: [co7-node01] => (item=5432)
2022-03-21 14:39:51,972 p=98793 u=moonja n=ansible | TASK [pgfailover-postgres : Disable IP Addresses in whitelist] *********************************************************************
2022-03-21 14:39:52,794 p=98793 u=moonja n=ansible | changed: [co7-node03] => (item=co7-master)
2022-03-21 14:39:52,796 p=98793 u=moonja n=ansible | changed: [co7-master] => (item=co7-master)
2022-03-21 14:39:52,803 p=98793 u=moonja n=ansible | changed: [co7-node01] => (item=co7-master)
2022-03-21 14:39:52,814 p=98793 u=moonja n=ansible | changed: [co7-node02] => (item=co7-master)
2022-03-21 14:39:53,402 p=98793 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node01)
2022-03-21 14:39:53,414 p=98793 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node01)
2022-03-21 14:39:53,445 p=98793 u=moonja n=ansible | changed: [co7-master] => (item=co7-node01)
2022-03-21 14:39:53,482 p=98793 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node01)
2022-03-21 14:39:54,022 p=98793 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node02)
2022-03-21 14:39:54,047 p=98793 u=moonja n=ansible | changed: [co7-master] => (item=co7-node02)
2022-03-21 14:39:54,066 p=98793 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node02)
2022-03-21 14:39:54,080 p=98793 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node02)
2022-03-21 14:39:54,633 p=98793 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node03)
2022-03-21 14:39:54,659 p=98793 u=moonja n=ansible | changed: [co7-master] => (item=co7-node03)
2022-03-21 14:39:54,731 p=98793 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node03)
2022-03-21 14:39:54,732 p=98793 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node03)
2022-03-21 14:39:54,744 p=98793 u=moonja n=ansible | TASK [pgfailover-postgres : Bounce firewalld] **************************************************************************************
2022-03-21 14:39:56,847 p=98793 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:39:56,849 p=98793 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:39:56,859 p=98793 u=moonja n=ansible | changed: [co7-master]
2022-03-21 14:39:56,860 p=98793 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:39:56,870 p=98793 u=moonja n=ansible | TASK [pgfailover-postgres : Stop and disable firewalld.] ***************************************************************************
2022-03-21 14:39:58,521 p=98793 u=moonja n=ansible | changed: [co7-master]
2022-03-21 14:39:58,578 p=98793 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:39:58,592 p=98793 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:39:58,599 p=98793 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:39:58,609 p=98793 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 14:39:58,642 p=98793 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:39:58,656 p=98793 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:39:58,668 p=98793 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:39:59,443 p=98793 u=moonja n=ansible | [WARNING]: Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues
when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually

2022-03-21 14:39:59,443 p=98793 u=moonja n=ansible | changed: [co7-master]
2022-03-21 14:39:59,452 p=98793 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 14:39:59,485 p=98793 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:39:59,500 p=98793 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:39:59,512 p=98793 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:39:59,921 p=98793 u=moonja n=ansible | changed: [co7-master]
2022-03-21 14:39:59,931 p=98793 u=moonja n=ansible | TASK [pgfailover-postgres : Getting process IDs of the pg_autoctl process] *********************************************************
2022-03-21 14:40:00,634 p=98793 u=moonja n=ansible | ok: [co7-master]
2022-03-21 14:40:00,652 p=98793 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 14:40:00,665 p=98793 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 14:40:00,680 p=98793 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 14:40:00,689 p=98793 u=moonja n=ansible | TASK [pgfailover-postgres : Stop pgautofailover service of systemd] ****************************************************************
2022-03-21 14:40:00,737 p=98793 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 14:40:02,819 p=98793 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:40:02,820 p=98793 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:40:03,262 p=98793 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:40:03,273 p=98793 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] ************************************************************************
2022-03-21 14:40:03,293 p=98793 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 14:40:03,309 p=98793 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:40:03,987 p=98793 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:40:03,987 p=98793 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:40:03,996 p=98793 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start secondary systemd service of secondary instance] **************************************
2022-03-21 14:40:04,016 p=98793 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 14:40:04,032 p=98793 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:40:04,794 p=98793 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:40:04,794 p=98793 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:40:04,803 p=98793 u=moonja n=ansible | TASK [pgfailover-postgres : Delete secondary systemd service file of secondary instance] *******************************************
2022-03-21 14:40:04,825 p=98793 u=moonja n=ansible | skipping: [co7-master] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 14:40:04,827 p=98793 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 14:40:04,831 p=98793 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 14:40:04,837 p=98793 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.config) 
2022-03-21 14:40:04,837 p=98793 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 14:40:04,842 p=98793 u=moonja n=ansible | skipping: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 14:40:04,843 p=98793 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 14:40:04,846 p=98793 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 14:40:04,850 p=98793 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.config) 
2022-03-21 14:40:04,850 p=98793 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 14:40:05,574 p=98793 u=moonja n=ansible | changed: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 14:40:05,574 p=98793 u=moonja n=ansible | changed: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 14:40:06,013 p=98793 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 14:40:06,014 p=98793 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 14:40:06,501 p=98793 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 14:40:06,502 p=98793 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 14:40:07,001 p=98793 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.config)
2022-03-21 14:40:07,002 p=98793 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.config)
2022-03-21 14:40:07,428 p=98793 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.ansible)
2022-03-21 14:40:07,429 p=98793 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.ansible)
2022-03-21 14:40:07,440 p=98793 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] ************************************************************************
2022-03-21 14:40:07,460 p=98793 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 14:40:07,490 p=98793 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:40:07,501 p=98793 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:40:07,917 p=98793 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:40:07,928 p=98793 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start primary systemd service of primary instance] ******************************************
2022-03-21 14:40:07,949 p=98793 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 14:40:07,983 p=98793 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:40:07,995 p=98793 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:40:08,728 p=98793 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:40:08,738 p=98793 u=moonja n=ansible | TASK [pgfailover-postgres : Delete primary systemd service file of secondary instance] *********************************************
2022-03-21 14:40:08,761 p=98793 u=moonja n=ansible | skipping: [co7-master] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 14:40:08,762 p=98793 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 14:40:08,770 p=98793 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 14:40:08,771 p=98793 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.config) 
2022-03-21 14:40:08,775 p=98793 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 14:40:08,794 p=98793 u=moonja n=ansible | skipping: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 14:40:08,796 p=98793 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 14:40:08,799 p=98793 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 14:40:08,802 p=98793 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.config) 
2022-03-21 14:40:08,802 p=98793 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 14:40:08,810 p=98793 u=moonja n=ansible | skipping: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 14:40:08,812 p=98793 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 14:40:08,815 p=98793 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 14:40:08,817 p=98793 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.config) 
2022-03-21 14:40:08,818 p=98793 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 14:40:09,284 p=98793 u=moonja n=ansible | changed: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 14:40:09,723 p=98793 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 14:40:10,242 p=98793 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 14:40:10,842 p=98793 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.config)
2022-03-21 14:40:11,349 p=98793 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.ansible)
2022-03-21 14:40:11,360 p=98793 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] ************************************************************************
2022-03-21 14:40:11,394 p=98793 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:40:11,410 p=98793 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:40:11,422 p=98793 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:40:11,895 p=98793 u=moonja n=ansible | changed: [co7-master]
2022-03-21 14:40:11,904 p=98793 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start systemd service of monitor instance] **************************************************
2022-03-21 14:40:11,938 p=98793 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:40:11,954 p=98793 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:40:11,966 p=98793 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:40:12,511 p=98793 u=moonja n=ansible | fatal: [co7-master]: FAILED! => {"changed": false, "msg": "Could not find the requested service pgautofailover: host"}
2022-03-21 14:40:12,511 p=98793 u=moonja n=ansible | ...ignoring
2022-03-21 14:40:12,520 p=98793 u=moonja n=ansible | TASK [pgfailover-postgres : Delete primary systemd service file of secondary instance] *********************************************
2022-03-21 14:40:12,558 p=98793 u=moonja n=ansible | skipping: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 14:40:12,559 p=98793 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 14:40:12,563 p=98793 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 14:40:12,568 p=98793 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.config) 
2022-03-21 14:40:12,568 p=98793 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 14:40:12,573 p=98793 u=moonja n=ansible | skipping: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 14:40:12,575 p=98793 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 14:40:12,581 p=98793 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 14:40:12,581 p=98793 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.config) 
2022-03-21 14:40:12,582 p=98793 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 14:40:12,591 p=98793 u=moonja n=ansible | skipping: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 14:40:12,594 p=98793 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 14:40:12,596 p=98793 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 14:40:12,599 p=98793 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.config) 
2022-03-21 14:40:12,599 p=98793 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 14:40:13,006 p=98793 u=moonja n=ansible | ok: [co7-master] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 14:40:13,450 p=98793 u=moonja n=ansible | ok: [co7-master] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 14:40:13,921 p=98793 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 14:40:14,421 p=98793 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/.config)
2022-03-21 14:40:14,816 p=98793 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/.ansible)
2022-03-21 14:40:14,827 p=98793 u=moonja n=ansible | TASK [pgfailover-postgres : Uninstall VMware Postgres on all hosts as root] ********************************************************
2022-03-21 14:40:46,257 p=98793 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:40:48,542 p=98793 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:40:48,583 p=98793 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:40:49,448 p=98793 u=moonja n=ansible | changed: [co7-master]
2022-03-21 14:40:49,457 p=98793 u=moonja n=ansible | TASK [pgfailover-postgres : Copy the vmwawre-postgres rpm file to all hosts in cluster] ********************************************
2022-03-21 14:40:49,906 p=98793 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:40:49,928 p=98793 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:40:49,943 p=98793 u=moonja n=ansible | changed: [co7-master]
2022-03-21 14:40:49,955 p=98793 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:40:50,001 p=98793 u=moonja n=ansible | PLAY RECAP *************************************************************************************************************************
2022-03-21 14:40:50,002 p=98793 u=moonja n=ansible | co7-master                 : ok=13   changed=10   unreachable=0    failed=0    skipped=7    rescued=0    ignored=1   
2022-03-21 14:40:50,002 p=98793 u=moonja n=ansible | co7-node01                 : ok=12   changed=10   unreachable=0    failed=0    skipped=8    rescued=0    ignored=0   
2022-03-21 14:40:50,002 p=98793 u=moonja n=ansible | co7-node02                 : ok=12   changed=10   unreachable=0    failed=0    skipped=8    rescued=0    ignored=0   
2022-03-21 14:40:50,002 p=98793 u=moonja n=ansible | co7-node03                 : ok=12   changed=10   unreachable=0    failed=0    skipped=8    rescued=0    ignored=0   
2022-03-21 14:42:38,824 p=462 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from 
ansible-core in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 14:42:39,075 p=462 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 
2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 14:42:39,080 p=462 u=moonja n=ansible | [WARNING]: While constructing a mapping from /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/install.yml, line 308,
column 3, found a duplicate dict key (when). Using last defined value only.

2022-03-21 14:42:39,130 p=462 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/upgrade.yml is empty and had no tasks to include

2022-03-21 14:42:39,145 p=462 u=moonja n=ansible | PLAY [all] *************************************************************************************************************************
2022-03-21 14:42:39,175 p=462 u=moonja n=ansible | TASK [Gathering Facts] *************************************************************************************************************
2022-03-21 14:42:41,468 p=462 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 14:42:41,512 p=462 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 14:42:41,523 p=462 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 14:42:41,614 p=462 u=moonja n=ansible | ok: [co7-master]
2022-03-21 14:42:41,632 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : Install rpm packages of dependenies to need installing packages regarding kubernates] ******************
2022-03-21 14:42:42,648 p=462 u=moonja n=ansible | ok: [co7-node01] => (item=firewalld)
2022-03-21 14:42:42,666 p=462 u=moonja n=ansible | ok: [co7-node03] => (item=firewalld)
2022-03-21 14:42:42,688 p=462 u=moonja n=ansible | ok: [co7-node02] => (item=firewalld)
2022-03-21 14:42:42,696 p=462 u=moonja n=ansible | ok: [co7-master] => (item=firewalld)
2022-03-21 14:42:43,347 p=462 u=moonja n=ansible | ok: [co7-node01] => (item=python3)
2022-03-21 14:42:43,394 p=462 u=moonja n=ansible | ok: [co7-node03] => (item=python3)
2022-03-21 14:42:43,459 p=462 u=moonja n=ansible | ok: [co7-master] => (item=python3)
2022-03-21 14:42:43,466 p=462 u=moonja n=ansible | ok: [co7-node02] => (item=python3)
2022-03-21 14:42:44,270 p=462 u=moonja n=ansible | ok: [co7-node01] => (item=python3-libselinux)
2022-03-21 14:42:44,360 p=462 u=moonja n=ansible | ok: [co7-master] => (item=python3-libselinux)
2022-03-21 14:42:44,363 p=462 u=moonja n=ansible | ok: [co7-node03] => (item=python3-libselinux)
2022-03-21 14:42:44,382 p=462 u=moonja n=ansible | ok: [co7-node02] => (item=python3-libselinux)
2022-03-21 14:42:44,395 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : Start and enable firewalld.] ***************************************************************************
2022-03-21 14:42:45,644 p=462 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:42:45,647 p=462 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:42:45,726 p=462 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:42:45,743 p=462 u=moonja n=ansible | changed: [co7-master]
2022-03-21 14:42:45,753 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : Open Firewall] *****************************************************************************************
2022-03-21 14:42:46,804 p=462 u=moonja n=ansible | changed: [co7-master] => (item=5432)
2022-03-21 14:42:46,806 p=462 u=moonja n=ansible | changed: [co7-node03] => (item=5432)
2022-03-21 14:42:46,812 p=462 u=moonja n=ansible | changed: [co7-node02] => (item=5432)
2022-03-21 14:42:46,814 p=462 u=moonja n=ansible | changed: [co7-node01] => (item=5432)
2022-03-21 14:42:46,826 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : Whitelist of Ip addresses] *****************************************************************************
2022-03-21 14:42:47,634 p=462 u=moonja n=ansible | changed: [co7-node01] => (item=co7-master)
2022-03-21 14:42:47,635 p=462 u=moonja n=ansible | changed: [co7-node02] => (item=co7-master)
2022-03-21 14:42:47,733 p=462 u=moonja n=ansible | changed: [co7-node03] => (item=co7-master)
2022-03-21 14:42:47,734 p=462 u=moonja n=ansible | changed: [co7-master] => (item=co7-master)
2022-03-21 14:42:48,388 p=462 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node01)
2022-03-21 14:42:48,420 p=462 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node01)
2022-03-21 14:42:48,502 p=462 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node01)
2022-03-21 14:42:48,512 p=462 u=moonja n=ansible | changed: [co7-master] => (item=co7-node01)
2022-03-21 14:42:49,030 p=462 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node02)
2022-03-21 14:42:49,063 p=462 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node02)
2022-03-21 14:42:49,114 p=462 u=moonja n=ansible | changed: [co7-master] => (item=co7-node02)
2022-03-21 14:42:49,124 p=462 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node02)
2022-03-21 14:42:49,681 p=462 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node03)
2022-03-21 14:42:49,687 p=462 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node03)
2022-03-21 14:42:49,733 p=462 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node03)
2022-03-21 14:42:49,750 p=462 u=moonja n=ansible | changed: [co7-master] => (item=co7-node03)
2022-03-21 14:42:49,760 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : Bounce firewalld] **************************************************************************************
2022-03-21 14:42:51,492 p=462 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:42:51,569 p=462 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:42:51,582 p=462 u=moonja n=ansible | changed: [co7-master]
2022-03-21 14:42:51,583 p=462 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:42:51,629 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : Copy the vmwawre-postgres rpm file to all hosts in cluster] ********************************************
2022-03-21 14:42:53,348 p=462 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:42:53,354 p=462 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:42:53,372 p=462 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:42:53,379 p=462 u=moonja n=ansible | changed: [co7-master]
2022-03-21 14:42:53,390 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : Install dependency rpm package for pgautofailover] *****************************************************
2022-03-21 14:43:00,182 p=462 u=moonja n=ansible | ok: [co7-node03] => (item=python2-psutil)
2022-03-21 14:43:00,191 p=462 u=moonja n=ansible | ok: [co7-node01] => (item=python2-psutil)
2022-03-21 14:43:00,286 p=462 u=moonja n=ansible | ok: [co7-master] => (item=python2-psutil)
2022-03-21 14:43:00,294 p=462 u=moonja n=ansible | ok: [co7-node02] => (item=python2-psutil)
2022-03-21 14:43:06,763 p=462 u=moonja n=ansible | ok: [co7-node03] => (item=python3)
2022-03-21 14:43:06,775 p=462 u=moonja n=ansible | ok: [co7-node01] => (item=python3)
2022-03-21 14:43:06,804 p=462 u=moonja n=ansible | ok: [co7-master] => (item=python3)
2022-03-21 14:43:06,815 p=462 u=moonja n=ansible | ok: [co7-node02] => (item=python3)
2022-03-21 14:43:06,828 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : Install VMware Postgres on all hosts as root] **********************************************************
2022-03-21 14:43:34,709 p=462 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:43:35,102 p=462 u=moonja n=ansible | changed: [co7-master]
2022-03-21 14:43:36,074 p=462 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:43:36,169 p=462 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:43:36,178 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 14:43:36,228 p=462 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:43:36,229 p=462 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:43:36,240 p=462 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:43:36,920 p=462 u=moonja n=ansible | [WARNING]: Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues
when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually

2022-03-21 14:43:36,920 p=462 u=moonja n=ansible | changed: [co7-master]
2022-03-21 14:43:36,932 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:43:36,968 p=462 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "pg_autoctl version 1.4.2\npg_autoctl extension version 1.4\ncompiled with PostgreSQL 11.12 (VMware Postgres 11.12.0) on x86_64-redhat-linux-gnu, compiled by gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-44), 64-bit\ncompatible with Postgres 10, 11, 12, and 13"
}
2022-03-21 14:43:36,985 p=462 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:43:36,986 p=462 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:43:36,998 p=462 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:43:37,008 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 14:43:37,042 p=462 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:43:37,056 p=462 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:43:37,069 p=462 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:43:37,539 p=462 u=moonja n=ansible | changed: [co7-master]
2022-03-21 14:43:37,549 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:43:37,588 p=462 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "pg_ctl (PostgreSQL) 11.12 (VMware Postgres 11.12.0)"
}
2022-03-21 14:43:37,604 p=462 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:43:37,605 p=462 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:43:37,617 p=462 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:43:37,627 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : Getting process IDs of the pg_autoctl process] *********************************************************
2022-03-21 14:43:38,336 p=462 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 14:43:38,341 p=462 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 14:43:38,349 p=462 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 14:43:38,350 p=462 u=moonja n=ansible | ok: [co7-master]
2022-03-21 14:43:38,360 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : Printing the process IDs obtained] *********************************************************************
2022-03-21 14:43:38,408 p=462 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 14:43:38,414 p=462 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 14:43:38,428 p=462 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 14:43:38,444 p=462 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 14:43:38,454 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : Stop pgautofailover service of systemd] ****************************************************************
2022-03-21 14:43:38,502 p=462 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 14:43:38,505 p=462 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:43:38,519 p=462 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:43:38,536 p=462 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:43:38,546 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:43:38,581 p=462 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 14:43:38,598 p=462 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 14:43:38,600 p=462 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 14:43:38,612 p=462 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 14:43:38,622 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : Create the monitor node] *******************************************************************************
2022-03-21 14:43:38,671 p=462 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:43:38,672 p=462 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:43:38,682 p=462 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:44:42,602 p=462 u=moonja n=ansible | fatal: [co7-master]: FAILED! => {"ansible_job_id": "609022748809.26934", "changed": true, "cmd": "( cd /var/lib/pgsql ; pg_autoctl create monitor --auth trust --ssl-self-signed --pgdata monitor )", "delta": "0:01:02.018786", "end": "2022-03-21 14:44:41.284806", "finished": 1, "msg": "non-zero return code", "rc": 12, "results_file": "/var/lib/pgsql/.ansible_async/609022748809.26934", "start": "2022-03-21 14:43:39.266020", "started": 1, "stderr": "14:43:39 26944 INFO  Using default --ssl-mode \"require\"\n14:43:39 26944 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n14:43:39 26944 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n14:43:39 26944 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n14:43:39 26944 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/monitor/server.crt -keyout /var/lib/pgsql/monitor/server.key -subj \"/CN=co7-master\"\n14:43:39 26944 INFO  Started pg_autoctl postgres service with pid 26948\n14:43:39 26944 INFO  Started pg_autoctl monitor-init service with pid 26949\n14:43:39 26948 INFO   /usr/bin/pg_autoctl do service postgres --pgdata monitor -v\n14:43:39 26949 INFO  Granting connection privileges on 192.168.0.0/24\n14:43:39 26953 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\n14:43:49 26948 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n14:43:49 26949 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n14:43:49 26948 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n14:43:49 26949 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n14:43:49 26948 ERROR Failed to get Postgres pid, see above for details\n14:43:49 26949 ERROR Failed to get Postgres pid, see above for details\n14:43:49 26948 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":\n14:43:49 26949 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"\n14:43:49 26948 ERROR 2022-03-21 14:43:39.439 KST [26953] FATAL:  database files are incompatible with server\n14:43:49 26949 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details\n14:43:49 26948 ERROR 2022-03-21 14:43:39.439 KST [26953] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 11.12 (VMware Postgres 11.12.0).\n14:43:49 26948 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"\n14:43:49 26944 ERROR pg_autoctl service monitor-init exited with exit status 12\n14:43:49 26944 INFO  Restarting service monitor-init\n14:43:49 27092 INFO  Granting connection privileges on 192.168.0.0/24\n14:43:49 27094 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\n14:43:59 27092 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n14:43:59 26948 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n14:43:59 27092 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n14:43:59 26948 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n14:43:59 27092 ERROR Failed to get Postgres pid, see above for details\n14:43:59 26948 ERROR Failed to get Postgres pid, see above for details\n14:43:59 27092 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"\n14:43:59 26948 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":\n14:43:59 27092 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details\n14:43:59 26948 ERROR 2022-03-21 14:43:49.307 KST [27094] FATAL:  database files are incompatible with server\n14:43:59 26948 ERROR 2022-03-21 14:43:49.307 KST [27094] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 11.12 (VMware Postgres 11.12.0).\n14:43:59 26948 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"\n14:43:59 26944 ERROR pg_autoctl service monitor-init exited with exit status 12\n14:43:59 26944 INFO  Restarting service monitor-init\n14:43:59 27267 INFO  Granting connection privileges on 192.168.0.0/24\n14:43:59 27269 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\n14:44:09 26948 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n14:44:09 26948 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n14:44:09 26948 ERROR Failed to get Postgres pid, see above for details\n14:44:09 26948 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":\n14:44:09 26948 ERROR 2022-03-21 14:43:59.248 KST [27269] FATAL:  database files are incompatible with server\n14:44:09 26948 ERROR 2022-03-21 14:43:59.248 KST [27269] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 11.12 (VMware Postgres 11.12.0).\n14:44:09 26948 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"\n14:44:09 27267 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n14:44:09 27267 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n14:44:09 27267 ERROR Failed to get Postgres pid, see above for details\n14:44:09 27267 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"\n14:44:09 27267 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details\n14:44:09 26944 ERROR pg_autoctl service monitor-init exited with exit status 12\n14:44:09 26944 INFO  Restarting service monitor-init\n14:44:09 27442 INFO  Granting connection privileges on 192.168.0.0/24\n14:44:10 27444 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\n14:44:20 27442 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n14:44:20 27442 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n14:44:20 27442 ERROR Failed to get Postgres pid, see above for details\n14:44:20 27442 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"\n14:44:20 27442 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details\n14:44:20 26948 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n14:44:20 26948 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n14:44:20 26948 ERROR Failed to get Postgres pid, see above for details\n14:44:20 26948 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":\n14:44:20 26948 ERROR 2022-03-21 14:44:10.814 KST [27444] FATAL:  database files are incompatible with server\n14:44:20 26948 ERROR 2022-03-21 14:44:10.814 KST [27444] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 11.12 (VMware Postgres 11.12.0).\n14:44:20 26948 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"\n14:44:20 26944 ERROR pg_autoctl service monitor-init exited with exit status 12\n14:44:20 26944 INFO  Restarting service monitor-init\n14:44:20 27617 INFO  Granting connection privileges on 192.168.0.0/24\n14:44:21 27619 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\n14:44:31 27617 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n14:44:31 27617 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n14:44:31 27617 ERROR Failed to get Postgres pid, see above for details\n14:44:31 27617 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"\n14:44:31 27617 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details\n14:44:31 26948 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n14:44:31 26948 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n14:44:31 26948 ERROR Failed to get Postgres pid, see above for details\n14:44:31 26948 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":\n14:44:31 26948 ERROR 2022-03-21 14:44:21.509 KST [27619] FATAL:  database files are incompatible with server\n14:44:31 26948 ERROR 2022-03-21 14:44:21.509 KST [27619] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 11.12 (VMware Postgres 11.12.0).\n14:44:31 26948 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"\n14:44:31 26944 ERROR pg_autoctl service monitor-init exited with exit status 12\n14:44:31 26944 INFO  Restarting service monitor-init\n14:44:31 27792 INFO  Granting connection privileges on 192.168.0.0/24\n14:44:31 27794 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\n14:44:41 27792 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n14:44:41 27792 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n14:44:41 27792 ERROR Failed to get Postgres pid, see above for details\n14:44:41 27792 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"\n14:44:41 27792 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details\n14:44:41 26948 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n14:44:41 26948 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n14:44:41 26948 ERROR Failed to get Postgres pid, see above for details\n14:44:41 26948 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":\n14:44:41 26948 ERROR 2022-03-21 14:44:31.251 KST [27794] FATAL:  database files are incompatible with server\n14:44:41 26948 ERROR 2022-03-21 14:44:31.251 KST [27794] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 11.12 (VMware Postgres 11.12.0).\n14:44:41 26948 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"\n14:44:41 26944 ERROR pg_autoctl service monitor-init exited with exit status 12\n14:44:41 26944 FATAL pg_autoctl service monitor-init has already been restarted 5 times in the last 52 seconds, stopping now\n14:44:41 26948 INFO  Postgres controller service received signal SIGTERM, terminating\n14:44:41 26944 FATAL Something went wrong in sub-process supervision, stopping now. See above for details.\n14:44:41 26944 INFO  Stop pg_autoctl", "stderr_lines": ["14:43:39 26944 INFO  Using default --ssl-mode \"require\"", "14:43:39 26944 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic", "14:43:39 26944 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.", "14:43:39 26944 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details", "14:43:39 26944 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/monitor/server.crt -keyout /var/lib/pgsql/monitor/server.key -subj \"/CN=co7-master\"", "14:43:39 26944 INFO  Started pg_autoctl postgres service with pid 26948", "14:43:39 26944 INFO  Started pg_autoctl monitor-init service with pid 26949", "14:43:39 26948 INFO   /usr/bin/pg_autoctl do service postgres --pgdata monitor -v", "14:43:39 26949 INFO  Granting connection privileges on 192.168.0.0/24", "14:43:39 26953 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *", "14:43:49 26948 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "14:43:49 26949 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "14:43:49 26948 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "14:43:49 26949 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "14:43:49 26948 ERROR Failed to get Postgres pid, see above for details", "14:43:49 26949 ERROR Failed to get Postgres pid, see above for details", "14:43:49 26948 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":", "14:43:49 26949 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"", "14:43:49 26948 ERROR 2022-03-21 14:43:39.439 KST [26953] FATAL:  database files are incompatible with server", "14:43:49 26949 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details", "14:43:49 26948 ERROR 2022-03-21 14:43:39.439 KST [26953] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 11.12 (VMware Postgres 11.12.0).", "14:43:49 26948 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"", "14:43:49 26944 ERROR pg_autoctl service monitor-init exited with exit status 12", "14:43:49 26944 INFO  Restarting service monitor-init", "14:43:49 27092 INFO  Granting connection privileges on 192.168.0.0/24", "14:43:49 27094 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *", "14:43:59 27092 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "14:43:59 26948 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "14:43:59 27092 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "14:43:59 26948 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "14:43:59 27092 ERROR Failed to get Postgres pid, see above for details", "14:43:59 26948 ERROR Failed to get Postgres pid, see above for details", "14:43:59 27092 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"", "14:43:59 26948 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":", "14:43:59 27092 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details", "14:43:59 26948 ERROR 2022-03-21 14:43:49.307 KST [27094] FATAL:  database files are incompatible with server", "14:43:59 26948 ERROR 2022-03-21 14:43:49.307 KST [27094] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 11.12 (VMware Postgres 11.12.0).", "14:43:59 26948 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"", "14:43:59 26944 ERROR pg_autoctl service monitor-init exited with exit status 12", "14:43:59 26944 INFO  Restarting service monitor-init", "14:43:59 27267 INFO  Granting connection privileges on 192.168.0.0/24", "14:43:59 27269 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *", "14:44:09 26948 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "14:44:09 26948 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "14:44:09 26948 ERROR Failed to get Postgres pid, see above for details", "14:44:09 26948 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":", "14:44:09 26948 ERROR 2022-03-21 14:43:59.248 KST [27269] FATAL:  database files are incompatible with server", "14:44:09 26948 ERROR 2022-03-21 14:43:59.248 KST [27269] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 11.12 (VMware Postgres 11.12.0).", "14:44:09 26948 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"", "14:44:09 27267 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "14:44:09 27267 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "14:44:09 27267 ERROR Failed to get Postgres pid, see above for details", "14:44:09 27267 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"", "14:44:09 27267 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details", "14:44:09 26944 ERROR pg_autoctl service monitor-init exited with exit status 12", "14:44:09 26944 INFO  Restarting service monitor-init", "14:44:09 27442 INFO  Granting connection privileges on 192.168.0.0/24", "14:44:10 27444 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *", "14:44:20 27442 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "14:44:20 27442 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "14:44:20 27442 ERROR Failed to get Postgres pid, see above for details", "14:44:20 27442 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"", "14:44:20 27442 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details", "14:44:20 26948 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "14:44:20 26948 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "14:44:20 26948 ERROR Failed to get Postgres pid, see above for details", "14:44:20 26948 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":", "14:44:20 26948 ERROR 2022-03-21 14:44:10.814 KST [27444] FATAL:  database files are incompatible with server", "14:44:20 26948 ERROR 2022-03-21 14:44:10.814 KST [27444] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 11.12 (VMware Postgres 11.12.0).", "14:44:20 26948 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"", "14:44:20 26944 ERROR pg_autoctl service monitor-init exited with exit status 12", "14:44:20 26944 INFO  Restarting service monitor-init", "14:44:20 27617 INFO  Granting connection privileges on 192.168.0.0/24", "14:44:21 27619 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *", "14:44:31 27617 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "14:44:31 27617 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "14:44:31 27617 ERROR Failed to get Postgres pid, see above for details", "14:44:31 27617 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"", "14:44:31 27617 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details", "14:44:31 26948 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "14:44:31 26948 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "14:44:31 26948 ERROR Failed to get Postgres pid, see above for details", "14:44:31 26948 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":", "14:44:31 26948 ERROR 2022-03-21 14:44:21.509 KST [27619] FATAL:  database files are incompatible with server", "14:44:31 26948 ERROR 2022-03-21 14:44:21.509 KST [27619] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 11.12 (VMware Postgres 11.12.0).", "14:44:31 26948 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"", "14:44:31 26944 ERROR pg_autoctl service monitor-init exited with exit status 12", "14:44:31 26944 INFO  Restarting service monitor-init", "14:44:31 27792 INFO  Granting connection privileges on 192.168.0.0/24", "14:44:31 27794 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *", "14:44:41 27792 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "14:44:41 27792 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "14:44:41 27792 ERROR Failed to get Postgres pid, see above for details", "14:44:41 27792 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"", "14:44:41 27792 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details", "14:44:41 26948 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "14:44:41 26948 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "14:44:41 26948 ERROR Failed to get Postgres pid, see above for details", "14:44:41 26948 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":", "14:44:41 26948 ERROR 2022-03-21 14:44:31.251 KST [27794] FATAL:  database files are incompatible with server", "14:44:41 26948 ERROR 2022-03-21 14:44:31.251 KST [27794] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 11.12 (VMware Postgres 11.12.0).", "14:44:41 26948 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"", "14:44:41 26944 ERROR pg_autoctl service monitor-init exited with exit status 12", "14:44:41 26944 FATAL pg_autoctl service monitor-init has already been restarted 5 times in the last 52 seconds, stopping now", "14:44:41 26948 INFO  Postgres controller service received signal SIGTERM, terminating", "14:44:41 26944 FATAL Something went wrong in sub-process supervision, stopping now. See above for details.", "14:44:41 26944 INFO  Stop pg_autoctl"], "stdout": "", "stdout_lines": []}
2022-03-21 14:44:42,611 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:44:42,631 p=462 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:44:42,648 p=462 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:44:42,658 p=462 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:44:42,669 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of monitor instance] *******************************************************
2022-03-21 14:44:42,690 p=462 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:44:42,707 p=462 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:44:42,717 p=462 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:44:42,728 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : Copy systemd service file of monitor instance] *********************************************************
2022-03-21 14:44:42,748 p=462 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:44:42,765 p=462 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:44:42,776 p=462 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:44:42,787 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start systemd service of monitor instance] **************************************************
2022-03-21 14:44:42,807 p=462 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:44:42,825 p=462 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:44:42,838 p=462 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:44:42,849 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:44:42,870 p=462 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:44:42,919 p=462 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:44:42,934 p=462 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:44:42,946 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 14:44:42,968 p=462 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:44:42,985 p=462 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:44:42,998 p=462 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:44:43,008 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the current state of monitor instance] **********************************************************
2022-03-21 14:44:43,042 p=462 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:44:43,043 p=462 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:44:43,055 p=462 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:44:43,064 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:44:43,099 p=462 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:44:43,100 p=462 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:44:43,112 p=462 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:44:43,122 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the current state of monitor] *******************************************************************
2022-03-21 14:44:43,158 p=462 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:44:43,159 p=462 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:44:43,170 p=462 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:44:43,180 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:44:43,200 p=462 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:44:43,216 p=462 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:44:43,229 p=462 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:44:43,239 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : Create primiary instance. It will automatically be set by the monitor as the primary node with read-write capability (PGDATA = /var/lib/pgpsql/ha)] ***
2022-03-21 14:44:43,274 p=462 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:44:43,286 p=462 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:44:49,870 p=462 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:44:49,879 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:44:49,915 p=462 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "484728723380.30116",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ;  pg_autoctl create postgres --pgdata \"ha\" --auth trust --ssl-self-signed --username ha-admin --dbname \"appdb\" --hostname \"co7-node01\" --pgctl /bin/pg_ctl --monitor 'postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require' )",
        "delta": "0:00:00.236633",
        "end": "2022-03-21 14:44:44.276798",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/484728723380.30116",
        "start": "2022-03-21 14:44:44.040165",
        "started": 1,
        "stderr": "14:44:44 30126 INFO  Using default --ssl-mode \"require\"\n14:44:44 30126 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n14:44:44 30126 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n14:44:44 30126 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n14:44:44 30126 INFO  Started pg_autoctl postgres service with pid 30129\n14:44:44 30129 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v\n14:44:44 30126 INFO  Started pg_autoctl node-init service with pid 30130\n14:44:44 30130 FATAL The state file \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\" exists and there's no init in progress\n14:44:44 30130 INFO  HINT: use `pg_autoctl run` to start the service.\n14:44:44 30126 WARN  pg_autoctl service node-init exited with exit status 0\n14:44:44 30129 INFO  Postgres controller service received signal SIGTERM, terminating\n14:44:44 30126 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "14:44:44 30126 INFO  Using default --ssl-mode \"require\"",
            "14:44:44 30126 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "14:44:44 30126 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "14:44:44 30126 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "14:44:44 30126 INFO  Started pg_autoctl postgres service with pid 30129",
            "14:44:44 30129 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v",
            "14:44:44 30126 INFO  Started pg_autoctl node-init service with pid 30130",
            "14:44:44 30130 FATAL The state file \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\" exists and there's no init in progress",
            "14:44:44 30130 INFO  HINT: use `pg_autoctl run` to start the service.",
            "14:44:44 30126 WARN  pg_autoctl service node-init exited with exit status 0",
            "14:44:44 30129 INFO  Postgres controller service received signal SIGTERM, terminating",
            "14:44:44 30126 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": [],
        "warnings": [
            "Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually"
        ]
    }
}
2022-03-21 14:44:49,916 p=462 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:44:49,926 p=462 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:44:49,937 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of pirmary instance] *******************************************************
2022-03-21 14:44:49,970 p=462 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:44:49,980 p=462 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:44:56,265 p=462 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:44:56,273 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:44:56,312 p=462 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "959229850031.30503",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl -q show systemd --pgdata ~postgres/ha > pgautofailover.service )",
        "delta": "0:00:00.031428",
        "end": "2022-03-21 14:44:50.611442",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/959229850031.30503",
        "start": "2022-03-21 14:44:50.580014",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 14:44:56,312 p=462 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:44:56,325 p=462 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:44:56,336 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : Copy primary systemd service file of primary instance] *************************************************
2022-03-21 14:44:56,411 p=462 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:44:56,426 p=462 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:44:56,957 p=462 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:44:56,969 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start primary systemd service of primary instance] ******************************************
2022-03-21 14:44:57,008 p=462 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:44:57,021 p=462 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:44:58,186 p=462 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:44:58,199 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 14:44:58,236 p=462 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:44:58,247 p=462 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:44:59,171 p=462 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:44:59,184 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the state of primary instance] ******************************************************************
2022-03-21 14:44:59,219 p=462 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:44:59,230 p=462 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:45:01,191 p=462 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": true, "cmd": "( source ~/.bash_profile ; pg_autoctl show state )", "delta": "0:00:01.508777", "end": "2022-03-21 14:45:01.163661", "msg": "non-zero return code", "rc": 6, "start": "2022-03-21 14:44:59.654884", "stderr": "14:44:59 31327 WARN  Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\", retrying until the server is ready\n14:45:01 31327 ERROR Connection to database failed: could not connect to server: Connection refused\n14:45:01 31327 ERROR \tIs the server running on host \"co7-master\" (192.168.0.81) and accepting\n14:45:01 31327 ERROR \tTCP/IP connections on port 5432?\n14:45:01 31327 ERROR Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\" after 19 attempts in 2 seconds, pg_autoctl stops retrying now\n14:45:01 31327 ERROR Failed to retrieve current state from the monitor", "stderr_lines": ["14:44:59 31327 WARN  Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\", retrying until the server is ready", "14:45:01 31327 ERROR Connection to database failed: could not connect to server: Connection refused", "14:45:01 31327 ERROR \tIs the server running on host \"co7-master\" (192.168.0.81) and accepting", "14:45:01 31327 ERROR \tTCP/IP connections on port 5432?", "14:45:01 31327 ERROR Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\" after 19 attempts in 2 seconds, pg_autoctl stops retrying now", "14:45:01 31327 ERROR Failed to retrieve current state from the monitor"], "stdout": "", "stdout_lines": []}
2022-03-21 14:45:01,202 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:45:01,225 p=462 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:45:01,238 p=462 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:45:01,247 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : Create secondary instance. It will automatically be set by the monitor as the secondary  node with read-write capability (PGDATA = /var/lib/pgpsql/ha)] ***
2022-03-21 14:45:07,944 p=462 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:45:07,945 p=462 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:45:07,955 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:45:07,981 p=462 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "ansible_job_id": "646272782483.29243",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ;  pg_autoctl create postgres --pgdata \"ha\" --auth trust --ssl-self-signed --username ha-admin --dbname \"appdb\" --hostname \"co7-node02\" --pgctl /bin/pg_ctl --monitor 'postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require' )",
        "delta": "0:00:00.640076",
        "end": "2022-03-21 14:45:02.690149",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/646272782483.29243",
        "start": "2022-03-21 14:45:02.050073",
        "started": 1,
        "stderr": "14:45:02 29253 INFO  Using default --ssl-mode \"require\"\n14:45:02 29253 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n14:45:02 29253 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n14:45:02 29253 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n14:45:02 29253 INFO  Started pg_autoctl postgres service with pid 29256\n14:45:02 29253 INFO  Started pg_autoctl node-init service with pid 29257\n14:45:02 29256 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v\n14:45:02 29257 FATAL The state file \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\" exists and there's no init in progress\n14:45:02 29257 INFO  HINT: use `pg_autoctl run` to start the service.\n14:45:02 29253 WARN  pg_autoctl service node-init exited with exit status 0\n14:45:02 29256 INFO  Postgres controller service received signal SIGTERM, terminating\n14:45:02 29253 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "14:45:02 29253 INFO  Using default --ssl-mode \"require\"",
            "14:45:02 29253 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "14:45:02 29253 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "14:45:02 29253 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "14:45:02 29253 INFO  Started pg_autoctl postgres service with pid 29256",
            "14:45:02 29253 INFO  Started pg_autoctl node-init service with pid 29257",
            "14:45:02 29256 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v",
            "14:45:02 29257 FATAL The state file \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\" exists and there's no init in progress",
            "14:45:02 29257 INFO  HINT: use `pg_autoctl run` to start the service.",
            "14:45:02 29253 WARN  pg_autoctl service node-init exited with exit status 0",
            "14:45:02 29256 INFO  Postgres controller service received signal SIGTERM, terminating",
            "14:45:02 29253 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": [],
        "warnings": [
            "Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually"
        ]
    }
}
2022-03-21 14:45:07,994 p=462 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "ansible_job_id": "81485327823.28657",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ;  pg_autoctl create postgres --pgdata \"ha\" --auth trust --ssl-self-signed --username ha-admin --dbname \"appdb\" --hostname \"co7-node03\" --pgctl /bin/pg_ctl --monitor 'postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require' )",
        "delta": "0:00:00.540918",
        "end": "2022-03-21 14:45:02.595429",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/81485327823.28657",
        "start": "2022-03-21 14:45:02.054511",
        "started": 1,
        "stderr": "14:45:02 28667 INFO  Using default --ssl-mode \"require\"\n14:45:02 28667 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n14:45:02 28667 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n14:45:02 28667 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n14:45:02 28667 INFO  Started pg_autoctl postgres service with pid 28670\n14:45:02 28667 INFO  Started pg_autoctl node-init service with pid 28671\n14:45:02 28670 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v\n14:45:02 28671 FATAL The state file \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\" exists and there's no init in progress\n14:45:02 28671 INFO  HINT: use `pg_autoctl run` to start the service.\n14:45:02 28667 WARN  pg_autoctl service node-init exited with exit status 0\n14:45:02 28670 INFO  Postgres controller service received signal SIGTERM, terminating\n14:45:02 28667 INFO  Waiting for subprocesses to terminate.\n14:45:02 28667 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "14:45:02 28667 INFO  Using default --ssl-mode \"require\"",
            "14:45:02 28667 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "14:45:02 28667 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "14:45:02 28667 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "14:45:02 28667 INFO  Started pg_autoctl postgres service with pid 28670",
            "14:45:02 28667 INFO  Started pg_autoctl node-init service with pid 28671",
            "14:45:02 28670 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v",
            "14:45:02 28671 FATAL The state file \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\" exists and there's no init in progress",
            "14:45:02 28671 INFO  HINT: use `pg_autoctl run` to start the service.",
            "14:45:02 28667 WARN  pg_autoctl service node-init exited with exit status 0",
            "14:45:02 28670 INFO  Postgres controller service received signal SIGTERM, terminating",
            "14:45:02 28667 INFO  Waiting for subprocesses to terminate.",
            "14:45:02 28667 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": [],
        "warnings": [
            "Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually"
        ]
    }
}
2022-03-21 14:45:08,005 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of secondary instance] *****************************************************
2022-03-21 14:45:14,456 p=462 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:45:14,456 p=462 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:45:14,466 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:45:14,493 p=462 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "ansible_job_id": "662536546262.29622",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl -q show systemd --pgdata ~postgres/ha > pgautofailover.service )",
        "delta": "0:00:00.033874",
        "end": "2022-03-21 14:45:08.606978",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/662536546262.29622",
        "start": "2022-03-21 14:45:08.573104",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 14:45:14,506 p=462 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "ansible_job_id": "736245661161.29036",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl -q show systemd --pgdata ~postgres/ha > pgautofailover.service )",
        "delta": "0:00:00.037035",
        "end": "2022-03-21 14:45:08.622028",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/736245661161.29036",
        "start": "2022-03-21 14:45:08.584993",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 14:45:14,517 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : Copy secondary systemd service file of secondary instance] *********************************************
2022-03-21 14:45:15,072 p=462 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:45:15,072 p=462 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:45:15,083 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start secondary systemd service of secondary instance] **************************************
2022-03-21 14:45:16,136 p=462 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:45:16,141 p=462 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:45:16,151 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 14:45:16,683 p=462 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:45:16,683 p=462 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:45:16,694 p=462 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the state of secondary instance] ****************************************************************
2022-03-21 14:45:19,711 p=462 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "cmd": "( source ~/.bash_profile ; pg_autoctl show state )", "delta": "0:00:02.514285", "end": "2022-03-21 14:45:19.674501", "msg": "non-zero return code", "rc": 6, "start": "2022-03-21 14:45:17.160216", "stderr": "14:45:17 29861 WARN  Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\", retrying until the server is ready\n14:45:19 29861 ERROR Connection to database failed: could not connect to server: Connection refused\n14:45:19 29861 ERROR \tIs the server running on host \"co7-master\" (192.168.0.81) and accepting\n14:45:19 29861 ERROR \tTCP/IP connections on port 5432?\n14:45:19 29861 ERROR Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\" after 22 attempts in 2 seconds, pg_autoctl stops retrying now\n14:45:19 29861 ERROR Failed to retrieve current state from the monitor", "stderr_lines": ["14:45:17 29861 WARN  Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\", retrying until the server is ready", "14:45:19 29861 ERROR Connection to database failed: could not connect to server: Connection refused", "14:45:19 29861 ERROR \tIs the server running on host \"co7-master\" (192.168.0.81) and accepting", "14:45:19 29861 ERROR \tTCP/IP connections on port 5432?", "14:45:19 29861 ERROR Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\" after 22 attempts in 2 seconds, pg_autoctl stops retrying now", "14:45:19 29861 ERROR Failed to retrieve current state from the monitor"], "stdout": "", "stdout_lines": []}
2022-03-21 14:45:19,712 p=462 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "cmd": "( source ~/.bash_profile ; pg_autoctl show state )", "delta": "0:00:02.515451", "end": "2022-03-21 14:45:19.672457", "msg": "non-zero return code", "rc": 6, "start": "2022-03-21 14:45:17.157006", "stderr": "14:45:17 30446 WARN  Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\", retrying until the server is ready\n14:45:19 30446 ERROR Connection to database failed: could not connect to server: Connection refused\n14:45:19 30446 ERROR \tIs the server running on host \"co7-master\" (192.168.0.81) and accepting\n14:45:19 30446 ERROR \tTCP/IP connections on port 5432?\n14:45:19 30446 ERROR Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\" after 22 attempts in 2 seconds, pg_autoctl stops retrying now\n14:45:19 30446 ERROR Failed to retrieve current state from the monitor", "stderr_lines": ["14:45:17 30446 WARN  Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\", retrying until the server is ready", "14:45:19 30446 ERROR Connection to database failed: could not connect to server: Connection refused", "14:45:19 30446 ERROR \tIs the server running on host \"co7-master\" (192.168.0.81) and accepting", "14:45:19 30446 ERROR \tTCP/IP connections on port 5432?", "14:45:19 30446 ERROR Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\" after 22 attempts in 2 seconds, pg_autoctl stops retrying now", "14:45:19 30446 ERROR Failed to retrieve current state from the monitor"], "stdout": "", "stdout_lines": []}
2022-03-21 14:45:19,714 p=462 u=moonja n=ansible | PLAY RECAP *************************************************************************************************************************
2022-03-21 14:45:19,714 p=462 u=moonja n=ansible | co7-master                 : ok=16   changed=8    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2022-03-21 14:45:19,714 p=462 u=moonja n=ansible | co7-node01                 : ok=19   changed=11   unreachable=0    failed=1    skipped=16   rescued=0    ignored=0   
2022-03-21 14:45:19,714 p=462 u=moonja n=ansible | co7-node02                 : ok=19   changed=11   unreachable=0    failed=1    skipped=25   rescued=0    ignored=0   
2022-03-21 14:45:19,714 p=462 u=moonja n=ansible | co7-node03                 : ok=19   changed=11   unreachable=0    failed=1    skipped=25   rescued=0    ignored=0   
2022-03-21 14:52:50,797 p=4748 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from 
ansible-core in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 14:52:51,049 p=4748 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 
2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 14:52:51,054 p=4748 u=moonja n=ansible | [WARNING]: While constructing a mapping from /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/install.yml, line 308,
column 3, found a duplicate dict key (when). Using last defined value only.

2022-03-21 14:52:51,104 p=4748 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/upgrade.yml is empty and had no tasks to include

2022-03-21 14:52:51,118 p=4748 u=moonja n=ansible | PLAY [all] *************************************************************************************************************************
2022-03-21 14:52:51,149 p=4748 u=moonja n=ansible | TASK [Gathering Facts] *************************************************************************************************************
2022-03-21 14:52:53,573 p=4748 u=moonja n=ansible | ok: [co7-master]
2022-03-21 14:52:53,631 p=4748 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 14:52:53,657 p=4748 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 14:52:53,692 p=4748 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 14:52:53,709 p=4748 u=moonja n=ansible | TASK [pgfailover-postgres : Disable port from public zone] *************************************************************************
2022-03-21 14:52:54,614 p=4748 u=moonja n=ansible | changed: [co7-node02] => (item=5432)
2022-03-21 14:52:54,626 p=4748 u=moonja n=ansible | changed: [co7-node01] => (item=5432)
2022-03-21 14:52:54,628 p=4748 u=moonja n=ansible | changed: [co7-master] => (item=5432)
2022-03-21 14:52:54,658 p=4748 u=moonja n=ansible | changed: [co7-node03] => (item=5432)
2022-03-21 14:52:54,669 p=4748 u=moonja n=ansible | TASK [pgfailover-postgres : Disable IP Addresses in whitelist] *********************************************************************
2022-03-21 14:52:55,387 p=4748 u=moonja n=ansible | changed: [co7-master] => (item=co7-master)
2022-03-21 14:52:55,404 p=4748 u=moonja n=ansible | changed: [co7-node03] => (item=co7-master)
2022-03-21 14:52:55,411 p=4748 u=moonja n=ansible | changed: [co7-node02] => (item=co7-master)
2022-03-21 14:52:55,419 p=4748 u=moonja n=ansible | changed: [co7-node01] => (item=co7-master)
2022-03-21 14:52:56,010 p=4748 u=moonja n=ansible | changed: [co7-master] => (item=co7-node01)
2022-03-21 14:52:56,057 p=4748 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node01)
2022-03-21 14:52:56,083 p=4748 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node01)
2022-03-21 14:52:56,083 p=4748 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node01)
2022-03-21 14:52:56,644 p=4748 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node02)
2022-03-21 14:52:56,667 p=4748 u=moonja n=ansible | changed: [co7-master] => (item=co7-node02)
2022-03-21 14:52:56,696 p=4748 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node02)
2022-03-21 14:52:56,719 p=4748 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node02)
2022-03-21 14:52:57,261 p=4748 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node03)
2022-03-21 14:52:57,306 p=4748 u=moonja n=ansible | changed: [co7-master] => (item=co7-node03)
2022-03-21 14:52:57,307 p=4748 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node03)
2022-03-21 14:52:57,338 p=4748 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node03)
2022-03-21 14:52:57,350 p=4748 u=moonja n=ansible | TASK [pgfailover-postgres : Bounce firewalld] **************************************************************************************
2022-03-21 14:52:59,341 p=4748 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:52:59,344 p=4748 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:52:59,349 p=4748 u=moonja n=ansible | changed: [co7-master]
2022-03-21 14:52:59,361 p=4748 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:52:59,371 p=4748 u=moonja n=ansible | TASK [pgfailover-postgres : Stop and disable firewalld.] ***************************************************************************
2022-03-21 14:53:00,961 p=4748 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:53:00,973 p=4748 u=moonja n=ansible | changed: [co7-master]
2022-03-21 14:53:00,976 p=4748 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:53:00,976 p=4748 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:53:00,986 p=4748 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 14:53:01,031 p=4748 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:53:01,032 p=4748 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:53:01,042 p=4748 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:53:01,923 p=4748 u=moonja n=ansible | changed: [co7-master]
2022-03-21 14:53:01,933 p=4748 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 14:53:01,981 p=4748 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:53:01,981 p=4748 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:53:01,992 p=4748 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:53:02,542 p=4748 u=moonja n=ansible | changed: [co7-master]
2022-03-21 14:53:02,552 p=4748 u=moonja n=ansible | TASK [pgfailover-postgres : Getting process IDs of the pg_autoctl process] *********************************************************
2022-03-21 14:53:03,257 p=4748 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 14:53:03,260 p=4748 u=moonja n=ansible | ok: [co7-master]
2022-03-21 14:53:03,385 p=4748 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 14:53:03,385 p=4748 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 14:53:03,395 p=4748 u=moonja n=ansible | TASK [pgfailover-postgres : Stop pgautofailover service of systemd] ****************************************************************
2022-03-21 14:53:03,447 p=4748 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 14:53:03,484 p=4748 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:53:04,375 p=4748 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:53:04,376 p=4748 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:53:04,387 p=4748 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] ************************************************************************
2022-03-21 14:53:04,407 p=4748 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 14:53:04,423 p=4748 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:53:05,100 p=4748 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:53:05,100 p=4748 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:53:05,110 p=4748 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start secondary systemd service of secondary instance] **************************************
2022-03-21 14:53:05,144 p=4748 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 14:53:05,158 p=4748 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:53:05,871 p=4748 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:53:05,897 p=4748 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:53:05,909 p=4748 u=moonja n=ansible | TASK [pgfailover-postgres : Delete secondary systemd service file of secondary instance] *******************************************
2022-03-21 14:53:05,931 p=4748 u=moonja n=ansible | skipping: [co7-master] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 14:53:05,932 p=4748 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 14:53:05,936 p=4748 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 14:53:05,940 p=4748 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.config) 
2022-03-21 14:53:05,940 p=4748 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 14:53:05,947 p=4748 u=moonja n=ansible | skipping: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 14:53:05,949 p=4748 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 14:53:05,952 p=4748 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 14:53:05,954 p=4748 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.config) 
2022-03-21 14:53:05,955 p=4748 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 14:53:06,727 p=4748 u=moonja n=ansible | changed: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 14:53:06,728 p=4748 u=moonja n=ansible | changed: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 14:53:07,165 p=4748 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 14:53:07,166 p=4748 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 14:53:07,581 p=4748 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 14:53:07,581 p=4748 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 14:53:08,068 p=4748 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.config)
2022-03-21 14:53:08,070 p=4748 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.config)
2022-03-21 14:53:08,544 p=4748 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.ansible)
2022-03-21 14:53:08,544 p=4748 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.ansible)
2022-03-21 14:53:08,557 p=4748 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] ************************************************************************
2022-03-21 14:53:08,576 p=4748 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 14:53:08,607 p=4748 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:53:08,617 p=4748 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:53:09,124 p=4748 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:53:09,133 p=4748 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start primary systemd service of primary instance] ******************************************
2022-03-21 14:53:09,153 p=4748 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 14:53:09,183 p=4748 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:53:09,194 p=4748 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:53:09,893 p=4748 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:53:09,902 p=4748 u=moonja n=ansible | TASK [pgfailover-postgres : Delete primary systemd service file of secondary instance] *********************************************
2022-03-21 14:53:09,925 p=4748 u=moonja n=ansible | skipping: [co7-master] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 14:53:09,926 p=4748 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 14:53:09,929 p=4748 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 14:53:09,933 p=4748 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.config) 
2022-03-21 14:53:09,934 p=4748 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 14:53:09,959 p=4748 u=moonja n=ansible | skipping: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 14:53:09,959 p=4748 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 14:53:09,962 p=4748 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 14:53:09,965 p=4748 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.config) 
2022-03-21 14:53:09,965 p=4748 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 14:53:09,971 p=4748 u=moonja n=ansible | skipping: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 14:53:09,977 p=4748 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 14:53:09,977 p=4748 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 14:53:09,978 p=4748 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.config) 
2022-03-21 14:53:09,979 p=4748 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 14:53:10,467 p=4748 u=moonja n=ansible | changed: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 14:53:10,887 p=4748 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 14:53:11,401 p=4748 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 14:53:11,832 p=4748 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.config)
2022-03-21 14:53:12,351 p=4748 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.ansible)
2022-03-21 14:53:12,374 p=4748 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] ************************************************************************
2022-03-21 14:53:12,423 p=4748 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:53:12,442 p=4748 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:53:12,456 p=4748 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:53:12,818 p=4748 u=moonja n=ansible | changed: [co7-master]
2022-03-21 14:53:12,841 p=4748 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start systemd service of monitor instance] **************************************************
2022-03-21 14:53:12,893 p=4748 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:53:12,914 p=4748 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:53:12,926 p=4748 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:53:13,601 p=4748 u=moonja n=ansible | fatal: [co7-master]: FAILED! => {"changed": false, "msg": "Could not find the requested service pgautofailover: host"}
2022-03-21 14:53:13,610 p=4748 u=moonja n=ansible | ...ignoring
2022-03-21 14:53:13,621 p=4748 u=moonja n=ansible | TASK [pgfailover-postgres : Delete primary systemd service file of secondary instance] *********************************************
2022-03-21 14:53:13,680 p=4748 u=moonja n=ansible | skipping: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 14:53:13,698 p=4748 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 14:53:13,698 p=4748 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 14:53:13,699 p=4748 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.config) 
2022-03-21 14:53:13,720 p=4748 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 14:53:13,740 p=4748 u=moonja n=ansible | skipping: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 14:53:13,741 p=4748 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 14:53:13,759 p=4748 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 14:53:13,759 p=4748 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.config) 
2022-03-21 14:53:13,760 p=4748 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 14:53:13,779 p=4748 u=moonja n=ansible | skipping: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 14:53:13,780 p=4748 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 14:53:13,799 p=4748 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 14:53:13,799 p=4748 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.config) 
2022-03-21 14:53:13,800 p=4748 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 14:53:14,237 p=4748 u=moonja n=ansible | ok: [co7-master] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 14:53:14,889 p=4748 u=moonja n=ansible | ok: [co7-master] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 14:53:15,400 p=4748 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 14:53:15,828 p=4748 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/.config)
2022-03-21 14:53:16,388 p=4748 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/.ansible)
2022-03-21 14:53:16,419 p=4748 u=moonja n=ansible | TASK [pgfailover-postgres : Uninstall VMware Postgres on all hosts as root] ********************************************************
2022-03-21 14:53:49,377 p=4748 u=moonja n=ansible | changed: [co7-master]
2022-03-21 14:53:51,277 p=4748 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:53:51,293 p=4748 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:53:51,951 p=4748 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:53:51,969 p=4748 u=moonja n=ansible | TASK [pgfailover-postgres : Copy the vmwawre-postgres rpm file to all hosts in cluster] ********************************************
2022-03-21 14:53:52,422 p=4748 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:53:52,436 p=4748 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:53:52,444 p=4748 u=moonja n=ansible | changed: [co7-master]
2022-03-21 14:53:52,467 p=4748 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:53:52,512 p=4748 u=moonja n=ansible | PLAY RECAP *************************************************************************************************************************
2022-03-21 14:53:52,512 p=4748 u=moonja n=ansible | co7-master                 : ok=13   changed=10   unreachable=0    failed=0    skipped=7    rescued=0    ignored=1   
2022-03-21 14:53:52,513 p=4748 u=moonja n=ansible | co7-node01                 : ok=12   changed=10   unreachable=0    failed=0    skipped=8    rescued=0    ignored=0   
2022-03-21 14:53:52,513 p=4748 u=moonja n=ansible | co7-node02                 : ok=12   changed=10   unreachable=0    failed=0    skipped=8    rescued=0    ignored=0   
2022-03-21 14:53:52,513 p=4748 u=moonja n=ansible | co7-node03                 : ok=11   changed=9    unreachable=0    failed=0    skipped=9    rescued=0    ignored=0   
2022-03-21 14:54:52,640 p=6243 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from 
ansible-core in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 14:54:52,890 p=6243 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 
2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 14:54:52,895 p=6243 u=moonja n=ansible | [WARNING]: While constructing a mapping from /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/install.yml, line 308,
column 3, found a duplicate dict key (when). Using last defined value only.

2022-03-21 14:54:52,943 p=6243 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/upgrade.yml is empty and had no tasks to include

2022-03-21 14:54:52,956 p=6243 u=moonja n=ansible | PLAY [all] *************************************************************************************************************************
2022-03-21 14:54:52,985 p=6243 u=moonja n=ansible | TASK [Gathering Facts] *************************************************************************************************************
2022-03-21 14:54:55,202 p=6243 u=moonja n=ansible | ok: [co7-master]
2022-03-21 14:54:55,238 p=6243 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 14:54:55,274 p=6243 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 14:54:55,311 p=6243 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 14:54:55,332 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : Install rpm packages of dependenies to need installing packages regarding kubernates] ******************
2022-03-21 14:54:56,380 p=6243 u=moonja n=ansible | ok: [co7-master] => (item=firewalld)
2022-03-21 14:54:56,414 p=6243 u=moonja n=ansible | ok: [co7-node01] => (item=firewalld)
2022-03-21 14:54:56,427 p=6243 u=moonja n=ansible | ok: [co7-node02] => (item=firewalld)
2022-03-21 14:54:56,429 p=6243 u=moonja n=ansible | ok: [co7-node03] => (item=firewalld)
2022-03-21 14:54:57,115 p=6243 u=moonja n=ansible | ok: [co7-master] => (item=python3)
2022-03-21 14:54:57,131 p=6243 u=moonja n=ansible | ok: [co7-node01] => (item=python3)
2022-03-21 14:54:57,137 p=6243 u=moonja n=ansible | ok: [co7-node03] => (item=python3)
2022-03-21 14:54:57,168 p=6243 u=moonja n=ansible | ok: [co7-node02] => (item=python3)
2022-03-21 14:54:58,007 p=6243 u=moonja n=ansible | ok: [co7-master] => (item=python3-libselinux)
2022-03-21 14:54:58,015 p=6243 u=moonja n=ansible | ok: [co7-node03] => (item=python3-libselinux)
2022-03-21 14:54:58,019 p=6243 u=moonja n=ansible | ok: [co7-node01] => (item=python3-libselinux)
2022-03-21 14:54:58,045 p=6243 u=moonja n=ansible | ok: [co7-node02] => (item=python3-libselinux)
2022-03-21 14:54:58,057 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : Start and enable firewalld.] ***************************************************************************
2022-03-21 14:54:59,329 p=6243 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:54:59,339 p=6243 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:54:59,340 p=6243 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:54:59,360 p=6243 u=moonja n=ansible | changed: [co7-master]
2022-03-21 14:54:59,371 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : Open Firewall] *****************************************************************************************
2022-03-21 14:55:00,262 p=6243 u=moonja n=ansible | changed: [co7-node01] => (item=5432)
2022-03-21 14:55:00,269 p=6243 u=moonja n=ansible | changed: [co7-master] => (item=5432)
2022-03-21 14:55:00,273 p=6243 u=moonja n=ansible | changed: [co7-node03] => (item=5432)
2022-03-21 14:55:00,538 p=6243 u=moonja n=ansible | changed: [co7-node02] => (item=5432)
2022-03-21 14:55:00,551 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : Whitelist of Ip addresses] *****************************************************************************
2022-03-21 14:55:01,214 p=6243 u=moonja n=ansible | changed: [co7-master] => (item=co7-master)
2022-03-21 14:55:01,245 p=6243 u=moonja n=ansible | changed: [co7-node02] => (item=co7-master)
2022-03-21 14:55:01,260 p=6243 u=moonja n=ansible | changed: [co7-node03] => (item=co7-master)
2022-03-21 14:55:01,261 p=6243 u=moonja n=ansible | changed: [co7-node01] => (item=co7-master)
2022-03-21 14:55:01,839 p=6243 u=moonja n=ansible | changed: [co7-master] => (item=co7-node01)
2022-03-21 14:55:01,855 p=6243 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node01)
2022-03-21 14:55:01,870 p=6243 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node01)
2022-03-21 14:55:01,886 p=6243 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node01)
2022-03-21 14:55:02,441 p=6243 u=moonja n=ansible | changed: [co7-master] => (item=co7-node02)
2022-03-21 14:55:02,465 p=6243 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node02)
2022-03-21 14:55:02,485 p=6243 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node02)
2022-03-21 14:55:02,488 p=6243 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node02)
2022-03-21 14:55:03,083 p=6243 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node03)
2022-03-21 14:55:03,108 p=6243 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node03)
2022-03-21 14:55:03,120 p=6243 u=moonja n=ansible | changed: [co7-master] => (item=co7-node03)
2022-03-21 14:55:03,180 p=6243 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node03)
2022-03-21 14:55:03,191 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : Bounce firewalld] **************************************************************************************
2022-03-21 14:55:04,860 p=6243 u=moonja n=ansible | changed: [co7-master]
2022-03-21 14:55:04,873 p=6243 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:55:04,902 p=6243 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:55:04,903 p=6243 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:55:04,914 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : Copy the vmwawre-postgres rpm file to all hosts in cluster] ********************************************
2022-03-21 14:55:06,294 p=6243 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:55:06,295 p=6243 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:55:06,511 p=6243 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:55:06,741 p=6243 u=moonja n=ansible | ok: [co7-master]
2022-03-21 14:55:06,753 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : Install dependency rpm package for pgautofailover] *****************************************************
2022-03-21 14:55:13,446 p=6243 u=moonja n=ansible | ok: [co7-node03] => (item=python2-psutil)
2022-03-21 14:55:13,496 p=6243 u=moonja n=ansible | ok: [co7-node01] => (item=python2-psutil)
2022-03-21 14:55:13,496 p=6243 u=moonja n=ansible | ok: [co7-node02] => (item=python2-psutil)
2022-03-21 14:55:13,504 p=6243 u=moonja n=ansible | ok: [co7-master] => (item=python2-psutil)
2022-03-21 14:55:19,662 p=6243 u=moonja n=ansible | ok: [co7-node03] => (item=python3)
2022-03-21 14:55:19,696 p=6243 u=moonja n=ansible | ok: [co7-node01] => (item=python3)
2022-03-21 14:55:19,708 p=6243 u=moonja n=ansible | ok: [co7-node02] => (item=python3)
2022-03-21 14:55:19,709 p=6243 u=moonja n=ansible | ok: [co7-master] => (item=python3)
2022-03-21 14:55:19,719 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : Install VMware Postgres on all hosts as root] **********************************************************
2022-03-21 14:55:45,296 p=6243 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:55:47,575 p=6243 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:55:49,221 p=6243 u=moonja n=ansible | changed: [co7-master]
2022-03-21 14:55:49,855 p=6243 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:55:49,864 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 14:55:49,898 p=6243 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:55:49,912 p=6243 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:55:49,924 p=6243 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:55:50,606 p=6243 u=moonja n=ansible | [WARNING]: Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues
when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually

2022-03-21 14:55:50,606 p=6243 u=moonja n=ansible | changed: [co7-master]
2022-03-21 14:55:50,618 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:55:50,654 p=6243 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "pg_autoctl version 1.4.2\npg_autoctl extension version 1.4\ncompiled with PostgreSQL 10.17 (VMware Postgres 10.17.0) on x86_64-redhat-linux-gnu, compiled by gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-44), 64-bit\ncompatible with Postgres 10, 11, 12, and 13"
}
2022-03-21 14:55:50,670 p=6243 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:55:50,671 p=6243 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:55:50,683 p=6243 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:55:50,693 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 14:55:50,765 p=6243 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:55:50,782 p=6243 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:55:50,793 p=6243 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:55:51,236 p=6243 u=moonja n=ansible | changed: [co7-master]
2022-03-21 14:55:51,246 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:55:51,281 p=6243 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "pg_ctl (PostgreSQL) 10.17 (VMware Postgres 10.17.0)"
}
2022-03-21 14:55:51,296 p=6243 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:55:51,296 p=6243 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:55:51,308 p=6243 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:55:51,317 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : Getting process IDs of the pg_autoctl process] *********************************************************
2022-03-21 14:55:51,986 p=6243 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 14:55:51,989 p=6243 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 14:55:52,001 p=6243 u=moonja n=ansible | ok: [co7-master]
2022-03-21 14:55:52,008 p=6243 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 14:55:52,018 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : Printing the process IDs obtained] *********************************************************************
2022-03-21 14:55:52,063 p=6243 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 14:55:52,074 p=6243 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 14:55:52,083 p=6243 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 14:55:52,098 p=6243 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 14:55:52,108 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : Stop pgautofailover service of systemd] ****************************************************************
2022-03-21 14:55:52,153 p=6243 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 14:55:52,157 p=6243 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:55:52,171 p=6243 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:55:52,188 p=6243 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:55:52,197 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:55:52,231 p=6243 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 14:55:52,247 p=6243 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 14:55:52,249 p=6243 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 14:55:52,260 p=6243 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 14:55:52,269 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : Create the monitor node] *******************************************************************************
2022-03-21 14:55:52,312 p=6243 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:55:52,313 p=6243 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:55:52,324 p=6243 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:56:55,151 p=6243 u=moonja n=ansible | fatal: [co7-master]: FAILED! => {"ansible_job_id": "771070428742.3367", "changed": true, "cmd": "( cd /var/lib/pgsql ; pg_autoctl create monitor --auth trust --ssl-self-signed --pgdata monitor )", "delta": "0:01:01.374478", "end": "2022-03-21 14:56:54.311127", "finished": 1, "msg": "non-zero return code", "rc": 12, "results_file": "/var/lib/pgsql/.ansible_async/771070428742.3367", "start": "2022-03-21 14:55:52.936649", "started": 1, "stderr": "14:55:52 3377 INFO  Using default --ssl-mode \"require\"\n14:55:52 3377 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n14:55:52 3377 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n14:55:52 3377 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n14:55:52 3377 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/monitor/server.crt -keyout /var/lib/pgsql/monitor/server.key -subj \"/CN=co7-master\"\n14:55:53 3377 INFO  Started pg_autoctl postgres service with pid 3381\n14:55:53 3381 INFO   /usr/bin/pg_autoctl do service postgres --pgdata monitor -v\n14:55:53 3377 INFO  Started pg_autoctl monitor-init service with pid 3382\n14:55:53 3382 INFO  Granting connection privileges on 192.168.0.0/24\n14:55:53 3386 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\n14:56:03 3381 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n14:56:03 3381 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n14:56:03 3381 ERROR Failed to get Postgres pid, see above for details\n14:56:03 3381 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":\n14:56:03 3381 ERROR 2022-03-21 14:55:53.471 KST [3386] FATAL:  database files are incompatible with server\n14:56:03 3381 ERROR 2022-03-21 14:55:53.471 KST [3386] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 10.17 (VMware Postgres 10.17.0).\n14:56:03 3382 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n14:56:03 3381 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"\n14:56:03 3382 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n14:56:03 3382 ERROR Failed to get Postgres pid, see above for details\n14:56:03 3382 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"\n14:56:03 3382 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details\n14:56:03 3377 ERROR pg_autoctl service monitor-init exited with exit status 12\n14:56:03 3377 INFO  Restarting service monitor-init\n14:56:03 3518 INFO  Granting connection privileges on 192.168.0.0/24\n14:56:04 3604 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\n14:56:14 3381 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n14:56:14 3381 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n14:56:14 3381 ERROR Failed to get Postgres pid, see above for details\n14:56:14 3381 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":\n14:56:14 3381 ERROR 2022-03-21 14:56:04.919 KST [3604] FATAL:  database files are incompatible with server\n14:56:14 3381 ERROR 2022-03-21 14:56:04.919 KST [3604] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 10.17 (VMware Postgres 10.17.0).\n14:56:14 3381 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"\n14:56:14 3518 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n14:56:14 3518 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n14:56:14 3518 ERROR Failed to get Postgres pid, see above for details\n14:56:14 3518 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"\n14:56:14 3518 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details\n14:56:14 3377 ERROR pg_autoctl service monitor-init exited with exit status 12\n14:56:14 3377 INFO  Restarting service monitor-init\n14:56:14 3693 INFO  Granting connection privileges on 192.168.0.0/24\n14:56:14 3695 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\n14:56:24 3693 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n14:56:24 3693 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n14:56:24 3693 ERROR Failed to get Postgres pid, see above for details\n14:56:24 3693 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"\n14:56:24 3693 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details\n14:56:24 3381 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n14:56:24 3381 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n14:56:24 3381 ERROR Failed to get Postgres pid, see above for details\n14:56:24 3381 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":\n14:56:24 3381 ERROR 2022-03-21 14:56:14.348 KST [3695] FATAL:  database files are incompatible with server\n14:56:24 3381 ERROR 2022-03-21 14:56:14.348 KST [3695] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 10.17 (VMware Postgres 10.17.0).\n14:56:24 3381 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"\n14:56:24 3377 ERROR pg_autoctl service monitor-init exited with exit status 12\n14:56:24 3377 INFO  Restarting service monitor-init\n14:56:24 3868 INFO  Granting connection privileges on 192.168.0.0/24\n14:56:24 3870 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\n14:56:34 3381 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n14:56:34 3381 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n14:56:34 3381 ERROR Failed to get Postgres pid, see above for details\n14:56:34 3381 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":\n14:56:34 3381 ERROR 2022-03-21 14:56:24.285 KST [3870] FATAL:  database files are incompatible with server\n14:56:34 3381 ERROR 2022-03-21 14:56:24.285 KST [3870] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 10.17 (VMware Postgres 10.17.0).\n14:56:34 3381 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"\n14:56:34 3868 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n14:56:34 3868 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n14:56:34 3868 ERROR Failed to get Postgres pid, see above for details\n14:56:34 3868 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"\n14:56:34 3868 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details\n14:56:34 3377 ERROR pg_autoctl service monitor-init exited with exit status 12\n14:56:34 3377 INFO  Restarting service monitor-init\n14:56:34 4043 INFO  Granting connection privileges on 192.168.0.0/24\n14:56:34 4045 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\n14:56:44 4043 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n14:56:44 3381 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n14:56:44 4043 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n14:56:44 3381 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n14:56:44 4043 ERROR Failed to get Postgres pid, see above for details\n14:56:44 3381 ERROR Failed to get Postgres pid, see above for details\n14:56:44 4043 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"\n14:56:44 3381 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":\n14:56:44 4043 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details\n14:56:44 3381 ERROR 2022-03-21 14:56:34.487 KST [4045] FATAL:  database files are incompatible with server\n14:56:44 3381 ERROR 2022-03-21 14:56:34.487 KST [4045] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 10.17 (VMware Postgres 10.17.0).\n14:56:44 3381 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"\n14:56:44 3377 ERROR pg_autoctl service monitor-init exited with exit status 12\n14:56:44 3377 INFO  Restarting service monitor-init\n14:56:44 4226 INFO  Granting connection privileges on 192.168.0.0/24\n14:56:44 4228 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\n14:56:54 4226 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n14:56:54 4226 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n14:56:54 4226 ERROR Failed to get Postgres pid, see above for details\n14:56:54 4226 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"\n14:56:54 4226 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details\n14:56:54 3381 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n14:56:54 3381 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n14:56:54 3381 ERROR Failed to get Postgres pid, see above for details\n14:56:54 3381 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":\n14:56:54 3381 ERROR 2022-03-21 14:56:44.243 KST [4228] FATAL:  database files are incompatible with server\n14:56:54 3381 ERROR 2022-03-21 14:56:44.243 KST [4228] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 10.17 (VMware Postgres 10.17.0).\n14:56:54 3381 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"\n14:56:54 3377 ERROR pg_autoctl service monitor-init exited with exit status 12\n14:56:54 3377 FATAL pg_autoctl service monitor-init has already been restarted 5 times in the last 51 seconds, stopping now\n14:56:54 3381 INFO  Postgres controller service received signal SIGTERM, terminating\n14:56:54 3377 FATAL Something went wrong in sub-process supervision, stopping now. See above for details.\n14:56:54 3377 INFO  Stop pg_autoctl", "stderr_lines": ["14:55:52 3377 INFO  Using default --ssl-mode \"require\"", "14:55:52 3377 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic", "14:55:52 3377 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.", "14:55:52 3377 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details", "14:55:52 3377 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/monitor/server.crt -keyout /var/lib/pgsql/monitor/server.key -subj \"/CN=co7-master\"", "14:55:53 3377 INFO  Started pg_autoctl postgres service with pid 3381", "14:55:53 3381 INFO   /usr/bin/pg_autoctl do service postgres --pgdata monitor -v", "14:55:53 3377 INFO  Started pg_autoctl monitor-init service with pid 3382", "14:55:53 3382 INFO  Granting connection privileges on 192.168.0.0/24", "14:55:53 3386 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *", "14:56:03 3381 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "14:56:03 3381 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "14:56:03 3381 ERROR Failed to get Postgres pid, see above for details", "14:56:03 3381 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":", "14:56:03 3381 ERROR 2022-03-21 14:55:53.471 KST [3386] FATAL:  database files are incompatible with server", "14:56:03 3381 ERROR 2022-03-21 14:55:53.471 KST [3386] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 10.17 (VMware Postgres 10.17.0).", "14:56:03 3382 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "14:56:03 3381 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"", "14:56:03 3382 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "14:56:03 3382 ERROR Failed to get Postgres pid, see above for details", "14:56:03 3382 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"", "14:56:03 3382 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details", "14:56:03 3377 ERROR pg_autoctl service monitor-init exited with exit status 12", "14:56:03 3377 INFO  Restarting service monitor-init", "14:56:03 3518 INFO  Granting connection privileges on 192.168.0.0/24", "14:56:04 3604 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *", "14:56:14 3381 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "14:56:14 3381 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "14:56:14 3381 ERROR Failed to get Postgres pid, see above for details", "14:56:14 3381 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":", "14:56:14 3381 ERROR 2022-03-21 14:56:04.919 KST [3604] FATAL:  database files are incompatible with server", "14:56:14 3381 ERROR 2022-03-21 14:56:04.919 KST [3604] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 10.17 (VMware Postgres 10.17.0).", "14:56:14 3381 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"", "14:56:14 3518 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "14:56:14 3518 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "14:56:14 3518 ERROR Failed to get Postgres pid, see above for details", "14:56:14 3518 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"", "14:56:14 3518 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details", "14:56:14 3377 ERROR pg_autoctl service monitor-init exited with exit status 12", "14:56:14 3377 INFO  Restarting service monitor-init", "14:56:14 3693 INFO  Granting connection privileges on 192.168.0.0/24", "14:56:14 3695 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *", "14:56:24 3693 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "14:56:24 3693 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "14:56:24 3693 ERROR Failed to get Postgres pid, see above for details", "14:56:24 3693 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"", "14:56:24 3693 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details", "14:56:24 3381 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "14:56:24 3381 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "14:56:24 3381 ERROR Failed to get Postgres pid, see above for details", "14:56:24 3381 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":", "14:56:24 3381 ERROR 2022-03-21 14:56:14.348 KST [3695] FATAL:  database files are incompatible with server", "14:56:24 3381 ERROR 2022-03-21 14:56:14.348 KST [3695] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 10.17 (VMware Postgres 10.17.0).", "14:56:24 3381 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"", "14:56:24 3377 ERROR pg_autoctl service monitor-init exited with exit status 12", "14:56:24 3377 INFO  Restarting service monitor-init", "14:56:24 3868 INFO  Granting connection privileges on 192.168.0.0/24", "14:56:24 3870 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *", "14:56:34 3381 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "14:56:34 3381 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "14:56:34 3381 ERROR Failed to get Postgres pid, see above for details", "14:56:34 3381 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":", "14:56:34 3381 ERROR 2022-03-21 14:56:24.285 KST [3870] FATAL:  database files are incompatible with server", "14:56:34 3381 ERROR 2022-03-21 14:56:24.285 KST [3870] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 10.17 (VMware Postgres 10.17.0).", "14:56:34 3381 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"", "14:56:34 3868 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "14:56:34 3868 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "14:56:34 3868 ERROR Failed to get Postgres pid, see above for details", "14:56:34 3868 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"", "14:56:34 3868 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details", "14:56:34 3377 ERROR pg_autoctl service monitor-init exited with exit status 12", "14:56:34 3377 INFO  Restarting service monitor-init", "14:56:34 4043 INFO  Granting connection privileges on 192.168.0.0/24", "14:56:34 4045 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *", "14:56:44 4043 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "14:56:44 3381 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "14:56:44 4043 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "14:56:44 3381 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "14:56:44 4043 ERROR Failed to get Postgres pid, see above for details", "14:56:44 3381 ERROR Failed to get Postgres pid, see above for details", "14:56:44 4043 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"", "14:56:44 3381 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":", "14:56:44 4043 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details", "14:56:44 3381 ERROR 2022-03-21 14:56:34.487 KST [4045] FATAL:  database files are incompatible with server", "14:56:44 3381 ERROR 2022-03-21 14:56:34.487 KST [4045] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 10.17 (VMware Postgres 10.17.0).", "14:56:44 3381 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"", "14:56:44 3377 ERROR pg_autoctl service monitor-init exited with exit status 12", "14:56:44 3377 INFO  Restarting service monitor-init", "14:56:44 4226 INFO  Granting connection privileges on 192.168.0.0/24", "14:56:44 4228 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *", "14:56:54 4226 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "14:56:54 4226 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "14:56:54 4226 ERROR Failed to get Postgres pid, see above for details", "14:56:54 4226 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"", "14:56:54 4226 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details", "14:56:54 3381 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "14:56:54 3381 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "14:56:54 3381 ERROR Failed to get Postgres pid, see above for details", "14:56:54 3381 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":", "14:56:54 3381 ERROR 2022-03-21 14:56:44.243 KST [4228] FATAL:  database files are incompatible with server", "14:56:54 3381 ERROR 2022-03-21 14:56:44.243 KST [4228] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 10.17 (VMware Postgres 10.17.0).", "14:56:54 3381 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"", "14:56:54 3377 ERROR pg_autoctl service monitor-init exited with exit status 12", "14:56:54 3377 FATAL pg_autoctl service monitor-init has already been restarted 5 times in the last 51 seconds, stopping now", "14:56:54 3381 INFO  Postgres controller service received signal SIGTERM, terminating", "14:56:54 3377 FATAL Something went wrong in sub-process supervision, stopping now. See above for details.", "14:56:54 3377 INFO  Stop pg_autoctl"], "stdout": "", "stdout_lines": []}
2022-03-21 14:56:55,159 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:56:55,179 p=6243 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:56:55,195 p=6243 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:56:55,207 p=6243 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:56:55,216 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of monitor instance] *******************************************************
2022-03-21 14:56:55,236 p=6243 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:56:55,253 p=6243 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:56:55,266 p=6243 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:56:55,275 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : Copy systemd service file of monitor instance] *********************************************************
2022-03-21 14:56:55,310 p=6243 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:56:55,311 p=6243 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:56:55,323 p=6243 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:56:55,334 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start systemd service of monitor instance] **************************************************
2022-03-21 14:56:55,399 p=6243 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:56:55,400 p=6243 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:56:55,413 p=6243 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:56:55,423 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:56:55,443 p=6243 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:56:55,460 p=6243 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:56:55,470 p=6243 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:56:55,480 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 14:56:55,500 p=6243 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:56:55,517 p=6243 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:56:55,528 p=6243 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:56:55,538 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the current state of monitor instance] **********************************************************
2022-03-21 14:56:55,558 p=6243 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:56:55,574 p=6243 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:56:55,584 p=6243 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:56:55,595 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:56:55,628 p=6243 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:56:55,630 p=6243 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:56:55,640 p=6243 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:56:55,650 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the current state of monitor] *******************************************************************
2022-03-21 14:56:55,683 p=6243 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:56:55,685 p=6243 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:56:55,693 p=6243 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:56:55,704 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:56:55,723 p=6243 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 14:56:55,740 p=6243 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:56:55,750 p=6243 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:56:55,760 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : Create primiary instance. It will automatically be set by the monitor as the primary node with read-write capability (PGDATA = /var/lib/pgpsql/ha)] ***
2022-03-21 14:56:55,791 p=6243 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:56:55,803 p=6243 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:57:02,511 p=6243 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:57:02,519 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:57:02,554 p=6243 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "84257077516.7056",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ;  pg_autoctl create postgres --pgdata \"ha\" --auth trust --ssl-self-signed --username ha-admin --dbname \"appdb\" --hostname \"co7-node01\" --pgctl /bin/pg_ctl --monitor 'postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require' )",
        "delta": "0:00:00.236752",
        "end": "2022-03-21 14:56:56.804036",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/84257077516.7056",
        "start": "2022-03-21 14:56:56.567284",
        "started": 1,
        "stderr": "14:56:56 7066 INFO  Using default --ssl-mode \"require\"\n14:56:56 7066 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n14:56:56 7066 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n14:56:56 7066 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n14:56:56 7066 INFO  Started pg_autoctl postgres service with pid 7069\n14:56:56 7066 INFO  Started pg_autoctl node-init service with pid 7070\n14:56:56 7069 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v\n14:56:56 7070 FATAL The state file \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\" exists and there's no init in progress\n14:56:56 7070 INFO  HINT: use `pg_autoctl run` to start the service.\n14:56:56 7066 WARN  pg_autoctl service node-init exited with exit status 0\n14:56:56 7069 INFO  Postgres controller service received signal SIGTERM, terminating\n14:56:56 7066 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "14:56:56 7066 INFO  Using default --ssl-mode \"require\"",
            "14:56:56 7066 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "14:56:56 7066 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "14:56:56 7066 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "14:56:56 7066 INFO  Started pg_autoctl postgres service with pid 7069",
            "14:56:56 7066 INFO  Started pg_autoctl node-init service with pid 7070",
            "14:56:56 7069 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v",
            "14:56:56 7070 FATAL The state file \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\" exists and there's no init in progress",
            "14:56:56 7070 INFO  HINT: use `pg_autoctl run` to start the service.",
            "14:56:56 7066 WARN  pg_autoctl service node-init exited with exit status 0",
            "14:56:56 7069 INFO  Postgres controller service received signal SIGTERM, terminating",
            "14:56:56 7066 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": [],
        "warnings": [
            "Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually"
        ]
    }
}
2022-03-21 14:57:02,554 p=6243 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:57:02,563 p=6243 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:57:02,573 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of pirmary instance] *******************************************************
2022-03-21 14:57:02,605 p=6243 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:57:02,615 p=6243 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:57:08,886 p=6243 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:57:08,898 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:57:08,950 p=6243 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "886843836197.7436",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl -q show systemd --pgdata ~postgres/ha > pgautofailover.service )",
        "delta": "0:00:00.032611",
        "end": "2022-03-21 14:57:03.266663",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/886843836197.7436",
        "start": "2022-03-21 14:57:03.234052",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 14:57:08,951 p=6243 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:57:08,967 p=6243 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:57:08,978 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : Copy primary systemd service file of primary instance] *************************************************
2022-03-21 14:57:09,014 p=6243 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:57:09,025 p=6243 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:57:09,449 p=6243 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:57:09,460 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start primary systemd service of primary instance] ******************************************
2022-03-21 14:57:09,499 p=6243 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:57:09,511 p=6243 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:57:10,590 p=6243 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:57:10,623 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 14:57:10,699 p=6243 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:57:10,711 p=6243 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:57:11,563 p=6243 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 14:57:11,574 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the state of primary instance] ******************************************************************
2022-03-21 14:57:11,608 p=6243 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:57:11,619 p=6243 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:57:14,506 p=6243 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": true, "cmd": "( source ~/.bash_profile ; pg_autoctl show state )", "delta": "0:00:02.454614", "end": "2022-03-21 14:57:14.523715", "msg": "non-zero return code", "rc": 6, "start": "2022-03-21 14:57:12.069101", "stderr": "14:57:12 8260 WARN  Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\", retrying until the server is ready\n14:57:14 8260 ERROR Connection to database failed: could not connect to server: Connection refused\n14:57:14 8260 ERROR \tIs the server running on host \"co7-master\" (192.168.0.81) and accepting\n14:57:14 8260 ERROR \tTCP/IP connections on port 5432?\n14:57:14 8260 ERROR Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\" after 26 attempts in 2 seconds, pg_autoctl stops retrying now\n14:57:14 8260 ERROR Failed to retrieve current state from the monitor", "stderr_lines": ["14:57:12 8260 WARN  Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\", retrying until the server is ready", "14:57:14 8260 ERROR Connection to database failed: could not connect to server: Connection refused", "14:57:14 8260 ERROR \tIs the server running on host \"co7-master\" (192.168.0.81) and accepting", "14:57:14 8260 ERROR \tTCP/IP connections on port 5432?", "14:57:14 8260 ERROR Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\" after 26 attempts in 2 seconds, pg_autoctl stops retrying now", "14:57:14 8260 ERROR Failed to retrieve current state from the monitor"], "stdout": "", "stdout_lines": []}
2022-03-21 14:57:14,516 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:57:14,535 p=6243 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 14:57:14,544 p=6243 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 14:57:14,554 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : Create secondary instance. It will automatically be set by the monitor as the secondary  node with read-write capability (PGDATA = /var/lib/pgpsql/ha)] ***
2022-03-21 14:57:21,134 p=6243 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:57:21,135 p=6243 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:57:21,143 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:57:21,167 p=6243 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "ansible_job_id": "409677627999.6199",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ;  pg_autoctl create postgres --pgdata \"ha\" --auth trust --ssl-self-signed --username ha-admin --dbname \"appdb\" --hostname \"co7-node02\" --pgctl /bin/pg_ctl --monitor 'postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require' )",
        "delta": "0:00:00.828655",
        "end": "2022-03-21 14:57:16.209703",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/409677627999.6199",
        "start": "2022-03-21 14:57:15.381048",
        "started": 1,
        "stderr": "14:57:15 6209 INFO  Using default --ssl-mode \"require\"\n14:57:15 6209 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n14:57:15 6209 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n14:57:15 6209 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n14:57:15 6209 INFO  Started pg_autoctl postgres service with pid 6212\n14:57:15 6212 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v\n14:57:15 6209 INFO  Started pg_autoctl node-init service with pid 6213\n14:57:15 6213 FATAL The state file \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\" exists and there's no init in progress\n14:57:15 6213 INFO  HINT: use `pg_autoctl run` to start the service.\n14:57:15 6209 WARN  pg_autoctl service node-init exited with exit status 0\n14:57:15 6212 INFO  Postgres controller service received signal SIGTERM, terminating\n14:57:15 6209 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "14:57:15 6209 INFO  Using default --ssl-mode \"require\"",
            "14:57:15 6209 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "14:57:15 6209 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "14:57:15 6209 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "14:57:15 6209 INFO  Started pg_autoctl postgres service with pid 6212",
            "14:57:15 6212 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v",
            "14:57:15 6209 INFO  Started pg_autoctl node-init service with pid 6213",
            "14:57:15 6213 FATAL The state file \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\" exists and there's no init in progress",
            "14:57:15 6213 INFO  HINT: use `pg_autoctl run` to start the service.",
            "14:57:15 6209 WARN  pg_autoctl service node-init exited with exit status 0",
            "14:57:15 6212 INFO  Postgres controller service received signal SIGTERM, terminating",
            "14:57:15 6209 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": [],
        "warnings": [
            "Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually"
        ]
    }
}
2022-03-21 14:57:21,180 p=6243 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "ansible_job_id": "862670250387.5388",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ;  pg_autoctl create postgres --pgdata \"ha\" --auth trust --ssl-self-signed --username ha-admin --dbname \"appdb\" --hostname \"co7-node03\" --pgctl /bin/pg_ctl --monitor 'postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require' )",
        "delta": "0:00:00.239500",
        "end": "2022-03-21 14:57:15.622472",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/862670250387.5388",
        "start": "2022-03-21 14:57:15.382972",
        "started": 1,
        "stderr": "14:57:15 5398 INFO  Using default --ssl-mode \"require\"\n14:57:15 5398 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n14:57:15 5398 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n14:57:15 5398 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n14:57:15 5398 INFO  Started pg_autoctl postgres service with pid 5401\n14:57:15 5401 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v\n14:57:15 5398 INFO  Started pg_autoctl node-init service with pid 5402\n14:57:15 5402 FATAL The state file \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\" exists and there's no init in progress\n14:57:15 5402 INFO  HINT: use `pg_autoctl run` to start the service.\n14:57:15 5398 WARN  pg_autoctl service node-init exited with exit status 0\n14:57:15 5401 INFO  Postgres controller service received signal SIGTERM, terminating\n14:57:15 5398 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "14:57:15 5398 INFO  Using default --ssl-mode \"require\"",
            "14:57:15 5398 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "14:57:15 5398 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "14:57:15 5398 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "14:57:15 5398 INFO  Started pg_autoctl postgres service with pid 5401",
            "14:57:15 5401 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v",
            "14:57:15 5398 INFO  Started pg_autoctl node-init service with pid 5402",
            "14:57:15 5402 FATAL The state file \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\" exists and there's no init in progress",
            "14:57:15 5402 INFO  HINT: use `pg_autoctl run` to start the service.",
            "14:57:15 5398 WARN  pg_autoctl service node-init exited with exit status 0",
            "14:57:15 5401 INFO  Postgres controller service received signal SIGTERM, terminating",
            "14:57:15 5398 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": [],
        "warnings": [
            "Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually"
        ]
    }
}
2022-03-21 14:57:21,191 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of secondary instance] *****************************************************
2022-03-21 14:57:27,737 p=6243 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:57:27,737 p=6243 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:57:27,746 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 14:57:27,769 p=6243 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "ansible_job_id": "276402495157.6578",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl -q show systemd --pgdata ~postgres/ha > pgautofailover.service )",
        "delta": "0:00:00.032453",
        "end": "2022-03-21 14:57:22.014252",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/276402495157.6578",
        "start": "2022-03-21 14:57:21.981799",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 14:57:27,781 p=6243 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "ansible_job_id": "501304053455.5767",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl -q show systemd --pgdata ~postgres/ha > pgautofailover.service )",
        "delta": "0:00:00.032443",
        "end": "2022-03-21 14:57:22.014268",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/501304053455.5767",
        "start": "2022-03-21 14:57:21.981825",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 14:57:27,793 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : Copy secondary systemd service file of secondary instance] *********************************************
2022-03-21 14:57:28,291 p=6243 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:57:28,293 p=6243 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:57:28,305 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start secondary systemd service of secondary instance] **************************************
2022-03-21 14:57:29,173 p=6243 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:57:29,176 p=6243 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:57:29,187 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 14:57:29,788 p=6243 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 14:57:29,788 p=6243 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 14:57:29,798 p=6243 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the state of secondary instance] ****************************************************************
2022-03-21 14:57:32,730 p=6243 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "cmd": "( source ~/.bash_profile ; pg_autoctl show state )", "delta": "0:00:02.337784", "end": "2022-03-21 14:57:32.632088", "msg": "non-zero return code", "rc": 6, "start": "2022-03-21 14:57:30.294304", "stderr": "14:57:30 6591 WARN  Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\", retrying until the server is ready\n14:57:32 6591 ERROR Connection to database failed: could not connect to server: Connection refused\n14:57:32 6591 ERROR \tIs the server running on host \"co7-master\" (192.168.0.81) and accepting\n14:57:32 6591 ERROR \tTCP/IP connections on port 5432?\n14:57:32 6591 ERROR Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\" after 27 attempts in 2 seconds, pg_autoctl stops retrying now\n14:57:32 6591 ERROR Failed to retrieve current state from the monitor", "stderr_lines": ["14:57:30 6591 WARN  Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\", retrying until the server is ready", "14:57:32 6591 ERROR Connection to database failed: could not connect to server: Connection refused", "14:57:32 6591 ERROR \tIs the server running on host \"co7-master\" (192.168.0.81) and accepting", "14:57:32 6591 ERROR \tTCP/IP connections on port 5432?", "14:57:32 6591 ERROR Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\" after 27 attempts in 2 seconds, pg_autoctl stops retrying now", "14:57:32 6591 ERROR Failed to retrieve current state from the monitor"], "stdout": "", "stdout_lines": []}
2022-03-21 14:57:32,731 p=6243 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "cmd": "( source ~/.bash_profile ; pg_autoctl show state )", "delta": "0:00:02.337619", "end": "2022-03-21 14:57:32.632357", "msg": "non-zero return code", "rc": 6, "start": "2022-03-21 14:57:30.294738", "stderr": "14:57:30 7402 WARN  Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\", retrying until the server is ready\n14:57:32 7402 ERROR Connection to database failed: could not connect to server: Connection refused\n14:57:32 7402 ERROR \tIs the server running on host \"co7-master\" (192.168.0.81) and accepting\n14:57:32 7402 ERROR \tTCP/IP connections on port 5432?\n14:57:32 7402 ERROR Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\" after 27 attempts in 2 seconds, pg_autoctl stops retrying now\n14:57:32 7402 ERROR Failed to retrieve current state from the monitor", "stderr_lines": ["14:57:30 7402 WARN  Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\", retrying until the server is ready", "14:57:32 7402 ERROR Connection to database failed: could not connect to server: Connection refused", "14:57:32 7402 ERROR \tIs the server running on host \"co7-master\" (192.168.0.81) and accepting", "14:57:32 7402 ERROR \tTCP/IP connections on port 5432?", "14:57:32 7402 ERROR Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\" after 27 attempts in 2 seconds, pg_autoctl stops retrying now", "14:57:32 7402 ERROR Failed to retrieve current state from the monitor"], "stdout": "", "stdout_lines": []}
2022-03-21 14:57:32,733 p=6243 u=moonja n=ansible | PLAY RECAP *************************************************************************************************************************
2022-03-21 14:57:32,733 p=6243 u=moonja n=ansible | co7-master                 : ok=16   changed=7    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2022-03-21 14:57:32,733 p=6243 u=moonja n=ansible | co7-node01                 : ok=19   changed=11   unreachable=0    failed=1    skipped=16   rescued=0    ignored=0   
2022-03-21 14:57:32,733 p=6243 u=moonja n=ansible | co7-node02                 : ok=19   changed=11   unreachable=0    failed=1    skipped=25   rescued=0    ignored=0   
2022-03-21 14:57:32,734 p=6243 u=moonja n=ansible | co7-node03                 : ok=19   changed=11   unreachable=0    failed=1    skipped=25   rescued=0    ignored=0   
2022-03-21 15:00:52,617 p=10365 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from 
ansible-core in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 15:00:52,848 p=10365 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 
2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 15:00:52,853 p=10365 u=moonja n=ansible | [WARNING]: While constructing a mapping from /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/install.yml, line 308,
column 3, found a duplicate dict key (when). Using last defined value only.

2022-03-21 15:00:52,900 p=10365 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/upgrade.yml is empty and had no tasks to include

2022-03-21 15:00:52,915 p=10365 u=moonja n=ansible | PLAY [all] *************************************************************************************************************************
2022-03-21 15:00:52,942 p=10365 u=moonja n=ansible | TASK [Gathering Facts] *************************************************************************************************************
2022-03-21 15:00:55,148 p=10365 u=moonja n=ansible | ok: [co7-master]
2022-03-21 15:00:55,215 p=10365 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 15:00:55,218 p=10365 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 15:00:55,419 p=10365 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 15:00:55,435 p=10365 u=moonja n=ansible | TASK [pgfailover-postgres : Disable port from public zone] *************************************************************************
2022-03-21 15:00:56,390 p=10365 u=moonja n=ansible | changed: [co7-node01] => (item=5432)
2022-03-21 15:00:56,391 p=10365 u=moonja n=ansible | changed: [co7-node03] => (item=5432)
2022-03-21 15:00:56,391 p=10365 u=moonja n=ansible | changed: [co7-master] => (item=5432)
2022-03-21 15:00:56,393 p=10365 u=moonja n=ansible | changed: [co7-node02] => (item=5432)
2022-03-21 15:00:56,402 p=10365 u=moonja n=ansible | TASK [pgfailover-postgres : Disable IP Addresses in whitelist] *********************************************************************
2022-03-21 15:00:57,241 p=10365 u=moonja n=ansible | changed: [co7-node03] => (item=co7-master)
2022-03-21 15:00:57,254 p=10365 u=moonja n=ansible | changed: [co7-master] => (item=co7-master)
2022-03-21 15:00:57,265 p=10365 u=moonja n=ansible | changed: [co7-node01] => (item=co7-master)
2022-03-21 15:00:57,287 p=10365 u=moonja n=ansible | changed: [co7-node02] => (item=co7-master)
2022-03-21 15:00:57,858 p=10365 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node01)
2022-03-21 15:00:57,865 p=10365 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node01)
2022-03-21 15:00:57,889 p=10365 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node01)
2022-03-21 15:00:57,901 p=10365 u=moonja n=ansible | changed: [co7-master] => (item=co7-node01)
2022-03-21 15:00:58,484 p=10365 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node02)
2022-03-21 15:00:58,497 p=10365 u=moonja n=ansible | changed: [co7-master] => (item=co7-node02)
2022-03-21 15:00:58,514 p=10365 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node02)
2022-03-21 15:00:58,539 p=10365 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node02)
2022-03-21 15:00:59,093 p=10365 u=moonja n=ansible | changed: [co7-master] => (item=co7-node03)
2022-03-21 15:00:59,170 p=10365 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node03)
2022-03-21 15:00:59,175 p=10365 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node03)
2022-03-21 15:00:59,180 p=10365 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node03)
2022-03-21 15:00:59,190 p=10365 u=moonja n=ansible | TASK [pgfailover-postgres : Bounce firewalld] **************************************************************************************
2022-03-21 15:01:01,101 p=10365 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:01:01,113 p=10365 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:01:01,118 p=10365 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:01:01,173 p=10365 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:01:01,182 p=10365 u=moonja n=ansible | TASK [pgfailover-postgres : Stop and disable firewalld.] ***************************************************************************
2022-03-21 15:01:02,720 p=10365 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:01:02,733 p=10365 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:01:02,748 p=10365 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:01:02,757 p=10365 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:01:02,767 p=10365 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 15:01:02,811 p=10365 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:01:02,811 p=10365 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:01:02,822 p=10365 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:01:03,463 p=10365 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:01:03,473 p=10365 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 15:01:03,516 p=10365 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:01:03,517 p=10365 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:01:03,528 p=10365 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:01:03,966 p=10365 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:01:03,978 p=10365 u=moonja n=ansible | TASK [pgfailover-postgres : Getting process IDs of the pg_autoctl process] *********************************************************
2022-03-21 15:01:04,679 p=10365 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 15:01:04,679 p=10365 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 15:01:04,688 p=10365 u=moonja n=ansible | ok: [co7-master]
2022-03-21 15:01:04,690 p=10365 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 15:01:04,700 p=10365 u=moonja n=ansible | TASK [pgfailover-postgres : Stop pgautofailover service of systemd] ****************************************************************
2022-03-21 15:01:04,774 p=10365 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:01:05,674 p=10365 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:01:05,687 p=10365 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:01:05,690 p=10365 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:01:05,700 p=10365 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] ************************************************************************
2022-03-21 15:01:05,719 p=10365 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:01:05,735 p=10365 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:01:06,377 p=10365 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:01:06,378 p=10365 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:01:06,387 p=10365 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start secondary systemd service of secondary instance] **************************************
2022-03-21 15:01:06,406 p=10365 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:01:06,421 p=10365 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:01:07,143 p=10365 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:01:07,163 p=10365 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:01:07,172 p=10365 u=moonja n=ansible | TASK [pgfailover-postgres : Delete secondary systemd service file of secondary instance] *******************************************
2022-03-21 15:01:07,194 p=10365 u=moonja n=ansible | skipping: [co7-master] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:01:07,195 p=10365 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:01:07,199 p=10365 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:01:07,203 p=10365 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:01:07,205 p=10365 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:01:07,210 p=10365 u=moonja n=ansible | skipping: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:01:07,211 p=10365 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:01:07,217 p=10365 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:01:07,217 p=10365 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:01:07,217 p=10365 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:01:07,875 p=10365 u=moonja n=ansible | changed: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 15:01:07,876 p=10365 u=moonja n=ansible | changed: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 15:01:08,362 p=10365 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 15:01:08,363 p=10365 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 15:01:08,877 p=10365 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 15:01:08,878 p=10365 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 15:01:09,386 p=10365 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.config)
2022-03-21 15:01:09,387 p=10365 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.config)
2022-03-21 15:01:09,855 p=10365 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.ansible)
2022-03-21 15:01:09,856 p=10365 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.ansible)
2022-03-21 15:01:09,868 p=10365 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] ************************************************************************
2022-03-21 15:01:09,887 p=10365 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:01:09,915 p=10365 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:01:09,926 p=10365 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:01:10,321 p=10365 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:01:10,330 p=10365 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start primary systemd service of primary instance] ******************************************
2022-03-21 15:01:10,349 p=10365 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:01:10,377 p=10365 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:01:10,388 p=10365 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:01:11,129 p=10365 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:01:11,139 p=10365 u=moonja n=ansible | TASK [pgfailover-postgres : Delete primary systemd service file of secondary instance] *********************************************
2022-03-21 15:01:11,161 p=10365 u=moonja n=ansible | skipping: [co7-master] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:01:11,163 p=10365 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:01:11,167 p=10365 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:01:11,173 p=10365 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:01:11,173 p=10365 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:01:11,198 p=10365 u=moonja n=ansible | skipping: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:01:11,199 p=10365 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:01:11,201 p=10365 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:01:11,204 p=10365 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:01:11,204 p=10365 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:01:11,210 p=10365 u=moonja n=ansible | skipping: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:01:11,216 p=10365 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:01:11,216 p=10365 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:01:11,217 p=10365 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:01:11,218 p=10365 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:01:11,641 p=10365 u=moonja n=ansible | changed: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 15:01:12,075 p=10365 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 15:01:12,517 p=10365 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 15:01:12,941 p=10365 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.config)
2022-03-21 15:01:13,392 p=10365 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.ansible)
2022-03-21 15:01:13,403 p=10365 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] ************************************************************************
2022-03-21 15:01:13,435 p=10365 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:01:13,450 p=10365 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:01:13,461 p=10365 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:01:13,832 p=10365 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:01:13,842 p=10365 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start systemd service of monitor instance] **************************************************
2022-03-21 15:01:13,874 p=10365 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:01:13,888 p=10365 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:01:13,899 p=10365 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:01:14,512 p=10365 u=moonja n=ansible | fatal: [co7-master]: FAILED! => {"changed": false, "msg": "Could not find the requested service pgautofailover: host"}
2022-03-21 15:01:14,512 p=10365 u=moonja n=ansible | ...ignoring
2022-03-21 15:01:14,522 p=10365 u=moonja n=ansible | TASK [pgfailover-postgres : Delete primary systemd service file of secondary instance] *********************************************
2022-03-21 15:01:14,559 p=10365 u=moonja n=ansible | skipping: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:01:14,560 p=10365 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:01:14,563 p=10365 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:01:14,566 p=10365 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:01:14,567 p=10365 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:01:14,572 p=10365 u=moonja n=ansible | skipping: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:01:14,573 p=10365 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:01:14,579 p=10365 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:01:14,579 p=10365 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:01:14,579 p=10365 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:01:14,588 p=10365 u=moonja n=ansible | skipping: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:01:14,593 p=10365 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:01:14,595 p=10365 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:01:14,596 p=10365 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:01:14,596 p=10365 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:01:15,058 p=10365 u=moonja n=ansible | ok: [co7-master] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 15:01:15,569 p=10365 u=moonja n=ansible | ok: [co7-master] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 15:01:16,034 p=10365 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 15:01:16,544 p=10365 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/.config)
2022-03-21 15:01:16,966 p=10365 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/.ansible)
2022-03-21 15:01:16,976 p=10365 u=moonja n=ansible | TASK [pgfailover-postgres : Uninstall VMware Postgres on all hosts as root] ********************************************************
2022-03-21 15:01:45,419 p=10365 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:01:46,521 p=10365 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:01:47,029 p=10365 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:01:47,893 p=10365 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:01:47,903 p=10365 u=moonja n=ansible | TASK [pgfailover-postgres : Copy the vmwawre-postgres rpm file to all hosts in cluster] ********************************************
2022-03-21 15:01:48,341 p=10365 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:01:48,367 p=10365 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:01:48,375 p=10365 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:01:48,392 p=10365 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:01:48,436 p=10365 u=moonja n=ansible | PLAY RECAP *************************************************************************************************************************
2022-03-21 15:01:48,436 p=10365 u=moonja n=ansible | co7-master                 : ok=13   changed=10   unreachable=0    failed=0    skipped=7    rescued=0    ignored=1   
2022-03-21 15:01:48,436 p=10365 u=moonja n=ansible | co7-node01                 : ok=12   changed=10   unreachable=0    failed=0    skipped=8    rescued=0    ignored=0   
2022-03-21 15:01:48,436 p=10365 u=moonja n=ansible | co7-node02                 : ok=12   changed=10   unreachable=0    failed=0    skipped=8    rescued=0    ignored=0   
2022-03-21 15:01:48,437 p=10365 u=moonja n=ansible | co7-node03                 : ok=12   changed=10   unreachable=0    failed=0    skipped=8    rescued=0    ignored=0   
2022-03-21 15:03:51,675 p=11813 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from 
ansible-core in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 15:03:51,896 p=11813 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 
2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 15:03:51,900 p=11813 u=moonja n=ansible | [WARNING]: While constructing a mapping from /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/install.yml, line 308,
column 3, found a duplicate dict key (when). Using last defined value only.

2022-03-21 15:03:51,960 p=11813 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/upgrade.yml is empty and had no tasks to include

2022-03-21 15:03:51,976 p=11813 u=moonja n=ansible | PLAY [all] *************************************************************************************************************************
2022-03-21 15:03:52,006 p=11813 u=moonja n=ansible | TASK [Gathering Facts] *************************************************************************************************************
2022-03-21 15:03:54,186 p=11813 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 15:03:54,200 p=11813 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 15:03:54,257 p=11813 u=moonja n=ansible | ok: [co7-master]
2022-03-21 15:03:54,308 p=11813 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 15:03:54,324 p=11813 u=moonja n=ansible | TASK [pgfailover-postgres : Disable port from public zone] *************************************************************************
2022-03-21 15:03:55,177 p=11813 u=moonja n=ansible | failed: [co7-node01] (item=5432) => {"ansible_loop_var": "item", "changed": false, "item": "5432", "msg": "firewall is not currently running, unable to perform immediate actions without a running firewall daemon"}
2022-03-21 15:03:55,178 p=11813 u=moonja n=ansible | failed: [co7-node03] (item=5432) => {"ansible_loop_var": "item", "changed": false, "item": "5432", "msg": "firewall is not currently running, unable to perform immediate actions without a running firewall daemon"}
2022-03-21 15:03:55,179 p=11813 u=moonja n=ansible | failed: [co7-master] (item=5432) => {"ansible_loop_var": "item", "changed": false, "item": "5432", "msg": "firewall is not currently running, unable to perform immediate actions without a running firewall daemon"}
2022-03-21 15:03:55,179 p=11813 u=moonja n=ansible | ...ignoring
2022-03-21 15:03:55,179 p=11813 u=moonja n=ansible | ...ignoring
2022-03-21 15:03:55,180 p=11813 u=moonja n=ansible | ...ignoring
2022-03-21 15:03:55,183 p=11813 u=moonja n=ansible | failed: [co7-node02] (item=5432) => {"ansible_loop_var": "item", "changed": false, "item": "5432", "msg": "firewall is not currently running, unable to perform immediate actions without a running firewall daemon"}
2022-03-21 15:03:55,184 p=11813 u=moonja n=ansible | ...ignoring
2022-03-21 15:03:55,193 p=11813 u=moonja n=ansible | TASK [pgfailover-postgres : Disable IP Addresses in whitelist] *********************************************************************
2022-03-21 15:03:55,882 p=11813 u=moonja n=ansible | ok: [co7-master] => (item=co7-master)
2022-03-21 15:03:55,883 p=11813 u=moonja n=ansible | ok: [co7-node02] => (item=co7-master)
2022-03-21 15:03:55,885 p=11813 u=moonja n=ansible | ok: [co7-node01] => (item=co7-master)
2022-03-21 15:03:55,893 p=11813 u=moonja n=ansible | ok: [co7-node03] => (item=co7-master)
2022-03-21 15:03:56,433 p=11813 u=moonja n=ansible | ok: [co7-node02] => (item=co7-node01)
2022-03-21 15:03:56,436 p=11813 u=moonja n=ansible | ok: [co7-master] => (item=co7-node01)
2022-03-21 15:03:56,445 p=11813 u=moonja n=ansible | ok: [co7-node01] => (item=co7-node01)
2022-03-21 15:03:56,456 p=11813 u=moonja n=ansible | ok: [co7-node03] => (item=co7-node01)
2022-03-21 15:03:57,004 p=11813 u=moonja n=ansible | ok: [co7-node02] => (item=co7-node02)
2022-03-21 15:03:57,004 p=11813 u=moonja n=ansible | ok: [co7-master] => (item=co7-node02)
2022-03-21 15:03:57,019 p=11813 u=moonja n=ansible | ok: [co7-node01] => (item=co7-node02)
2022-03-21 15:03:57,029 p=11813 u=moonja n=ansible | ok: [co7-node03] => (item=co7-node02)
2022-03-21 15:03:57,553 p=11813 u=moonja n=ansible | ok: [co7-master] => (item=co7-node03)
2022-03-21 15:03:57,557 p=11813 u=moonja n=ansible | ok: [co7-node02] => (item=co7-node03)
2022-03-21 15:03:57,561 p=11813 u=moonja n=ansible | ok: [co7-node01] => (item=co7-node03)
2022-03-21 15:03:57,578 p=11813 u=moonja n=ansible | ok: [co7-node03] => (item=co7-node03)
2022-03-21 15:03:57,589 p=11813 u=moonja n=ansible | TASK [pgfailover-postgres : Bounce firewalld] **************************************************************************************
2022-03-21 15:03:58,714 p=11813 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:03:58,737 p=11813 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:03:58,738 p=11813 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:03:58,738 p=11813 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:03:58,749 p=11813 u=moonja n=ansible | TASK [pgfailover-postgres : Stop and disable firewalld.] ***************************************************************************
2022-03-21 15:04:00,258 p=11813 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:04:00,259 p=11813 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:04:00,267 p=11813 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:04:00,269 p=11813 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:04:00,278 p=11813 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 15:04:00,322 p=11813 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:04:00,323 p=11813 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:04:00,333 p=11813 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:04:00,994 p=11813 u=moonja n=ansible | [WARNING]: Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues
when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually

2022-03-21 15:04:00,995 p=11813 u=moonja n=ansible | fatal: [co7-master]: FAILED! => {"changed": true, "cmd": "( pg_autoctl version )", "delta": "0:00:00.027999", "end": "2022-03-21 15:04:01.132122", "msg": "non-zero return code", "rc": 127, "start": "2022-03-21 15:04:01.104123", "stderr": "/bin/sh: pg_autoctl: command not found", "stderr_lines": ["/bin/sh: pg_autoctl: command not found"], "stdout": "", "stdout_lines": []}
2022-03-21 15:04:00,995 p=11813 u=moonja n=ansible | ...ignoring
2022-03-21 15:04:01,004 p=11813 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 15:04:01,035 p=11813 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:04:01,049 p=11813 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:04:01,061 p=11813 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:04:01,513 p=11813 u=moonja n=ansible | fatal: [co7-master]: FAILED! => {"changed": true, "cmd": "( pg_ctl -V )", "delta": "0:00:00.027964", "end": "2022-03-21 15:04:01.651868", "msg": "non-zero return code", "rc": 127, "start": "2022-03-21 15:04:01.623904", "stderr": "/bin/sh: pg_ctl: command not found", "stderr_lines": ["/bin/sh: pg_ctl: command not found"], "stdout": "", "stdout_lines": []}
2022-03-21 15:04:01,523 p=11813 u=moonja n=ansible | TASK [pgfailover-postgres : Getting process IDs of the pg_autoctl process] *********************************************************
2022-03-21 15:04:02,206 p=11813 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 15:04:02,213 p=11813 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 15:04:02,213 p=11813 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 15:04:02,224 p=11813 u=moonja n=ansible | TASK [pgfailover-postgres : Stop pgautofailover service of systemd] ****************************************************************
2022-03-21 15:04:02,259 p=11813 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:04:02,272 p=11813 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:04:02,288 p=11813 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:04:02,298 p=11813 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] ************************************************************************
2022-03-21 15:04:02,317 p=11813 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:04:03,032 p=11813 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 15:04:03,033 p=11813 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 15:04:03,040 p=11813 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start secondary systemd service of secondary instance] **************************************
2022-03-21 15:04:03,059 p=11813 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:04:04,018 p=11813 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": false, "msg": "Could not find the requested service pgautofailover: host"}
2022-03-21 15:04:04,018 p=11813 u=moonja n=ansible | ...ignoring
2022-03-21 15:04:04,019 p=11813 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": false, "msg": "Could not find the requested service pgautofailover: host"}
2022-03-21 15:04:04,019 p=11813 u=moonja n=ansible | ...ignoring
2022-03-21 15:04:04,029 p=11813 u=moonja n=ansible | TASK [pgfailover-postgres : Delete secondary systemd service file of secondary instance] *******************************************
2022-03-21 15:04:04,050 p=11813 u=moonja n=ansible | skipping: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:04:04,052 p=11813 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:04:04,055 p=11813 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:04:04,059 p=11813 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:04:04,060 p=11813 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:04:04,061 p=11813 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql) 
2022-03-21 15:04:04,848 p=11813 u=moonja n=ansible | ok: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 15:04:04,849 p=11813 u=moonja n=ansible | ok: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 15:04:05,337 p=11813 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 15:04:05,341 p=11813 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 15:04:05,738 p=11813 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 15:04:05,761 p=11813 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 15:04:06,161 p=11813 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/.config)
2022-03-21 15:04:06,172 p=11813 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/.config)
2022-03-21 15:04:06,576 p=11813 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.ansible)
2022-03-21 15:04:06,578 p=11813 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.ansible)
2022-03-21 15:04:11,123 p=11813 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql)
2022-03-21 15:04:12,140 p=11813 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql)
2022-03-21 15:04:12,158 p=11813 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] ************************************************************************
2022-03-21 15:04:12,191 p=11813 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:04:12,202 p=11813 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:04:12,609 p=11813 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 15:04:12,620 p=11813 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start primary systemd service of primary instance] ******************************************
2022-03-21 15:04:12,653 p=11813 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:04:12,664 p=11813 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:04:13,232 p=11813 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": false, "msg": "Could not find the requested service pgautofailover: host"}
2022-03-21 15:04:13,232 p=11813 u=moonja n=ansible | ...ignoring
2022-03-21 15:04:13,242 p=11813 u=moonja n=ansible | TASK [pgfailover-postgres : Delete primary systemd service file of secondary instance] *********************************************
2022-03-21 15:04:13,280 p=11813 u=moonja n=ansible | skipping: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:04:13,281 p=11813 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:04:13,283 p=11813 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:04:13,285 p=11813 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:04:13,288 p=11813 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:04:13,289 p=11813 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql) 
2022-03-21 15:04:13,291 p=11813 u=moonja n=ansible | skipping: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:04:13,298 p=11813 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:04:13,302 p=11813 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:04:13,302 p=11813 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:04:13,302 p=11813 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:04:13,303 p=11813 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql) 
2022-03-21 15:04:13,757 p=11813 u=moonja n=ansible | ok: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 15:04:14,180 p=11813 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 15:04:14,586 p=11813 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 15:04:15,016 p=11813 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/.config)
2022-03-21 15:04:15,425 p=11813 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.ansible)
2022-03-21 15:04:18,827 p=11813 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql)
2022-03-21 15:04:18,846 p=11813 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] ************************************************************************
2022-03-21 15:04:18,916 p=11813 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:04:18,917 p=11813 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:04:18,928 p=11813 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:04:18,938 p=11813 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start systemd service of monitor instance] **************************************************
2022-03-21 15:04:18,958 p=11813 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:04:18,974 p=11813 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:04:18,987 p=11813 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:04:18,996 p=11813 u=moonja n=ansible | TASK [pgfailover-postgres : Delete primary systemd service file of secondary instance] *********************************************
2022-03-21 15:04:19,018 p=11813 u=moonja n=ansible | skipping: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:04:19,019 p=11813 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:04:19,020 p=11813 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:04:19,023 p=11813 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:04:19,028 p=11813 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:04:19,029 p=11813 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql) 
2022-03-21 15:04:19,033 p=11813 u=moonja n=ansible | skipping: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:04:19,034 p=11813 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:04:19,036 p=11813 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:04:19,038 p=11813 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:04:19,041 p=11813 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:04:19,041 p=11813 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql) 
2022-03-21 15:04:19,051 p=11813 u=moonja n=ansible | skipping: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:04:19,054 p=11813 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:04:19,055 p=11813 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:04:19,058 p=11813 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:04:19,060 p=11813 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:04:19,061 p=11813 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql) 
2022-03-21 15:04:19,072 p=11813 u=moonja n=ansible | TASK [pgfailover-postgres : Uninstall VMware Postgres on all hosts as root] ********************************************************
2022-03-21 15:04:25,892 p=11813 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 15:04:26,485 p=11813 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 15:04:26,640 p=11813 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 15:04:26,650 p=11813 u=moonja n=ansible | TASK [pgfailover-postgres : Copy the vmwawre-postgres rpm file to all hosts in cluster] ********************************************
2022-03-21 15:04:27,134 p=11813 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 15:04:27,136 p=11813 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 15:04:27,140 p=11813 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 15:04:27,179 p=11813 u=moonja n=ansible | PLAY RECAP *************************************************************************************************************************
2022-03-21 15:04:27,179 p=11813 u=moonja n=ansible | co7-master                 : ok=6    changed=3    unreachable=0    failed=1    skipped=0    rescued=0    ignored=2   
2022-03-21 15:04:27,179 p=11813 u=moonja n=ansible | co7-node01                 : ok=11   changed=3    unreachable=0    failed=0    skipped=9    rescued=0    ignored=2   
2022-03-21 15:04:27,179 p=11813 u=moonja n=ansible | co7-node02                 : ok=11   changed=3    unreachable=0    failed=0    skipped=9    rescued=0    ignored=2   
2022-03-21 15:04:27,179 p=11813 u=moonja n=ansible | co7-node03                 : ok=11   changed=3    unreachable=0    failed=0    skipped=9    rescued=0    ignored=2   
2022-03-21 15:06:27,738 p=14749 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from 
ansible-core in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 15:06:27,974 p=14749 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 
2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 15:06:27,979 p=14749 u=moonja n=ansible | [WARNING]: While constructing a mapping from /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/install.yml, line 308,
column 3, found a duplicate dict key (when). Using last defined value only.

2022-03-21 15:06:28,025 p=14749 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/upgrade.yml is empty and had no tasks to include

2022-03-21 15:06:28,037 p=14749 u=moonja n=ansible | PLAY [all] *************************************************************************************************************************
2022-03-21 15:06:28,064 p=14749 u=moonja n=ansible | TASK [Gathering Facts] *************************************************************************************************************
2022-03-21 15:06:30,260 p=14749 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 15:06:30,264 p=14749 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 15:06:30,333 p=14749 u=moonja n=ansible | ok: [co7-master]
2022-03-21 15:06:30,400 p=14749 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 15:06:30,416 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : Install rpm packages of dependenies to need installing packages regarding kubernates] ******************
2022-03-21 15:06:31,443 p=14749 u=moonja n=ansible | ok: [co7-node01] => (item=firewalld)
2022-03-21 15:06:31,450 p=14749 u=moonja n=ansible | ok: [co7-node03] => (item=firewalld)
2022-03-21 15:06:31,458 p=14749 u=moonja n=ansible | ok: [co7-master] => (item=firewalld)
2022-03-21 15:06:31,476 p=14749 u=moonja n=ansible | ok: [co7-node02] => (item=firewalld)
2022-03-21 15:06:32,168 p=14749 u=moonja n=ansible | ok: [co7-node03] => (item=python3)
2022-03-21 15:06:32,192 p=14749 u=moonja n=ansible | ok: [co7-master] => (item=python3)
2022-03-21 15:06:32,193 p=14749 u=moonja n=ansible | ok: [co7-node01] => (item=python3)
2022-03-21 15:06:32,230 p=14749 u=moonja n=ansible | ok: [co7-node02] => (item=python3)
2022-03-21 15:06:33,030 p=14749 u=moonja n=ansible | ok: [co7-node01] => (item=python3-libselinux)
2022-03-21 15:06:33,066 p=14749 u=moonja n=ansible | ok: [co7-node03] => (item=python3-libselinux)
2022-03-21 15:06:33,080 p=14749 u=moonja n=ansible | ok: [co7-master] => (item=python3-libselinux)
2022-03-21 15:06:33,110 p=14749 u=moonja n=ansible | ok: [co7-node02] => (item=python3-libselinux)
2022-03-21 15:06:33,122 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : Start and enable firewalld.] ***************************************************************************
2022-03-21 15:06:34,432 p=14749 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:06:34,450 p=14749 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:06:34,463 p=14749 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:06:34,494 p=14749 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:06:34,503 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : Open Firewall] *****************************************************************************************
2022-03-21 15:06:35,435 p=14749 u=moonja n=ansible | changed: [co7-node03] => (item=5432)
2022-03-21 15:06:35,436 p=14749 u=moonja n=ansible | changed: [co7-master] => (item=5432)
2022-03-21 15:06:35,441 p=14749 u=moonja n=ansible | changed: [co7-node01] => (item=5432)
2022-03-21 15:06:35,442 p=14749 u=moonja n=ansible | changed: [co7-node02] => (item=5432)
2022-03-21 15:06:35,453 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : Whitelist of Ip addresses] *****************************************************************************
2022-03-21 15:06:36,197 p=14749 u=moonja n=ansible | changed: [co7-master] => (item=co7-master)
2022-03-21 15:06:36,200 p=14749 u=moonja n=ansible | changed: [co7-node03] => (item=co7-master)
2022-03-21 15:06:36,205 p=14749 u=moonja n=ansible | changed: [co7-node01] => (item=co7-master)
2022-03-21 15:06:36,206 p=14749 u=moonja n=ansible | changed: [co7-node02] => (item=co7-master)
2022-03-21 15:06:36,799 p=14749 u=moonja n=ansible | changed: [co7-master] => (item=co7-node01)
2022-03-21 15:06:36,807 p=14749 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node01)
2022-03-21 15:06:36,821 p=14749 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node01)
2022-03-21 15:06:36,822 p=14749 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node01)
2022-03-21 15:06:37,415 p=14749 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node02)
2022-03-21 15:06:37,418 p=14749 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node02)
2022-03-21 15:06:37,420 p=14749 u=moonja n=ansible | changed: [co7-master] => (item=co7-node02)
2022-03-21 15:06:37,425 p=14749 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node02)
2022-03-21 15:06:38,033 p=14749 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node03)
2022-03-21 15:06:38,044 p=14749 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node03)
2022-03-21 15:06:38,063 p=14749 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node03)
2022-03-21 15:06:38,074 p=14749 u=moonja n=ansible | changed: [co7-master] => (item=co7-node03)
2022-03-21 15:06:38,084 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : Bounce firewalld] **************************************************************************************
2022-03-21 15:06:39,654 p=14749 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:06:39,655 p=14749 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:06:39,659 p=14749 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:06:39,666 p=14749 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:06:39,676 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : Copy the vmwawre-postgres rpm file to all hosts in cluster] ********************************************
2022-03-21 15:06:41,223 p=14749 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:06:41,246 p=14749 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:06:41,251 p=14749 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:06:41,265 p=14749 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:06:41,275 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : Install dependency rpm package for pgautofailover] *****************************************************
2022-03-21 15:06:48,072 p=14749 u=moonja n=ansible | ok: [co7-master] => (item=python2-psutil)
2022-03-21 15:06:48,120 p=14749 u=moonja n=ansible | ok: [co7-node03] => (item=python2-psutil)
2022-03-21 15:06:48,129 p=14749 u=moonja n=ansible | ok: [co7-node01] => (item=python2-psutil)
2022-03-21 15:06:48,163 p=14749 u=moonja n=ansible | ok: [co7-node02] => (item=python2-psutil)
2022-03-21 15:06:54,323 p=14749 u=moonja n=ansible | ok: [co7-master] => (item=python3)
2022-03-21 15:06:54,389 p=14749 u=moonja n=ansible | ok: [co7-node01] => (item=python3)
2022-03-21 15:06:54,417 p=14749 u=moonja n=ansible | ok: [co7-node02] => (item=python3)
2022-03-21 15:06:54,425 p=14749 u=moonja n=ansible | ok: [co7-node03] => (item=python3)
2022-03-21 15:06:54,434 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : Install VMware Postgres on all hosts as root] **********************************************************
2022-03-21 15:07:26,355 p=14749 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:07:28,929 p=14749 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:07:28,944 p=14749 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:07:29,268 p=14749 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:07:29,278 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 15:07:29,312 p=14749 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:07:29,328 p=14749 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:07:29,340 p=14749 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:07:30,091 p=14749 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:07:30,102 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:07:30,140 p=14749 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "pg_autoctl version 1.4.2\npg_autoctl extension version 1.4\ncompiled with PostgreSQL 10.17 (VMware Postgres 10.17.0) on x86_64-redhat-linux-gnu, compiled by gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-44), 64-bit\ncompatible with Postgres 10, 11, 12, and 13"
}
2022-03-21 15:07:30,160 p=14749 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:07:30,161 p=14749 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:07:30,174 p=14749 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:07:30,184 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 15:07:30,220 p=14749 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:07:30,234 p=14749 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:07:30,248 p=14749 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:07:30,856 p=14749 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:07:30,865 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:07:30,903 p=14749 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "pg_ctl (PostgreSQL) 10.17 (VMware Postgres 10.17.0)"
}
2022-03-21 15:07:30,919 p=14749 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:07:30,920 p=14749 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:07:30,936 p=14749 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:07:30,946 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : Getting process IDs of the pg_autoctl process] *********************************************************
2022-03-21 15:07:31,701 p=14749 u=moonja n=ansible | ok: [co7-master]
2022-03-21 15:07:31,703 p=14749 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 15:07:31,704 p=14749 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 15:07:31,708 p=14749 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 15:07:31,717 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : Printing the process IDs obtained] *********************************************************************
2022-03-21 15:07:31,765 p=14749 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 15:07:31,773 p=14749 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 15:07:31,787 p=14749 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 15:07:31,803 p=14749 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 15:07:31,814 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : Stop pgautofailover service of systemd] ****************************************************************
2022-03-21 15:07:31,863 p=14749 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:07:31,868 p=14749 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:07:31,882 p=14749 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:07:31,898 p=14749 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:07:31,908 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:07:31,945 p=14749 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 15:07:31,964 p=14749 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 15:07:31,965 p=14749 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 15:07:31,976 p=14749 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 15:07:31,987 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : Create the monitor node] *******************************************************************************
2022-03-21 15:07:32,020 p=14749 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:07:32,034 p=14749 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:07:32,047 p=14749 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:08:42,647 p=14749 u=moonja n=ansible | fatal: [co7-master]: FAILED! => {"ansible_job_id": "37880792226.13919", "changed": true, "cmd": "( cd /var/lib/pgsql ; pg_autoctl create monitor --auth trust --ssl-self-signed --pgdata monitor )", "delta": "0:01:09.467017", "end": "2022-03-21 15:08:42.239561", "finished": 1, "msg": "non-zero return code", "rc": 12, "results_file": "/var/lib/pgsql/.ansible_async/37880792226.13919", "start": "2022-03-21 15:07:32.772544", "started": 1, "stderr": "15:07:32 13929 INFO  Using default --ssl-mode \"require\"\n15:07:32 13929 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n15:07:32 13929 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n15:07:32 13929 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n15:07:32 13929 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/monitor/server.crt -keyout /var/lib/pgsql/monitor/server.key -subj \"/CN=co7-master\"\n15:07:32 13929 INFO  Started pg_autoctl postgres service with pid 13933\n15:07:32 13933 INFO   /usr/bin/pg_autoctl do service postgres --pgdata monitor -v\n15:07:32 13929 INFO  Started pg_autoctl monitor-init service with pid 13934\n15:07:32 13934 INFO  Granting connection privileges on 192.168.0.0/24\n15:07:32 13938 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\n15:07:42 13933 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n15:07:42 13933 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n15:07:42 13934 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n15:07:42 13933 ERROR Failed to get Postgres pid, see above for details\n15:07:42 13934 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n15:07:42 13933 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":\n15:07:42 13934 ERROR Failed to get Postgres pid, see above for details\n15:07:42 13933 ERROR 2022-03-21 15:07:32.883 KST [13938] FATAL:  database files are incompatible with server\n15:07:42 13934 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"\n15:07:42 13933 ERROR 2022-03-21 15:07:32.883 KST [13938] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 10.17 (VMware Postgres 10.17.0).\n15:07:42 13934 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details\n15:07:42 13933 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"\n15:07:42 13929 ERROR pg_autoctl service monitor-init exited with exit status 12\n15:07:42 13929 INFO  Restarting service monitor-init\n15:07:42 14069 INFO  Granting connection privileges on 192.168.0.0/24\n15:07:42 14071 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\n15:07:52 13933 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n15:07:52 13933 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n15:07:52 13933 ERROR Failed to get Postgres pid, see above for details\n15:07:52 13933 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":\n15:07:52 13933 ERROR 2022-03-21 15:07:42.295 KST [14071] FATAL:  database files are incompatible with server\n15:07:52 13933 ERROR 2022-03-21 15:07:42.295 KST [14071] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 10.17 (VMware Postgres 10.17.0).\n15:07:52 13933 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"\n15:07:52 14069 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n15:07:52 14069 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n15:07:52 14069 ERROR Failed to get Postgres pid, see above for details\n15:07:52 14069 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"\n15:07:52 14069 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details\n15:07:52 13929 ERROR pg_autoctl service monitor-init exited with exit status 12\n15:07:52 13929 INFO  Restarting service monitor-init\n15:07:52 14253 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\n15:07:52 14252 INFO  Granting connection privileges on 192.168.0.0/24\n15:08:02 13933 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n15:08:02 13933 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n15:08:02 13933 ERROR Failed to get Postgres pid, see above for details\n15:08:02 13933 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":\n15:08:02 13933 ERROR 2022-03-21 15:07:52.237 KST [14253] FATAL:  database files are incompatible with server\n15:08:02 13933 ERROR 2022-03-21 15:07:52.237 KST [14253] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 10.17 (VMware Postgres 10.17.0).\n15:08:02 13933 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"\n15:08:02 14428 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\n15:08:03 14252 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n15:08:03 14252 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n15:08:03 14252 ERROR Failed to get Postgres pid, see above for details\n15:08:03 14252 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"\n15:08:03 14252 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details\n15:08:03 13929 ERROR pg_autoctl service monitor-init exited with exit status 12\n15:08:03 13929 INFO  Restarting service monitor-init\n15:08:03 14429 INFO  Granting connection privileges on 192.168.0.0/24\n15:08:12 13933 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n15:08:12 13933 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n15:08:12 13933 ERROR Failed to get Postgres pid, see above for details\n15:08:12 13933 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":\n15:08:12 13933 ERROR 2022-03-21 15:08:02.275 KST [14428] FATAL:  database files are incompatible with server\n15:08:12 13933 ERROR 2022-03-21 15:08:02.275 KST [14428] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 10.17 (VMware Postgres 10.17.0).\n15:08:12 13933 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"\n15:08:12 14603 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\n15:08:13 14429 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n15:08:13 14429 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n15:08:13 14429 ERROR Failed to get Postgres pid, see above for details\n15:08:13 14429 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"\n15:08:13 14429 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details\n15:08:13 13929 ERROR pg_autoctl service monitor-init exited with exit status 12\n15:08:13 13929 INFO  Restarting service monitor-init\n15:08:13 14604 INFO  Granting connection privileges on 192.168.0.0/24\n15:08:22 13933 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n15:08:22 13933 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n15:08:22 13933 ERROR Failed to get Postgres pid, see above for details\n15:08:22 13933 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":\n15:08:22 13933 ERROR 2022-03-21 15:08:12.220 KST [14603] FATAL:  database files are incompatible with server\n15:08:22 13933 ERROR 2022-03-21 15:08:12.220 KST [14603] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 10.17 (VMware Postgres 10.17.0).\n15:08:22 13933 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"\n15:08:22 14778 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\n15:08:23 14604 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n15:08:23 14604 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n15:08:23 14604 ERROR Failed to get Postgres pid, see above for details\n15:08:23 14604 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"\n15:08:23 14604 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details\n15:08:23 13929 ERROR pg_autoctl service monitor-init exited with exit status 12\n15:08:23 13929 INFO  Restarting service monitor-init\n15:08:23 14779 INFO  Granting connection privileges on 192.168.0.0/24\n15:08:32 13933 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n15:08:32 13933 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n15:08:32 13933 ERROR Failed to get Postgres pid, see above for details\n15:08:32 13933 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":\n15:08:32 13933 ERROR 2022-03-21 15:08:22.262 KST [14778] FATAL:  database files are incompatible with server\n15:08:32 13933 ERROR 2022-03-21 15:08:22.262 KST [14778] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 10.17 (VMware Postgres 10.17.0).\n15:08:32 13933 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"\n15:08:32 14953 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\n15:08:33 14779 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n15:08:33 14779 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n15:08:33 14779 ERROR Failed to get Postgres pid, see above for details\n15:08:33 14779 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"\n15:08:33 14779 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details\n15:08:33 13929 ERROR pg_autoctl service monitor-init exited with exit status 12\n15:08:33 13929 FATAL pg_autoctl service monitor-init has already been restarted 5 times in the last 51 seconds, stopping now\n15:08:33 13929 INFO  Waiting for subprocesses to terminate.\n15:08:38 13929 INFO  pg_autoctl services are still running, signaling them with unknown signal.\n15:08:42 13933 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory\n15:08:42 13933 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?\n15:08:42 13933 ERROR Failed to get Postgres pid, see above for details\n15:08:42 13933 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":\n15:08:42 13933 ERROR 2022-03-21 15:08:32.298 KST [14953] FATAL:  database files are incompatible with server\n15:08:42 13933 ERROR 2022-03-21 15:08:32.298 KST [14953] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 10.17 (VMware Postgres 10.17.0).\n15:08:42 13933 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"\n15:08:42 13933 INFO  Postgres controller service received signal SIGTERM, terminating\n15:08:42 13929 FATAL Something went wrong in sub-process supervision, stopping now. See above for details.\n15:08:42 13929 INFO  Stop pg_autoctl", "stderr_lines": ["15:07:32 13929 INFO  Using default --ssl-mode \"require\"", "15:07:32 13929 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic", "15:07:32 13929 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.", "15:07:32 13929 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details", "15:07:32 13929 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/monitor/server.crt -keyout /var/lib/pgsql/monitor/server.key -subj \"/CN=co7-master\"", "15:07:32 13929 INFO  Started pg_autoctl postgres service with pid 13933", "15:07:32 13933 INFO   /usr/bin/pg_autoctl do service postgres --pgdata monitor -v", "15:07:32 13929 INFO  Started pg_autoctl monitor-init service with pid 13934", "15:07:32 13934 INFO  Granting connection privileges on 192.168.0.0/24", "15:07:32 13938 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *", "15:07:42 13933 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "15:07:42 13933 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "15:07:42 13934 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "15:07:42 13933 ERROR Failed to get Postgres pid, see above for details", "15:07:42 13934 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "15:07:42 13933 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":", "15:07:42 13934 ERROR Failed to get Postgres pid, see above for details", "15:07:42 13933 ERROR 2022-03-21 15:07:32.883 KST [13938] FATAL:  database files are incompatible with server", "15:07:42 13934 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"", "15:07:42 13933 ERROR 2022-03-21 15:07:32.883 KST [13938] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 10.17 (VMware Postgres 10.17.0).", "15:07:42 13934 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details", "15:07:42 13933 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"", "15:07:42 13929 ERROR pg_autoctl service monitor-init exited with exit status 12", "15:07:42 13929 INFO  Restarting service monitor-init", "15:07:42 14069 INFO  Granting connection privileges on 192.168.0.0/24", "15:07:42 14071 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *", "15:07:52 13933 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "15:07:52 13933 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "15:07:52 13933 ERROR Failed to get Postgres pid, see above for details", "15:07:52 13933 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":", "15:07:52 13933 ERROR 2022-03-21 15:07:42.295 KST [14071] FATAL:  database files are incompatible with server", "15:07:52 13933 ERROR 2022-03-21 15:07:42.295 KST [14071] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 10.17 (VMware Postgres 10.17.0).", "15:07:52 13933 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"", "15:07:52 14069 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "15:07:52 14069 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "15:07:52 14069 ERROR Failed to get Postgres pid, see above for details", "15:07:52 14069 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"", "15:07:52 14069 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details", "15:07:52 13929 ERROR pg_autoctl service monitor-init exited with exit status 12", "15:07:52 13929 INFO  Restarting service monitor-init", "15:07:52 14253 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *", "15:07:52 14252 INFO  Granting connection privileges on 192.168.0.0/24", "15:08:02 13933 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "15:08:02 13933 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "15:08:02 13933 ERROR Failed to get Postgres pid, see above for details", "15:08:02 13933 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":", "15:08:02 13933 ERROR 2022-03-21 15:07:52.237 KST [14253] FATAL:  database files are incompatible with server", "15:08:02 13933 ERROR 2022-03-21 15:07:52.237 KST [14253] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 10.17 (VMware Postgres 10.17.0).", "15:08:02 13933 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"", "15:08:02 14428 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *", "15:08:03 14252 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "15:08:03 14252 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "15:08:03 14252 ERROR Failed to get Postgres pid, see above for details", "15:08:03 14252 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"", "15:08:03 14252 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details", "15:08:03 13929 ERROR pg_autoctl service monitor-init exited with exit status 12", "15:08:03 13929 INFO  Restarting service monitor-init", "15:08:03 14429 INFO  Granting connection privileges on 192.168.0.0/24", "15:08:12 13933 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "15:08:12 13933 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "15:08:12 13933 ERROR Failed to get Postgres pid, see above for details", "15:08:12 13933 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":", "15:08:12 13933 ERROR 2022-03-21 15:08:02.275 KST [14428] FATAL:  database files are incompatible with server", "15:08:12 13933 ERROR 2022-03-21 15:08:02.275 KST [14428] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 10.17 (VMware Postgres 10.17.0).", "15:08:12 13933 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"", "15:08:12 14603 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *", "15:08:13 14429 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "15:08:13 14429 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "15:08:13 14429 ERROR Failed to get Postgres pid, see above for details", "15:08:13 14429 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"", "15:08:13 14429 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details", "15:08:13 13929 ERROR pg_autoctl service monitor-init exited with exit status 12", "15:08:13 13929 INFO  Restarting service monitor-init", "15:08:13 14604 INFO  Granting connection privileges on 192.168.0.0/24", "15:08:22 13933 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "15:08:22 13933 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "15:08:22 13933 ERROR Failed to get Postgres pid, see above for details", "15:08:22 13933 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":", "15:08:22 13933 ERROR 2022-03-21 15:08:12.220 KST [14603] FATAL:  database files are incompatible with server", "15:08:22 13933 ERROR 2022-03-21 15:08:12.220 KST [14603] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 10.17 (VMware Postgres 10.17.0).", "15:08:22 13933 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"", "15:08:22 14778 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *", "15:08:23 14604 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "15:08:23 14604 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "15:08:23 14604 ERROR Failed to get Postgres pid, see above for details", "15:08:23 14604 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"", "15:08:23 14604 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details", "15:08:23 13929 ERROR pg_autoctl service monitor-init exited with exit status 12", "15:08:23 13929 INFO  Restarting service monitor-init", "15:08:23 14779 INFO  Granting connection privileges on 192.168.0.0/24", "15:08:32 13933 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "15:08:32 13933 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "15:08:32 13933 ERROR Failed to get Postgres pid, see above for details", "15:08:32 13933 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":", "15:08:32 13933 ERROR 2022-03-21 15:08:22.262 KST [14778] FATAL:  database files are incompatible with server", "15:08:32 13933 ERROR 2022-03-21 15:08:22.262 KST [14778] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 10.17 (VMware Postgres 10.17.0).", "15:08:32 13933 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"", "15:08:32 14953 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *", "15:08:33 14779 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "15:08:33 14779 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "15:08:33 14779 ERROR Failed to get Postgres pid, see above for details", "15:08:33 14779 ERROR Failed to ensure that Postgres is running in \"/var/lib/pgsql/monitor\"", "15:08:33 14779 ERROR Failed to install pg_auto_failover in the monitor's Postgres database, see above for details", "15:08:33 13929 ERROR pg_autoctl service monitor-init exited with exit status 12", "15:08:33 13929 FATAL pg_autoctl service monitor-init has already been restarted 5 times in the last 51 seconds, stopping now", "15:08:33 13929 INFO  Waiting for subprocesses to terminate.", "15:08:38 13929 INFO  pg_autoctl services are still running, signaling them with unknown signal.", "15:08:42 13933 ERROR Failed to open file \"/var/lib/pgsql/monitor/postmaster.pid\": No such file or directory", "15:08:42 13933 INFO  Is PostgreSQL at \"/var/lib/pgsql/monitor\" up and running?", "15:08:42 13933 ERROR Failed to get Postgres pid, see above for details", "15:08:42 13933 WARN  Postgres logs from \"/var/lib/pgsql/monitor/startup.log\":", "15:08:42 13933 ERROR 2022-03-21 15:08:32.298 KST [14953] FATAL:  database files are incompatible with server", "15:08:42 13933 ERROR 2022-03-21 15:08:32.298 KST [14953] DETAIL:  The data directory was initialized by PostgreSQL version 12, which is not compatible with this version 10.17 (VMware Postgres 10.17.0).", "15:08:42 13933 WARN  Failed to start Postgres instance at \"/var/lib/pgsql/monitor\"", "15:08:42 13933 INFO  Postgres controller service received signal SIGTERM, terminating", "15:08:42 13929 FATAL Something went wrong in sub-process supervision, stopping now. See above for details.", "15:08:42 13929 INFO  Stop pg_autoctl"], "stdout": "", "stdout_lines": []}
2022-03-21 15:08:42,655 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:08:42,675 p=14749 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:08:42,690 p=14749 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:08:42,703 p=14749 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:08:42,713 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of monitor instance] *******************************************************
2022-03-21 15:08:42,733 p=14749 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:08:42,804 p=14749 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:08:42,809 p=14749 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:08:42,822 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : Copy systemd service file of monitor instance] *********************************************************
2022-03-21 15:08:42,842 p=14749 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:08:42,858 p=14749 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:08:42,871 p=14749 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:08:42,880 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start systemd service of monitor instance] **************************************************
2022-03-21 15:08:42,915 p=14749 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:08:42,916 p=14749 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:08:42,927 p=14749 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:08:42,937 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:08:42,956 p=14749 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:08:42,972 p=14749 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:08:42,984 p=14749 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:08:42,994 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 15:08:43,014 p=14749 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:08:43,037 p=14749 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:08:43,050 p=14749 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:08:43,059 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the current state of monitor instance] **********************************************************
2022-03-21 15:08:43,079 p=14749 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:08:43,094 p=14749 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:08:43,107 p=14749 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:08:43,116 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:08:43,136 p=14749 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:08:43,155 p=14749 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:08:43,165 p=14749 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:08:43,176 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the current state of monitor] *******************************************************************
2022-03-21 15:08:43,195 p=14749 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:08:43,211 p=14749 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:08:43,224 p=14749 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:08:43,233 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:08:43,253 p=14749 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:08:43,269 p=14749 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:08:43,281 p=14749 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:08:43,291 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : Create primiary instance. It will automatically be set by the monitor as the primary node with read-write capability (PGDATA = /var/lib/pgpsql/ha)] ***
2022-03-21 15:08:43,324 p=14749 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:08:43,334 p=14749 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:11:53,558 p=14749 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"ansible_job_id": "842500526077.18909", "changed": false, "child_pid": 18913, "finished": 1, "msg": "Timeout exceeded", "results_file": "/var/lib/pgsql/.ansible_async/842500526077.18909", "started": 1, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2022-03-21 15:11:53,566 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:11:53,589 p=14749 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:11:53,599 p=14749 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:11:53,609 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of pirmary instance] *******************************************************
2022-03-21 15:11:53,629 p=14749 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:11:53,640 p=14749 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:11:53,651 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:11:53,671 p=14749 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:11:53,680 p=14749 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:11:53,691 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : Copy primary systemd service file of primary instance] *************************************************
2022-03-21 15:11:53,712 p=14749 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:11:53,724 p=14749 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:11:53,735 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start primary systemd service of primary instance] ******************************************
2022-03-21 15:11:53,756 p=14749 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:11:53,765 p=14749 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:11:53,777 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 15:11:53,799 p=14749 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:11:53,810 p=14749 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:11:53,821 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the state of primary instance] ******************************************************************
2022-03-21 15:11:53,845 p=14749 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:11:53,854 p=14749 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:11:53,865 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:11:53,886 p=14749 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:11:53,898 p=14749 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:11:53,908 p=14749 u=moonja n=ansible | TASK [pgfailover-postgres : Create secondary instance. It will automatically be set by the monitor as the secondary  node with read-write capability (PGDATA = /var/lib/pgpsql/ha)] ***
2022-03-21 15:15:00,129 p=14749 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"ansible_job_id": "790630851375.18230", "changed": false, "child_pid": 18234, "finished": 1, "msg": "Timeout exceeded", "results_file": "/var/lib/pgsql/.ansible_async/790630851375.18230", "started": 1, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2022-03-21 15:15:03,847 p=14749 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"ansible_job_id": "676037469421.17418", "changed": false, "child_pid": 17422, "finished": 1, "msg": "Timeout exceeded", "results_file": "/var/lib/pgsql/.ansible_async/676037469421.17418", "started": 1, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2022-03-21 15:15:03,849 p=14749 u=moonja n=ansible | PLAY RECAP *************************************************************************************************************************
2022-03-21 15:15:03,850 p=14749 u=moonja n=ansible | co7-master                 : ok=16   changed=8    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2022-03-21 15:15:03,850 p=14749 u=moonja n=ansible | co7-node01                 : ok=12   changed=6    unreachable=0    failed=1    skipped=16   rescued=0    ignored=0   
2022-03-21 15:15:03,850 p=14749 u=moonja n=ansible | co7-node02                 : ok=12   changed=6    unreachable=0    failed=1    skipped=25   rescued=0    ignored=0   
2022-03-21 15:15:03,850 p=14749 u=moonja n=ansible | co7-node03                 : ok=12   changed=6    unreachable=0    failed=1    skipped=25   rescued=0    ignored=0   
2022-03-21 15:18:08,847 p=20433 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from 
ansible-core in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 15:18:09,075 p=20433 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 
2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 15:18:09,079 p=20433 u=moonja n=ansible | [WARNING]: While constructing a mapping from /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/install.yml, line 308,
column 3, found a duplicate dict key (when). Using last defined value only.

2022-03-21 15:18:09,126 p=20433 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/upgrade.yml is empty and had no tasks to include

2022-03-21 15:18:09,138 p=20433 u=moonja n=ansible | PLAY [all] *************************************************************************************************************************
2022-03-21 15:18:09,166 p=20433 u=moonja n=ansible | TASK [Gathering Facts] *************************************************************************************************************
2022-03-21 15:18:11,378 p=20433 u=moonja n=ansible | ok: [co7-master]
2022-03-21 15:18:11,446 p=20433 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 15:18:11,465 p=20433 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 15:18:11,499 p=20433 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 15:18:11,515 p=20433 u=moonja n=ansible | TASK [pgfailover-postgres : Disable port from public zone] *************************************************************************
2022-03-21 15:18:12,447 p=20433 u=moonja n=ansible | changed: [co7-node01] => (item=5432)
2022-03-21 15:18:12,451 p=20433 u=moonja n=ansible | changed: [co7-master] => (item=5432)
2022-03-21 15:18:12,453 p=20433 u=moonja n=ansible | changed: [co7-node02] => (item=5432)
2022-03-21 15:18:12,821 p=20433 u=moonja n=ansible | changed: [co7-node03] => (item=5432)
2022-03-21 15:18:12,831 p=20433 u=moonja n=ansible | TASK [pgfailover-postgres : Disable IP Addresses in whitelist] *********************************************************************
2022-03-21 15:18:13,569 p=20433 u=moonja n=ansible | changed: [co7-node01] => (item=co7-master)
2022-03-21 15:18:13,570 p=20433 u=moonja n=ansible | changed: [co7-node03] => (item=co7-master)
2022-03-21 15:18:13,577 p=20433 u=moonja n=ansible | changed: [co7-master] => (item=co7-master)
2022-03-21 15:18:13,580 p=20433 u=moonja n=ansible | changed: [co7-node02] => (item=co7-master)
2022-03-21 15:18:14,181 p=20433 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node01)
2022-03-21 15:18:14,210 p=20433 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node01)
2022-03-21 15:18:14,218 p=20433 u=moonja n=ansible | changed: [co7-master] => (item=co7-node01)
2022-03-21 15:18:14,239 p=20433 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node01)
2022-03-21 15:18:14,766 p=20433 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node02)
2022-03-21 15:18:14,786 p=20433 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node02)
2022-03-21 15:18:14,810 p=20433 u=moonja n=ansible | changed: [co7-master] => (item=co7-node02)
2022-03-21 15:18:14,824 p=20433 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node02)
2022-03-21 15:18:15,389 p=20433 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node03)
2022-03-21 15:18:15,417 p=20433 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node03)
2022-03-21 15:18:15,419 p=20433 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node03)
2022-03-21 15:18:15,471 p=20433 u=moonja n=ansible | changed: [co7-master] => (item=co7-node03)
2022-03-21 15:18:15,483 p=20433 u=moonja n=ansible | TASK [pgfailover-postgres : Bounce firewalld] **************************************************************************************
2022-03-21 15:18:17,412 p=20433 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:18:17,419 p=20433 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:18:17,441 p=20433 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:18:17,454 p=20433 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:18:17,464 p=20433 u=moonja n=ansible | TASK [pgfailover-postgres : Stop and disable firewalld.] ***************************************************************************
2022-03-21 15:18:18,889 p=20433 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:18:19,067 p=20433 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:18:19,076 p=20433 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:18:19,127 p=20433 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:18:19,137 p=20433 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 15:18:19,182 p=20433 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:18:19,182 p=20433 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:18:19,193 p=20433 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:18:19,732 p=20433 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:18:19,741 p=20433 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 15:18:19,773 p=20433 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:18:19,787 p=20433 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:18:19,800 p=20433 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:18:20,221 p=20433 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:18:20,230 p=20433 u=moonja n=ansible | TASK [pgfailover-postgres : Getting process IDs of the pg_autoctl process] *********************************************************
2022-03-21 15:18:20,868 p=20433 u=moonja n=ansible | ok: [co7-master]
2022-03-21 15:18:20,886 p=20433 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 15:18:20,887 p=20433 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 15:18:20,899 p=20433 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 15:18:20,909 p=20433 u=moonja n=ansible | TASK [pgfailover-postgres : Stop pgautofailover service of systemd] ****************************************************************
2022-03-21 15:18:20,953 p=20433 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:18:20,958 p=20433 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:18:20,971 p=20433 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:18:20,987 p=20433 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:18:20,996 p=20433 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] ************************************************************************
2022-03-21 15:18:21,015 p=20433 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:18:21,030 p=20433 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:18:21,671 p=20433 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:18:21,671 p=20433 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:18:21,679 p=20433 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start secondary systemd service of secondary instance] **************************************
2022-03-21 15:18:21,698 p=20433 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:18:21,713 p=20433 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:18:22,654 p=20433 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": false, "msg": "Could not find the requested service pgautofailover: host"}
2022-03-21 15:18:22,654 p=20433 u=moonja n=ansible | ...ignoring
2022-03-21 15:18:22,654 p=20433 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": false, "msg": "Could not find the requested service pgautofailover: host"}
2022-03-21 15:18:22,655 p=20433 u=moonja n=ansible | ...ignoring
2022-03-21 15:18:22,664 p=20433 u=moonja n=ansible | TASK [pgfailover-postgres : Delete secondary systemd service file of secondary instance] *******************************************
2022-03-21 15:18:22,685 p=20433 u=moonja n=ansible | skipping: [co7-master] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:18:22,687 p=20433 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:18:22,690 p=20433 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:18:22,695 p=20433 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:18:22,697 p=20433 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:18:22,701 p=20433 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql) 
2022-03-21 15:18:22,702 p=20433 u=moonja n=ansible | skipping: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:18:22,702 p=20433 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:18:22,705 p=20433 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:18:22,709 p=20433 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:18:22,713 p=20433 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:18:22,714 p=20433 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql) 
2022-03-21 15:18:23,310 p=20433 u=moonja n=ansible | ok: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 15:18:23,312 p=20433 u=moonja n=ansible | ok: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 15:18:23,719 p=20433 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 15:18:23,720 p=20433 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 15:18:24,135 p=20433 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 15:18:24,135 p=20433 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 15:18:24,548 p=20433 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.config)
2022-03-21 15:18:24,548 p=20433 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.config)
2022-03-21 15:18:24,947 p=20433 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.ansible)
2022-03-21 15:18:24,947 p=20433 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.ansible)
2022-03-21 15:18:25,350 p=20433 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql)
2022-03-21 15:18:25,351 p=20433 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql)
2022-03-21 15:18:25,363 p=20433 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] ************************************************************************
2022-03-21 15:18:25,381 p=20433 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:18:25,410 p=20433 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:18:25,421 p=20433 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:18:25,903 p=20433 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:18:25,913 p=20433 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start primary systemd service of primary instance] ******************************************
2022-03-21 15:18:25,933 p=20433 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:18:25,963 p=20433 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:18:25,975 p=20433 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:18:26,594 p=20433 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": false, "msg": "Could not find the requested service pgautofailover: host"}
2022-03-21 15:18:26,594 p=20433 u=moonja n=ansible | ...ignoring
2022-03-21 15:18:26,604 p=20433 u=moonja n=ansible | TASK [pgfailover-postgres : Delete primary systemd service file of secondary instance] *********************************************
2022-03-21 15:18:26,626 p=20433 u=moonja n=ansible | skipping: [co7-master] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:18:26,627 p=20433 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:18:26,634 p=20433 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:18:26,635 p=20433 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:18:26,635 p=20433 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:18:26,636 p=20433 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql) 
2022-03-21 15:18:26,659 p=20433 u=moonja n=ansible | skipping: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:18:26,660 p=20433 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:18:26,663 p=20433 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:18:26,668 p=20433 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:18:26,668 p=20433 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:18:26,669 p=20433 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql) 
2022-03-21 15:18:26,671 p=20433 u=moonja n=ansible | skipping: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:18:26,673 p=20433 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:18:26,677 p=20433 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:18:26,679 p=20433 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:18:26,681 p=20433 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:18:26,682 p=20433 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql) 
2022-03-21 15:18:27,038 p=20433 u=moonja n=ansible | ok: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 15:18:27,506 p=20433 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 15:18:27,975 p=20433 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 15:18:28,385 p=20433 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.config)
2022-03-21 15:18:28,866 p=20433 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.ansible)
2022-03-21 15:18:29,253 p=20433 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql)
2022-03-21 15:18:29,264 p=20433 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] ************************************************************************
2022-03-21 15:18:29,296 p=20433 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:18:29,311 p=20433 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:18:29,323 p=20433 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:18:29,792 p=20433 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:18:29,803 p=20433 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start systemd service of monitor instance] **************************************************
2022-03-21 15:18:29,849 p=20433 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:18:29,850 p=20433 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:18:29,861 p=20433 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:18:30,467 p=20433 u=moonja n=ansible | fatal: [co7-master]: FAILED! => {"changed": false, "msg": "Could not find the requested service pgautofailover: host"}
2022-03-21 15:18:30,467 p=20433 u=moonja n=ansible | ...ignoring
2022-03-21 15:18:30,477 p=20433 u=moonja n=ansible | TASK [pgfailover-postgres : Delete primary systemd service file of secondary instance] *********************************************
2022-03-21 15:18:30,515 p=20433 u=moonja n=ansible | skipping: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:18:30,516 p=20433 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:18:30,522 p=20433 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:18:30,523 p=20433 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:18:30,523 p=20433 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:18:30,528 p=20433 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql) 
2022-03-21 15:18:30,529 p=20433 u=moonja n=ansible | skipping: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:18:30,530 p=20433 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:18:30,532 p=20433 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:18:30,535 p=20433 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:18:30,537 p=20433 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:18:30,538 p=20433 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql) 
2022-03-21 15:18:30,544 p=20433 u=moonja n=ansible | skipping: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:18:30,550 p=20433 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:18:30,554 p=20433 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:18:30,555 p=20433 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:18:30,555 p=20433 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:18:30,556 p=20433 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql) 
2022-03-21 15:18:31,011 p=20433 u=moonja n=ansible | ok: [co7-master] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 15:18:31,439 p=20433 u=moonja n=ansible | ok: [co7-master] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 15:18:31,902 p=20433 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 15:18:32,315 p=20433 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/.config)
2022-03-21 15:18:32,755 p=20433 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/.ansible)
2022-03-21 15:18:33,255 p=20433 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql)
2022-03-21 15:18:33,267 p=20433 u=moonja n=ansible | TASK [pgfailover-postgres : Uninstall VMware Postgres on all hosts as root] ********************************************************
2022-03-21 15:19:01,928 p=20433 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:19:08,104 p=20433 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:19:08,182 p=20433 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:19:08,272 p=20433 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:19:08,280 p=20433 u=moonja n=ansible | TASK [pgfailover-postgres : Copy the vmwawre-postgres rpm file to all hosts in cluster] ********************************************
2022-03-21 15:19:08,758 p=20433 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:19:08,759 p=20433 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:19:08,764 p=20433 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:19:08,796 p=20433 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:19:08,842 p=20433 u=moonja n=ansible | PLAY RECAP *************************************************************************************************************************
2022-03-21 15:19:08,842 p=20433 u=moonja n=ansible | co7-master                 : ok=13   changed=10   unreachable=0    failed=0    skipped=7    rescued=0    ignored=1   
2022-03-21 15:19:08,842 p=20433 u=moonja n=ansible | co7-node01                 : ok=11   changed=8    unreachable=0    failed=0    skipped=9    rescued=0    ignored=1   
2022-03-21 15:19:08,842 p=20433 u=moonja n=ansible | co7-node02                 : ok=11   changed=8    unreachable=0    failed=0    skipped=9    rescued=0    ignored=1   
2022-03-21 15:19:08,842 p=20433 u=moonja n=ansible | co7-node03                 : ok=11   changed=8    unreachable=0    failed=0    skipped=9    rescued=0    ignored=1   
2022-03-21 15:21:55,944 p=22186 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from 
ansible-core in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 15:21:56,174 p=22186 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 
2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 15:21:56,179 p=22186 u=moonja n=ansible | [WARNING]: While constructing a mapping from /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/install.yml, line 308,
column 3, found a duplicate dict key (when). Using last defined value only.

2022-03-21 15:21:56,225 p=22186 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/upgrade.yml is empty and had no tasks to include

2022-03-21 15:21:56,239 p=22186 u=moonja n=ansible | PLAY [all] *************************************************************************************************************************
2022-03-21 15:21:56,269 p=22186 u=moonja n=ansible | TASK [Gathering Facts] *************************************************************************************************************
2022-03-21 15:21:58,443 p=22186 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 15:21:58,508 p=22186 u=moonja n=ansible | ok: [co7-master]
2022-03-21 15:21:58,518 p=22186 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 15:21:58,591 p=22186 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 15:21:58,607 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : Install rpm packages of dependenies to need installing packages regarding kubernates] ******************
2022-03-21 15:21:59,648 p=22186 u=moonja n=ansible | ok: [co7-master] => (item=firewalld)
2022-03-21 15:21:59,663 p=22186 u=moonja n=ansible | ok: [co7-node01] => (item=firewalld)
2022-03-21 15:21:59,706 p=22186 u=moonja n=ansible | ok: [co7-node02] => (item=firewalld)
2022-03-21 15:21:59,711 p=22186 u=moonja n=ansible | ok: [co7-node03] => (item=firewalld)
2022-03-21 15:22:00,383 p=22186 u=moonja n=ansible | ok: [co7-node01] => (item=python3)
2022-03-21 15:22:00,428 p=22186 u=moonja n=ansible | ok: [co7-master] => (item=python3)
2022-03-21 15:22:00,482 p=22186 u=moonja n=ansible | ok: [co7-node03] => (item=python3)
2022-03-21 15:22:00,488 p=22186 u=moonja n=ansible | ok: [co7-node02] => (item=python3)
2022-03-21 15:22:01,215 p=22186 u=moonja n=ansible | ok: [co7-node01] => (item=python3-libselinux)
2022-03-21 15:22:01,276 p=22186 u=moonja n=ansible | ok: [co7-master] => (item=python3-libselinux)
2022-03-21 15:22:01,359 p=22186 u=moonja n=ansible | ok: [co7-node03] => (item=python3-libselinux)
2022-03-21 15:22:01,365 p=22186 u=moonja n=ansible | ok: [co7-node02] => (item=python3-libselinux)
2022-03-21 15:22:01,376 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : Start and enable firewalld.] ***************************************************************************
2022-03-21 15:22:02,610 p=22186 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:22:02,626 p=22186 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:22:02,676 p=22186 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:22:02,724 p=22186 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:22:02,735 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : Open Firewall] *****************************************************************************************
2022-03-21 15:22:03,561 p=22186 u=moonja n=ansible | changed: [co7-node01] => (item=5432)
2022-03-21 15:22:03,562 p=22186 u=moonja n=ansible | changed: [co7-node02] => (item=5432)
2022-03-21 15:22:03,564 p=22186 u=moonja n=ansible | changed: [co7-node03] => (item=5432)
2022-03-21 15:22:03,577 p=22186 u=moonja n=ansible | changed: [co7-master] => (item=5432)
2022-03-21 15:22:03,587 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : Whitelist of Ip addresses] *****************************************************************************
2022-03-21 15:22:04,319 p=22186 u=moonja n=ansible | changed: [co7-master] => (item=co7-master)
2022-03-21 15:22:04,353 p=22186 u=moonja n=ansible | changed: [co7-node02] => (item=co7-master)
2022-03-21 15:22:04,355 p=22186 u=moonja n=ansible | changed: [co7-node01] => (item=co7-master)
2022-03-21 15:22:04,359 p=22186 u=moonja n=ansible | changed: [co7-node03] => (item=co7-master)
2022-03-21 15:22:04,920 p=22186 u=moonja n=ansible | changed: [co7-master] => (item=co7-node01)
2022-03-21 15:22:05,012 p=22186 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node01)
2022-03-21 15:22:05,435 p=22186 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node01)
2022-03-21 15:22:05,598 p=22186 u=moonja n=ansible | changed: [co7-master] => (item=co7-node02)
2022-03-21 15:22:05,694 p=22186 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node02)
2022-03-21 15:22:05,842 p=22186 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node01)
2022-03-21 15:22:06,044 p=22186 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node02)
2022-03-21 15:22:06,236 p=22186 u=moonja n=ansible | changed: [co7-master] => (item=co7-node03)
2022-03-21 15:22:06,362 p=22186 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node03)
2022-03-21 15:22:06,437 p=22186 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node02)
2022-03-21 15:22:06,629 p=22186 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node03)
2022-03-21 15:22:06,995 p=22186 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node03)
2022-03-21 15:22:07,006 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : Bounce firewalld] **************************************************************************************
2022-03-21 15:22:08,594 p=22186 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:22:08,609 p=22186 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:22:08,618 p=22186 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:22:08,619 p=22186 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:22:08,630 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : Copy the vmwawre-postgres rpm file to all hosts in cluster] ********************************************
2022-03-21 15:22:10,131 p=22186 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:22:10,135 p=22186 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:22:10,139 p=22186 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:22:10,162 p=22186 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:22:10,171 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : Install dependency rpm package for pgautofailover] *****************************************************
2022-03-21 15:22:16,932 p=22186 u=moonja n=ansible | ok: [co7-master] => (item=python2-psutil)
2022-03-21 15:22:17,142 p=22186 u=moonja n=ansible | ok: [co7-node01] => (item=python2-psutil)
2022-03-21 15:22:17,491 p=22186 u=moonja n=ansible | ok: [co7-node02] => (item=python2-psutil)
2022-03-21 15:22:17,526 p=22186 u=moonja n=ansible | ok: [co7-node03] => (item=python2-psutil)
2022-03-21 15:22:23,181 p=22186 u=moonja n=ansible | ok: [co7-master] => (item=python3)
2022-03-21 15:22:23,391 p=22186 u=moonja n=ansible | ok: [co7-node01] => (item=python3)
2022-03-21 15:22:24,408 p=22186 u=moonja n=ansible | ok: [co7-node02] => (item=python3)
2022-03-21 15:22:25,555 p=22186 u=moonja n=ansible | ok: [co7-node03] => (item=python3)
2022-03-21 15:22:25,564 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : Install VMware Postgres on all hosts as root] **********************************************************
2022-03-21 15:22:46,076 p=22186 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:22:48,136 p=22186 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:22:54,343 p=22186 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:22:54,394 p=22186 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:22:54,405 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 15:22:54,454 p=22186 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:22:54,455 p=22186 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:22:54,465 p=22186 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:22:55,041 p=22186 u=moonja n=ansible | [WARNING]: Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues
when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually

2022-03-21 15:22:55,042 p=22186 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:22:55,052 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:22:55,088 p=22186 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "pg_autoctl version 1.4.2\npg_autoctl extension version 1.4\ncompiled with PostgreSQL 10.17 (VMware Postgres 10.17.0) on x86_64-redhat-linux-gnu, compiled by gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-44), 64-bit\ncompatible with Postgres 10, 11, 12, and 13"
}
2022-03-21 15:22:55,104 p=22186 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:22:55,105 p=22186 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:22:55,117 p=22186 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:22:55,126 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 15:22:55,157 p=22186 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:22:55,172 p=22186 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:22:55,184 p=22186 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:22:55,648 p=22186 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:22:55,657 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:22:55,693 p=22186 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "pg_ctl (PostgreSQL) 10.17 (VMware Postgres 10.17.0)"
}
2022-03-21 15:22:55,709 p=22186 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:22:55,710 p=22186 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:22:55,722 p=22186 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:22:55,731 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : Getting process IDs of the pg_autoctl process] *********************************************************
2022-03-21 15:22:56,416 p=22186 u=moonja n=ansible | ok: [co7-master]
2022-03-21 15:22:56,418 p=22186 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 15:22:56,433 p=22186 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 15:22:56,440 p=22186 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 15:22:56,449 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : Printing the process IDs obtained] *********************************************************************
2022-03-21 15:22:56,499 p=22186 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 15:22:56,504 p=22186 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 15:22:56,517 p=22186 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 15:22:56,535 p=22186 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 15:22:56,546 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : Stop pgautofailover service of systemd] ****************************************************************
2022-03-21 15:22:56,592 p=22186 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:22:56,597 p=22186 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:22:56,612 p=22186 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:22:56,628 p=22186 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:22:56,638 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:22:56,674 p=22186 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 15:22:56,692 p=22186 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 15:22:56,692 p=22186 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 15:22:56,704 p=22186 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 15:22:56,714 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : Create the monitor node] *******************************************************************************
2022-03-21 15:22:56,746 p=22186 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:22:56,761 p=22186 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:22:56,772 p=22186 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:23:15,632 p=22186 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:23:15,640 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:23:15,722 p=22186 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:23:15,751 p=22186 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "ansible_job_id": "655790712633.23162",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl create monitor --auth trust --ssl-self-signed --pgdata monitor )",
        "delta": "0:00:15.714353",
        "end": "2022-03-21 15:23:13.201495",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/655790712633.23162",
        "start": "2022-03-21 15:22:57.487142",
        "started": 1,
        "stderr": "15:22:57 23172 INFO  Using default --ssl-mode \"require\"\n15:22:57 23172 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n15:22:57 23172 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n15:22:57 23172 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n15:22:57 23172 INFO  Initialising a PostgreSQL cluster at \"monitor\"\n15:22:57 23172 INFO  /bin/pg_ctl initdb -s -D monitor --option '--auth=trust'\n15:23:04 23172 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/monitor/server.crt -keyout /var/lib/pgsql/monitor/server.key -subj \"/CN=co7-master\"\n15:23:04 23172 INFO  Started pg_autoctl postgres service with pid 23318\n15:23:04 23318 INFO   /usr/bin/pg_autoctl do service postgres --pgdata monitor -v\n15:23:04 23172 INFO  Started pg_autoctl monitor-init service with pid 23319\n15:23:04 23319 INFO  Granting connection privileges on 192.168.0.0/24\n15:23:04 23324 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\n15:23:05 23318 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/monitor\" on port 5432 with pid 23324\n15:23:06 23319 WARN  NOTICE:  installing required extension \"btree_gist\"\n15:23:06 23319 INFO  Your pg_auto_failover monitor instance is now ready on port 5432.\n15:23:06 23319 INFO  Monitor has been successfully initialized.\n15:23:06 23172 WARN  pg_autoctl service monitor-init exited with exit status 0\n15:23:06 23318 INFO  Postgres controller service received signal SIGTERM, terminating\n15:23:06 23318 INFO  Stopping pg_autoctl postgres service\n15:23:06 23318 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/monitor --wait stop --mode fast\n15:23:06 23172 INFO  Waiting for subprocesses to terminate.\n15:23:11 23172 INFO  pg_autoctl services are still running, signaling them with unknown signal.\n15:23:13 23172 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "15:22:57 23172 INFO  Using default --ssl-mode \"require\"",
            "15:22:57 23172 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "15:22:57 23172 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "15:22:57 23172 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "15:22:57 23172 INFO  Initialising a PostgreSQL cluster at \"monitor\"",
            "15:22:57 23172 INFO  /bin/pg_ctl initdb -s -D monitor --option '--auth=trust'",
            "15:23:04 23172 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/monitor/server.crt -keyout /var/lib/pgsql/monitor/server.key -subj \"/CN=co7-master\"",
            "15:23:04 23172 INFO  Started pg_autoctl postgres service with pid 23318",
            "15:23:04 23318 INFO   /usr/bin/pg_autoctl do service postgres --pgdata monitor -v",
            "15:23:04 23172 INFO  Started pg_autoctl monitor-init service with pid 23319",
            "15:23:04 23319 INFO  Granting connection privileges on 192.168.0.0/24",
            "15:23:04 23324 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *",
            "15:23:05 23318 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/monitor\" on port 5432 with pid 23324",
            "15:23:06 23319 WARN  NOTICE:  installing required extension \"btree_gist\"",
            "15:23:06 23319 INFO  Your pg_auto_failover monitor instance is now ready on port 5432.",
            "15:23:06 23319 INFO  Monitor has been successfully initialized.",
            "15:23:06 23172 WARN  pg_autoctl service monitor-init exited with exit status 0",
            "15:23:06 23318 INFO  Postgres controller service received signal SIGTERM, terminating",
            "15:23:06 23318 INFO  Stopping pg_autoctl postgres service",
            "15:23:06 23318 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/monitor --wait stop --mode fast",
            "15:23:06 23172 INFO  Waiting for subprocesses to terminate.",
            "15:23:11 23172 INFO  pg_autoctl services are still running, signaling them with unknown signal.",
            "15:23:13 23172 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 15:23:15,752 p=22186 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:23:15,753 p=22186 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:23:15,762 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of monitor instance] *******************************************************
2022-03-21 15:23:15,794 p=22186 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:23:15,808 p=22186 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:23:15,819 p=22186 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:23:22,175 p=22186 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:23:22,183 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : Copy systemd service file of monitor instance] *********************************************************
2022-03-21 15:23:22,215 p=22186 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:23:22,230 p=22186 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:23:22,242 p=22186 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:23:22,691 p=22186 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:23:22,702 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start systemd service of monitor instance] **************************************************
2022-03-21 15:23:22,735 p=22186 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:23:22,750 p=22186 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:23:22,761 p=22186 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:23:24,521 p=22186 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:23:24,531 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:23:24,602 p=22186 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": true,
        "enabled": true,
        "failed": false,
        "name": "pgautofailover",
        "state": "started",
        "status": {
            "ActiveEnterTimestampMonotonic": "0",
            "ActiveExitTimestampMonotonic": "0",
            "ActiveState": "inactive",
            "After": "-.mount basic.target system.slice systemd-journald.socket",
            "AllowIsolate": "no",
            "AmbientCapabilities": "0",
            "AssertResult": "no",
            "AssertTimestampMonotonic": "0",
            "Before": "shutdown.target",
            "BlockIOAccounting": "no",
            "BlockIOWeight": "18446744073709551615",
            "CPUAccounting": "no",
            "CPUQuotaPerSecUSec": "infinity",
            "CPUSchedulingPolicy": "0",
            "CPUSchedulingPriority": "0",
            "CPUSchedulingResetOnFork": "no",
            "CPUShares": "18446744073709551615",
            "CanIsolate": "no",
            "CanReload": "no",
            "CanStart": "yes",
            "CanStop": "yes",
            "CapabilityBoundingSet": "18446744073709551615",
            "CollectMode": "inactive",
            "ConditionResult": "no",
            "ConditionTimestampMonotonic": "0",
            "Conflicts": "shutdown.target",
            "ControlPID": "0",
            "DefaultDependencies": "yes",
            "Delegate": "no",
            "Description": "pg_auto_failover",
            "DevicePolicy": "auto",
            "Environment": "PGDATA=/var/lib/pgsql/monitor",
            "ExecMainCode": "0",
            "ExecMainExitTimestampMonotonic": "0",
            "ExecMainPID": "0",
            "ExecMainStartTimestampMonotonic": "0",
            "ExecMainStatus": "0",
            "ExecStart": "{ path=/usr/bin/pg_autoctl ; argv[]=/usr/bin/pg_autoctl run ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }",
            "FailureAction": "none",
            "FileDescriptorStoreMax": "0",
            "FragmentPath": "/etc/systemd/system/pgautofailover.service",
            "GuessMainPID": "yes",
            "IOScheduling": "0",
            "Id": "pgautofailover.service",
            "IgnoreOnIsolate": "no",
            "IgnoreOnSnapshot": "no",
            "IgnoreSIGPIPE": "yes",
            "InactiveEnterTimestampMonotonic": "0",
            "InactiveExitTimestampMonotonic": "0",
            "JobTimeoutAction": "none",
            "JobTimeoutUSec": "0",
            "KillMode": "control-group",
            "KillSignal": "15",
            "LimitAS": "18446744073709551615",
            "LimitCORE": "18446744073709551615",
            "LimitCPU": "18446744073709551615",
            "LimitDATA": "18446744073709551615",
            "LimitFSIZE": "18446744073709551615",
            "LimitLOCKS": "18446744073709551615",
            "LimitMEMLOCK": "65536",
            "LimitMSGQUEUE": "819200",
            "LimitNICE": "0",
            "LimitNOFILE": "4096",
            "LimitNPROC": "47321",
            "LimitRSS": "18446744073709551615",
            "LimitRTPRIO": "0",
            "LimitRTTIME": "18446744073709551615",
            "LimitSIGPENDING": "47321",
            "LimitSTACK": "18446744073709551615",
            "LoadState": "loaded",
            "MainPID": "0",
            "MemoryAccounting": "no",
            "MemoryCurrent": "18446744073709551615",
            "MemoryLimit": "18446744073709551615",
            "MountFlags": "0",
            "Names": "pgautofailover.service",
            "NeedDaemonReload": "no",
            "Nice": "0",
            "NoNewPrivileges": "no",
            "NonBlocking": "no",
            "NotifyAccess": "none",
            "OOMScoreAdjust": "0",
            "OnFailureJobMode": "replace",
            "PermissionsStartOnly": "no",
            "PrivateDevices": "no",
            "PrivateNetwork": "no",
            "PrivateTmp": "no",
            "ProtectHome": "no",
            "ProtectSystem": "no",
            "RefuseManualStart": "no",
            "RefuseManualStop": "no",
            "RemainAfterExit": "no",
            "Requires": "-.mount basic.target system.slice",
            "RequiresMountsFor": "/var/lib/pgsql",
            "Restart": "always",
            "RestartUSec": "100ms",
            "Result": "success",
            "RootDirectoryStartOnly": "no",
            "RuntimeDirectoryMode": "0755",
            "SameProcessGroup": "no",
            "SecureBits": "0",
            "SendSIGHUP": "no",
            "SendSIGKILL": "yes",
            "Slice": "system.slice",
            "StandardError": "inherit",
            "StandardInput": "null",
            "StandardOutput": "journal",
            "StartLimitAction": "none",
            "StartLimitBurst": "0",
            "StartLimitInterval": "10000000",
            "StartupBlockIOWeight": "18446744073709551615",
            "StartupCPUShares": "18446744073709551615",
            "StatusErrno": "0",
            "StopWhenUnneeded": "no",
            "SubState": "dead",
            "SyslogLevelPrefix": "yes",
            "SyslogPriority": "30",
            "SystemCallErrorNumber": "0",
            "TTYReset": "no",
            "TTYVHangup": "no",
            "TTYVTDisallocate": "no",
            "TasksAccounting": "no",
            "TasksCurrent": "18446744073709551615",
            "TasksMax": "18446744073709551615",
            "TimeoutStartUSec": "1min 30s",
            "TimeoutStopUSec": "1min 30s",
            "TimerSlackNSec": "50000",
            "Transient": "no",
            "Type": "simple",
            "UMask": "0022",
            "UnitFilePreset": "disabled",
            "UnitFileState": "disabled",
            "User": "postgres",
            "WatchdogTimestampMonotonic": "0",
            "WatchdogUSec": "0",
            "WorkingDirectory": "/var/lib/pgsql"
        }
    }
}
2022-03-21 15:23:24,619 p=22186 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:23:24,620 p=22186 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:23:24,632 p=22186 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:23:24,641 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 15:23:24,687 p=22186 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:23:24,687 p=22186 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:23:24,699 p=22186 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:23:25,378 p=22186 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:23:25,387 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the current state of monitor instance] **********************************************************
2022-03-21 15:23:25,421 p=22186 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:23:25,436 p=22186 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:23:25,448 p=22186 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:23:25,886 p=22186 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:23:25,897 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:23:25,950 p=22186 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": true,
        "cmd": "( ps -ef | grep postgres )",
        "delta": "0:00:00.035395",
        "end": "2022-03-21 15:23:26.114054",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-21 15:23:26.078659",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "postgres 24282     1  0 15:23 ?        00:00:00 /usr/bin/pg_autoctl run\npostgres 24286 24282  0 15:23 ?        00:00:00 pg_autoctl: start/stop postgres\npostgres 24287 24282  0 15:23 ?        00:00:00 pg_autoctl: monitor listener\npostgres 24328 24286  2 15:23 ?        00:00:00 /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\npostgres 24430 24328  0 15:23 ?        00:00:00 postgres: pg_auto_failover monitor: logger process  \npostgres 24452 24328  0 15:23 ?        00:00:00 postgres: pg_auto_failover monitor: checkpointer process  \npostgres 24453 24328  0 15:23 ?        00:00:00 postgres: pg_auto_failover monitor: writer process  \npostgres 24454 24328  0 15:23 ?        00:00:00 postgres: pg_auto_failover monitor: wal writer process  \npostgres 24455 24328  0 15:23 ?        00:00:00 postgres: pg_auto_failover monitor: autovacuum launcher process  \npostgres 24456 24328  0 15:23 ?        00:00:00 postgres: pg_auto_failover monitor: stats collector process  \npostgres 24457 24328  0 15:23 ?        00:00:00 postgres: pg_auto_failover monitor: bgworker: pg_auto_failover monitor  \npostgres 24458 24328  0 15:23 ?        00:00:00 postgres: pg_auto_failover monitor: bgworker: logical replication launcher  \npostgres 24471 24328  0 15:23 ?        00:00:00 postgres: pg_auto_failover monitor: bgworker: pg_auto_failover monitor worker  \npostgres 24472 24328  0 15:23 ?        00:00:00 postgres: pg_auto_failover monitor: bgworker: pg_auto_failover monitor worker  \npostgres 24512 24328  0 15:23 ?        00:00:00 postgres: pg_auto_failover monitor: autoctl_node pg_auto_failover [local] idle\njomoon   24544 19261  0 15:23 pts/0    00:00:00 /bin/sh -c sudo -H -S  -p \"[sudo via ansible, key=heiclncsarmbzvwpwqehoyqncwgpzqlt] password:\" -u postgres /bin/sh -c 'echo BECOME-SUCCESS-heiclncsarmbzvwpwqehoyqncwgpzqlt ; /usr/bin/python /var/tmp/ansible-tmp-1647843805.472515-23925-69352356793962/AnsiballZ_command.py' && sleep 0\nroot     24568 24544  0 15:23 pts/0    00:00:00 sudo -H -S -p [sudo via ansible, key=heiclncsarmbzvwpwqehoyqncwgpzqlt] password: -u postgres /bin/sh -c echo BECOME-SUCCESS-heiclncsarmbzvwpwqehoyqncwgpzqlt ; /usr/bin/python /var/tmp/ansible-tmp-1647843805.472515-23925-69352356793962/AnsiballZ_command.py\npostgres 24569 24568  0 15:23 pts/0    00:00:00 /bin/sh -c echo BECOME-SUCCESS-heiclncsarmbzvwpwqehoyqncwgpzqlt ; /usr/bin/python /var/tmp/ansible-tmp-1647843805.472515-23925-69352356793962/AnsiballZ_command.py\npostgres 24570 24569  0 15:23 pts/0    00:00:00 /usr/bin/python /var/tmp/ansible-tmp-1647843805.472515-23925-69352356793962/AnsiballZ_command.py\npostgres 24572 24570  0 15:23 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )\npostgres 24573 24572  0 15:23 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )\npostgres 24574 24573  0 15:23 pts/0    00:00:00 ps -ef\npostgres 24575 24573  0 15:23 pts/0    00:00:00 grep postgres",
        "stdout_lines": [
            "postgres 24282     1  0 15:23 ?        00:00:00 /usr/bin/pg_autoctl run",
            "postgres 24286 24282  0 15:23 ?        00:00:00 pg_autoctl: start/stop postgres",
            "postgres 24287 24282  0 15:23 ?        00:00:00 pg_autoctl: monitor listener",
            "postgres 24328 24286  2 15:23 ?        00:00:00 /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *",
            "postgres 24430 24328  0 15:23 ?        00:00:00 postgres: pg_auto_failover monitor: logger process  ",
            "postgres 24452 24328  0 15:23 ?        00:00:00 postgres: pg_auto_failover monitor: checkpointer process  ",
            "postgres 24453 24328  0 15:23 ?        00:00:00 postgres: pg_auto_failover monitor: writer process  ",
            "postgres 24454 24328  0 15:23 ?        00:00:00 postgres: pg_auto_failover monitor: wal writer process  ",
            "postgres 24455 24328  0 15:23 ?        00:00:00 postgres: pg_auto_failover monitor: autovacuum launcher process  ",
            "postgres 24456 24328  0 15:23 ?        00:00:00 postgres: pg_auto_failover monitor: stats collector process  ",
            "postgres 24457 24328  0 15:23 ?        00:00:00 postgres: pg_auto_failover monitor: bgworker: pg_auto_failover monitor  ",
            "postgres 24458 24328  0 15:23 ?        00:00:00 postgres: pg_auto_failover monitor: bgworker: logical replication launcher  ",
            "postgres 24471 24328  0 15:23 ?        00:00:00 postgres: pg_auto_failover monitor: bgworker: pg_auto_failover monitor worker  ",
            "postgres 24472 24328  0 15:23 ?        00:00:00 postgres: pg_auto_failover monitor: bgworker: pg_auto_failover monitor worker  ",
            "postgres 24512 24328  0 15:23 ?        00:00:00 postgres: pg_auto_failover monitor: autoctl_node pg_auto_failover [local] idle",
            "jomoon   24544 19261  0 15:23 pts/0    00:00:00 /bin/sh -c sudo -H -S  -p \"[sudo via ansible, key=heiclncsarmbzvwpwqehoyqncwgpzqlt] password:\" -u postgres /bin/sh -c 'echo BECOME-SUCCESS-heiclncsarmbzvwpwqehoyqncwgpzqlt ; /usr/bin/python /var/tmp/ansible-tmp-1647843805.472515-23925-69352356793962/AnsiballZ_command.py' && sleep 0",
            "root     24568 24544  0 15:23 pts/0    00:00:00 sudo -H -S -p [sudo via ansible, key=heiclncsarmbzvwpwqehoyqncwgpzqlt] password: -u postgres /bin/sh -c echo BECOME-SUCCESS-heiclncsarmbzvwpwqehoyqncwgpzqlt ; /usr/bin/python /var/tmp/ansible-tmp-1647843805.472515-23925-69352356793962/AnsiballZ_command.py",
            "postgres 24569 24568  0 15:23 pts/0    00:00:00 /bin/sh -c echo BECOME-SUCCESS-heiclncsarmbzvwpwqehoyqncwgpzqlt ; /usr/bin/python /var/tmp/ansible-tmp-1647843805.472515-23925-69352356793962/AnsiballZ_command.py",
            "postgres 24570 24569  0 15:23 pts/0    00:00:00 /usr/bin/python /var/tmp/ansible-tmp-1647843805.472515-23925-69352356793962/AnsiballZ_command.py",
            "postgres 24572 24570  0 15:23 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )",
            "postgres 24573 24572  0 15:23 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )",
            "postgres 24574 24573  0 15:23 pts/0    00:00:00 ps -ef",
            "postgres 24575 24573  0 15:23 pts/0    00:00:00 grep postgres"
        ]
    }
}
2022-03-21 15:23:25,963 p=22186 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:23:25,963 p=22186 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:23:25,978 p=22186 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:23:25,987 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the current state of monitor] *******************************************************************
2022-03-21 15:23:26,021 p=22186 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:23:26,036 p=22186 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:23:26,049 p=22186 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:23:26,484 p=22186 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:23:26,492 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:23:26,550 p=22186 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": true,
        "cmd": "( psql -c \"\\l\" )",
        "delta": "0:00:00.035116",
        "end": "2022-03-21 15:23:26.710813",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-21 15:23:26.675697",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "                                    List of databases\n       Name       |  Owner   | Encoding |  Collate   |   Ctype    |   Access privileges   \n------------------+----------+----------+------------+------------+-----------------------\n pg_auto_failover | autoctl  | UTF8     | en_US.utf8 | en_US.utf8 | \n postgres         | postgres | UTF8     | en_US.utf8 | en_US.utf8 | \n template0        | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +\n                  |          |          |            |            | postgres=CTc/postgres\n template1        | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +\n                  |          |          |            |            | postgres=CTc/postgres\n(4 rows)",
        "stdout_lines": [
            "                                    List of databases",
            "       Name       |  Owner   | Encoding |  Collate   |   Ctype    |   Access privileges   ",
            "------------------+----------+----------+------------+------------+-----------------------",
            " pg_auto_failover | autoctl  | UTF8     | en_US.utf8 | en_US.utf8 | ",
            " postgres         | postgres | UTF8     | en_US.utf8 | en_US.utf8 | ",
            " template0        | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +",
            "                  |          |          |            |            | postgres=CTc/postgres",
            " template1        | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +",
            "                  |          |          |            |            | postgres=CTc/postgres",
            "(4 rows)"
        ]
    }
}
2022-03-21 15:23:26,564 p=22186 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:23:26,565 p=22186 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:23:26,577 p=22186 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:23:26,586 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : Create primiary instance. It will automatically be set by the monitor as the primary node with read-write capability (PGDATA = /var/lib/pgpsql/ha)] ***
2022-03-21 15:23:26,606 p=22186 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:23:26,635 p=22186 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:23:26,647 p=22186 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:23:45,214 p=22186 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:23:45,226 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:23:45,248 p=22186 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:23:45,300 p=22186 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "30811258113.29293",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ;  pg_autoctl create postgres --pgdata \"ha\" --auth trust --ssl-self-signed --username ha-admin --dbname \"appdb\" --hostname \"co7-node01\" --pgctl /bin/pg_ctl --monitor 'postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require' )",
        "delta": "0:00:13.195786",
        "end": "2022-03-21 15:23:40.613904",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/30811258113.29293",
        "start": "2022-03-21 15:23:27.418118",
        "started": 1,
        "stderr": "15:23:27 29303 INFO  Using default --ssl-mode \"require\"\n15:23:27 29303 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n15:23:27 29303 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n15:23:27 29303 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n15:23:27 29303 INFO  Found a stale pidfile at \"/tmp/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.pid\"\n15:23:27 29303 WARN  Removing the stale pid file \"/tmp/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.pid\"\n15:23:27 29303 INFO  Started pg_autoctl postgres service with pid 29305\n15:23:27 29305 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v\n15:23:27 29303 INFO  Started pg_autoctl node-init service with pid 29306\n15:23:27 29306 INFO  Registered node 1 (co7-node01:5432) with name \"node_1\" in formation \"default\", group 0, state \"single\"\n15:23:27 29306 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"\n15:23:27 29306 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"\n15:23:27 29306 INFO  Successfully registered as \"single\" to the monitor.\n15:23:27 29306 INFO  FSM transition from \"init\" to \"single\": Start as a single node\n15:23:27 29306 INFO  Initialising postgres as a primary\n15:23:27 29306 INFO  Initialising a PostgreSQL cluster at \"ha\"\n15:23:27 29306 INFO  /bin/pg_ctl initdb -s -D ha --option '--auth=trust'\n15:23:34 29306 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n15:23:34 29306 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.\n15:23:34 29306 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n15:23:34 29306 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"\n15:23:34 29306 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node01\"\n15:23:36 29457 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *\n15:23:36 29305 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 29457\n15:23:37 29306 INFO  CREATE DATABASE appdb;\n15:23:39 29306 INFO  CREATE EXTENSION pg_stat_statements;\n15:23:39 29306 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node01\"\n15:23:39 29306 INFO  Contents of \"/var/lib/pgsql/ha/postgresql-auto-failover.conf\" have changed, overwriting\n15:23:39 29306 WARN  Failed to resolve hostname \"co7-master\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n15:23:39 29306 WARN  Postgres might deny connection attempts from \"co7-master\", even with the new HBA rules.\n15:23:39 29306 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n15:23:39 29306 WARN  Using IP address \"192.168.0.81\" in HBA file instead of hostname \"co7-master\"\n15:23:39 29306 INFO  Transition complete: current state is now \"single\"\n15:23:39 29306 INFO  keeper has been successfully initialized.\n15:23:39 29303 WARN  pg_autoctl service node-init exited with exit status 0\n15:23:39 29305 INFO  Postgres controller service received signal SIGTERM, terminating\n15:23:39 29305 INFO  Stopping pg_autoctl postgres service\n15:23:39 29305 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast\n15:23:39 29303 INFO  Waiting for subprocesses to terminate.\n15:23:40 29303 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "15:23:27 29303 INFO  Using default --ssl-mode \"require\"",
            "15:23:27 29303 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "15:23:27 29303 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "15:23:27 29303 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "15:23:27 29303 INFO  Found a stale pidfile at \"/tmp/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.pid\"",
            "15:23:27 29303 WARN  Removing the stale pid file \"/tmp/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.pid\"",
            "15:23:27 29303 INFO  Started pg_autoctl postgres service with pid 29305",
            "15:23:27 29305 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v",
            "15:23:27 29303 INFO  Started pg_autoctl node-init service with pid 29306",
            "15:23:27 29306 INFO  Registered node 1 (co7-node01:5432) with name \"node_1\" in formation \"default\", group 0, state \"single\"",
            "15:23:27 29306 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"",
            "15:23:27 29306 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"",
            "15:23:27 29306 INFO  Successfully registered as \"single\" to the monitor.",
            "15:23:27 29306 INFO  FSM transition from \"init\" to \"single\": Start as a single node",
            "15:23:27 29306 INFO  Initialising postgres as a primary",
            "15:23:27 29306 INFO  Initialising a PostgreSQL cluster at \"ha\"",
            "15:23:27 29306 INFO  /bin/pg_ctl initdb -s -D ha --option '--auth=trust'",
            "15:23:34 29306 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "15:23:34 29306 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.",
            "15:23:34 29306 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "15:23:34 29306 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"",
            "15:23:34 29306 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node01\"",
            "15:23:36 29457 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *",
            "15:23:36 29305 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 29457",
            "15:23:37 29306 INFO  CREATE DATABASE appdb;",
            "15:23:39 29306 INFO  CREATE EXTENSION pg_stat_statements;",
            "15:23:39 29306 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node01\"",
            "15:23:39 29306 INFO  Contents of \"/var/lib/pgsql/ha/postgresql-auto-failover.conf\" have changed, overwriting",
            "15:23:39 29306 WARN  Failed to resolve hostname \"co7-master\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "15:23:39 29306 WARN  Postgres might deny connection attempts from \"co7-master\", even with the new HBA rules.",
            "15:23:39 29306 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "15:23:39 29306 WARN  Using IP address \"192.168.0.81\" in HBA file instead of hostname \"co7-master\"",
            "15:23:39 29306 INFO  Transition complete: current state is now \"single\"",
            "15:23:39 29306 INFO  keeper has been successfully initialized.",
            "15:23:39 29303 WARN  pg_autoctl service node-init exited with exit status 0",
            "15:23:39 29305 INFO  Postgres controller service received signal SIGTERM, terminating",
            "15:23:39 29305 INFO  Stopping pg_autoctl postgres service",
            "15:23:39 29305 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast",
            "15:23:39 29303 INFO  Waiting for subprocesses to terminate.",
            "15:23:40 29303 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": [],
        "warnings": [
            "Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually"
        ]
    }
}
2022-03-21 15:23:45,301 p=22186 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:23:45,301 p=22186 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:23:45,310 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of pirmary instance] *******************************************************
2022-03-21 15:23:45,331 p=22186 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:23:45,364 p=22186 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:23:45,375 p=22186 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:23:51,753 p=22186 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:23:51,763 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:23:51,787 p=22186 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:23:51,826 p=22186 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "711279370254.29889",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl -q show systemd --pgdata ~postgres/ha > pgautofailover.service )",
        "delta": "0:00:00.031364",
        "end": "2022-03-21 15:23:46.229915",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/711279370254.29889",
        "start": "2022-03-21 15:23:46.198551",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 15:23:51,832 p=22186 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:23:51,838 p=22186 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:23:51,847 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : Copy primary systemd service file of primary instance] *************************************************
2022-03-21 15:23:51,868 p=22186 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:23:51,900 p=22186 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:23:51,911 p=22186 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:23:52,421 p=22186 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:23:52,431 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start primary systemd service of primary instance] ******************************************
2022-03-21 15:23:52,451 p=22186 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:23:52,481 p=22186 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:23:52,493 p=22186 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:23:53,176 p=22186 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:23:53,187 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 15:23:53,208 p=22186 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:23:53,239 p=22186 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:23:53,252 p=22186 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:23:53,685 p=22186 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:23:53,695 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the state of primary instance] ******************************************************************
2022-03-21 15:23:53,717 p=22186 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:23:53,747 p=22186 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:23:53,758 p=22186 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:23:54,285 p=22186 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:23:54,295 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:23:54,317 p=22186 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:23:54,352 p=22186 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "changed": true,
        "cmd": "( source ~/.bash_profile ; pg_autoctl show state )",
        "delta": "0:00:00.064371",
        "end": "2022-03-21 15:23:54.509335",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-21 15:23:54.444964",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State\n-------+-------+-----------------+-----------+-----------+---------------------+--------------------\nnode_1 |     1 | co7-node01:5432 | 0/16C4AF0 |        no |              single |              single",
        "stdout_lines": [
            "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State",
            "-------+-------+-----------------+-----------+-----------+---------------------+--------------------",
            "node_1 |     1 | co7-node01:5432 | 0/16C4AF0 |        no |              single |              single"
        ]
    }
}
2022-03-21 15:23:54,353 p=22186 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:23:54,365 p=22186 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:23:54,374 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : Create secondary instance. It will automatically be set by the monitor as the secondary  node with read-write capability (PGDATA = /var/lib/pgpsql/ha)] ***
2022-03-21 15:23:54,394 p=22186 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:23:54,412 p=22186 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:27:02,354 p=22186 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"ansible_job_id": "164026040325.27857", "changed": false, "child_pid": 27861, "finished": 1, "msg": "Timeout exceeded", "results_file": "/var/lib/pgsql/.ansible_async/164026040325.27857", "started": 1, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2022-03-21 15:27:02,355 p=22186 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"ansible_job_id": "382039101355.28670", "changed": false, "child_pid": 28674, "finished": 1, "msg": "Timeout exceeded", "results_file": "/var/lib/pgsql/.ansible_async/382039101355.28670", "started": 1, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2022-03-21 15:27:02,364 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:27:02,386 p=22186 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:27:02,396 p=22186 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:27:02,406 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of secondary instance] *****************************************************
2022-03-21 15:27:02,427 p=22186 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:27:02,439 p=22186 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:27:02,450 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:27:02,471 p=22186 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:27:02,483 p=22186 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:27:02,494 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : Copy secondary systemd service file of secondary instance] *********************************************
2022-03-21 15:27:02,514 p=22186 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:27:02,529 p=22186 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:27:02,540 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start secondary systemd service of secondary instance] **************************************
2022-03-21 15:27:02,561 p=22186 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:27:02,573 p=22186 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:27:02,583 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 15:27:02,603 p=22186 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:27:02,615 p=22186 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:27:02,626 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the state of secondary instance] ****************************************************************
2022-03-21 15:27:02,646 p=22186 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:27:02,656 p=22186 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:27:02,667 p=22186 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:27:02,686 p=22186 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:27:02,696 p=22186 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:27:02,727 p=22186 u=moonja n=ansible | PLAY RECAP *************************************************************************************************************************
2022-03-21 15:27:02,727 p=22186 u=moonja n=ansible | co7-master                 : ok=27   changed=15   unreachable=0    failed=0    skipped=19   rescued=0    ignored=0   
2022-03-21 15:27:02,727 p=22186 u=moonja n=ansible | co7-node01                 : ok=21   changed=12   unreachable=0    failed=0    skipped=25   rescued=0    ignored=0   
2022-03-21 15:27:02,727 p=22186 u=moonja n=ansible | co7-node02                 : ok=12   changed=6    unreachable=0    failed=1    skipped=25   rescued=0    ignored=0   
2022-03-21 15:27:02,727 p=22186 u=moonja n=ansible | co7-node03                 : ok=12   changed=6    unreachable=0    failed=1    skipped=25   rescued=0    ignored=0   
2022-03-21 15:27:37,906 p=26033 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from 
ansible-core in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 15:27:38,135 p=26033 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 
2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 15:27:38,139 p=26033 u=moonja n=ansible | [WARNING]: While constructing a mapping from /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/install.yml, line 308,
column 3, found a duplicate dict key (when). Using last defined value only.

2022-03-21 15:27:38,185 p=26033 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/upgrade.yml is empty and had no tasks to include

2022-03-21 15:27:38,198 p=26033 u=moonja n=ansible | PLAY [all] *************************************************************************************************************************
2022-03-21 15:27:38,225 p=26033 u=moonja n=ansible | TASK [Gathering Facts] *************************************************************************************************************
2022-03-21 15:27:40,295 p=26033 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 15:27:40,340 p=26033 u=moonja n=ansible | ok: [co7-master]
2022-03-21 15:27:40,437 p=26033 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 15:27:40,440 p=26033 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 15:27:40,456 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : Install rpm packages of dependenies to need installing packages regarding kubernates] ******************
2022-03-21 15:27:41,491 p=26033 u=moonja n=ansible | ok: [co7-node01] => (item=firewalld)
2022-03-21 15:27:41,502 p=26033 u=moonja n=ansible | ok: [co7-node02] => (item=firewalld)
2022-03-21 15:27:41,507 p=26033 u=moonja n=ansible | ok: [co7-master] => (item=firewalld)
2022-03-21 15:27:41,531 p=26033 u=moonja n=ansible | ok: [co7-node03] => (item=firewalld)
2022-03-21 15:27:42,171 p=26033 u=moonja n=ansible | ok: [co7-node01] => (item=python3)
2022-03-21 15:27:42,227 p=26033 u=moonja n=ansible | ok: [co7-master] => (item=python3)
2022-03-21 15:27:42,242 p=26033 u=moonja n=ansible | ok: [co7-node03] => (item=python3)
2022-03-21 15:27:42,254 p=26033 u=moonja n=ansible | ok: [co7-node02] => (item=python3)
2022-03-21 15:27:47,589 p=26033 u=moonja n=ansible | ok: [co7-node01] => (item=python3-libselinux)
2022-03-21 15:27:48,150 p=26033 u=moonja n=ansible | ok: [co7-node02] => (item=python3-libselinux)
2022-03-21 15:27:48,163 p=26033 u=moonja n=ansible | ok: [co7-master] => (item=python3-libselinux)
2022-03-21 15:27:48,166 p=26033 u=moonja n=ansible | ok: [co7-node03] => (item=python3-libselinux)
2022-03-21 15:27:48,177 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : Start and enable firewalld.] ***************************************************************************
2022-03-21 15:27:49,087 p=26033 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 15:27:49,098 p=26033 u=moonja n=ansible | ok: [co7-master]
2022-03-21 15:27:49,103 p=26033 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 15:27:49,110 p=26033 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 15:27:49,120 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : Open Firewall] *****************************************************************************************
2022-03-21 15:27:50,111 p=26033 u=moonja n=ansible | ok: [co7-node01] => (item=5432)
2022-03-21 15:27:50,113 p=26033 u=moonja n=ansible | ok: [co7-node02] => (item=5432)
2022-03-21 15:27:50,122 p=26033 u=moonja n=ansible | ok: [co7-master] => (item=5432)
2022-03-21 15:27:50,122 p=26033 u=moonja n=ansible | ok: [co7-node03] => (item=5432)
2022-03-21 15:27:50,134 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : Whitelist of Ip addresses] *****************************************************************************
2022-03-21 15:27:50,985 p=26033 u=moonja n=ansible | ok: [co7-node03] => (item=co7-master)
2022-03-21 15:27:50,986 p=26033 u=moonja n=ansible | ok: [co7-master] => (item=co7-master)
2022-03-21 15:27:51,012 p=26033 u=moonja n=ansible | ok: [co7-node01] => (item=co7-master)
2022-03-21 15:27:51,012 p=26033 u=moonja n=ansible | ok: [co7-node02] => (item=co7-master)
2022-03-21 15:27:51,583 p=26033 u=moonja n=ansible | ok: [co7-master] => (item=co7-node01)
2022-03-21 15:27:51,585 p=26033 u=moonja n=ansible | ok: [co7-node03] => (item=co7-node01)
2022-03-21 15:27:51,622 p=26033 u=moonja n=ansible | ok: [co7-node01] => (item=co7-node01)
2022-03-21 15:27:51,628 p=26033 u=moonja n=ansible | ok: [co7-node02] => (item=co7-node01)
2022-03-21 15:27:52,239 p=26033 u=moonja n=ansible | ok: [co7-node03] => (item=co7-node02)
2022-03-21 15:27:52,256 p=26033 u=moonja n=ansible | ok: [co7-master] => (item=co7-node02)
2022-03-21 15:27:52,279 p=26033 u=moonja n=ansible | ok: [co7-node02] => (item=co7-node02)
2022-03-21 15:27:52,302 p=26033 u=moonja n=ansible | ok: [co7-node01] => (item=co7-node02)
2022-03-21 15:27:52,861 p=26033 u=moonja n=ansible | ok: [co7-node02] => (item=co7-node03)
2022-03-21 15:27:52,861 p=26033 u=moonja n=ansible | ok: [co7-node03] => (item=co7-node03)
2022-03-21 15:27:52,863 p=26033 u=moonja n=ansible | ok: [co7-master] => (item=co7-node03)
2022-03-21 15:27:52,878 p=26033 u=moonja n=ansible | ok: [co7-node01] => (item=co7-node03)
2022-03-21 15:27:52,890 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : Bounce firewalld] **************************************************************************************
2022-03-21 15:27:54,556 p=26033 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:27:54,568 p=26033 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:27:54,632 p=26033 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:27:54,648 p=26033 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:27:54,658 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : Copy the vmwawre-postgres rpm file to all hosts in cluster] ********************************************
2022-03-21 15:27:55,937 p=26033 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 15:27:55,948 p=26033 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 15:27:55,954 p=26033 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 15:27:55,963 p=26033 u=moonja n=ansible | ok: [co7-master]
2022-03-21 15:27:55,972 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : Install dependency rpm package for pgautofailover] *****************************************************
2022-03-21 15:28:02,849 p=26033 u=moonja n=ansible | ok: [co7-node02] => (item=python2-psutil)
2022-03-21 15:28:02,849 p=26033 u=moonja n=ansible | ok: [co7-node03] => (item=python2-psutil)
2022-03-21 15:28:02,921 p=26033 u=moonja n=ansible | ok: [co7-node01] => (item=python2-psutil)
2022-03-21 15:28:02,922 p=26033 u=moonja n=ansible | ok: [co7-master] => (item=python2-psutil)
2022-03-21 15:28:09,159 p=26033 u=moonja n=ansible | ok: [co7-node02] => (item=python3)
2022-03-21 15:28:09,173 p=26033 u=moonja n=ansible | ok: [co7-node01] => (item=python3)
2022-03-21 15:28:09,173 p=26033 u=moonja n=ansible | ok: [co7-node03] => (item=python3)
2022-03-21 15:28:09,237 p=26033 u=moonja n=ansible | ok: [co7-master] => (item=python3)
2022-03-21 15:28:09,247 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : Install VMware Postgres on all hosts as root] **********************************************************
2022-03-21 15:28:15,619 p=26033 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 15:28:15,645 p=26033 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 15:28:16,405 p=26033 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 15:28:16,613 p=26033 u=moonja n=ansible | ok: [co7-master]
2022-03-21 15:28:16,622 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 15:28:16,657 p=26033 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:28:16,673 p=26033 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:28:16,685 p=26033 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:28:17,456 p=26033 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:28:17,467 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:28:17,503 p=26033 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "pg_autoctl version 1.4.2\npg_autoctl extension version 1.4\ncompiled with PostgreSQL 10.17 (VMware Postgres 10.17.0) on x86_64-redhat-linux-gnu, compiled by gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-44), 64-bit\ncompatible with Postgres 10, 11, 12, and 13"
}
2022-03-21 15:28:17,520 p=26033 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:28:17,521 p=26033 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:28:17,533 p=26033 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:28:17,543 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 15:28:17,575 p=26033 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:28:17,589 p=26033 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:28:17,602 p=26033 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:28:18,047 p=26033 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:28:18,056 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:28:18,141 p=26033 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "pg_ctl (PostgreSQL) 10.17 (VMware Postgres 10.17.0)"
}
2022-03-21 15:28:18,159 p=26033 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:28:18,159 p=26033 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:28:18,171 p=26033 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:28:18,181 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : Getting process IDs of the pg_autoctl process] *********************************************************
2022-03-21 15:28:18,820 p=26033 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 15:28:18,824 p=26033 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 15:28:18,880 p=26033 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 15:28:18,882 p=26033 u=moonja n=ansible | ok: [co7-master]
2022-03-21 15:28:18,892 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : Printing the process IDs obtained] *********************************************************************
2022-03-21 15:28:18,940 p=26033 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "PIDS of pg_autoctl:24282,24286,24287"
}
2022-03-21 15:28:18,945 p=26033 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": "PIDS of pg_autoctl:30427,30430,30431"
}
2022-03-21 15:28:18,959 p=26033 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 15:28:18,975 p=26033 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 15:28:18,986 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : Stop pgautofailover service of systemd] ****************************************************************
2022-03-21 15:28:19,054 p=26033 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:28:19,067 p=26033 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:28:22,203 p=26033 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:28:22,250 p=26033 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:28:22,260 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:28:22,295 p=26033 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": true,
        "failed": false,
        "name": "pgautofailover",
        "state": "stopped",
        "status": {
            "ActiveEnterTimestamp": "Mon 2022-03-21 15:23:24 KST",
            "ActiveEnterTimestampMonotonic": "6408055958",
            "ActiveExitTimestampMonotonic": "0",
            "ActiveState": "active",
            "After": "systemd-journald.socket basic.target system.slice -.mount",
            "AllowIsolate": "no",
            "AmbientCapabilities": "0",
            "AssertResult": "yes",
            "AssertTimestamp": "Mon 2022-03-21 15:23:24 KST",
            "AssertTimestampMonotonic": "6408055569",
            "Before": "shutdown.target multi-user.target",
            "BlockIOAccounting": "no",
            "BlockIOWeight": "18446744073709551615",
            "CPUAccounting": "no",
            "CPUQuotaPerSecUSec": "infinity",
            "CPUSchedulingPolicy": "0",
            "CPUSchedulingPriority": "0",
            "CPUSchedulingResetOnFork": "no",
            "CPUShares": "18446744073709551615",
            "CanIsolate": "no",
            "CanReload": "no",
            "CanStart": "yes",
            "CanStop": "yes",
            "CapabilityBoundingSet": "18446744073709551615",
            "CollectMode": "inactive",
            "ConditionResult": "yes",
            "ConditionTimestamp": "Mon 2022-03-21 15:23:24 KST",
            "ConditionTimestampMonotonic": "6408055568",
            "Conflicts": "shutdown.target",
            "ControlGroup": "/system.slice/pgautofailover.service",
            "ControlPID": "0",
            "DefaultDependencies": "yes",
            "Delegate": "no",
            "Description": "pg_auto_failover",
            "DevicePolicy": "auto",
            "Environment": "PGDATA=/var/lib/pgsql/monitor",
            "ExecMainCode": "0",
            "ExecMainExitTimestampMonotonic": "0",
            "ExecMainPID": "24282",
            "ExecMainStartTimestamp": "Mon 2022-03-21 15:23:24 KST",
            "ExecMainStartTimestampMonotonic": "6408055920",
            "ExecMainStatus": "0",
            "ExecStart": "{ path=/usr/bin/pg_autoctl ; argv[]=/usr/bin/pg_autoctl run ; ignore_errors=no ; start_time=[Mon 2022-03-21 15:23:24 KST] ; stop_time=[n/a] ; pid=24282 ; code=(null) ; status=0/0 }",
            "FailureAction": "none",
            "FileDescriptorStoreMax": "0",
            "FragmentPath": "/etc/systemd/system/pgautofailover.service",
            "GuessMainPID": "yes",
            "IOScheduling": "0",
            "Id": "pgautofailover.service",
            "IgnoreOnIsolate": "no",
            "IgnoreOnSnapshot": "no",
            "IgnoreSIGPIPE": "yes",
            "InactiveEnterTimestampMonotonic": "0",
            "InactiveExitTimestamp": "Mon 2022-03-21 15:23:24 KST",
            "InactiveExitTimestampMonotonic": "6408055958",
            "JobTimeoutAction": "none",
            "JobTimeoutUSec": "0",
            "KillMode": "control-group",
            "KillSignal": "15",
            "LimitAS": "18446744073709551615",
            "LimitCORE": "18446744073709551615",
            "LimitCPU": "18446744073709551615",
            "LimitDATA": "18446744073709551615",
            "LimitFSIZE": "18446744073709551615",
            "LimitLOCKS": "18446744073709551615",
            "LimitMEMLOCK": "65536",
            "LimitMSGQUEUE": "819200",
            "LimitNICE": "0",
            "LimitNOFILE": "4096",
            "LimitNPROC": "47321",
            "LimitRSS": "18446744073709551615",
            "LimitRTPRIO": "0",
            "LimitRTTIME": "18446744073709551615",
            "LimitSIGPENDING": "47321",
            "LimitSTACK": "18446744073709551615",
            "LoadState": "loaded",
            "MainPID": "24282",
            "MemoryAccounting": "no",
            "MemoryCurrent": "18446744073709551615",
            "MemoryLimit": "18446744073709551615",
            "MountFlags": "0",
            "Names": "pgautofailover.service",
            "NeedDaemonReload": "no",
            "Nice": "0",
            "NoNewPrivileges": "no",
            "NonBlocking": "no",
            "NotifyAccess": "none",
            "OOMScoreAdjust": "0",
            "OnFailureJobMode": "replace",
            "PermissionsStartOnly": "no",
            "PrivateDevices": "no",
            "PrivateNetwork": "no",
            "PrivateTmp": "no",
            "ProtectHome": "no",
            "ProtectSystem": "no",
            "RefuseManualStart": "no",
            "RefuseManualStop": "no",
            "RemainAfterExit": "no",
            "Requires": "basic.target system.slice -.mount",
            "RequiresMountsFor": "/var/lib/pgsql",
            "Restart": "always",
            "RestartUSec": "100ms",
            "Result": "success",
            "RootDirectoryStartOnly": "no",
            "RuntimeDirectoryMode": "0755",
            "SameProcessGroup": "no",
            "SecureBits": "0",
            "SendSIGHUP": "no",
            "SendSIGKILL": "yes",
            "Slice": "system.slice",
            "StandardError": "inherit",
            "StandardInput": "null",
            "StandardOutput": "journal",
            "StartLimitAction": "none",
            "StartLimitBurst": "0",
            "StartLimitInterval": "10000000",
            "StartupBlockIOWeight": "18446744073709551615",
            "StartupCPUShares": "18446744073709551615",
            "StatusErrno": "0",
            "StopWhenUnneeded": "no",
            "SubState": "running",
            "SyslogLevelPrefix": "yes",
            "SyslogPriority": "30",
            "SystemCallErrorNumber": "0",
            "TTYReset": "no",
            "TTYVHangup": "no",
            "TTYVTDisallocate": "no",
            "TasksAccounting": "no",
            "TasksCurrent": "18446744073709551615",
            "TasksMax": "18446744073709551615",
            "TimeoutStartUSec": "1min 30s",
            "TimeoutStopUSec": "1min 30s",
            "TimerSlackNSec": "50000",
            "Transient": "no",
            "Type": "simple",
            "UMask": "0022",
            "UnitFilePreset": "disabled",
            "UnitFileState": "enabled",
            "User": "postgres",
            "WantedBy": "multi-user.target",
            "WatchdogTimestamp": "Mon 2022-03-21 15:23:24 KST",
            "WatchdogTimestampMonotonic": "6408055944",
            "WatchdogUSec": "0",
            "WorkingDirectory": "/var/lib/pgsql"
        }
    }
}
2022-03-21 15:28:22,314 p=26033 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "changed": true,
        "failed": false,
        "name": "pgautofailover",
        "state": "stopped",
        "status": {
            "ActiveEnterTimestamp": "Mon 2022-03-21 15:23:53 KST",
            "ActiveEnterTimestampMonotonic": "6435716522",
            "ActiveExitTimestampMonotonic": "0",
            "ActiveState": "active",
            "After": "systemd-journald.socket basic.target system.slice -.mount",
            "AllowIsolate": "no",
            "AmbientCapabilities": "0",
            "AssertResult": "yes",
            "AssertTimestamp": "Mon 2022-03-21 15:23:53 KST",
            "AssertTimestampMonotonic": "6435716137",
            "Before": "shutdown.target multi-user.target",
            "BlockIOAccounting": "no",
            "BlockIOWeight": "18446744073709551615",
            "CPUAccounting": "no",
            "CPUQuotaPerSecUSec": "infinity",
            "CPUSchedulingPolicy": "0",
            "CPUSchedulingPriority": "0",
            "CPUSchedulingResetOnFork": "no",
            "CPUShares": "18446744073709551615",
            "CanIsolate": "no",
            "CanReload": "no",
            "CanStart": "yes",
            "CanStop": "yes",
            "CapabilityBoundingSet": "18446744073709551615",
            "CollectMode": "inactive",
            "ConditionResult": "yes",
            "ConditionTimestamp": "Mon 2022-03-21 15:23:53 KST",
            "ConditionTimestampMonotonic": "6435716137",
            "Conflicts": "shutdown.target",
            "ControlGroup": "/system.slice/pgautofailover.service",
            "ControlPID": "0",
            "DefaultDependencies": "yes",
            "Delegate": "no",
            "Description": "pg_auto_failover",
            "DevicePolicy": "auto",
            "Environment": "PGDATA=/var/lib/pgsql/ha",
            "ExecMainCode": "0",
            "ExecMainExitTimestampMonotonic": "0",
            "ExecMainPID": "30427",
            "ExecMainStartTimestamp": "Mon 2022-03-21 15:23:53 KST",
            "ExecMainStartTimestampMonotonic": "6435716475",
            "ExecMainStatus": "0",
            "ExecStart": "{ path=/usr/bin/pg_autoctl ; argv[]=/usr/bin/pg_autoctl run ; ignore_errors=no ; start_time=[Mon 2022-03-21 15:23:53 KST] ; stop_time=[n/a] ; pid=30427 ; code=(null) ; status=0/0 }",
            "FailureAction": "none",
            "FileDescriptorStoreMax": "0",
            "FragmentPath": "/etc/systemd/system/pgautofailover.service",
            "GuessMainPID": "yes",
            "IOScheduling": "0",
            "Id": "pgautofailover.service",
            "IgnoreOnIsolate": "no",
            "IgnoreOnSnapshot": "no",
            "IgnoreSIGPIPE": "yes",
            "InactiveEnterTimestampMonotonic": "0",
            "InactiveExitTimestamp": "Mon 2022-03-21 15:23:53 KST",
            "InactiveExitTimestampMonotonic": "6435716522",
            "JobTimeoutAction": "none",
            "JobTimeoutUSec": "0",
            "KillMode": "control-group",
            "KillSignal": "15",
            "LimitAS": "18446744073709551615",
            "LimitCORE": "18446744073709551615",
            "LimitCPU": "18446744073709551615",
            "LimitDATA": "18446744073709551615",
            "LimitFSIZE": "18446744073709551615",
            "LimitLOCKS": "18446744073709551615",
            "LimitMEMLOCK": "65536",
            "LimitMSGQUEUE": "819200",
            "LimitNICE": "0",
            "LimitNOFILE": "4096",
            "LimitNPROC": "31193",
            "LimitRSS": "18446744073709551615",
            "LimitRTPRIO": "0",
            "LimitRTTIME": "18446744073709551615",
            "LimitSIGPENDING": "31193",
            "LimitSTACK": "18446744073709551615",
            "LoadState": "loaded",
            "MainPID": "30427",
            "MemoryAccounting": "no",
            "MemoryCurrent": "18446744073709551615",
            "MemoryLimit": "18446744073709551615",
            "MountFlags": "0",
            "Names": "pgautofailover.service",
            "NeedDaemonReload": "no",
            "Nice": "0",
            "NoNewPrivileges": "no",
            "NonBlocking": "no",
            "NotifyAccess": "none",
            "OOMScoreAdjust": "0",
            "OnFailureJobMode": "replace",
            "PermissionsStartOnly": "no",
            "PrivateDevices": "no",
            "PrivateNetwork": "no",
            "PrivateTmp": "no",
            "ProtectHome": "no",
            "ProtectSystem": "no",
            "RefuseManualStart": "no",
            "RefuseManualStop": "no",
            "RemainAfterExit": "no",
            "Requires": "basic.target system.slice -.mount",
            "RequiresMountsFor": "/var/lib/pgsql",
            "Restart": "always",
            "RestartUSec": "100ms",
            "Result": "success",
            "RootDirectoryStartOnly": "no",
            "RuntimeDirectoryMode": "0755",
            "SameProcessGroup": "no",
            "SecureBits": "0",
            "SendSIGHUP": "no",
            "SendSIGKILL": "yes",
            "Slice": "system.slice",
            "StandardError": "inherit",
            "StandardInput": "null",
            "StandardOutput": "journal",
            "StartLimitAction": "none",
            "StartLimitBurst": "0",
            "StartLimitInterval": "10000000",
            "StartupBlockIOWeight": "18446744073709551615",
            "StartupCPUShares": "18446744073709551615",
            "StatusErrno": "0",
            "StopWhenUnneeded": "no",
            "SubState": "running",
            "SyslogLevelPrefix": "yes",
            "SyslogPriority": "30",
            "SystemCallErrorNumber": "0",
            "TTYReset": "no",
            "TTYVHangup": "no",
            "TTYVTDisallocate": "no",
            "TasksAccounting": "no",
            "TasksCurrent": "18446744073709551615",
            "TasksMax": "18446744073709551615",
            "TimeoutStartUSec": "1min 30s",
            "TimeoutStopUSec": "1min 30s",
            "TimerSlackNSec": "50000",
            "Transient": "no",
            "Type": "simple",
            "UMask": "0022",
            "UnitFilePreset": "disabled",
            "UnitFileState": "enabled",
            "User": "postgres",
            "WantedBy": "multi-user.target",
            "WatchdogTimestamp": "Mon 2022-03-21 15:23:53 KST",
            "WatchdogTimestampMonotonic": "6435716507",
            "WatchdogUSec": "0",
            "WorkingDirectory": "/var/lib/pgsql"
        }
    }
}
2022-03-21 15:28:22,315 p=26033 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 15:28:22,326 p=26033 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 15:28:22,335 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : Create the monitor node] *******************************************************************************
2022-03-21 15:28:22,380 p=26033 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:28:22,381 p=26033 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:28:22,392 p=26033 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:28:28,689 p=26033 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:28:28,697 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:28:28,734 p=26033 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "ansible_job_id": "255434771658.28697",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl create monitor --auth trust --ssl-self-signed --pgdata monitor )",
        "delta": "0:00:01.005649",
        "end": "2022-03-21 15:28:24.246703",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/255434771658.28697",
        "start": "2022-03-21 15:28:23.241054",
        "started": 1,
        "stderr": "15:28:23 28707 INFO  Using default --ssl-mode \"require\"\n15:28:23 28707 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n15:28:23 28707 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n15:28:23 28707 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n15:28:23 28707 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/monitor/server.crt -keyout /var/lib/pgsql/monitor/server.key -subj \"/CN=co7-master\"\n15:28:23 28707 INFO  Started pg_autoctl postgres service with pid 28711\n15:28:23 28711 INFO   /usr/bin/pg_autoctl do service postgres --pgdata monitor -v\n15:28:23 28707 INFO  Started pg_autoctl monitor-init service with pid 28712\n15:28:23 28712 INFO  Granting connection privileges on 192.168.0.0/24\n15:28:23 28716 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\n15:28:23 28711 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/monitor\" on port 5432 with pid 28716\n15:28:23 28712 INFO  The user \"autoctl\" already exists, skipping.\n15:28:23 28712 INFO  The database \"pg_auto_failover\" already exists, skipping.\n15:28:23 28712 WARN  NOTICE:  extension \"pgautofailover\" already exists, skipping\n15:28:23 28712 INFO  Your pg_auto_failover monitor instance is now ready on port 5432.\n15:28:23 28712 INFO  Monitor has been successfully initialized.\n15:28:23 28707 WARN  pg_autoctl service monitor-init exited with exit status 0\n15:28:23 28711 INFO  Postgres controller service received signal SIGTERM, terminating\n15:28:23 28711 INFO  Stopping pg_autoctl postgres service\n15:28:23 28711 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/monitor --wait stop --mode fast\n15:28:24 28707 INFO  Waiting for subprocesses to terminate.\n15:28:24 28707 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "15:28:23 28707 INFO  Using default --ssl-mode \"require\"",
            "15:28:23 28707 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "15:28:23 28707 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "15:28:23 28707 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "15:28:23 28707 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/monitor/server.crt -keyout /var/lib/pgsql/monitor/server.key -subj \"/CN=co7-master\"",
            "15:28:23 28707 INFO  Started pg_autoctl postgres service with pid 28711",
            "15:28:23 28711 INFO   /usr/bin/pg_autoctl do service postgres --pgdata monitor -v",
            "15:28:23 28707 INFO  Started pg_autoctl monitor-init service with pid 28712",
            "15:28:23 28712 INFO  Granting connection privileges on 192.168.0.0/24",
            "15:28:23 28716 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *",
            "15:28:23 28711 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/monitor\" on port 5432 with pid 28716",
            "15:28:23 28712 INFO  The user \"autoctl\" already exists, skipping.",
            "15:28:23 28712 INFO  The database \"pg_auto_failover\" already exists, skipping.",
            "15:28:23 28712 WARN  NOTICE:  extension \"pgautofailover\" already exists, skipping",
            "15:28:23 28712 INFO  Your pg_auto_failover monitor instance is now ready on port 5432.",
            "15:28:23 28712 INFO  Monitor has been successfully initialized.",
            "15:28:23 28707 WARN  pg_autoctl service monitor-init exited with exit status 0",
            "15:28:23 28711 INFO  Postgres controller service received signal SIGTERM, terminating",
            "15:28:23 28711 INFO  Stopping pg_autoctl postgres service",
            "15:28:23 28711 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/monitor --wait stop --mode fast",
            "15:28:24 28707 INFO  Waiting for subprocesses to terminate.",
            "15:28:24 28707 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 15:28:28,749 p=26033 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:28:28,755 p=26033 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:28:28,762 p=26033 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:28:28,771 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of monitor instance] *******************************************************
2022-03-21 15:28:28,816 p=26033 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:28:28,817 p=26033 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:28:28,828 p=26033 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:28:35,147 p=26033 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:28:35,157 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : Copy systemd service file of monitor instance] *********************************************************
2022-03-21 15:28:35,203 p=26033 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:28:35,204 p=26033 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:28:35,215 p=26033 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:28:35,806 p=26033 u=moonja n=ansible | ok: [co7-master]
2022-03-21 15:28:35,816 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start systemd service of monitor instance] **************************************************
2022-03-21 15:28:35,863 p=26033 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:28:35,863 p=26033 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:28:35,874 p=26033 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:28:36,535 p=26033 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:28:36,546 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:28:36,589 p=26033 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": true,
        "enabled": true,
        "failed": false,
        "name": "pgautofailover",
        "state": "started",
        "status": {
            "ActiveEnterTimestamp": "Mon 2022-03-21 15:23:24 KST",
            "ActiveEnterTimestampMonotonic": "6408055958",
            "ActiveExitTimestamp": "Mon 2022-03-21 15:28:20 KST",
            "ActiveExitTimestampMonotonic": "6703493324",
            "ActiveState": "inactive",
            "After": "-.mount systemd-journald.socket basic.target system.slice",
            "AllowIsolate": "no",
            "AmbientCapabilities": "0",
            "AssertResult": "yes",
            "AssertTimestamp": "Mon 2022-03-21 15:23:24 KST",
            "AssertTimestampMonotonic": "6408055569",
            "Before": "shutdown.target multi-user.target",
            "BlockIOAccounting": "no",
            "BlockIOWeight": "18446744073709551615",
            "CPUAccounting": "no",
            "CPUQuotaPerSecUSec": "infinity",
            "CPUSchedulingPolicy": "0",
            "CPUSchedulingPriority": "0",
            "CPUSchedulingResetOnFork": "no",
            "CPUShares": "18446744073709551615",
            "CanIsolate": "no",
            "CanReload": "no",
            "CanStart": "yes",
            "CanStop": "yes",
            "CapabilityBoundingSet": "18446744073709551615",
            "CollectMode": "inactive",
            "ConditionResult": "yes",
            "ConditionTimestamp": "Mon 2022-03-21 15:23:24 KST",
            "ConditionTimestampMonotonic": "6408055568",
            "Conflicts": "shutdown.target",
            "ControlPID": "0",
            "DefaultDependencies": "yes",
            "Delegate": "no",
            "Description": "pg_auto_failover",
            "DevicePolicy": "auto",
            "Environment": "PGDATA=/var/lib/pgsql/monitor",
            "ExecMainCode": "1",
            "ExecMainExitTimestamp": "Mon 2022-03-21 15:28:22 KST",
            "ExecMainExitTimestampMonotonic": "6705807173",
            "ExecMainPID": "24282",
            "ExecMainStartTimestamp": "Mon 2022-03-21 15:23:24 KST",
            "ExecMainStartTimestampMonotonic": "6408055920",
            "ExecMainStatus": "0",
            "ExecStart": "{ path=/usr/bin/pg_autoctl ; argv[]=/usr/bin/pg_autoctl run ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }",
            "FailureAction": "none",
            "FileDescriptorStoreMax": "0",
            "FragmentPath": "/etc/systemd/system/pgautofailover.service",
            "GuessMainPID": "yes",
            "IOScheduling": "0",
            "Id": "pgautofailover.service",
            "IgnoreOnIsolate": "no",
            "IgnoreOnSnapshot": "no",
            "IgnoreSIGPIPE": "yes",
            "InactiveEnterTimestamp": "Mon 2022-03-21 15:28:22 KST",
            "InactiveEnterTimestampMonotonic": "6705807314",
            "InactiveExitTimestamp": "Mon 2022-03-21 15:23:24 KST",
            "InactiveExitTimestampMonotonic": "6408055958",
            "JobTimeoutAction": "none",
            "JobTimeoutUSec": "0",
            "KillMode": "control-group",
            "KillSignal": "15",
            "LimitAS": "18446744073709551615",
            "LimitCORE": "18446744073709551615",
            "LimitCPU": "18446744073709551615",
            "LimitDATA": "18446744073709551615",
            "LimitFSIZE": "18446744073709551615",
            "LimitLOCKS": "18446744073709551615",
            "LimitMEMLOCK": "65536",
            "LimitMSGQUEUE": "819200",
            "LimitNICE": "0",
            "LimitNOFILE": "4096",
            "LimitNPROC": "47321",
            "LimitRSS": "18446744073709551615",
            "LimitRTPRIO": "0",
            "LimitRTTIME": "18446744073709551615",
            "LimitSIGPENDING": "47321",
            "LimitSTACK": "18446744073709551615",
            "LoadState": "loaded",
            "MainPID": "0",
            "MemoryAccounting": "no",
            "MemoryCurrent": "18446744073709551615",
            "MemoryLimit": "18446744073709551615",
            "MountFlags": "0",
            "Names": "pgautofailover.service",
            "NeedDaemonReload": "no",
            "Nice": "0",
            "NoNewPrivileges": "no",
            "NonBlocking": "no",
            "NotifyAccess": "none",
            "OOMScoreAdjust": "0",
            "OnFailureJobMode": "replace",
            "PermissionsStartOnly": "no",
            "PrivateDevices": "no",
            "PrivateNetwork": "no",
            "PrivateTmp": "no",
            "ProtectHome": "no",
            "ProtectSystem": "no",
            "RefuseManualStart": "no",
            "RefuseManualStop": "no",
            "RemainAfterExit": "no",
            "Requires": "-.mount basic.target system.slice",
            "RequiresMountsFor": "/var/lib/pgsql",
            "Restart": "always",
            "RestartUSec": "100ms",
            "Result": "success",
            "RootDirectoryStartOnly": "no",
            "RuntimeDirectoryMode": "0755",
            "SameProcessGroup": "no",
            "SecureBits": "0",
            "SendSIGHUP": "no",
            "SendSIGKILL": "yes",
            "Slice": "system.slice",
            "StandardError": "inherit",
            "StandardInput": "null",
            "StandardOutput": "journal",
            "StartLimitAction": "none",
            "StartLimitBurst": "0",
            "StartLimitInterval": "10000000",
            "StartupBlockIOWeight": "18446744073709551615",
            "StartupCPUShares": "18446744073709551615",
            "StatusErrno": "0",
            "StopWhenUnneeded": "no",
            "SubState": "dead",
            "SyslogLevelPrefix": "yes",
            "SyslogPriority": "30",
            "SystemCallErrorNumber": "0",
            "TTYReset": "no",
            "TTYVHangup": "no",
            "TTYVTDisallocate": "no",
            "TasksAccounting": "no",
            "TasksCurrent": "18446744073709551615",
            "TasksMax": "18446744073709551615",
            "TimeoutStartUSec": "1min 30s",
            "TimeoutStopUSec": "1min 30s",
            "TimerSlackNSec": "50000",
            "Transient": "no",
            "Type": "simple",
            "UMask": "0022",
            "UnitFilePreset": "disabled",
            "UnitFileState": "enabled",
            "User": "postgres",
            "WantedBy": "multi-user.target",
            "WatchdogTimestampMonotonic": "0",
            "WatchdogUSec": "0",
            "WorkingDirectory": "/var/lib/pgsql"
        }
    }
}
2022-03-21 15:28:36,603 p=26033 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:28:36,604 p=26033 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:28:36,615 p=26033 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:28:36,625 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 15:28:36,657 p=26033 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:28:36,673 p=26033 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:28:36,685 p=26033 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:28:37,313 p=26033 u=moonja n=ansible | ok: [co7-master]
2022-03-21 15:28:37,324 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the current state of monitor instance] **********************************************************
2022-03-21 15:28:37,357 p=26033 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:28:37,371 p=26033 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:28:37,384 p=26033 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:28:37,852 p=26033 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:28:37,862 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:28:37,899 p=26033 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": true,
        "cmd": "( ps -ef | grep postgres )",
        "delta": "0:00:00.035331",
        "end": "2022-03-21 15:28:38.093684",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-21 15:28:38.058353",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "postgres 29613     1  0 15:28 ?        00:00:00 /usr/bin/pg_autoctl run\npostgres 29616 29613  0 15:28 ?        00:00:00 pg_autoctl: start/stop postgres\npostgres 29617 29613  0 15:28 ?        00:00:00 pg_autoctl: monitor listener\npostgres 29647 29616  5 15:28 ?        00:00:00 /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\npostgres 29692 29647  0 15:28 ?        00:00:00 postgres: pg_auto_failover monitor: logger process  \npostgres 29700 29647  0 15:28 ?        00:00:00 postgres: pg_auto_failover monitor: checkpointer process  \npostgres 29701 29647  0 15:28 ?        00:00:00 postgres: pg_auto_failover monitor: writer process  \npostgres 29702 29647  0 15:28 ?        00:00:00 postgres: pg_auto_failover monitor: wal writer process  \npostgres 29703 29647  0 15:28 ?        00:00:00 postgres: pg_auto_failover monitor: autovacuum launcher process  \npostgres 29704 29647  0 15:28 ?        00:00:00 postgres: pg_auto_failover monitor: stats collector process  \npostgres 29705 29647  0 15:28 ?        00:00:00 postgres: pg_auto_failover monitor: bgworker: pg_auto_failover monitor  \npostgres 29707 29647  0 15:28 ?        00:00:00 postgres: pg_auto_failover monitor: bgworker: logical replication launcher  \npostgres 29719 29647  0 15:28 ?        00:00:00 postgres: pg_auto_failover monitor: bgworker: pg_auto_failover monitor worker  \npostgres 29720 29647  0 15:28 ?        00:00:00 postgres: pg_auto_failover monitor: bgworker: pg_auto_failover monitor worker  \npostgres 29721 29647  0 15:28 ?        00:00:00 postgres: pg_auto_failover monitor: autoctl_node pg_auto_failover [local] idle\njomoon   29873 24952  0 15:28 pts/0    00:00:00 /bin/sh -c sudo -H -S  -p \"[sudo via ansible, key=mifcauxlzevxgutyzomzhbnnkiiefqfk] password:\" -u postgres /bin/sh -c 'echo BECOME-SUCCESS-mifcauxlzevxgutyzomzhbnnkiiefqfk ; /usr/bin/python /var/tmp/ansible-tmp-1647844117.425059-27584-139246724973716/AnsiballZ_command.py' && sleep 0\nroot     29897 29873  0 15:28 pts/0    00:00:00 sudo -H -S -p [sudo via ansible, key=mifcauxlzevxgutyzomzhbnnkiiefqfk] password: -u postgres /bin/sh -c echo BECOME-SUCCESS-mifcauxlzevxgutyzomzhbnnkiiefqfk ; /usr/bin/python /var/tmp/ansible-tmp-1647844117.425059-27584-139246724973716/AnsiballZ_command.py\npostgres 29898 29897  0 15:28 pts/0    00:00:00 /bin/sh -c echo BECOME-SUCCESS-mifcauxlzevxgutyzomzhbnnkiiefqfk ; /usr/bin/python /var/tmp/ansible-tmp-1647844117.425059-27584-139246724973716/AnsiballZ_command.py\npostgres 29899 29898  0 15:28 pts/0    00:00:00 /usr/bin/python /var/tmp/ansible-tmp-1647844117.425059-27584-139246724973716/AnsiballZ_command.py\npostgres 29901 29899  0 15:28 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )\npostgres 29902 29901  0 15:28 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )\npostgres 29903 29902  0 15:28 pts/0    00:00:00 ps -ef\npostgres 29904 29902  0 15:28 pts/0    00:00:00 grep postgres",
        "stdout_lines": [
            "postgres 29613     1  0 15:28 ?        00:00:00 /usr/bin/pg_autoctl run",
            "postgres 29616 29613  0 15:28 ?        00:00:00 pg_autoctl: start/stop postgres",
            "postgres 29617 29613  0 15:28 ?        00:00:00 pg_autoctl: monitor listener",
            "postgres 29647 29616  5 15:28 ?        00:00:00 /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *",
            "postgres 29692 29647  0 15:28 ?        00:00:00 postgres: pg_auto_failover monitor: logger process  ",
            "postgres 29700 29647  0 15:28 ?        00:00:00 postgres: pg_auto_failover monitor: checkpointer process  ",
            "postgres 29701 29647  0 15:28 ?        00:00:00 postgres: pg_auto_failover monitor: writer process  ",
            "postgres 29702 29647  0 15:28 ?        00:00:00 postgres: pg_auto_failover monitor: wal writer process  ",
            "postgres 29703 29647  0 15:28 ?        00:00:00 postgres: pg_auto_failover monitor: autovacuum launcher process  ",
            "postgres 29704 29647  0 15:28 ?        00:00:00 postgres: pg_auto_failover monitor: stats collector process  ",
            "postgres 29705 29647  0 15:28 ?        00:00:00 postgres: pg_auto_failover monitor: bgworker: pg_auto_failover monitor  ",
            "postgres 29707 29647  0 15:28 ?        00:00:00 postgres: pg_auto_failover monitor: bgworker: logical replication launcher  ",
            "postgres 29719 29647  0 15:28 ?        00:00:00 postgres: pg_auto_failover monitor: bgworker: pg_auto_failover monitor worker  ",
            "postgres 29720 29647  0 15:28 ?        00:00:00 postgres: pg_auto_failover monitor: bgworker: pg_auto_failover monitor worker  ",
            "postgres 29721 29647  0 15:28 ?        00:00:00 postgres: pg_auto_failover monitor: autoctl_node pg_auto_failover [local] idle",
            "jomoon   29873 24952  0 15:28 pts/0    00:00:00 /bin/sh -c sudo -H -S  -p \"[sudo via ansible, key=mifcauxlzevxgutyzomzhbnnkiiefqfk] password:\" -u postgres /bin/sh -c 'echo BECOME-SUCCESS-mifcauxlzevxgutyzomzhbnnkiiefqfk ; /usr/bin/python /var/tmp/ansible-tmp-1647844117.425059-27584-139246724973716/AnsiballZ_command.py' && sleep 0",
            "root     29897 29873  0 15:28 pts/0    00:00:00 sudo -H -S -p [sudo via ansible, key=mifcauxlzevxgutyzomzhbnnkiiefqfk] password: -u postgres /bin/sh -c echo BECOME-SUCCESS-mifcauxlzevxgutyzomzhbnnkiiefqfk ; /usr/bin/python /var/tmp/ansible-tmp-1647844117.425059-27584-139246724973716/AnsiballZ_command.py",
            "postgres 29898 29897  0 15:28 pts/0    00:00:00 /bin/sh -c echo BECOME-SUCCESS-mifcauxlzevxgutyzomzhbnnkiiefqfk ; /usr/bin/python /var/tmp/ansible-tmp-1647844117.425059-27584-139246724973716/AnsiballZ_command.py",
            "postgres 29899 29898  0 15:28 pts/0    00:00:00 /usr/bin/python /var/tmp/ansible-tmp-1647844117.425059-27584-139246724973716/AnsiballZ_command.py",
            "postgres 29901 29899  0 15:28 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )",
            "postgres 29902 29901  0 15:28 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )",
            "postgres 29903 29902  0 15:28 pts/0    00:00:00 ps -ef",
            "postgres 29904 29902  0 15:28 pts/0    00:00:00 grep postgres"
        ]
    }
}
2022-03-21 15:28:37,914 p=26033 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:28:37,915 p=26033 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:28:37,927 p=26033 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:28:37,936 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the current state of monitor] *******************************************************************
2022-03-21 15:28:37,981 p=26033 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:28:37,982 p=26033 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:28:37,993 p=26033 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:28:38,445 p=26033 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:28:38,455 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:28:38,492 p=26033 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": true,
        "cmd": "( psql -c \"\\l\" )",
        "delta": "0:00:00.035349",
        "end": "2022-03-21 15:28:38.685971",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-21 15:28:38.650622",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "                                    List of databases\n       Name       |  Owner   | Encoding |  Collate   |   Ctype    |   Access privileges   \n------------------+----------+----------+------------+------------+-----------------------\n pg_auto_failover | autoctl  | UTF8     | en_US.utf8 | en_US.utf8 | \n postgres         | postgres | UTF8     | en_US.utf8 | en_US.utf8 | \n template0        | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +\n                  |          |          |            |            | postgres=CTc/postgres\n template1        | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +\n                  |          |          |            |            | postgres=CTc/postgres\n(4 rows)",
        "stdout_lines": [
            "                                    List of databases",
            "       Name       |  Owner   | Encoding |  Collate   |   Ctype    |   Access privileges   ",
            "------------------+----------+----------+------------+------------+-----------------------",
            " pg_auto_failover | autoctl  | UTF8     | en_US.utf8 | en_US.utf8 | ",
            " postgres         | postgres | UTF8     | en_US.utf8 | en_US.utf8 | ",
            " template0        | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +",
            "                  |          |          |            |            | postgres=CTc/postgres",
            " template1        | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +",
            "                  |          |          |            |            | postgres=CTc/postgres",
            "(4 rows)"
        ]
    }
}
2022-03-21 15:28:38,508 p=26033 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:28:38,509 p=26033 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:28:38,520 p=26033 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:28:38,529 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : Create primiary instance. It will automatically be set by the monitor as the primary node with read-write capability (PGDATA = /var/lib/pgpsql/ha)] ***
2022-03-21 15:28:38,561 p=26033 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:28:38,577 p=26033 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:28:38,588 p=26033 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:28:44,853 p=26033 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:28:44,862 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:28:44,897 p=26033 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:28:44,938 p=26033 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "578215629765.2099",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ;  pg_autoctl create postgres --pgdata \"ha\" --auth trust --ssl-self-signed --username ha-admin --dbname \"appdb\" --hostname \"co7-node01\" --pgctl /bin/pg_ctl --monitor 'postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require' )",
        "delta": "0:00:00.239681",
        "end": "2022-03-21 15:28:39.646189",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/578215629765.2099",
        "start": "2022-03-21 15:28:39.406508",
        "started": 1,
        "stderr": "15:28:39 2109 INFO  Using default --ssl-mode \"require\"\n15:28:39 2109 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n15:28:39 2109 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n15:28:39 2109 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n15:28:39 2109 INFO  Started pg_autoctl postgres service with pid 2114\n15:28:39 2114 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v\n15:28:39 2109 INFO  Started pg_autoctl node-init service with pid 2115\n15:28:39 2115 FATAL The state file \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\" exists and there's no init in progress\n15:28:39 2115 INFO  HINT: use `pg_autoctl run` to start the service.\n15:28:39 2109 WARN  pg_autoctl service node-init exited with exit status 0\n15:28:39 2114 INFO  Postgres controller service received signal SIGTERM, terminating\n15:28:39 2109 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "15:28:39 2109 INFO  Using default --ssl-mode \"require\"",
            "15:28:39 2109 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "15:28:39 2109 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "15:28:39 2109 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "15:28:39 2109 INFO  Started pg_autoctl postgres service with pid 2114",
            "15:28:39 2114 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v",
            "15:28:39 2109 INFO  Started pg_autoctl node-init service with pid 2115",
            "15:28:39 2115 FATAL The state file \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\" exists and there's no init in progress",
            "15:28:39 2115 INFO  HINT: use `pg_autoctl run` to start the service.",
            "15:28:39 2109 WARN  pg_autoctl service node-init exited with exit status 0",
            "15:28:39 2114 INFO  Postgres controller service received signal SIGTERM, terminating",
            "15:28:39 2109 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 15:28:44,939 p=26033 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:28:44,939 p=26033 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:28:44,949 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of pirmary instance] *******************************************************
2022-03-21 15:28:44,981 p=26033 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:28:44,996 p=26033 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:28:45,007 p=26033 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:28:54,243 p=26033 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:28:54,251 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:28:54,271 p=26033 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:28:54,303 p=26033 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "810489236724.2488",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl -q show systemd --pgdata ~postgres/ha > pgautofailover.service )",
        "delta": "0:00:00.031999",
        "end": "2022-03-21 15:28:45.945014",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/810489236724.2488",
        "start": "2022-03-21 15:28:45.913015",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 15:28:54,304 p=26033 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:28:54,313 p=26033 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:28:54,337 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : Copy primary systemd service file of primary instance] *************************************************
2022-03-21 15:28:54,361 p=26033 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:28:54,390 p=26033 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:28:54,401 p=26033 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:28:54,915 p=26033 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 15:28:54,926 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start primary systemd service of primary instance] ******************************************
2022-03-21 15:28:54,946 p=26033 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:28:54,977 p=26033 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:28:54,986 p=26033 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:28:55,622 p=26033 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:28:55,632 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 15:28:55,666 p=26033 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:28:55,682 p=26033 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:28:55,695 p=26033 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:28:56,151 p=26033 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 15:28:56,160 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the state of primary instance] ******************************************************************
2022-03-21 15:28:56,180 p=26033 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:28:56,209 p=26033 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:28:56,220 p=26033 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:28:56,876 p=26033 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:28:56,888 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:28:56,923 p=26033 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:28:56,942 p=26033 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "changed": true,
        "cmd": "( source ~/.bash_profile ; pg_autoctl show state )",
        "delta": "0:00:00.065058",
        "end": "2022-03-21 15:28:57.056204",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-21 15:28:56.991146",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State\n-------+-------+-----------------+-----------+-----------+---------------------+--------------------\nnode_1 |     1 | co7-node01:5432 | 0/16C7528 |        no |              single |            draining\nnode_2 |     2 | co7-node02:5432 |       0/0 |        no |        wait_standby |        wait_standby\nnode_3 |     3 | co7-node03:5432 |       0/0 |        no |        wait_standby |        wait_standby",
        "stdout_lines": [
            "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State",
            "-------+-------+-----------------+-----------+-----------+---------------------+--------------------",
            "node_1 |     1 | co7-node01:5432 | 0/16C7528 |        no |              single |            draining",
            "node_2 |     2 | co7-node02:5432 |       0/0 |        no |        wait_standby |        wait_standby",
            "node_3 |     3 | co7-node03:5432 |       0/0 |        no |        wait_standby |        wait_standby"
        ]
    }
}
2022-03-21 15:28:56,943 p=26033 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:28:56,954 p=26033 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:28:56,963 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : Create secondary instance. It will automatically be set by the monitor as the secondary  node with read-write capability (PGDATA = /var/lib/pgpsql/ha)] ***
2022-03-21 15:28:56,998 p=26033 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:28:57,012 p=26033 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:32:06,019 p=26033 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"ansible_job_id": "114589662261.2790", "changed": false, "child_pid": 2794, "finished": 1, "msg": "Timeout exceeded", "results_file": "/var/lib/pgsql/.ansible_async/114589662261.2790", "started": 1, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2022-03-21 15:32:06,019 p=26033 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"ansible_job_id": "346001150920.1967", "changed": false, "child_pid": 1971, "finished": 1, "msg": "Timeout exceeded", "results_file": "/var/lib/pgsql/.ansible_async/346001150920.1967", "started": 1, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2022-03-21 15:32:06,028 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:32:06,096 p=26033 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:32:06,103 p=26033 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:32:06,115 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of secondary instance] *****************************************************
2022-03-21 15:32:06,136 p=26033 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:32:06,147 p=26033 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:32:06,157 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:32:06,177 p=26033 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:32:06,187 p=26033 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:32:06,197 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : Copy secondary systemd service file of secondary instance] *********************************************
2022-03-21 15:32:06,218 p=26033 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:32:06,228 p=26033 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:32:06,237 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start secondary systemd service of secondary instance] **************************************
2022-03-21 15:32:06,257 p=26033 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:32:06,267 p=26033 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:32:06,278 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 15:32:06,297 p=26033 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:32:06,308 p=26033 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:32:06,318 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the state of secondary instance] ****************************************************************
2022-03-21 15:32:06,337 p=26033 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:32:06,348 p=26033 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:32:06,358 p=26033 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:32:06,377 p=26033 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:32:06,389 p=26033 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:32:06,423 p=26033 u=moonja n=ansible | PLAY RECAP *************************************************************************************************************************
2022-03-21 15:32:06,423 p=26033 u=moonja n=ansible | co7-master                 : ok=28   changed=9    unreachable=0    failed=0    skipped=18   rescued=0    ignored=0   
2022-03-21 15:32:06,424 p=26033 u=moonja n=ansible | co7-node01                 : ok=22   changed=6    unreachable=0    failed=0    skipped=24   rescued=0    ignored=0   
2022-03-21 15:32:06,424 p=26033 u=moonja n=ansible | co7-node02                 : ok=12   changed=1    unreachable=0    failed=1    skipped=25   rescued=0    ignored=0   
2022-03-21 15:32:06,424 p=26033 u=moonja n=ansible | co7-node03                 : ok=12   changed=1    unreachable=0    failed=1    skipped=25   rescued=0    ignored=0   
2022-03-21 15:34:01,423 p=28846 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from 
ansible-core in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 15:34:01,656 p=28846 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 
2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 15:34:01,660 p=28846 u=moonja n=ansible | [WARNING]: While constructing a mapping from /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/install.yml, line 307,
column 3, found a duplicate dict key (when). Using last defined value only.

2022-03-21 15:34:01,709 p=28846 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/upgrade.yml is empty and had no tasks to include

2022-03-21 15:34:01,723 p=28846 u=moonja n=ansible | PLAY [all] *************************************************************************************************************************
2022-03-21 15:34:01,750 p=28846 u=moonja n=ansible | TASK [Gathering Facts] *************************************************************************************************************
2022-03-21 15:34:04,099 p=28846 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 15:34:04,102 p=28846 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 15:34:04,132 p=28846 u=moonja n=ansible | ok: [co7-master]
2022-03-21 15:34:04,136 p=28846 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 15:34:04,153 p=28846 u=moonja n=ansible | TASK [pgfailover-postgres : Disable port from public zone] *************************************************************************
2022-03-21 15:34:05,081 p=28846 u=moonja n=ansible | changed: [co7-node03] => (item=5432)
2022-03-21 15:34:05,082 p=28846 u=moonja n=ansible | changed: [co7-node02] => (item=5432)
2022-03-21 15:34:05,089 p=28846 u=moonja n=ansible | changed: [co7-master] => (item=5432)
2022-03-21 15:34:05,098 p=28846 u=moonja n=ansible | changed: [co7-node01] => (item=5432)
2022-03-21 15:34:05,109 p=28846 u=moonja n=ansible | TASK [pgfailover-postgres : Disable IP Addresses in whitelist] *********************************************************************
2022-03-21 15:34:05,790 p=28846 u=moonja n=ansible | changed: [co7-master] => (item=co7-master)
2022-03-21 15:34:05,799 p=28846 u=moonja n=ansible | changed: [co7-node02] => (item=co7-master)
2022-03-21 15:34:05,813 p=28846 u=moonja n=ansible | changed: [co7-node01] => (item=co7-master)
2022-03-21 15:34:06,212 p=28846 u=moonja n=ansible | changed: [co7-node03] => (item=co7-master)
2022-03-21 15:34:06,393 p=28846 u=moonja n=ansible | changed: [co7-master] => (item=co7-node01)
2022-03-21 15:34:06,608 p=28846 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node01)
2022-03-21 15:34:06,802 p=28846 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node01)
2022-03-21 15:34:06,820 p=28846 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node01)
2022-03-21 15:34:06,986 p=28846 u=moonja n=ansible | changed: [co7-master] => (item=co7-node02)
2022-03-21 15:34:07,207 p=28846 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node02)
2022-03-21 15:34:07,428 p=28846 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node02)
2022-03-21 15:34:07,455 p=28846 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node02)
2022-03-21 15:34:07,601 p=28846 u=moonja n=ansible | changed: [co7-master] => (item=co7-node03)
2022-03-21 15:34:07,818 p=28846 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node03)
2022-03-21 15:34:08,046 p=28846 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node03)
2022-03-21 15:34:08,066 p=28846 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node03)
2022-03-21 15:34:08,077 p=28846 u=moonja n=ansible | TASK [pgfailover-postgres : Bounce firewalld] **************************************************************************************
2022-03-21 15:34:10,084 p=28846 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:34:10,086 p=28846 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:34:10,093 p=28846 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:34:10,098 p=28846 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:34:10,107 p=28846 u=moonja n=ansible | TASK [pgfailover-postgres : Stop and disable firewalld.] ***************************************************************************
2022-03-21 15:34:11,735 p=28846 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:34:11,735 p=28846 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:34:11,843 p=28846 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:34:11,844 p=28846 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:34:11,854 p=28846 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 15:34:11,887 p=28846 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:34:11,902 p=28846 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:34:11,913 p=28846 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:34:12,578 p=28846 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:34:12,587 p=28846 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 15:34:12,619 p=28846 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:34:12,634 p=28846 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:34:12,645 p=28846 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:34:13,085 p=28846 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:34:13,095 p=28846 u=moonja n=ansible | TASK [pgfailover-postgres : Getting process IDs of the pg_autoctl process] *********************************************************
2022-03-21 15:34:13,813 p=28846 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 15:34:13,817 p=28846 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 15:34:13,830 p=28846 u=moonja n=ansible | ok: [co7-master]
2022-03-21 15:34:13,841 p=28846 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 15:34:13,850 p=28846 u=moonja n=ansible | TASK [pgfailover-postgres : Stop pgautofailover service of systemd] ****************************************************************
2022-03-21 15:34:13,916 p=28846 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:34:13,929 p=28846 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:34:15,134 p=28846 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:34:15,595 p=28846 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:34:15,605 p=28846 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] ************************************************************************
2022-03-21 15:34:15,642 p=28846 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:34:15,658 p=28846 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:34:16,336 p=28846 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:34:16,336 p=28846 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:34:16,346 p=28846 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start secondary systemd service of secondary instance] **************************************
2022-03-21 15:34:16,366 p=28846 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:34:16,382 p=28846 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:34:17,049 p=28846 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": false, "msg": "Could not find the requested service pgautofailover: host"}
2022-03-21 15:34:17,066 p=28846 u=moonja n=ansible | ...ignoring
2022-03-21 15:34:17,067 p=28846 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": false, "msg": "Could not find the requested service pgautofailover: host"}
2022-03-21 15:34:17,067 p=28846 u=moonja n=ansible | ...ignoring
2022-03-21 15:34:17,078 p=28846 u=moonja n=ansible | TASK [pgfailover-postgres : Delete secondary systemd service file of secondary instance] *******************************************
2022-03-21 15:34:17,099 p=28846 u=moonja n=ansible | skipping: [co7-master] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:34:17,101 p=28846 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:34:17,105 p=28846 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:34:17,109 p=28846 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:34:17,110 p=28846 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:34:17,112 p=28846 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql) 
2022-03-21 15:34:17,115 p=28846 u=moonja n=ansible | skipping: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:34:17,117 p=28846 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:34:17,119 p=28846 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:34:17,121 p=28846 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:34:17,128 p=28846 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:34:17,128 p=28846 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql) 
2022-03-21 15:34:17,831 p=28846 u=moonja n=ansible | ok: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 15:34:17,832 p=28846 u=moonja n=ansible | ok: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 15:34:18,264 p=28846 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 15:34:18,264 p=28846 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 15:34:18,822 p=28846 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 15:34:18,824 p=28846 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 15:34:19,405 p=28846 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.config)
2022-03-21 15:34:19,407 p=28846 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.config)
2022-03-21 15:34:19,927 p=28846 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.ansible)
2022-03-21 15:34:19,928 p=28846 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.ansible)
2022-03-21 15:34:20,397 p=28846 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql)
2022-03-21 15:34:20,398 p=28846 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql)
2022-03-21 15:34:20,412 p=28846 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] ************************************************************************
2022-03-21 15:34:20,434 p=28846 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:34:20,463 p=28846 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:34:20,475 p=28846 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:34:20,917 p=28846 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:34:20,927 p=28846 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start primary systemd service of primary instance] ******************************************
2022-03-21 15:34:20,947 p=28846 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:34:20,976 p=28846 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:34:20,986 p=28846 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:34:21,627 p=28846 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:34:21,637 p=28846 u=moonja n=ansible | TASK [pgfailover-postgres : Delete primary systemd service file of secondary instance] *********************************************
2022-03-21 15:34:21,659 p=28846 u=moonja n=ansible | skipping: [co7-master] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:34:21,660 p=28846 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:34:21,664 p=28846 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:34:21,669 p=28846 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:34:21,669 p=28846 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:34:21,669 p=28846 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql) 
2022-03-21 15:34:21,693 p=28846 u=moonja n=ansible | skipping: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:34:21,695 p=28846 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:34:21,700 p=28846 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:34:21,700 p=28846 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:34:21,703 p=28846 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:34:21,704 p=28846 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql) 
2022-03-21 15:34:21,706 p=28846 u=moonja n=ansible | skipping: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:34:21,708 p=28846 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:34:21,711 p=28846 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:34:21,714 p=28846 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:34:21,716 p=28846 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:34:21,717 p=28846 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql) 
2022-03-21 15:34:22,085 p=28846 u=moonja n=ansible | changed: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 15:34:22,554 p=28846 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 15:34:23,239 p=28846 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 15:34:23,817 p=28846 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.config)
2022-03-21 15:34:24,252 p=28846 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.ansible)
2022-03-21 15:34:24,749 p=28846 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql)
2022-03-21 15:34:24,761 p=28846 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] ************************************************************************
2022-03-21 15:34:24,807 p=28846 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:34:24,808 p=28846 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:34:24,819 p=28846 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:34:25,236 p=28846 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:34:25,245 p=28846 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start systemd service of monitor instance] **************************************************
2022-03-21 15:34:25,291 p=28846 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:34:25,292 p=28846 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:34:25,303 p=28846 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:34:25,953 p=28846 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:34:25,963 p=28846 u=moonja n=ansible | TASK [pgfailover-postgres : Delete primary systemd service file of secondary instance] *********************************************
2022-03-21 15:34:26,000 p=28846 u=moonja n=ansible | skipping: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:34:26,002 p=28846 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:34:26,005 p=28846 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:34:26,009 p=28846 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:34:26,013 p=28846 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:34:26,014 p=28846 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql) 
2022-03-21 15:34:26,015 p=28846 u=moonja n=ansible | skipping: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:34:26,016 p=28846 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:34:26,019 p=28846 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:34:26,022 p=28846 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:34:26,024 p=28846 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:34:26,025 p=28846 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql) 
2022-03-21 15:34:26,030 p=28846 u=moonja n=ansible | skipping: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:34:26,033 p=28846 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:34:26,035 p=28846 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:34:26,038 p=28846 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:34:26,041 p=28846 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:34:26,041 p=28846 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql) 
2022-03-21 15:34:26,501 p=28846 u=moonja n=ansible | changed: [co7-master] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 15:34:26,910 p=28846 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 15:34:27,314 p=28846 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 15:34:27,728 p=28846 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/.config)
2022-03-21 15:34:28,180 p=28846 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/.ansible)
2022-03-21 15:34:28,692 p=28846 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql)
2022-03-21 15:34:28,706 p=28846 u=moonja n=ansible | TASK [pgfailover-postgres : Uninstall VMware Postgres on all hosts as root] ********************************************************
2022-03-21 15:35:02,623 p=28846 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:35:02,632 p=28846 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:35:04,332 p=28846 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:35:04,767 p=28846 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:35:04,778 p=28846 u=moonja n=ansible | TASK [pgfailover-postgres : Copy the vmwawre-postgres rpm file to all hosts in cluster] ********************************************
2022-03-21 15:35:05,332 p=28846 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:35:05,332 p=28846 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:35:05,355 p=28846 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:35:05,355 p=28846 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:35:05,403 p=28846 u=moonja n=ansible | PLAY RECAP *************************************************************************************************************************
2022-03-21 15:35:05,404 p=28846 u=moonja n=ansible | co7-master                 : ok=14   changed=12   unreachable=0    failed=0    skipped=6    rescued=0    ignored=0   
2022-03-21 15:35:05,404 p=28846 u=moonja n=ansible | co7-node01                 : ok=12   changed=10   unreachable=0    failed=0    skipped=8    rescued=0    ignored=0   
2022-03-21 15:35:05,404 p=28846 u=moonja n=ansible | co7-node02                 : ok=11   changed=8    unreachable=0    failed=0    skipped=9    rescued=0    ignored=1   
2022-03-21 15:35:05,404 p=28846 u=moonja n=ansible | co7-node03                 : ok=11   changed=8    unreachable=0    failed=0    skipped=9    rescued=0    ignored=1   
2022-03-21 15:35:05,977 p=30373 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from 
ansible-core in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 15:35:06,217 p=30373 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 
2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 15:35:06,222 p=30373 u=moonja n=ansible | [WARNING]: While constructing a mapping from /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/install.yml, line 307,
column 3, found a duplicate dict key (when). Using last defined value only.

2022-03-21 15:35:06,268 p=30373 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/upgrade.yml is empty and had no tasks to include

2022-03-21 15:35:06,281 p=30373 u=moonja n=ansible | PLAY [all] *************************************************************************************************************************
2022-03-21 15:35:06,309 p=30373 u=moonja n=ansible | TASK [Gathering Facts] *************************************************************************************************************
2022-03-21 15:35:08,448 p=30373 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 15:35:08,450 p=30373 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 15:35:08,452 p=30373 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 15:35:08,457 p=30373 u=moonja n=ansible | ok: [co7-master]
2022-03-21 15:35:08,475 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : Install rpm packages of dependenies to need installing packages regarding kubernates] ******************
2022-03-21 15:35:09,676 p=30373 u=moonja n=ansible | ok: [co7-node02] => (item=firewalld)
2022-03-21 15:35:09,678 p=30373 u=moonja n=ansible | ok: [co7-node01] => (item=firewalld)
2022-03-21 15:35:09,684 p=30373 u=moonja n=ansible | ok: [co7-node03] => (item=firewalld)
2022-03-21 15:35:09,691 p=30373 u=moonja n=ansible | ok: [co7-master] => (item=firewalld)
2022-03-21 15:35:10,369 p=30373 u=moonja n=ansible | ok: [co7-node02] => (item=python3)
2022-03-21 15:35:10,402 p=30373 u=moonja n=ansible | ok: [co7-node03] => (item=python3)
2022-03-21 15:35:10,403 p=30373 u=moonja n=ansible | ok: [co7-master] => (item=python3)
2022-03-21 15:35:11,000 p=30373 u=moonja n=ansible | ok: [co7-node01] => (item=python3)
2022-03-21 15:35:11,231 p=30373 u=moonja n=ansible | ok: [co7-node02] => (item=python3-libselinux)
2022-03-21 15:35:11,262 p=30373 u=moonja n=ansible | ok: [co7-node03] => (item=python3-libselinux)
2022-03-21 15:35:11,379 p=30373 u=moonja n=ansible | ok: [co7-master] => (item=python3-libselinux)
2022-03-21 15:35:11,847 p=30373 u=moonja n=ansible | ok: [co7-node01] => (item=python3-libselinux)
2022-03-21 15:35:11,861 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : Start and enable firewalld.] ***************************************************************************
2022-03-21 15:35:13,119 p=30373 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:35:13,139 p=30373 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:35:13,153 p=30373 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:35:13,164 p=30373 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:35:13,174 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : Open Firewall] *****************************************************************************************
2022-03-21 15:35:14,030 p=30373 u=moonja n=ansible | changed: [co7-master] => (item=5432)
2022-03-21 15:35:14,041 p=30373 u=moonja n=ansible | changed: [co7-node02] => (item=5432)
2022-03-21 15:35:14,070 p=30373 u=moonja n=ansible | changed: [co7-node01] => (item=5432)
2022-03-21 15:35:14,095 p=30373 u=moonja n=ansible | changed: [co7-node03] => (item=5432)
2022-03-21 15:35:14,106 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : Whitelist of Ip addresses] *****************************************************************************
2022-03-21 15:35:14,749 p=30373 u=moonja n=ansible | changed: [co7-master] => (item=co7-master)
2022-03-21 15:35:14,805 p=30373 u=moonja n=ansible | changed: [co7-node02] => (item=co7-master)
2022-03-21 15:35:14,822 p=30373 u=moonja n=ansible | changed: [co7-node01] => (item=co7-master)
2022-03-21 15:35:15,270 p=30373 u=moonja n=ansible | changed: [co7-node03] => (item=co7-master)
2022-03-21 15:35:15,364 p=30373 u=moonja n=ansible | changed: [co7-master] => (item=co7-node01)
2022-03-21 15:35:15,394 p=30373 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node01)
2022-03-21 15:35:15,462 p=30373 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node01)
2022-03-21 15:35:15,907 p=30373 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node01)
2022-03-21 15:35:15,988 p=30373 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node02)
2022-03-21 15:35:16,011 p=30373 u=moonja n=ansible | changed: [co7-master] => (item=co7-node02)
2022-03-21 15:35:16,157 p=30373 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node02)
2022-03-21 15:35:16,541 p=30373 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node02)
2022-03-21 15:35:16,601 p=30373 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node03)
2022-03-21 15:35:16,663 p=30373 u=moonja n=ansible | changed: [co7-master] => (item=co7-node03)
2022-03-21 15:35:16,780 p=30373 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node03)
2022-03-21 15:35:17,752 p=30373 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node03)
2022-03-21 15:35:17,764 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : Bounce firewalld] **************************************************************************************
2022-03-21 15:35:19,411 p=30373 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:35:19,414 p=30373 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:35:19,426 p=30373 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:35:19,432 p=30373 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:35:19,442 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : Copy the vmwawre-postgres rpm file to all hosts in cluster] ********************************************
2022-03-21 15:35:21,410 p=30373 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:35:21,418 p=30373 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:35:21,421 p=30373 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:35:21,454 p=30373 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:35:21,464 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : Install dependency rpm package for pgautofailover] *****************************************************
2022-03-21 15:35:28,284 p=30373 u=moonja n=ansible | ok: [co7-master] => (item=python2-psutil)
2022-03-21 15:35:28,292 p=30373 u=moonja n=ansible | ok: [co7-node03] => (item=python2-psutil)
2022-03-21 15:35:28,336 p=30373 u=moonja n=ansible | ok: [co7-node02] => (item=python2-psutil)
2022-03-21 15:35:28,343 p=30373 u=moonja n=ansible | ok: [co7-node01] => (item=python2-psutil)
2022-03-21 15:35:28,352 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : Install VMware Postgres on all hosts as root] **********************************************************
2022-03-21 15:35:56,313 p=30373 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:35:57,140 p=30373 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:35:57,297 p=30373 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:35:57,630 p=30373 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:35:57,642 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 15:35:57,691 p=30373 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:35:57,692 p=30373 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:35:57,703 p=30373 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:35:58,264 p=30373 u=moonja n=ansible | [WARNING]: Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues
when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually

2022-03-21 15:35:58,264 p=30373 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:35:58,276 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:35:58,313 p=30373 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "pg_autoctl version 1.4.2\npg_autoctl extension version 1.4\ncompiled with PostgreSQL 10.17 (VMware Postgres 10.17.0) on x86_64-redhat-linux-gnu, compiled by gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-44), 64-bit\ncompatible with Postgres 10, 11, 12, and 13"
}
2022-03-21 15:35:58,330 p=30373 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:35:58,330 p=30373 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:35:58,342 p=30373 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:35:58,351 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 15:35:58,382 p=30373 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:35:58,397 p=30373 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:35:58,410 p=30373 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:35:58,825 p=30373 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:35:58,837 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:35:58,874 p=30373 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "pg_ctl (PostgreSQL) 10.17 (VMware Postgres 10.17.0)"
}
2022-03-21 15:35:58,890 p=30373 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:35:58,892 p=30373 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:35:58,902 p=30373 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:35:58,912 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : Getting process IDs of the pg_autoctl process] *********************************************************
2022-03-21 15:35:59,569 p=30373 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 15:35:59,569 p=30373 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 15:35:59,573 p=30373 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 15:35:59,576 p=30373 u=moonja n=ansible | ok: [co7-master]
2022-03-21 15:35:59,586 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : Printing the process IDs obtained] *********************************************************************
2022-03-21 15:35:59,634 p=30373 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 15:35:59,639 p=30373 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 15:35:59,653 p=30373 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 15:35:59,671 p=30373 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 15:35:59,681 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : Stop pgautofailover service of systemd] ****************************************************************
2022-03-21 15:35:59,729 p=30373 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:35:59,734 p=30373 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:35:59,749 p=30373 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:35:59,765 p=30373 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:35:59,775 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:35:59,811 p=30373 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 15:35:59,828 p=30373 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 15:35:59,830 p=30373 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 15:35:59,841 p=30373 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 15:35:59,851 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : Create the monitor node] *******************************************************************************
2022-03-21 15:35:59,884 p=30373 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:35:59,899 p=30373 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:35:59,911 p=30373 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:36:18,540 p=30373 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:36:18,549 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:36:18,586 p=30373 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "ansible_job_id": "703064711446.5610",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl create monitor --auth trust --ssl-self-signed --pgdata monitor )",
        "delta": "0:00:15.770207",
        "end": "2022-03-21 15:36:16.542861",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/703064711446.5610",
        "start": "2022-03-21 15:36:00.772654",
        "started": 1,
        "stderr": "15:36:00 5620 INFO  Using default --ssl-mode \"require\"\n15:36:00 5620 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n15:36:00 5620 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n15:36:00 5620 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n15:36:00 5620 INFO  Initialising a PostgreSQL cluster at \"monitor\"\n15:36:00 5620 INFO  /bin/pg_ctl initdb -s -D monitor --option '--auth=trust'\n15:36:06 5620 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/monitor/server.crt -keyout /var/lib/pgsql/monitor/server.key -subj \"/CN=co7-master\"\n15:36:06 5620 INFO  Started pg_autoctl postgres service with pid 5767\n15:36:06 5767 INFO   /usr/bin/pg_autoctl do service postgres --pgdata monitor -v\n15:36:06 5620 INFO  Started pg_autoctl monitor-init service with pid 5768\n15:36:06 5768 INFO  Granting connection privileges on 192.168.0.0/24\n15:36:06 5772 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\n15:36:07 5767 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/monitor\" on port 5432 with pid 5772\n15:36:13 5768 WARN  NOTICE:  installing required extension \"btree_gist\"\n15:36:14 5768 INFO  Your pg_auto_failover monitor instance is now ready on port 5432.\n15:36:14 5768 INFO  Monitor has been successfully initialized.\n15:36:14 5620 WARN  pg_autoctl service monitor-init exited with exit status 0\n15:36:14 5767 INFO  Postgres controller service received signal SIGTERM, terminating\n15:36:14 5767 INFO  Stopping pg_autoctl postgres service\n15:36:14 5767 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/monitor --wait stop --mode fast\n15:36:14 5620 INFO  Waiting for subprocesses to terminate.\n15:36:16 5620 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "15:36:00 5620 INFO  Using default --ssl-mode \"require\"",
            "15:36:00 5620 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "15:36:00 5620 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "15:36:00 5620 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "15:36:00 5620 INFO  Initialising a PostgreSQL cluster at \"monitor\"",
            "15:36:00 5620 INFO  /bin/pg_ctl initdb -s -D monitor --option '--auth=trust'",
            "15:36:06 5620 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/monitor/server.crt -keyout /var/lib/pgsql/monitor/server.key -subj \"/CN=co7-master\"",
            "15:36:06 5620 INFO  Started pg_autoctl postgres service with pid 5767",
            "15:36:06 5767 INFO   /usr/bin/pg_autoctl do service postgres --pgdata monitor -v",
            "15:36:06 5620 INFO  Started pg_autoctl monitor-init service with pid 5768",
            "15:36:06 5768 INFO  Granting connection privileges on 192.168.0.0/24",
            "15:36:06 5772 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *",
            "15:36:07 5767 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/monitor\" on port 5432 with pid 5772",
            "15:36:13 5768 WARN  NOTICE:  installing required extension \"btree_gist\"",
            "15:36:14 5768 INFO  Your pg_auto_failover monitor instance is now ready on port 5432.",
            "15:36:14 5768 INFO  Monitor has been successfully initialized.",
            "15:36:14 5620 WARN  pg_autoctl service monitor-init exited with exit status 0",
            "15:36:14 5767 INFO  Postgres controller service received signal SIGTERM, terminating",
            "15:36:14 5767 INFO  Stopping pg_autoctl postgres service",
            "15:36:14 5767 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/monitor --wait stop --mode fast",
            "15:36:14 5620 INFO  Waiting for subprocesses to terminate.",
            "15:36:16 5620 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 15:36:18,602 p=30373 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:36:18,603 p=30373 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:36:18,615 p=30373 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:36:18,625 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of monitor instance] *******************************************************
2022-03-21 15:36:18,658 p=30373 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:36:18,674 p=30373 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:36:18,686 p=30373 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:36:25,000 p=30373 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:36:25,009 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : Copy systemd service file of monitor instance] *********************************************************
2022-03-21 15:36:25,059 p=30373 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:36:25,060 p=30373 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:36:25,069 p=30373 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:36:25,610 p=30373 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:36:25,623 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start systemd service of monitor instance] **************************************************
2022-03-21 15:36:25,674 p=30373 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:36:25,675 p=30373 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:36:25,686 p=30373 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:36:26,768 p=30373 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:36:26,795 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:36:26,833 p=30373 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": true,
        "enabled": true,
        "failed": false,
        "name": "pgautofailover",
        "state": "started",
        "status": {
            "ActiveEnterTimestampMonotonic": "0",
            "ActiveExitTimestampMonotonic": "0",
            "ActiveState": "inactive",
            "After": "-.mount systemd-journald.socket basic.target system.slice",
            "AllowIsolate": "no",
            "AmbientCapabilities": "0",
            "AssertResult": "no",
            "AssertTimestampMonotonic": "0",
            "Before": "shutdown.target",
            "BlockIOAccounting": "no",
            "BlockIOWeight": "18446744073709551615",
            "CPUAccounting": "no",
            "CPUQuotaPerSecUSec": "infinity",
            "CPUSchedulingPolicy": "0",
            "CPUSchedulingPriority": "0",
            "CPUSchedulingResetOnFork": "no",
            "CPUShares": "18446744073709551615",
            "CanIsolate": "no",
            "CanReload": "no",
            "CanStart": "yes",
            "CanStop": "yes",
            "CapabilityBoundingSet": "18446744073709551615",
            "CollectMode": "inactive",
            "ConditionResult": "no",
            "ConditionTimestampMonotonic": "0",
            "Conflicts": "shutdown.target",
            "ControlPID": "0",
            "DefaultDependencies": "yes",
            "Delegate": "no",
            "Description": "pg_auto_failover",
            "DevicePolicy": "auto",
            "Environment": "PGDATA=/var/lib/pgsql/monitor",
            "ExecMainCode": "0",
            "ExecMainExitTimestampMonotonic": "0",
            "ExecMainPID": "0",
            "ExecMainStartTimestampMonotonic": "0",
            "ExecMainStatus": "0",
            "ExecStart": "{ path=/usr/bin/pg_autoctl ; argv[]=/usr/bin/pg_autoctl run ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }",
            "FailureAction": "none",
            "FileDescriptorStoreMax": "0",
            "FragmentPath": "/etc/systemd/system/pgautofailover.service",
            "GuessMainPID": "yes",
            "IOScheduling": "0",
            "Id": "pgautofailover.service",
            "IgnoreOnIsolate": "no",
            "IgnoreOnSnapshot": "no",
            "IgnoreSIGPIPE": "yes",
            "InactiveEnterTimestampMonotonic": "0",
            "InactiveExitTimestampMonotonic": "0",
            "JobTimeoutAction": "none",
            "JobTimeoutUSec": "0",
            "KillMode": "control-group",
            "KillSignal": "15",
            "LimitAS": "18446744073709551615",
            "LimitCORE": "18446744073709551615",
            "LimitCPU": "18446744073709551615",
            "LimitDATA": "18446744073709551615",
            "LimitFSIZE": "18446744073709551615",
            "LimitLOCKS": "18446744073709551615",
            "LimitMEMLOCK": "65536",
            "LimitMSGQUEUE": "819200",
            "LimitNICE": "0",
            "LimitNOFILE": "4096",
            "LimitNPROC": "47321",
            "LimitRSS": "18446744073709551615",
            "LimitRTPRIO": "0",
            "LimitRTTIME": "18446744073709551615",
            "LimitSIGPENDING": "47321",
            "LimitSTACK": "18446744073709551615",
            "LoadState": "loaded",
            "MainPID": "0",
            "MemoryAccounting": "no",
            "MemoryCurrent": "18446744073709551615",
            "MemoryLimit": "18446744073709551615",
            "MountFlags": "0",
            "Names": "pgautofailover.service",
            "NeedDaemonReload": "no",
            "Nice": "0",
            "NoNewPrivileges": "no",
            "NonBlocking": "no",
            "NotifyAccess": "none",
            "OOMScoreAdjust": "0",
            "OnFailureJobMode": "replace",
            "PermissionsStartOnly": "no",
            "PrivateDevices": "no",
            "PrivateNetwork": "no",
            "PrivateTmp": "no",
            "ProtectHome": "no",
            "ProtectSystem": "no",
            "RefuseManualStart": "no",
            "RefuseManualStop": "no",
            "RemainAfterExit": "no",
            "Requires": "-.mount basic.target system.slice",
            "RequiresMountsFor": "/var/lib/pgsql",
            "Restart": "always",
            "RestartUSec": "100ms",
            "Result": "success",
            "RootDirectoryStartOnly": "no",
            "RuntimeDirectoryMode": "0755",
            "SameProcessGroup": "no",
            "SecureBits": "0",
            "SendSIGHUP": "no",
            "SendSIGKILL": "yes",
            "Slice": "system.slice",
            "StandardError": "inherit",
            "StandardInput": "null",
            "StandardOutput": "journal",
            "StartLimitAction": "none",
            "StartLimitBurst": "0",
            "StartLimitInterval": "10000000",
            "StartupBlockIOWeight": "18446744073709551615",
            "StartupCPUShares": "18446744073709551615",
            "StatusErrno": "0",
            "StopWhenUnneeded": "no",
            "SubState": "dead",
            "SyslogLevelPrefix": "yes",
            "SyslogPriority": "30",
            "SystemCallErrorNumber": "0",
            "TTYReset": "no",
            "TTYVHangup": "no",
            "TTYVTDisallocate": "no",
            "TasksAccounting": "no",
            "TasksCurrent": "18446744073709551615",
            "TasksMax": "18446744073709551615",
            "TimeoutStartUSec": "1min 30s",
            "TimeoutStopUSec": "1min 30s",
            "TimerSlackNSec": "50000",
            "Transient": "no",
            "Type": "simple",
            "UMask": "0022",
            "UnitFilePreset": "disabled",
            "UnitFileState": "disabled",
            "User": "postgres",
            "WatchdogTimestampMonotonic": "0",
            "WatchdogUSec": "0",
            "WorkingDirectory": "/var/lib/pgsql"
        }
    }
}
2022-03-21 15:36:26,849 p=30373 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:36:26,850 p=30373 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:36:26,862 p=30373 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:36:26,871 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 15:36:26,905 p=30373 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:36:26,920 p=30373 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:36:26,932 p=30373 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:36:27,643 p=30373 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:36:27,652 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the current state of monitor instance] **********************************************************
2022-03-21 15:36:27,701 p=30373 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:36:27,702 p=30373 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:36:27,713 p=30373 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:36:28,146 p=30373 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:36:28,155 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:36:28,193 p=30373 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": true,
        "cmd": "( ps -ef | grep postgres )",
        "delta": "0:00:00.035123",
        "end": "2022-03-21 15:36:28.449911",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-21 15:36:28.414788",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "postgres  6730     1  0 15:36 ?        00:00:00 /usr/bin/pg_autoctl run\npostgres  6733  6730  0 15:36 ?        00:00:00 pg_autoctl: start/stop postgres\npostgres  6734  6730  0 15:36 ?        00:00:00 pg_autoctl: monitor listener\npostgres  6764  6733  2 15:36 ?        00:00:00 /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\njomoon    6980 30372  0 15:36 pts/0    00:00:00 /bin/sh -c sudo -H -S  -p \"[sudo via ansible, key=jaksibekaniigddrvqhiufcxvwxkjxia] password:\" -u postgres /bin/sh -c 'echo BECOME-SUCCESS-jaksibekaniigddrvqhiufcxvwxkjxia ; /usr/bin/python /var/tmp/ansible-tmp-1647844587.7501929-31897-5610123453887/AnsiballZ_command.py' && sleep 0\nroot      7004  6980  0 15:36 pts/0    00:00:00 sudo -H -S -p [sudo via ansible, key=jaksibekaniigddrvqhiufcxvwxkjxia] password: -u postgres /bin/sh -c echo BECOME-SUCCESS-jaksibekaniigddrvqhiufcxvwxkjxia ; /usr/bin/python /var/tmp/ansible-tmp-1647844587.7501929-31897-5610123453887/AnsiballZ_command.py\npostgres  7005  7004  0 15:36 pts/0    00:00:00 /bin/sh -c echo BECOME-SUCCESS-jaksibekaniigddrvqhiufcxvwxkjxia ; /usr/bin/python /var/tmp/ansible-tmp-1647844587.7501929-31897-5610123453887/AnsiballZ_command.py\npostgres  7006  7005  0 15:36 pts/0    00:00:00 /usr/bin/python /var/tmp/ansible-tmp-1647844587.7501929-31897-5610123453887/AnsiballZ_command.py\npostgres  7008  7006  0 15:36 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )\npostgres  7009  7008  0 15:36 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )\npostgres  7010  7009  0 15:36 pts/0    00:00:00 ps -ef\npostgres  7011  7009  0 15:36 pts/0    00:00:00 grep postgres",
        "stdout_lines": [
            "postgres  6730     1  0 15:36 ?        00:00:00 /usr/bin/pg_autoctl run",
            "postgres  6733  6730  0 15:36 ?        00:00:00 pg_autoctl: start/stop postgres",
            "postgres  6734  6730  0 15:36 ?        00:00:00 pg_autoctl: monitor listener",
            "postgres  6764  6733  2 15:36 ?        00:00:00 /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *",
            "jomoon    6980 30372  0 15:36 pts/0    00:00:00 /bin/sh -c sudo -H -S  -p \"[sudo via ansible, key=jaksibekaniigddrvqhiufcxvwxkjxia] password:\" -u postgres /bin/sh -c 'echo BECOME-SUCCESS-jaksibekaniigddrvqhiufcxvwxkjxia ; /usr/bin/python /var/tmp/ansible-tmp-1647844587.7501929-31897-5610123453887/AnsiballZ_command.py' && sleep 0",
            "root      7004  6980  0 15:36 pts/0    00:00:00 sudo -H -S -p [sudo via ansible, key=jaksibekaniigddrvqhiufcxvwxkjxia] password: -u postgres /bin/sh -c echo BECOME-SUCCESS-jaksibekaniigddrvqhiufcxvwxkjxia ; /usr/bin/python /var/tmp/ansible-tmp-1647844587.7501929-31897-5610123453887/AnsiballZ_command.py",
            "postgres  7005  7004  0 15:36 pts/0    00:00:00 /bin/sh -c echo BECOME-SUCCESS-jaksibekaniigddrvqhiufcxvwxkjxia ; /usr/bin/python /var/tmp/ansible-tmp-1647844587.7501929-31897-5610123453887/AnsiballZ_command.py",
            "postgres  7006  7005  0 15:36 pts/0    00:00:00 /usr/bin/python /var/tmp/ansible-tmp-1647844587.7501929-31897-5610123453887/AnsiballZ_command.py",
            "postgres  7008  7006  0 15:36 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )",
            "postgres  7009  7008  0 15:36 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )",
            "postgres  7010  7009  0 15:36 pts/0    00:00:00 ps -ef",
            "postgres  7011  7009  0 15:36 pts/0    00:00:00 grep postgres"
        ]
    }
}
2022-03-21 15:36:28,209 p=30373 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:36:28,209 p=30373 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:36:28,222 p=30373 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:36:28,231 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the current state of monitor] *******************************************************************
2022-03-21 15:36:28,278 p=30373 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:36:28,279 p=30373 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:36:28,290 p=30373 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:36:28,832 p=30373 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:36:28,842 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:36:28,876 p=30373 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": true,
        "cmd": "( psql -c \"\\l\" )",
        "delta": "0:00:00.034482",
        "end": "2022-03-21 15:36:29.140799",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-21 15:36:29.106317",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "                                    List of databases\n       Name       |  Owner   | Encoding |  Collate   |   Ctype    |   Access privileges   \n------------------+----------+----------+------------+------------+-----------------------\n pg_auto_failover | autoctl  | UTF8     | en_US.utf8 | en_US.utf8 | \n postgres         | postgres | UTF8     | en_US.utf8 | en_US.utf8 | \n template0        | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +\n                  |          |          |            |            | postgres=CTc/postgres\n template1        | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +\n                  |          |          |            |            | postgres=CTc/postgres\n(4 rows)",
        "stdout_lines": [
            "                                    List of databases",
            "       Name       |  Owner   | Encoding |  Collate   |   Ctype    |   Access privileges   ",
            "------------------+----------+----------+------------+------------+-----------------------",
            " pg_auto_failover | autoctl  | UTF8     | en_US.utf8 | en_US.utf8 | ",
            " postgres         | postgres | UTF8     | en_US.utf8 | en_US.utf8 | ",
            " template0        | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +",
            "                  |          |          |            |            | postgres=CTc/postgres",
            " template1        | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +",
            "                  |          |          |            |            | postgres=CTc/postgres",
            "(4 rows)"
        ]
    }
}
2022-03-21 15:36:28,892 p=30373 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:36:28,892 p=30373 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:36:28,905 p=30373 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:36:28,914 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : Create primiary instance. It will automatically be set by the monitor as the primary node with read-write capability (PGDATA = /var/lib/pgpsql/ha)] ***
2022-03-21 15:36:28,934 p=30373 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:36:28,964 p=30373 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:36:28,975 p=30373 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:36:48,196 p=30373 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:36:48,205 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:36:48,241 p=30373 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:36:48,261 p=30373 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "147064336873.10466",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ;  pg_autoctl create postgres --pgdata \"ha\" --auth trust --ssl-self-signed --username ha-admin --dbname \"appdb\" --hostname \"co7-node01\" --pgctl /bin/pg_ctl --monitor 'postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require' )",
        "delta": "0:00:10.689552",
        "end": "2022-03-21 15:36:42.304102",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/147064336873.10466",
        "start": "2022-03-21 15:36:31.614550",
        "started": 1,
        "stderr": "15:36:31 10476 INFO  Using default --ssl-mode \"require\"\n15:36:31 10476 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n15:36:31 10476 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n15:36:31 10476 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n15:36:31 10476 INFO  Started pg_autoctl postgres service with pid 10478\n15:36:31 10478 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v\n15:36:31 10476 INFO  Started pg_autoctl node-init service with pid 10479\n15:36:31 10479 INFO  Registered node 1 (co7-node01:5432) with name \"node_1\" in formation \"default\", group 0, state \"single\"\n15:36:31 10479 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"\n15:36:32 10479 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"\n15:36:32 10479 INFO  Successfully registered as \"single\" to the monitor.\n15:36:32 10479 INFO  FSM transition from \"init\" to \"single\": Start as a single node\n15:36:32 10479 INFO  Initialising postgres as a primary\n15:36:32 10479 INFO  Initialising a PostgreSQL cluster at \"ha\"\n15:36:32 10479 INFO  /bin/pg_ctl initdb -s -D ha --option '--auth=trust'\n15:36:35 10479 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n15:36:35 10479 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.\n15:36:35 10479 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n15:36:35 10479 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"\n15:36:35 10479 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node01\"\n15:36:36 10631 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *\n15:36:37 10478 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 10631\n15:36:37 10479 INFO  CREATE DATABASE appdb;\n15:36:38 10479 INFO  CREATE EXTENSION pg_stat_statements;\n15:36:38 10479 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node01\"\n15:36:38 10479 INFO  Contents of \"/var/lib/pgsql/ha/postgresql-auto-failover.conf\" have changed, overwriting\n15:36:38 10479 WARN  Failed to resolve hostname \"co7-master\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n15:36:38 10479 WARN  Postgres might deny connection attempts from \"co7-master\", even with the new HBA rules.\n15:36:38 10479 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n15:36:38 10479 WARN  Using IP address \"192.168.0.81\" in HBA file instead of hostname \"co7-master\"\n15:36:38 10479 INFO  Transition complete: current state is now \"single\"\n15:36:39 10479 INFO  keeper has been successfully initialized.\n15:36:39 10476 WARN  pg_autoctl service node-init exited with exit status 0\n15:36:39 10478 INFO  Postgres controller service received signal SIGTERM, terminating\n15:36:39 10478 INFO  Stopping pg_autoctl postgres service\n15:36:39 10478 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast\n15:36:40 10476 INFO  Waiting for subprocesses to terminate.\n15:36:42 10476 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "15:36:31 10476 INFO  Using default --ssl-mode \"require\"",
            "15:36:31 10476 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "15:36:31 10476 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "15:36:31 10476 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "15:36:31 10476 INFO  Started pg_autoctl postgres service with pid 10478",
            "15:36:31 10478 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v",
            "15:36:31 10476 INFO  Started pg_autoctl node-init service with pid 10479",
            "15:36:31 10479 INFO  Registered node 1 (co7-node01:5432) with name \"node_1\" in formation \"default\", group 0, state \"single\"",
            "15:36:31 10479 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"",
            "15:36:32 10479 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"",
            "15:36:32 10479 INFO  Successfully registered as \"single\" to the monitor.",
            "15:36:32 10479 INFO  FSM transition from \"init\" to \"single\": Start as a single node",
            "15:36:32 10479 INFO  Initialising postgres as a primary",
            "15:36:32 10479 INFO  Initialising a PostgreSQL cluster at \"ha\"",
            "15:36:32 10479 INFO  /bin/pg_ctl initdb -s -D ha --option '--auth=trust'",
            "15:36:35 10479 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "15:36:35 10479 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.",
            "15:36:35 10479 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "15:36:35 10479 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"",
            "15:36:35 10479 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node01\"",
            "15:36:36 10631 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *",
            "15:36:37 10478 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 10631",
            "15:36:37 10479 INFO  CREATE DATABASE appdb;",
            "15:36:38 10479 INFO  CREATE EXTENSION pg_stat_statements;",
            "15:36:38 10479 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node01\"",
            "15:36:38 10479 INFO  Contents of \"/var/lib/pgsql/ha/postgresql-auto-failover.conf\" have changed, overwriting",
            "15:36:38 10479 WARN  Failed to resolve hostname \"co7-master\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "15:36:38 10479 WARN  Postgres might deny connection attempts from \"co7-master\", even with the new HBA rules.",
            "15:36:38 10479 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "15:36:38 10479 WARN  Using IP address \"192.168.0.81\" in HBA file instead of hostname \"co7-master\"",
            "15:36:38 10479 INFO  Transition complete: current state is now \"single\"",
            "15:36:39 10479 INFO  keeper has been successfully initialized.",
            "15:36:39 10476 WARN  pg_autoctl service node-init exited with exit status 0",
            "15:36:39 10478 INFO  Postgres controller service received signal SIGTERM, terminating",
            "15:36:39 10478 INFO  Stopping pg_autoctl postgres service",
            "15:36:39 10478 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast",
            "15:36:40 10476 INFO  Waiting for subprocesses to terminate.",
            "15:36:42 10476 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": [],
        "warnings": [
            "Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually"
        ]
    }
}
2022-03-21 15:36:48,262 p=30373 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:36:48,272 p=30373 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:36:48,281 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of pirmary instance] *******************************************************
2022-03-21 15:36:48,314 p=30373 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:36:48,330 p=30373 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:36:48,342 p=30373 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:36:55,667 p=30373 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:36:55,675 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:36:55,696 p=30373 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:36:55,729 p=30373 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "191124945469.11065",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl -q show systemd --pgdata ~postgres/ha > pgautofailover.service )",
        "delta": "0:00:00.031174",
        "end": "2022-03-21 15:36:50.133874",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/191124945469.11065",
        "start": "2022-03-21 15:36:50.102700",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 15:36:55,730 p=30373 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:36:55,740 p=30373 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:36:55,750 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : Copy primary systemd service file of primary instance] *************************************************
2022-03-21 15:36:55,770 p=30373 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:36:55,800 p=30373 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:36:55,811 p=30373 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:36:56,290 p=30373 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:36:56,301 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start primary systemd service of primary instance] ******************************************
2022-03-21 15:36:56,335 p=30373 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:36:56,351 p=30373 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:36:56,363 p=30373 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:36:57,104 p=30373 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:36:57,116 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 15:36:57,151 p=30373 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:36:57,168 p=30373 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:36:57,181 p=30373 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:36:57,708 p=30373 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:36:57,718 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the state of primary instance] ******************************************************************
2022-03-21 15:36:57,739 p=30373 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:36:57,769 p=30373 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:36:57,780 p=30373 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:36:58,308 p=30373 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:36:58,319 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:36:58,355 p=30373 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:36:58,374 p=30373 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "changed": true,
        "cmd": "( source ~/.bash_profile ; pg_autoctl show state )",
        "delta": "0:00:00.066581",
        "end": "2022-03-21 15:36:58.610714",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-21 15:36:58.544133",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State\n-------+-------+-----------------+-----------+-----------+---------------------+--------------------\nnode_1 |     1 | co7-node01:5432 | 0/16C4E38 |        no |              single |              single",
        "stdout_lines": [
            "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State",
            "-------+-------+-----------------+-----------+-----------+---------------------+--------------------",
            "node_1 |     1 | co7-node01:5432 | 0/16C4E38 |        no |              single |              single"
        ]
    }
}
2022-03-21 15:36:58,375 p=30373 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:36:58,384 p=30373 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:36:58,395 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : Create secondary instance. It will automatically be set by the monitor as the secondary  node with read-write capability (PGDATA = /var/lib/pgpsql/ha)] ***
2022-03-21 15:36:58,431 p=30373 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:36:58,444 p=30373 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:37:15,885 p=30373 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:37:15,930 p=30373 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:37:15,940 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:37:15,978 p=30373 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:37:15,993 p=30373 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:37:16,033 p=30373 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "ansible_job_id": "909863197301.12872",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ;  pg_autoctl create postgres --pgdata \"ha\" --auth trust --ssl-self-signed --username ha-admin --dbname \"appdb\" --hostname \"co7-node02\" --pgctl /bin/pg_ctl --monitor 'postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require' )",
        "delta": "0:00:16.111802",
        "end": "2022-03-21 15:37:15.541661",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/909863197301.12872",
        "start": "2022-03-21 15:36:59.429859",
        "started": 1,
        "stderr": "15:36:59 12882 INFO  Using default --ssl-mode \"require\"\n15:36:59 12882 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n15:36:59 12882 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n15:36:59 12882 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n15:36:59 12882 INFO  Found a stale pidfile at \"/tmp/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.pid\"\n15:36:59 12882 WARN  Removing the stale pid file \"/tmp/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.pid\"\n15:36:59 12882 INFO  Started pg_autoctl postgres service with pid 12884\n15:36:59 12884 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v\n15:36:59 12882 INFO  Started pg_autoctl node-init service with pid 12885\n15:37:00 12885 INFO  Registered node 3 (co7-node02:5432) with name \"node_3\" in formation \"default\", group 0, state \"wait_standby\"\n15:37:00 12885 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"\n15:37:00 12885 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"\n15:37:00 12885 INFO  Successfully registered as \"wait_standby\" to the monitor.\n15:37:00 12885 INFO  FSM transition from \"init\" to \"wait_standby\": Start following a primary\n15:37:00 12885 INFO  Transition complete: current state is now \"wait_standby\"\n15:37:02 12885 INFO  New state for node 1 \"node_1\" (co7-node01:5432): single ➜ wait_primary\n15:37:03 12885 INFO  Still waiting for the monitor to drive us to state \"catchingup\"\n15:37:03 12885 WARN  Please make sure that the primary node is currently running `pg_autoctl run` and contacting the monitor.\n15:37:03 12885 INFO  New state for node 1 \"node_1\" (co7-node01:5432): wait_primary ➜ wait_primary\n15:37:03 12885 INFO  FSM transition from \"wait_standby\" to \"catchingup\": The primary is now ready to accept a standby\n15:37:03 12885 INFO  Initialising PostgreSQL as a hot standby\n15:37:03 12885 INFO   /bin/pg_basebackup -w -d application_name=pgautofailover_standby_3 host=co7-node01 port=5432 user=pgautofailover_replicator sslmode=require --pgdata /var/lib/pgsql/backup/node_3 -U pgautofailover_replicator --verbose --progress --max-rate 100M --wal-method=stream --slot pgautofailover_standby_3\n15:37:03 12885 INFO  pg_basebackup: initiating base backup, waiting for checkpoint to complete\n15:37:05 12885 INFO  pg_basebackup: checkpoint completed\n15:37:05 12885 INFO  pg_basebackup: write-ahead log start point: 0/20000D0 on timeline 1\n15:37:05 12885 INFO  pg_basebackup: starting background WAL receiver\n15:37:05 12885 INFO      0/32432 kB (0%), 0/1 tablespace (...pgsql/backup/node_3/backup_label)\r\n15:37:06 12885 INFO   1655/32432 kB (5%), 0/1 tablespace (.../pgsql/backup/node_3/base/1/1249)\r\n15:37:08 12885 INFO  32441/32441 kB (100%), 0/1 tablespace (.../backup/node_3/global/pg_control)\r32441/32441 kB (100%), 0/1 tablespace (.../backup/node_3/global/pg_control)\r32441/32441 kB (100%), 1/1 tablespace                                         \r\n15:37:08 12885 INFO  pg_basebackup: write-ahead log end point: 0/3000050\n15:37:08 12885 INFO  pg_basebackup: waiting for background process to finish streaming ...\n15:37:10 12885 INFO  pg_basebackup: base backup completed\n15:37:10 12885 INFO  Writing recovery configuration to \"/var/lib/pgsql/ha/recovery.conf\"\n15:37:10 12885 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node02\"\n15:37:11 13110 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *\n15:37:13 12884 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 13110\n15:37:13 12885 INFO  PostgreSQL started on port 5432\n15:37:13 12885 INFO  Fetched current list of 2 other nodes from the monitor to update HBA rules, including 2 changes.\n15:37:13 12885 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n15:37:13 12885 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.\n15:37:13 12885 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n15:37:13 12885 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"\n15:37:13 12885 INFO  Ensuring HBA rules for node 1 \"node_1\" (192.168.0.83:5432)\n15:37:13 12885 WARN  Failed to resolve hostname \"co7-node03\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n15:37:13 12885 WARN  Postgres might deny connection attempts from \"co7-node03\", even with the new HBA rules.\n15:37:13 12885 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n15:37:13 12885 WARN  Using IP address \"192.168.0.85\" in HBA file instead of hostname \"co7-node03\"\n15:37:13 12885 INFO  Ensuring HBA rules for node 2 \"node_2\" (192.168.0.85:5432)\n15:37:13 12885 INFO  Transition complete: current state is now \"catchingup\"\n15:37:14 12885 INFO  keeper has been successfully initialized.\n15:37:14 12882 WARN  pg_autoctl service node-init exited with exit status 0\n15:37:14 12884 INFO  Postgres controller service received signal SIGTERM, terminating\n15:37:14 12884 INFO  Stopping pg_autoctl postgres service\n15:37:14 12884 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast\n15:37:14 12882 INFO  Waiting for subprocesses to terminate.\n15:37:15 12882 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "15:36:59 12882 INFO  Using default --ssl-mode \"require\"",
            "15:36:59 12882 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "15:36:59 12882 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "15:36:59 12882 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "15:36:59 12882 INFO  Found a stale pidfile at \"/tmp/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.pid\"",
            "15:36:59 12882 WARN  Removing the stale pid file \"/tmp/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.pid\"",
            "15:36:59 12882 INFO  Started pg_autoctl postgres service with pid 12884",
            "15:36:59 12884 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v",
            "15:36:59 12882 INFO  Started pg_autoctl node-init service with pid 12885",
            "15:37:00 12885 INFO  Registered node 3 (co7-node02:5432) with name \"node_3\" in formation \"default\", group 0, state \"wait_standby\"",
            "15:37:00 12885 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"",
            "15:37:00 12885 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"",
            "15:37:00 12885 INFO  Successfully registered as \"wait_standby\" to the monitor.",
            "15:37:00 12885 INFO  FSM transition from \"init\" to \"wait_standby\": Start following a primary",
            "15:37:00 12885 INFO  Transition complete: current state is now \"wait_standby\"",
            "15:37:02 12885 INFO  New state for node 1 \"node_1\" (co7-node01:5432): single ➜ wait_primary",
            "15:37:03 12885 INFO  Still waiting for the monitor to drive us to state \"catchingup\"",
            "15:37:03 12885 WARN  Please make sure that the primary node is currently running `pg_autoctl run` and contacting the monitor.",
            "15:37:03 12885 INFO  New state for node 1 \"node_1\" (co7-node01:5432): wait_primary ➜ wait_primary",
            "15:37:03 12885 INFO  FSM transition from \"wait_standby\" to \"catchingup\": The primary is now ready to accept a standby",
            "15:37:03 12885 INFO  Initialising PostgreSQL as a hot standby",
            "15:37:03 12885 INFO   /bin/pg_basebackup -w -d application_name=pgautofailover_standby_3 host=co7-node01 port=5432 user=pgautofailover_replicator sslmode=require --pgdata /var/lib/pgsql/backup/node_3 -U pgautofailover_replicator --verbose --progress --max-rate 100M --wal-method=stream --slot pgautofailover_standby_3",
            "15:37:03 12885 INFO  pg_basebackup: initiating base backup, waiting for checkpoint to complete",
            "15:37:05 12885 INFO  pg_basebackup: checkpoint completed",
            "15:37:05 12885 INFO  pg_basebackup: write-ahead log start point: 0/20000D0 on timeline 1",
            "15:37:05 12885 INFO  pg_basebackup: starting background WAL receiver",
            "15:37:05 12885 INFO      0/32432 kB (0%), 0/1 tablespace (...pgsql/backup/node_3/backup_label)",
            "15:37:06 12885 INFO   1655/32432 kB (5%), 0/1 tablespace (.../pgsql/backup/node_3/base/1/1249)",
            "15:37:08 12885 INFO  32441/32441 kB (100%), 0/1 tablespace (.../backup/node_3/global/pg_control)",
            "32441/32441 kB (100%), 0/1 tablespace (.../backup/node_3/global/pg_control)",
            "32441/32441 kB (100%), 1/1 tablespace                                         ",
            "15:37:08 12885 INFO  pg_basebackup: write-ahead log end point: 0/3000050",
            "15:37:08 12885 INFO  pg_basebackup: waiting for background process to finish streaming ...",
            "15:37:10 12885 INFO  pg_basebackup: base backup completed",
            "15:37:10 12885 INFO  Writing recovery configuration to \"/var/lib/pgsql/ha/recovery.conf\"",
            "15:37:10 12885 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node02\"",
            "15:37:11 13110 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *",
            "15:37:13 12884 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 13110",
            "15:37:13 12885 INFO  PostgreSQL started on port 5432",
            "15:37:13 12885 INFO  Fetched current list of 2 other nodes from the monitor to update HBA rules, including 2 changes.",
            "15:37:13 12885 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "15:37:13 12885 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.",
            "15:37:13 12885 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "15:37:13 12885 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"",
            "15:37:13 12885 INFO  Ensuring HBA rules for node 1 \"node_1\" (192.168.0.83:5432)",
            "15:37:13 12885 WARN  Failed to resolve hostname \"co7-node03\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "15:37:13 12885 WARN  Postgres might deny connection attempts from \"co7-node03\", even with the new HBA rules.",
            "15:37:13 12885 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "15:37:13 12885 WARN  Using IP address \"192.168.0.85\" in HBA file instead of hostname \"co7-node03\"",
            "15:37:13 12885 INFO  Ensuring HBA rules for node 2 \"node_2\" (192.168.0.85:5432)",
            "15:37:13 12885 INFO  Transition complete: current state is now \"catchingup\"",
            "15:37:14 12885 INFO  keeper has been successfully initialized.",
            "15:37:14 12882 WARN  pg_autoctl service node-init exited with exit status 0",
            "15:37:14 12884 INFO  Postgres controller service received signal SIGTERM, terminating",
            "15:37:14 12884 INFO  Stopping pg_autoctl postgres service",
            "15:37:14 12884 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast",
            "15:37:14 12882 INFO  Waiting for subprocesses to terminate.",
            "15:37:15 12882 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": [],
        "warnings": [
            "Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually"
        ]
    }
}
2022-03-21 15:37:16,037 p=30373 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "ansible_job_id": "731234359094.12130",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ;  pg_autoctl create postgres --pgdata \"ha\" --auth trust --ssl-self-signed --username ha-admin --dbname \"appdb\" --hostname \"co7-node03\" --pgctl /bin/pg_ctl --monitor 'postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require' )",
        "delta": "0:00:14.704890",
        "end": "2022-03-21 15:37:14.141308",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/731234359094.12130",
        "start": "2022-03-21 15:36:59.436418",
        "started": 1,
        "stderr": "15:36:59 12140 INFO  Using default --ssl-mode \"require\"\n15:36:59 12140 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n15:36:59 12140 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n15:36:59 12140 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n15:36:59 12140 INFO  Found a stale pidfile at \"/tmp/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.pid\"\n15:36:59 12140 WARN  Removing the stale pid file \"/tmp/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.pid\"\n15:36:59 12140 INFO  Started pg_autoctl postgres service with pid 12142\n15:36:59 12140 INFO  Started pg_autoctl node-init service with pid 12143\n15:36:59 12142 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v\n15:36:59 12143 INFO  Registered node 2 (co7-node03:5432) with name \"node_2\" in formation \"default\", group 0, state \"wait_standby\"\n15:36:59 12143 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"\n15:36:59 12143 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"\n15:37:00 12143 INFO  Successfully registered as \"wait_standby\" to the monitor.\n15:37:00 12143 INFO  FSM transition from \"init\" to \"wait_standby\": Start following a primary\n15:37:00 12143 INFO  Transition complete: current state is now \"wait_standby\"\n15:37:01 12143 INFO  New state for node 3 \"node_3\" (co7-node02:5432): wait_standby ➜ wait_standby\n15:37:02 12143 INFO  Still waiting for the monitor to drive us to state \"catchingup\"\n15:37:02 12143 WARN  Please make sure that the primary node is currently running `pg_autoctl run` and contacting the monitor.\n15:37:02 12143 INFO  New state for node 1 \"node_1\" (co7-node01:5432): single ➜ wait_primary\n15:37:03 12143 INFO  New state for node 1 \"node_1\" (co7-node01:5432): wait_primary ➜ wait_primary\n15:37:03 12143 INFO  FSM transition from \"wait_standby\" to \"catchingup\": The primary is now ready to accept a standby\n15:37:03 12143 INFO  Initialising PostgreSQL as a hot standby\n15:37:03 12143 INFO   /bin/pg_basebackup -w -d application_name=pgautofailover_standby_2 host=co7-node01 port=5432 user=pgautofailover_replicator sslmode=require --pgdata /var/lib/pgsql/backup/node_2 -U pgautofailover_replicator --verbose --progress --max-rate 100M --wal-method=stream --slot pgautofailover_standby_2\n15:37:03 12143 INFO  pg_basebackup: initiating base backup, waiting for checkpoint to complete\n15:37:05 12143 INFO  pg_basebackup: checkpoint completed\n15:37:05 12143 INFO  pg_basebackup: write-ahead log start point: 0/2000028 on timeline 1\n15:37:05 12143 INFO  pg_basebackup: starting background WAL receiver\n15:37:05 12143 INFO      0/32432 kB (0%), 0/1 tablespace (...pgsql/backup/node_2/backup_label)\r\n15:37:06 12143 INFO  13078/32432 kB (40%), 0/1 tablespace (...ql/backup/node_2/base/13807/3455)\r\n15:37:06 12143 INFO  32441/32441 kB (100%), 0/1 tablespace (.../backup/node_2/global/pg_control)\r32441/32441 kB (100%), 1/1 tablespace                                         \r\n15:37:06 12143 INFO  pg_basebackup: write-ahead log end point: 0/20001A0\n15:37:06 12143 INFO  pg_basebackup: waiting for background process to finish streaming ...\n15:37:09 12143 INFO  pg_basebackup: base backup completed\n15:37:09 12143 INFO  Writing recovery configuration to \"/var/lib/pgsql/ha/recovery.conf\"\n15:37:09 12143 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node03\"\n15:37:09 12281 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *\n15:37:11 12142 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 12281\n15:37:11 12143 INFO  PostgreSQL started on port 5432\n15:37:11 12143 INFO  Fetched current list of 2 other nodes from the monitor to update HBA rules, including 2 changes.\n15:37:11 12143 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n15:37:11 12143 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.\n15:37:11 12143 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n15:37:11 12143 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"\n15:37:11 12143 INFO  Ensuring HBA rules for node 1 \"node_1\" (192.168.0.83:5432)\n15:37:11 12143 WARN  Failed to resolve hostname \"co7-node02\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n15:37:11 12143 WARN  Postgres might deny connection attempts from \"co7-node02\", even with the new HBA rules.\n15:37:11 12143 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n15:37:11 12143 WARN  Using IP address \"192.168.0.84\" in HBA file instead of hostname \"co7-node02\"\n15:37:11 12143 INFO  Ensuring HBA rules for node 3 \"node_3\" (192.168.0.84:5432)\n15:37:11 12143 INFO  Transition complete: current state is now \"catchingup\"\n15:37:12 12143 INFO  keeper has been successfully initialized.\n15:37:12 12140 WARN  pg_autoctl service node-init exited with exit status 0\n15:37:12 12142 INFO  Postgres controller service received signal SIGTERM, terminating\n15:37:12 12142 INFO  Stopping pg_autoctl postgres service\n15:37:12 12142 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast\n15:37:13 12140 INFO  Waiting for subprocesses to terminate.\n15:37:14 12140 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "15:36:59 12140 INFO  Using default --ssl-mode \"require\"",
            "15:36:59 12140 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "15:36:59 12140 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "15:36:59 12140 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "15:36:59 12140 INFO  Found a stale pidfile at \"/tmp/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.pid\"",
            "15:36:59 12140 WARN  Removing the stale pid file \"/tmp/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.pid\"",
            "15:36:59 12140 INFO  Started pg_autoctl postgres service with pid 12142",
            "15:36:59 12140 INFO  Started pg_autoctl node-init service with pid 12143",
            "15:36:59 12142 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v",
            "15:36:59 12143 INFO  Registered node 2 (co7-node03:5432) with name \"node_2\" in formation \"default\", group 0, state \"wait_standby\"",
            "15:36:59 12143 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"",
            "15:36:59 12143 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"",
            "15:37:00 12143 INFO  Successfully registered as \"wait_standby\" to the monitor.",
            "15:37:00 12143 INFO  FSM transition from \"init\" to \"wait_standby\": Start following a primary",
            "15:37:00 12143 INFO  Transition complete: current state is now \"wait_standby\"",
            "15:37:01 12143 INFO  New state for node 3 \"node_3\" (co7-node02:5432): wait_standby ➜ wait_standby",
            "15:37:02 12143 INFO  Still waiting for the monitor to drive us to state \"catchingup\"",
            "15:37:02 12143 WARN  Please make sure that the primary node is currently running `pg_autoctl run` and contacting the monitor.",
            "15:37:02 12143 INFO  New state for node 1 \"node_1\" (co7-node01:5432): single ➜ wait_primary",
            "15:37:03 12143 INFO  New state for node 1 \"node_1\" (co7-node01:5432): wait_primary ➜ wait_primary",
            "15:37:03 12143 INFO  FSM transition from \"wait_standby\" to \"catchingup\": The primary is now ready to accept a standby",
            "15:37:03 12143 INFO  Initialising PostgreSQL as a hot standby",
            "15:37:03 12143 INFO   /bin/pg_basebackup -w -d application_name=pgautofailover_standby_2 host=co7-node01 port=5432 user=pgautofailover_replicator sslmode=require --pgdata /var/lib/pgsql/backup/node_2 -U pgautofailover_replicator --verbose --progress --max-rate 100M --wal-method=stream --slot pgautofailover_standby_2",
            "15:37:03 12143 INFO  pg_basebackup: initiating base backup, waiting for checkpoint to complete",
            "15:37:05 12143 INFO  pg_basebackup: checkpoint completed",
            "15:37:05 12143 INFO  pg_basebackup: write-ahead log start point: 0/2000028 on timeline 1",
            "15:37:05 12143 INFO  pg_basebackup: starting background WAL receiver",
            "15:37:05 12143 INFO      0/32432 kB (0%), 0/1 tablespace (...pgsql/backup/node_2/backup_label)",
            "15:37:06 12143 INFO  13078/32432 kB (40%), 0/1 tablespace (...ql/backup/node_2/base/13807/3455)",
            "15:37:06 12143 INFO  32441/32441 kB (100%), 0/1 tablespace (.../backup/node_2/global/pg_control)",
            "32441/32441 kB (100%), 1/1 tablespace                                         ",
            "15:37:06 12143 INFO  pg_basebackup: write-ahead log end point: 0/20001A0",
            "15:37:06 12143 INFO  pg_basebackup: waiting for background process to finish streaming ...",
            "15:37:09 12143 INFO  pg_basebackup: base backup completed",
            "15:37:09 12143 INFO  Writing recovery configuration to \"/var/lib/pgsql/ha/recovery.conf\"",
            "15:37:09 12143 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node03\"",
            "15:37:09 12281 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *",
            "15:37:11 12142 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 12281",
            "15:37:11 12143 INFO  PostgreSQL started on port 5432",
            "15:37:11 12143 INFO  Fetched current list of 2 other nodes from the monitor to update HBA rules, including 2 changes.",
            "15:37:11 12143 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "15:37:11 12143 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.",
            "15:37:11 12143 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "15:37:11 12143 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"",
            "15:37:11 12143 INFO  Ensuring HBA rules for node 1 \"node_1\" (192.168.0.83:5432)",
            "15:37:11 12143 WARN  Failed to resolve hostname \"co7-node02\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "15:37:11 12143 WARN  Postgres might deny connection attempts from \"co7-node02\", even with the new HBA rules.",
            "15:37:11 12143 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "15:37:11 12143 WARN  Using IP address \"192.168.0.84\" in HBA file instead of hostname \"co7-node02\"",
            "15:37:11 12143 INFO  Ensuring HBA rules for node 3 \"node_3\" (192.168.0.84:5432)",
            "15:37:11 12143 INFO  Transition complete: current state is now \"catchingup\"",
            "15:37:12 12143 INFO  keeper has been successfully initialized.",
            "15:37:12 12140 WARN  pg_autoctl service node-init exited with exit status 0",
            "15:37:12 12142 INFO  Postgres controller service received signal SIGTERM, terminating",
            "15:37:12 12142 INFO  Stopping pg_autoctl postgres service",
            "15:37:12 12142 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast",
            "15:37:13 12140 INFO  Waiting for subprocesses to terminate.",
            "15:37:14 12140 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": [],
        "warnings": [
            "Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually"
        ]
    }
}
2022-03-21 15:37:16,049 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of secondary instance] *****************************************************
2022-03-21 15:37:16,085 p=30373 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:37:16,098 p=30373 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:37:22,520 p=30373 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:37:22,520 p=30373 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:37:22,530 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:37:22,554 p=30373 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:37:22,571 p=30373 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:37:22,590 p=30373 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "ansible_job_id": "310473340203.13442",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl -q show systemd --pgdata ~postgres/ha > pgautofailover.service )",
        "delta": "0:00:00.032281",
        "end": "2022-03-21 15:37:17.080536",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/310473340203.13442",
        "start": "2022-03-21 15:37:17.048255",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 15:37:22,603 p=30373 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "ansible_job_id": "56300892034.12699",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl -q show systemd --pgdata ~postgres/ha > pgautofailover.service )",
        "delta": "0:00:00.032562",
        "end": "2022-03-21 15:37:17.087789",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/56300892034.12699",
        "start": "2022-03-21 15:37:17.055227",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 15:37:22,614 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : Copy secondary systemd service file of secondary instance] *********************************************
2022-03-21 15:37:22,634 p=30373 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:37:22,650 p=30373 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:37:23,245 p=30373 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:37:23,245 p=30373 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:37:23,254 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start secondary systemd service of secondary instance] **************************************
2022-03-21 15:37:23,274 p=30373 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:37:23,291 p=30373 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:37:24,118 p=30373 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:37:24,126 p=30373 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:37:24,138 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 15:37:24,158 p=30373 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:37:24,175 p=30373 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:37:24,743 p=30373 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:37:24,743 p=30373 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:37:24,752 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the state of secondary instance] ****************************************************************
2022-03-21 15:37:24,773 p=30373 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:37:24,803 p=30373 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:37:25,443 p=30373 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:37:25,444 p=30373 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:37:25,454 p=30373 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:37:25,474 p=30373 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:37:25,491 p=30373 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:37:25,531 p=30373 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "changed": true,
        "cmd": "( source ~/.bash_profile ; pg_autoctl show state )",
        "delta": "0:00:00.070398",
        "end": "2022-03-21 15:37:25.750491",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-21 15:37:25.680093",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State\n-------+-------+-----------------+-----------+-----------+---------------------+--------------------\nnode_1 |     1 | co7-node01:5432 | 0/4000060 |       yes |        wait_primary |        wait_primary\nnode_2 |     2 | co7-node03:5432 | 0/3080000 |        no |          catchingup |          catchingup\nnode_3 |     3 | co7-node02:5432 | 0/4000000 |        no |          catchingup |          catchingup",
        "stdout_lines": [
            "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State",
            "-------+-------+-----------------+-----------+-----------+---------------------+--------------------",
            "node_1 |     1 | co7-node01:5432 | 0/4000060 |       yes |        wait_primary |        wait_primary",
            "node_2 |     2 | co7-node03:5432 | 0/3080000 |        no |          catchingup |          catchingup",
            "node_3 |     3 | co7-node02:5432 | 0/4000000 |        no |          catchingup |          catchingup"
        ]
    }
}
2022-03-21 15:37:25,532 p=30373 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "changed": true,
        "cmd": "( source ~/.bash_profile ; pg_autoctl show state )",
        "delta": "0:00:00.067967",
        "end": "2022-03-21 15:37:25.745981",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-21 15:37:25.678014",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State\n-------+-------+-----------------+-----------+-----------+---------------------+--------------------\nnode_1 |     1 | co7-node01:5432 | 0/4000060 |       yes |        wait_primary |        wait_primary\nnode_2 |     2 | co7-node03:5432 | 0/3080000 |        no |          catchingup |          catchingup\nnode_3 |     3 | co7-node02:5432 | 0/4000000 |        no |          catchingup |          catchingup",
        "stdout_lines": [
            "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State",
            "-------+-------+-----------------+-----------+-----------+---------------------+--------------------",
            "node_1 |     1 | co7-node01:5432 | 0/4000060 |       yes |        wait_primary |        wait_primary",
            "node_2 |     2 | co7-node03:5432 | 0/3080000 |        no |          catchingup |          catchingup",
            "node_3 |     3 | co7-node02:5432 | 0/4000000 |        no |          catchingup |          catchingup"
        ]
    }
}
2022-03-21 15:37:25,575 p=30373 u=moonja n=ansible | PLAY RECAP *************************************************************************************************************************
2022-03-21 15:37:25,575 p=30373 u=moonja n=ansible | co7-master                 : ok=27   changed=15   unreachable=0    failed=0    skipped=19   rescued=0    ignored=0   
2022-03-21 15:37:25,575 p=30373 u=moonja n=ansible | co7-node01                 : ok=21   changed=12   unreachable=0    failed=0    skipped=25   rescued=0    ignored=0   
2022-03-21 15:37:25,576 p=30373 u=moonja n=ansible | co7-node02                 : ok=21   changed=12   unreachable=0    failed=0    skipped=25   rescued=0    ignored=0   
2022-03-21 15:37:25,576 p=30373 u=moonja n=ansible | co7-node03                 : ok=21   changed=12   unreachable=0    failed=0    skipped=25   rescued=0    ignored=0   
2022-03-21 15:38:51,135 p=33240 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from 
ansible-core in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 15:38:51,368 p=33240 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 
2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 15:38:51,372 p=33240 u=moonja n=ansible | [WARNING]: While constructing a mapping from /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/install.yml, line 307,
column 3, found a duplicate dict key (when). Using last defined value only.

2022-03-21 15:38:51,423 p=33240 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/upgrade.yml is empty and had no tasks to include

2022-03-21 15:38:51,436 p=33240 u=moonja n=ansible | PLAY [all] *************************************************************************************************************************
2022-03-21 15:38:51,463 p=33240 u=moonja n=ansible | TASK [Gathering Facts] *************************************************************************************************************
2022-03-21 15:38:53,685 p=33240 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 15:38:53,780 p=33240 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 15:38:53,828 p=33240 u=moonja n=ansible | ok: [co7-master]
2022-03-21 15:38:53,831 p=33240 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 15:38:53,847 p=33240 u=moonja n=ansible | TASK [pgfailover-postgres : Disable port from public zone] *************************************************************************
2022-03-21 15:38:54,892 p=33240 u=moonja n=ansible | changed: [co7-node02] => (item=5432)
2022-03-21 15:38:54,896 p=33240 u=moonja n=ansible | changed: [co7-master] => (item=5432)
2022-03-21 15:38:54,907 p=33240 u=moonja n=ansible | changed: [co7-node03] => (item=5432)
2022-03-21 15:38:54,924 p=33240 u=moonja n=ansible | changed: [co7-node01] => (item=5432)
2022-03-21 15:38:54,935 p=33240 u=moonja n=ansible | TASK [pgfailover-postgres : Disable IP Addresses in whitelist] *********************************************************************
2022-03-21 15:38:55,660 p=33240 u=moonja n=ansible | changed: [co7-master] => (item=co7-master)
2022-03-21 15:38:55,665 p=33240 u=moonja n=ansible | changed: [co7-node03] => (item=co7-master)
2022-03-21 15:38:55,667 p=33240 u=moonja n=ansible | changed: [co7-node02] => (item=co7-master)
2022-03-21 15:38:55,670 p=33240 u=moonja n=ansible | changed: [co7-node01] => (item=co7-master)
2022-03-21 15:38:56,490 p=33240 u=moonja n=ansible | changed: [co7-master] => (item=co7-node01)
2022-03-21 15:38:56,490 p=33240 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node01)
2022-03-21 15:38:56,513 p=33240 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node01)
2022-03-21 15:38:56,520 p=33240 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node01)
2022-03-21 15:38:57,108 p=33240 u=moonja n=ansible | changed: [co7-master] => (item=co7-node02)
2022-03-21 15:38:57,108 p=33240 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node02)
2022-03-21 15:38:57,122 p=33240 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node02)
2022-03-21 15:38:57,140 p=33240 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node02)
2022-03-21 15:38:57,728 p=33240 u=moonja n=ansible | changed: [co7-master] => (item=co7-node03)
2022-03-21 15:38:57,759 p=33240 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node03)
2022-03-21 15:38:58,362 p=33240 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node03)
2022-03-21 15:38:58,363 p=33240 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node03)
2022-03-21 15:38:58,376 p=33240 u=moonja n=ansible | TASK [pgfailover-postgres : Bounce firewalld] **************************************************************************************
2022-03-21 15:39:00,448 p=33240 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:39:00,454 p=33240 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:39:00,473 p=33240 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:39:00,480 p=33240 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:39:00,490 p=33240 u=moonja n=ansible | TASK [pgfailover-postgres : Stop and disable firewalld.] ***************************************************************************
2022-03-21 15:39:02,024 p=33240 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:39:02,077 p=33240 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:39:02,111 p=33240 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:39:02,120 p=33240 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:39:02,132 p=33240 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 15:39:02,165 p=33240 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:39:02,180 p=33240 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:39:02,191 p=33240 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:39:02,864 p=33240 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:39:02,876 p=33240 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 15:39:02,925 p=33240 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:39:02,925 p=33240 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:39:02,935 p=33240 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:39:03,462 p=33240 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:39:03,473 p=33240 u=moonja n=ansible | TASK [pgfailover-postgres : Getting process IDs of the pg_autoctl process] *********************************************************
2022-03-21 15:39:04,268 p=33240 u=moonja n=ansible | ok: [co7-master]
2022-03-21 15:39:04,269 p=33240 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 15:39:04,272 p=33240 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 15:39:04,276 p=33240 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 15:39:04,286 p=33240 u=moonja n=ansible | TASK [pgfailover-postgres : Stop pgautofailover service of systemd] ****************************************************************
2022-03-21 15:39:06,165 p=33240 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:39:06,203 p=33240 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:39:06,735 p=33240 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:39:06,793 p=33240 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:39:06,803 p=33240 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] ************************************************************************
2022-03-21 15:39:06,823 p=33240 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:39:06,838 p=33240 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:39:07,517 p=33240 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:39:07,517 p=33240 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:39:07,525 p=33240 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start secondary systemd service of secondary instance] **************************************
2022-03-21 15:39:07,545 p=33240 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:39:07,574 p=33240 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:39:08,330 p=33240 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:39:08,345 p=33240 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:39:08,355 p=33240 u=moonja n=ansible | TASK [pgfailover-postgres : Delete secondary systemd service file of secondary instance] *******************************************
2022-03-21 15:39:08,377 p=33240 u=moonja n=ansible | skipping: [co7-master] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:39:08,378 p=33240 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:39:08,382 p=33240 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:39:08,387 p=33240 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:39:08,391 p=33240 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:39:08,393 p=33240 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql) 
2022-03-21 15:39:08,394 p=33240 u=moonja n=ansible | skipping: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:39:08,394 p=33240 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:39:08,396 p=33240 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:39:08,401 p=33240 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:39:08,401 p=33240 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:39:08,402 p=33240 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql) 
2022-03-21 15:39:09,075 p=33240 u=moonja n=ansible | changed: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 15:39:09,076 p=33240 u=moonja n=ansible | changed: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 15:39:09,487 p=33240 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 15:39:09,488 p=33240 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 15:39:09,908 p=33240 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 15:39:09,909 p=33240 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 15:39:10,395 p=33240 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.config)
2022-03-21 15:39:10,395 p=33240 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.config)
2022-03-21 15:39:10,910 p=33240 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.ansible)
2022-03-21 15:39:10,974 p=33240 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.ansible)
2022-03-21 15:39:11,364 p=33240 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql)
2022-03-21 15:39:11,429 p=33240 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql)
2022-03-21 15:39:11,442 p=33240 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] ************************************************************************
2022-03-21 15:39:11,462 p=33240 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:39:11,491 p=33240 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:39:11,502 p=33240 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:39:12,127 p=33240 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:39:12,139 p=33240 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start primary systemd service of primary instance] ******************************************
2022-03-21 15:39:12,160 p=33240 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:39:12,190 p=33240 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:39:12,201 p=33240 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:39:13,026 p=33240 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:39:13,036 p=33240 u=moonja n=ansible | TASK [pgfailover-postgres : Delete primary systemd service file of secondary instance] *********************************************
2022-03-21 15:39:13,059 p=33240 u=moonja n=ansible | skipping: [co7-master] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:39:13,061 p=33240 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:39:13,065 p=33240 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:39:13,068 p=33240 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:39:13,069 p=33240 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:39:13,070 p=33240 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql) 
2022-03-21 15:39:13,094 p=33240 u=moonja n=ansible | skipping: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:39:13,095 p=33240 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:39:13,101 p=33240 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:39:13,102 p=33240 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:39:13,102 p=33240 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:39:13,103 p=33240 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql) 
2022-03-21 15:39:13,106 p=33240 u=moonja n=ansible | skipping: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:39:13,112 p=33240 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:39:13,112 p=33240 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:39:13,113 p=33240 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:39:13,116 p=33240 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:39:13,117 p=33240 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql) 
2022-03-21 15:39:13,608 p=33240 u=moonja n=ansible | changed: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 15:39:14,081 p=33240 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 15:39:14,538 p=33240 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 15:39:15,008 p=33240 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.config)
2022-03-21 15:39:15,470 p=33240 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.ansible)
2022-03-21 15:39:15,987 p=33240 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql)
2022-03-21 15:39:16,002 p=33240 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] ************************************************************************
2022-03-21 15:39:16,034 p=33240 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:39:16,050 p=33240 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:39:16,062 p=33240 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:39:16,572 p=33240 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:39:16,584 p=33240 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start systemd service of monitor instance] **************************************************
2022-03-21 15:39:16,622 p=33240 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:39:16,637 p=33240 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:39:16,649 p=33240 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:39:17,303 p=33240 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:39:17,315 p=33240 u=moonja n=ansible | TASK [pgfailover-postgres : Delete primary systemd service file of secondary instance] *********************************************
2022-03-21 15:39:17,354 p=33240 u=moonja n=ansible | skipping: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:39:17,356 p=33240 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:39:17,359 p=33240 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:39:17,363 p=33240 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:39:17,368 p=33240 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:39:17,368 p=33240 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql) 
2022-03-21 15:39:17,369 p=33240 u=moonja n=ansible | skipping: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:39:17,370 p=33240 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:39:17,376 p=33240 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:39:17,376 p=33240 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:39:17,377 p=33240 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:39:17,379 p=33240 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql) 
2022-03-21 15:39:17,385 p=33240 u=moonja n=ansible | skipping: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:39:17,387 p=33240 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:39:17,390 p=33240 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:39:17,392 p=33240 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:39:17,395 p=33240 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:39:17,395 p=33240 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql) 
2022-03-21 15:39:17,892 p=33240 u=moonja n=ansible | changed: [co7-master] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 15:39:18,513 p=33240 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 15:39:19,020 p=33240 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 15:39:19,507 p=33240 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/.config)
2022-03-21 15:39:19,994 p=33240 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/.ansible)
2022-03-21 15:39:20,510 p=33240 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql)
2022-03-21 15:39:20,523 p=33240 u=moonja n=ansible | TASK [pgfailover-postgres : Uninstall VMware Postgres on all hosts as root] ********************************************************
2022-03-21 15:39:49,088 p=33240 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:39:49,098 p=33240 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:39:50,283 p=33240 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:39:50,608 p=33240 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:39:50,620 p=33240 u=moonja n=ansible | TASK [pgfailover-postgres : Copy the vmwawre-postgres rpm file to all hosts in cluster] ********************************************
2022-03-21 15:39:51,081 p=33240 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:39:51,085 p=33240 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:39:51,092 p=33240 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:39:51,112 p=33240 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:39:51,158 p=33240 u=moonja n=ansible | PLAY RECAP *************************************************************************************************************************
2022-03-21 15:39:51,158 p=33240 u=moonja n=ansible | co7-master                 : ok=14   changed=12   unreachable=0    failed=0    skipped=6    rescued=0    ignored=0   
2022-03-21 15:39:51,158 p=33240 u=moonja n=ansible | co7-node01                 : ok=12   changed=10   unreachable=0    failed=0    skipped=8    rescued=0    ignored=0   
2022-03-21 15:39:51,158 p=33240 u=moonja n=ansible | co7-node02                 : ok=12   changed=10   unreachable=0    failed=0    skipped=8    rescued=0    ignored=0   
2022-03-21 15:39:51,158 p=33240 u=moonja n=ansible | co7-node03                 : ok=12   changed=10   unreachable=0    failed=0    skipped=8    rescued=0    ignored=0   
2022-03-21 15:43:05,256 p=34764 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from 
ansible-core in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 15:43:05,501 p=34764 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 
2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 15:43:05,505 p=34764 u=moonja n=ansible | [WARNING]: While constructing a mapping from /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/install.yml, line 307,
column 3, found a duplicate dict key (when). Using last defined value only.

2022-03-21 15:43:05,555 p=34764 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/upgrade.yml is empty and had no tasks to include

2022-03-21 15:43:05,568 p=34764 u=moonja n=ansible | PLAY [all] *************************************************************************************************************************
2022-03-21 15:43:05,599 p=34764 u=moonja n=ansible | TASK [Gathering Facts] *************************************************************************************************************
2022-03-21 15:43:07,766 p=34764 u=moonja n=ansible | ok: [co7-master]
2022-03-21 15:43:07,844 p=34764 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 15:43:07,848 p=34764 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 15:43:07,943 p=34764 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 15:43:07,962 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : Install rpm packages of dependenies to need installing packages regarding kubernates] ******************
2022-03-21 15:43:08,964 p=34764 u=moonja n=ansible | ok: [co7-master] => (item=firewalld)
2022-03-21 15:43:08,975 p=34764 u=moonja n=ansible | ok: [co7-node01] => (item=firewalld)
2022-03-21 15:43:08,985 p=34764 u=moonja n=ansible | ok: [co7-node02] => (item=firewalld)
2022-03-21 15:43:09,020 p=34764 u=moonja n=ansible | ok: [co7-node03] => (item=firewalld)
2022-03-21 15:43:09,699 p=34764 u=moonja n=ansible | ok: [co7-master] => (item=python3)
2022-03-21 15:43:09,703 p=34764 u=moonja n=ansible | ok: [co7-node01] => (item=python3)
2022-03-21 15:43:09,751 p=34764 u=moonja n=ansible | ok: [co7-node02] => (item=python3)
2022-03-21 15:43:09,795 p=34764 u=moonja n=ansible | ok: [co7-node03] => (item=python3)
2022-03-21 15:43:15,394 p=34764 u=moonja n=ansible | ok: [co7-master] => (item=python3-libselinux)
2022-03-21 15:43:15,539 p=34764 u=moonja n=ansible | ok: [co7-node03] => (item=python3-libselinux)
2022-03-21 15:43:15,548 p=34764 u=moonja n=ansible | ok: [co7-node02] => (item=python3-libselinux)
2022-03-21 15:43:15,961 p=34764 u=moonja n=ansible | ok: [co7-node01] => (item=python3-libselinux)
2022-03-21 15:43:15,974 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : Start and enable firewalld.] ***************************************************************************
2022-03-21 15:43:17,340 p=34764 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:43:17,357 p=34764 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:43:17,359 p=34764 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:43:18,271 p=34764 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:43:18,281 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : Open Firewall] *****************************************************************************************
2022-03-21 15:43:19,158 p=34764 u=moonja n=ansible | changed: [co7-node02] => (item=5432)
2022-03-21 15:43:19,160 p=34764 u=moonja n=ansible | changed: [co7-master] => (item=5432)
2022-03-21 15:43:19,161 p=34764 u=moonja n=ansible | changed: [co7-node03] => (item=5432)
2022-03-21 15:43:19,167 p=34764 u=moonja n=ansible | changed: [co7-node01] => (item=5432)
2022-03-21 15:43:19,177 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : Whitelist of Ip addresses] *****************************************************************************
2022-03-21 15:43:19,853 p=34764 u=moonja n=ansible | changed: [co7-master] => (item=co7-master)
2022-03-21 15:43:19,869 p=34764 u=moonja n=ansible | changed: [co7-node01] => (item=co7-master)
2022-03-21 15:43:19,897 p=34764 u=moonja n=ansible | changed: [co7-node02] => (item=co7-master)
2022-03-21 15:43:19,897 p=34764 u=moonja n=ansible | changed: [co7-node03] => (item=co7-master)
2022-03-21 15:43:20,458 p=34764 u=moonja n=ansible | changed: [co7-master] => (item=co7-node01)
2022-03-21 15:43:20,461 p=34764 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node01)
2022-03-21 15:43:20,522 p=34764 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node01)
2022-03-21 15:43:20,527 p=34764 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node01)
2022-03-21 15:43:21,070 p=34764 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node02)
2022-03-21 15:43:21,080 p=34764 u=moonja n=ansible | changed: [co7-master] => (item=co7-node02)
2022-03-21 15:43:21,137 p=34764 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node02)
2022-03-21 15:43:21,147 p=34764 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node02)
2022-03-21 15:43:21,821 p=34764 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node03)
2022-03-21 15:43:21,864 p=34764 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node03)
2022-03-21 15:43:21,867 p=34764 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node03)
2022-03-21 15:43:21,871 p=34764 u=moonja n=ansible | changed: [co7-master] => (item=co7-node03)
2022-03-21 15:43:21,882 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : Bounce firewalld] **************************************************************************************
2022-03-21 15:43:23,525 p=34764 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:43:23,527 p=34764 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:43:23,529 p=34764 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:43:23,544 p=34764 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:43:23,556 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : Copy the vmwawre-postgres rpm file to all hosts in cluster] ********************************************
2022-03-21 15:43:25,176 p=34764 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:43:25,185 p=34764 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:43:25,189 p=34764 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:43:25,579 p=34764 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:43:25,588 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : Install dependency rpm package for pgautofailover] *****************************************************
2022-03-21 15:43:32,429 p=34764 u=moonja n=ansible | ok: [co7-node03] => (item=python2-psutil)
2022-03-21 15:43:32,638 p=34764 u=moonja n=ansible | ok: [co7-node02] => (item=python2-psutil)
2022-03-21 15:43:32,686 p=34764 u=moonja n=ansible | ok: [co7-master] => (item=python2-psutil)
2022-03-21 15:43:33,308 p=34764 u=moonja n=ansible | ok: [co7-node01] => (item=python2-psutil)
2022-03-21 15:43:33,318 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : Install VMware Postgres on all hosts as root] **********************************************************
2022-03-21 15:44:06,592 p=34764 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:44:07,610 p=34764 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:44:07,891 p=34764 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:44:08,241 p=34764 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:44:08,253 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 15:44:08,300 p=34764 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:44:08,378 p=34764 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:44:08,401 p=34764 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:44:09,094 p=34764 u=moonja n=ansible | [WARNING]: Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues
when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually

2022-03-21 15:44:09,095 p=34764 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:44:09,106 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:44:09,140 p=34764 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "pg_autoctl version 1.4.2\npg_autoctl extension version 1.4\ncompiled with PostgreSQL 12.7 (VMware Postgres 12.7.0) on x86_64-redhat-linux-gnu, compiled by gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-44), 64-bit\ncompatible with Postgres 10, 11, 12, and 13"
}
2022-03-21 15:44:09,158 p=34764 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:44:09,177 p=34764 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:44:09,199 p=34764 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:44:09,223 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 15:44:09,273 p=34764 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:44:09,274 p=34764 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:44:09,286 p=34764 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:44:09,762 p=34764 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:44:09,771 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:44:09,808 p=34764 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "pg_ctl (PostgreSQL) 12.7 (VMware Postgres 12.7.0)"
}
2022-03-21 15:44:09,824 p=34764 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:44:09,826 p=34764 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:44:09,835 p=34764 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:44:09,846 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : Getting process IDs of the pg_autoctl process] *********************************************************
2022-03-21 15:44:10,618 p=34764 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 15:44:10,621 p=34764 u=moonja n=ansible | ok: [co7-master]
2022-03-21 15:44:10,632 p=34764 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 15:44:10,636 p=34764 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 15:44:10,644 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : Printing the process IDs obtained] *********************************************************************
2022-03-21 15:44:10,695 p=34764 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 15:44:10,700 p=34764 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 15:44:10,714 p=34764 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 15:44:10,733 p=34764 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 15:44:10,746 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : Stop pgautofailover service of systemd] ****************************************************************
2022-03-21 15:44:10,794 p=34764 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:44:10,800 p=34764 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:44:10,816 p=34764 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:44:10,831 p=34764 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:44:10,842 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:44:10,878 p=34764 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 15:44:10,894 p=34764 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 15:44:10,896 p=34764 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 15:44:10,911 p=34764 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 15:44:10,921 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : Create the monitor node] *******************************************************************************
2022-03-21 15:44:10,970 p=34764 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:44:10,970 p=34764 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:44:10,982 p=34764 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:44:27,963 p=34764 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:44:27,971 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:44:28,011 p=34764 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "ansible_job_id": "16275776329.15104",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl create monitor --auth trust --ssl-self-signed --pgdata monitor )",
        "delta": "0:00:14.731656",
        "end": "2022-03-21 15:44:26.713884",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/16275776329.15104",
        "start": "2022-03-21 15:44:11.982228",
        "started": 1,
        "stderr": "15:44:12 15114 INFO  Using default --ssl-mode \"require\"\n15:44:12 15114 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n15:44:12 15114 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n15:44:12 15114 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n15:44:12 15114 INFO  Initialising a PostgreSQL cluster at \"monitor\"\n15:44:12 15114 INFO  /bin/pg_ctl initdb -s -D monitor --option '--auth=trust'\n15:44:14 15114 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/monitor/server.crt -keyout /var/lib/pgsql/monitor/server.key -subj \"/CN=co7-master\"\n15:44:14 15114 INFO  Started pg_autoctl postgres service with pid 15131\n15:44:14 15131 INFO   /usr/bin/pg_autoctl do service postgres --pgdata monitor -v\n15:44:14 15114 INFO  Started pg_autoctl monitor-init service with pid 15132\n15:44:14 15132 INFO  Granting connection privileges on 192.168.0.0/24\n15:44:14 15137 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\n15:44:15 15131 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/monitor\" on port 5432 with pid 15137\n15:44:19 15132 WARN  NOTICE:  installing required extension \"btree_gist\"\n15:44:22 15132 INFO  Your pg_auto_failover monitor instance is now ready on port 5432.\n15:44:22 15132 INFO  Monitor has been successfully initialized.\n15:44:22 15114 WARN  pg_autoctl service monitor-init exited with exit status 0\n15:44:22 15131 INFO  Postgres controller service received signal SIGTERM, terminating\n15:44:22 15131 INFO  Stopping pg_autoctl postgres service\n15:44:22 15131 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/monitor --wait stop --mode fast\n15:44:23 15114 INFO  Waiting for subprocesses to terminate.\n15:44:26 15114 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "15:44:12 15114 INFO  Using default --ssl-mode \"require\"",
            "15:44:12 15114 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "15:44:12 15114 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "15:44:12 15114 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "15:44:12 15114 INFO  Initialising a PostgreSQL cluster at \"monitor\"",
            "15:44:12 15114 INFO  /bin/pg_ctl initdb -s -D monitor --option '--auth=trust'",
            "15:44:14 15114 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/monitor/server.crt -keyout /var/lib/pgsql/monitor/server.key -subj \"/CN=co7-master\"",
            "15:44:14 15114 INFO  Started pg_autoctl postgres service with pid 15131",
            "15:44:14 15131 INFO   /usr/bin/pg_autoctl do service postgres --pgdata monitor -v",
            "15:44:14 15114 INFO  Started pg_autoctl monitor-init service with pid 15132",
            "15:44:14 15132 INFO  Granting connection privileges on 192.168.0.0/24",
            "15:44:14 15137 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *",
            "15:44:15 15131 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/monitor\" on port 5432 with pid 15137",
            "15:44:19 15132 WARN  NOTICE:  installing required extension \"btree_gist\"",
            "15:44:22 15132 INFO  Your pg_auto_failover monitor instance is now ready on port 5432.",
            "15:44:22 15132 INFO  Monitor has been successfully initialized.",
            "15:44:22 15114 WARN  pg_autoctl service monitor-init exited with exit status 0",
            "15:44:22 15131 INFO  Postgres controller service received signal SIGTERM, terminating",
            "15:44:22 15131 INFO  Stopping pg_autoctl postgres service",
            "15:44:22 15131 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/monitor --wait stop --mode fast",
            "15:44:23 15114 INFO  Waiting for subprocesses to terminate.",
            "15:44:26 15114 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 15:44:28,027 p=34764 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:44:28,028 p=34764 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:44:28,041 p=34764 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:44:28,050 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of monitor instance] *******************************************************
2022-03-21 15:44:28,083 p=34764 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:44:28,099 p=34764 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:44:28,110 p=34764 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:44:34,371 p=34764 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:44:34,380 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : Copy systemd service file of monitor instance] *********************************************************
2022-03-21 15:44:34,415 p=34764 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:44:34,430 p=34764 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:44:34,443 p=34764 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:44:34,860 p=34764 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:44:34,870 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start systemd service of monitor instance] **************************************************
2022-03-21 15:44:34,905 p=34764 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:44:34,921 p=34764 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:44:34,934 p=34764 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:44:35,977 p=34764 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:44:35,989 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:44:36,043 p=34764 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": true,
        "enabled": true,
        "failed": false,
        "name": "pgautofailover",
        "state": "started",
        "status": {
            "ActiveEnterTimestampMonotonic": "0",
            "ActiveExitTimestampMonotonic": "0",
            "ActiveState": "inactive",
            "After": "basic.target systemd-journald.socket -.mount system.slice",
            "AllowIsolate": "no",
            "AmbientCapabilities": "0",
            "AssertResult": "no",
            "AssertTimestampMonotonic": "0",
            "Before": "shutdown.target",
            "BlockIOAccounting": "no",
            "BlockIOWeight": "18446744073709551615",
            "CPUAccounting": "no",
            "CPUQuotaPerSecUSec": "infinity",
            "CPUSchedulingPolicy": "0",
            "CPUSchedulingPriority": "0",
            "CPUSchedulingResetOnFork": "no",
            "CPUShares": "18446744073709551615",
            "CanIsolate": "no",
            "CanReload": "no",
            "CanStart": "yes",
            "CanStop": "yes",
            "CapabilityBoundingSet": "18446744073709551615",
            "CollectMode": "inactive",
            "ConditionResult": "no",
            "ConditionTimestampMonotonic": "0",
            "Conflicts": "shutdown.target",
            "ControlPID": "0",
            "DefaultDependencies": "yes",
            "Delegate": "no",
            "Description": "pg_auto_failover",
            "DevicePolicy": "auto",
            "Environment": "PGDATA=/var/lib/pgsql/monitor",
            "ExecMainCode": "0",
            "ExecMainExitTimestampMonotonic": "0",
            "ExecMainPID": "0",
            "ExecMainStartTimestampMonotonic": "0",
            "ExecMainStatus": "0",
            "ExecStart": "{ path=/usr/bin/pg_autoctl ; argv[]=/usr/bin/pg_autoctl run ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }",
            "FailureAction": "none",
            "FileDescriptorStoreMax": "0",
            "FragmentPath": "/etc/systemd/system/pgautofailover.service",
            "GuessMainPID": "yes",
            "IOScheduling": "0",
            "Id": "pgautofailover.service",
            "IgnoreOnIsolate": "no",
            "IgnoreOnSnapshot": "no",
            "IgnoreSIGPIPE": "yes",
            "InactiveEnterTimestampMonotonic": "0",
            "InactiveExitTimestampMonotonic": "0",
            "JobTimeoutAction": "none",
            "JobTimeoutUSec": "0",
            "KillMode": "control-group",
            "KillSignal": "15",
            "LimitAS": "18446744073709551615",
            "LimitCORE": "18446744073709551615",
            "LimitCPU": "18446744073709551615",
            "LimitDATA": "18446744073709551615",
            "LimitFSIZE": "18446744073709551615",
            "LimitLOCKS": "18446744073709551615",
            "LimitMEMLOCK": "65536",
            "LimitMSGQUEUE": "819200",
            "LimitNICE": "0",
            "LimitNOFILE": "4096",
            "LimitNPROC": "47321",
            "LimitRSS": "18446744073709551615",
            "LimitRTPRIO": "0",
            "LimitRTTIME": "18446744073709551615",
            "LimitSIGPENDING": "47321",
            "LimitSTACK": "18446744073709551615",
            "LoadState": "loaded",
            "MainPID": "0",
            "MemoryAccounting": "no",
            "MemoryCurrent": "18446744073709551615",
            "MemoryLimit": "18446744073709551615",
            "MountFlags": "0",
            "Names": "pgautofailover.service",
            "NeedDaemonReload": "no",
            "Nice": "0",
            "NoNewPrivileges": "no",
            "NonBlocking": "no",
            "NotifyAccess": "none",
            "OOMScoreAdjust": "0",
            "OnFailureJobMode": "replace",
            "PermissionsStartOnly": "no",
            "PrivateDevices": "no",
            "PrivateNetwork": "no",
            "PrivateTmp": "no",
            "ProtectHome": "no",
            "ProtectSystem": "no",
            "RefuseManualStart": "no",
            "RefuseManualStop": "no",
            "RemainAfterExit": "no",
            "Requires": "-.mount system.slice basic.target",
            "RequiresMountsFor": "/var/lib/pgsql",
            "Restart": "always",
            "RestartUSec": "100ms",
            "Result": "success",
            "RootDirectoryStartOnly": "no",
            "RuntimeDirectoryMode": "0755",
            "SameProcessGroup": "no",
            "SecureBits": "0",
            "SendSIGHUP": "no",
            "SendSIGKILL": "yes",
            "Slice": "system.slice",
            "StandardError": "inherit",
            "StandardInput": "null",
            "StandardOutput": "journal",
            "StartLimitAction": "none",
            "StartLimitBurst": "0",
            "StartLimitInterval": "10000000",
            "StartupBlockIOWeight": "18446744073709551615",
            "StartupCPUShares": "18446744073709551615",
            "StatusErrno": "0",
            "StopWhenUnneeded": "no",
            "SubState": "dead",
            "SyslogLevelPrefix": "yes",
            "SyslogPriority": "30",
            "SystemCallErrorNumber": "0",
            "TTYReset": "no",
            "TTYVHangup": "no",
            "TTYVTDisallocate": "no",
            "TasksAccounting": "no",
            "TasksCurrent": "18446744073709551615",
            "TasksMax": "18446744073709551615",
            "TimeoutStartUSec": "1min 30s",
            "TimeoutStopUSec": "1min 30s",
            "TimerSlackNSec": "50000",
            "Transient": "no",
            "Type": "simple",
            "UMask": "0022",
            "UnitFilePreset": "disabled",
            "UnitFileState": "disabled",
            "User": "postgres",
            "WatchdogTimestampMonotonic": "0",
            "WatchdogUSec": "0",
            "WorkingDirectory": "/var/lib/pgsql"
        }
    }
}
2022-03-21 15:44:36,059 p=34764 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:44:36,060 p=34764 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:44:36,072 p=34764 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:44:36,082 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 15:44:36,117 p=34764 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:44:36,132 p=34764 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:44:36,145 p=34764 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:44:36,822 p=34764 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:44:36,833 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the current state of monitor instance] **********************************************************
2022-03-21 15:44:36,868 p=34764 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:44:36,884 p=34764 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:44:36,896 p=34764 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:44:37,361 p=34764 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:44:37,373 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:44:37,414 p=34764 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": true,
        "cmd": "( ps -ef | grep postgres )",
        "delta": "0:00:00.034640",
        "end": "2022-03-21 15:44:37.656557",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-21 15:44:37.621917",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "postgres 16226     1  0 15:44 ?        00:00:00 /usr/bin/pg_autoctl run\npostgres 16229 16226  0 15:44 ?        00:00:00 pg_autoctl: start/stop postgres\npostgres 16230 16226  0 15:44 ?        00:00:00 pg_autoctl: monitor listener\npostgres 16259 16229  0 15:44 ?        00:00:00 /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\njomoon   16475 11314  0 15:44 pts/0    00:00:00 /bin/sh -c sudo -H -S  -p \"[sudo via ansible, key=dvoztlotpscibtfalyosphwaluwtnqex] password:\" -u postgres /bin/sh -c 'echo BECOME-SUCCESS-dvoztlotpscibtfalyosphwaluwtnqex ; /usr/bin/python /var/tmp/ansible-tmp-1647845076.909908-36350-64975871612951/AnsiballZ_command.py' && sleep 0\nroot     16499 16475  0 15:44 pts/0    00:00:00 sudo -H -S -p [sudo via ansible, key=dvoztlotpscibtfalyosphwaluwtnqex] password: -u postgres /bin/sh -c echo BECOME-SUCCESS-dvoztlotpscibtfalyosphwaluwtnqex ; /usr/bin/python /var/tmp/ansible-tmp-1647845076.909908-36350-64975871612951/AnsiballZ_command.py\npostgres 16500 16499  0 15:44 pts/0    00:00:00 /bin/sh -c echo BECOME-SUCCESS-dvoztlotpscibtfalyosphwaluwtnqex ; /usr/bin/python /var/tmp/ansible-tmp-1647845076.909908-36350-64975871612951/AnsiballZ_command.py\npostgres 16501 16500  0 15:44 pts/0    00:00:00 /usr/bin/python /var/tmp/ansible-tmp-1647845076.909908-36350-64975871612951/AnsiballZ_command.py\npostgres 16503 16501  0 15:44 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )\npostgres 16504 16503  0 15:44 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )\npostgres 16505 16504  0 15:44 pts/0    00:00:00 ps -ef\npostgres 16506 16504  0 15:44 pts/0    00:00:00 grep postgres",
        "stdout_lines": [
            "postgres 16226     1  0 15:44 ?        00:00:00 /usr/bin/pg_autoctl run",
            "postgres 16229 16226  0 15:44 ?        00:00:00 pg_autoctl: start/stop postgres",
            "postgres 16230 16226  0 15:44 ?        00:00:00 pg_autoctl: monitor listener",
            "postgres 16259 16229  0 15:44 ?        00:00:00 /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *",
            "jomoon   16475 11314  0 15:44 pts/0    00:00:00 /bin/sh -c sudo -H -S  -p \"[sudo via ansible, key=dvoztlotpscibtfalyosphwaluwtnqex] password:\" -u postgres /bin/sh -c 'echo BECOME-SUCCESS-dvoztlotpscibtfalyosphwaluwtnqex ; /usr/bin/python /var/tmp/ansible-tmp-1647845076.909908-36350-64975871612951/AnsiballZ_command.py' && sleep 0",
            "root     16499 16475  0 15:44 pts/0    00:00:00 sudo -H -S -p [sudo via ansible, key=dvoztlotpscibtfalyosphwaluwtnqex] password: -u postgres /bin/sh -c echo BECOME-SUCCESS-dvoztlotpscibtfalyosphwaluwtnqex ; /usr/bin/python /var/tmp/ansible-tmp-1647845076.909908-36350-64975871612951/AnsiballZ_command.py",
            "postgres 16500 16499  0 15:44 pts/0    00:00:00 /bin/sh -c echo BECOME-SUCCESS-dvoztlotpscibtfalyosphwaluwtnqex ; /usr/bin/python /var/tmp/ansible-tmp-1647845076.909908-36350-64975871612951/AnsiballZ_command.py",
            "postgres 16501 16500  0 15:44 pts/0    00:00:00 /usr/bin/python /var/tmp/ansible-tmp-1647845076.909908-36350-64975871612951/AnsiballZ_command.py",
            "postgres 16503 16501  0 15:44 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )",
            "postgres 16504 16503  0 15:44 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )",
            "postgres 16505 16504  0 15:44 pts/0    00:00:00 ps -ef",
            "postgres 16506 16504  0 15:44 pts/0    00:00:00 grep postgres"
        ]
    }
}
2022-03-21 15:44:37,431 p=34764 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:44:37,431 p=34764 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:44:37,443 p=34764 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:44:37,453 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the current state of monitor] *******************************************************************
2022-03-21 15:44:37,502 p=34764 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:44:37,503 p=34764 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:44:37,518 p=34764 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:44:38,017 p=34764 u=moonja n=ansible | fatal: [co7-master]: FAILED! => {"changed": true, "cmd": "( psql -c \"\\l\" )", "delta": "0:00:00.030894", "end": "2022-03-21 15:44:38.353593", "msg": "non-zero return code", "rc": 2, "start": "2022-03-21 15:44:38.322699", "stderr": "psql: error: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/tmp/.s.PGSQL.5432\"?", "stderr_lines": ["psql: error: could not connect to server: No such file or directory", "\tIs the server running locally and accepting", "\tconnections on Unix domain socket \"/tmp/.s.PGSQL.5432\"?"], "stdout": "", "stdout_lines": []}
2022-03-21 15:44:38,028 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:44:38,050 p=34764 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:44:38,068 p=34764 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:44:38,081 p=34764 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:44:38,090 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : Create primiary instance. It will automatically be set by the monitor as the primary node with read-write capability (PGDATA = /var/lib/pgpsql/ha)] ***
2022-03-21 15:44:38,125 p=34764 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:44:38,136 p=34764 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:44:55,494 p=34764 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:44:55,502 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:44:55,543 p=34764 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "405325103271.19318",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ;  pg_autoctl create postgres --pgdata \"ha\" --auth trust --ssl-self-signed --username ha-admin --dbname \"appdb\" --hostname \"co7-node01\" --pgctl /bin/pg_ctl --monitor 'postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require' )",
        "delta": "0:00:10.381168",
        "end": "2022-03-21 15:44:51.819399",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/405325103271.19318",
        "start": "2022-03-21 15:44:41.438231",
        "started": 1,
        "stderr": "15:44:41 19328 INFO  Using default --ssl-mode \"require\"\n15:44:41 19328 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n15:44:41 19328 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n15:44:41 19328 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n15:44:41 19328 INFO  Started pg_autoctl postgres service with pid 19330\n15:44:41 19328 INFO  Started pg_autoctl node-init service with pid 19331\n15:44:41 19330 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v\n15:44:43 19331 WARN  Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\", retrying until the server is ready\n15:44:43 19331 WARN  The server at \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\" is running but is in a state that disallows connections (startup, shutdown, or crash recovery).\n15:44:44 19331 INFO  Successfully connected to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\" after 10 attempts in 3 seconds.\n15:44:44 19331 INFO  Registered node 1 (co7-node01:5432) with name \"node_1\" in formation \"default\", group 0, state \"single\"\n15:44:44 19331 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"\n15:44:44 19331 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"\n15:44:44 19331 INFO  Successfully registered as \"single\" to the monitor.\n15:44:44 19331 INFO  FSM transition from \"init\" to \"single\": Start as a single node\n15:44:44 19331 INFO  Initialising postgres as a primary\n15:44:44 19331 INFO  Initialising a PostgreSQL cluster at \"ha\"\n15:44:44 19331 INFO  /bin/pg_ctl initdb -s -D ha --option '--auth=trust'\n15:44:47 19331 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n15:44:47 19331 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.\n15:44:47 19331 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n15:44:47 19331 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"\n15:44:47 19331 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node01\"\n15:44:47 19490 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *\n15:44:48 19330 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 19490\n15:44:48 19331 INFO  CREATE DATABASE appdb;\n15:44:50 19331 INFO  CREATE EXTENSION pg_stat_statements;\n15:44:50 19331 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node01\"\n15:44:50 19331 INFO  Contents of \"/var/lib/pgsql/ha/postgresql-auto-failover.conf\" have changed, overwriting\n15:44:50 19331 WARN  Failed to resolve hostname \"co7-master\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n15:44:50 19331 WARN  Postgres might deny connection attempts from \"co7-master\", even with the new HBA rules.\n15:44:50 19331 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n15:44:50 19331 WARN  Using IP address \"192.168.0.81\" in HBA file instead of hostname \"co7-master\"\n15:44:50 19331 INFO  Transition complete: current state is now \"single\"\n15:44:51 19331 INFO  keeper has been successfully initialized.\n15:44:51 19328 WARN  pg_autoctl service node-init exited with exit status 0\n15:44:51 19330 INFO  Postgres controller service received signal SIGTERM, terminating\n15:44:51 19330 INFO  Stopping pg_autoctl postgres service\n15:44:51 19330 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast\n15:44:51 19328 INFO  Waiting for subprocesses to terminate.\n15:44:51 19328 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "15:44:41 19328 INFO  Using default --ssl-mode \"require\"",
            "15:44:41 19328 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "15:44:41 19328 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "15:44:41 19328 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "15:44:41 19328 INFO  Started pg_autoctl postgres service with pid 19330",
            "15:44:41 19328 INFO  Started pg_autoctl node-init service with pid 19331",
            "15:44:41 19330 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v",
            "15:44:43 19331 WARN  Failed to connect to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\", retrying until the server is ready",
            "15:44:43 19331 WARN  The server at \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\" is running but is in a state that disallows connections (startup, shutdown, or crash recovery).",
            "15:44:44 19331 INFO  Successfully connected to \"postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require\" after 10 attempts in 3 seconds.",
            "15:44:44 19331 INFO  Registered node 1 (co7-node01:5432) with name \"node_1\" in formation \"default\", group 0, state \"single\"",
            "15:44:44 19331 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"",
            "15:44:44 19331 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"",
            "15:44:44 19331 INFO  Successfully registered as \"single\" to the monitor.",
            "15:44:44 19331 INFO  FSM transition from \"init\" to \"single\": Start as a single node",
            "15:44:44 19331 INFO  Initialising postgres as a primary",
            "15:44:44 19331 INFO  Initialising a PostgreSQL cluster at \"ha\"",
            "15:44:44 19331 INFO  /bin/pg_ctl initdb -s -D ha --option '--auth=trust'",
            "15:44:47 19331 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "15:44:47 19331 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.",
            "15:44:47 19331 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "15:44:47 19331 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"",
            "15:44:47 19331 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node01\"",
            "15:44:47 19490 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *",
            "15:44:48 19330 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 19490",
            "15:44:48 19331 INFO  CREATE DATABASE appdb;",
            "15:44:50 19331 INFO  CREATE EXTENSION pg_stat_statements;",
            "15:44:50 19331 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node01\"",
            "15:44:50 19331 INFO  Contents of \"/var/lib/pgsql/ha/postgresql-auto-failover.conf\" have changed, overwriting",
            "15:44:50 19331 WARN  Failed to resolve hostname \"co7-master\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "15:44:50 19331 WARN  Postgres might deny connection attempts from \"co7-master\", even with the new HBA rules.",
            "15:44:50 19331 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "15:44:50 19331 WARN  Using IP address \"192.168.0.81\" in HBA file instead of hostname \"co7-master\"",
            "15:44:50 19331 INFO  Transition complete: current state is now \"single\"",
            "15:44:51 19331 INFO  keeper has been successfully initialized.",
            "15:44:51 19328 WARN  pg_autoctl service node-init exited with exit status 0",
            "15:44:51 19330 INFO  Postgres controller service received signal SIGTERM, terminating",
            "15:44:51 19330 INFO  Stopping pg_autoctl postgres service",
            "15:44:51 19330 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast",
            "15:44:51 19328 INFO  Waiting for subprocesses to terminate.",
            "15:44:51 19328 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": [],
        "warnings": [
            "Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually"
        ]
    }
}
2022-03-21 15:44:55,544 p=34764 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:44:55,555 p=34764 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:44:55,608 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of pirmary instance] *******************************************************
2022-03-21 15:44:55,644 p=34764 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:44:55,657 p=34764 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:45:02,077 p=34764 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:45:02,085 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:45:02,124 p=34764 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "875141251889.19915",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl -q show systemd --pgdata ~postgres/ha > pgautofailover.service )",
        "delta": "0:00:00.031334",
        "end": "2022-03-21 15:44:56.654474",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/875141251889.19915",
        "start": "2022-03-21 15:44:56.623140",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 15:45:02,124 p=34764 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:45:02,137 p=34764 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:45:02,147 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : Copy primary systemd service file of primary instance] *************************************************
2022-03-21 15:45:02,180 p=34764 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:45:02,192 p=34764 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:45:02,627 p=34764 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:45:02,637 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start primary systemd service of primary instance] ******************************************
2022-03-21 15:45:02,672 p=34764 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:45:02,685 p=34764 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:45:03,409 p=34764 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:45:03,419 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 15:45:03,454 p=34764 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:45:03,465 p=34764 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:45:03,985 p=34764 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:45:03,995 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the state of primary instance] ******************************************************************
2022-03-21 15:45:04,032 p=34764 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:45:04,043 p=34764 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:45:04,956 p=34764 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:45:04,966 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:45:05,004 p=34764 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "changed": true,
        "cmd": "( source ~/.bash_profile ; pg_autoctl show state )",
        "delta": "0:00:00.430636",
        "end": "2022-03-21 15:45:05.283332",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-21 15:45:04.852696",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State\n-------+-------+-----------------+-----------+-----------+---------------------+--------------------\nnode_1 |     1 | co7-node01:5432 | 0/16D8DD0 |        no |              single |              single",
        "stdout_lines": [
            "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State",
            "-------+-------+-----------------+-----------+-----------+---------------------+--------------------",
            "node_1 |     1 | co7-node01:5432 | 0/16D8DD0 |        no |              single |              single"
        ]
    }
}
2022-03-21 15:45:05,004 p=34764 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:45:05,014 p=34764 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:45:05,026 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : Create secondary instance. It will automatically be set by the monitor as the secondary  node with read-write capability (PGDATA = /var/lib/pgpsql/ha)] ***
2022-03-21 15:45:05,061 p=34764 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:45:22,390 p=34764 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:45:23,637 p=34764 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:45:23,646 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:45:23,669 p=34764 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:45:23,692 p=34764 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "ansible_job_id": "440796198717.21561",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ;  pg_autoctl create postgres --pgdata \"ha\" --auth trust --ssl-self-signed --username ha-admin --dbname \"appdb\" --hostname \"co7-node02\" --pgctl /bin/pg_ctl --monitor 'postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require' )",
        "delta": "0:00:12.889281",
        "end": "2022-03-21 15:45:18.870488",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/440796198717.21561",
        "start": "2022-03-21 15:45:05.981207",
        "started": 1,
        "stderr": "15:45:06 21571 INFO  Using default --ssl-mode \"require\"\n15:45:06 21571 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n15:45:06 21571 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n15:45:06 21571 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n15:45:06 21571 INFO  Started pg_autoctl postgres service with pid 21573\n15:45:06 21573 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v\n15:45:06 21571 INFO  Started pg_autoctl node-init service with pid 21574\n15:45:06 21574 INFO  Registered node 2 (co7-node02:5432) with name \"node_2\" in formation \"default\", group 0, state \"wait_standby\"\n15:45:06 21574 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"\n15:45:06 21574 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"\n15:45:06 21574 INFO  Successfully registered as \"wait_standby\" to the monitor.\n15:45:06 21574 INFO  FSM transition from \"init\" to \"wait_standby\": Start following a primary\n15:45:06 21574 INFO  Transition complete: current state is now \"wait_standby\"\n15:45:06 21574 INFO  New state for node 3 \"node_3\" (co7-node03:5432): wait_standby ➜ wait_standby\n15:45:07 21574 INFO  New state for node 1 \"node_1\" (co7-node01:5432): single ➜ wait_primary\n15:45:07 21574 INFO  New state for node 1 \"node_1\" (co7-node01:5432): wait_primary ➜ wait_primary\n15:45:07 21574 INFO  Still waiting for the monitor to drive us to state \"catchingup\"\n15:45:07 21574 WARN  Please make sure that the primary node is currently running `pg_autoctl run` and contacting the monitor.\n15:45:07 21574 INFO  FSM transition from \"wait_standby\" to \"catchingup\": The primary is now ready to accept a standby\n15:45:07 21574 INFO  Initialising PostgreSQL as a hot standby\n15:45:07 21574 INFO   /bin/pg_basebackup -w -d application_name=pgautofailover_standby_2 host=co7-node01 port=5432 user=pgautofailover_replicator sslmode=require --pgdata /var/lib/pgsql/backup/node_2 -U pgautofailover_replicator --verbose --progress --max-rate 100M --wal-method=stream --slot pgautofailover_standby_2\n15:45:07 21574 INFO  pg_basebackup: initiating base backup, waiting for checkpoint to complete\n15:45:09 21574 INFO  pg_basebackup: checkpoint completed\n15:45:09 21574 INFO  pg_basebackup: write-ahead log start point: 0/20000D8 on timeline 1\n15:45:09 21574 INFO  pg_basebackup: starting background WAL receiver\n15:45:09 21574 INFO      0/33531 kB (0%), 0/1 tablespace (...pgsql/backup/node_2/backup_label)\n15:45:12 21574 INFO  33541/33541 kB (100%), 0/1 tablespace (.../backup/node_2/global/pg_control)\n15:45:12 21574 INFO  33541/33541 kB (100%), 0/1 tablespace (.../backup/node_2/global/pg_control)\n15:45:12 21574 INFO  33541/33541 kB (100%), 1/1 tablespace                                         \n15:45:12 21574 INFO  pg_basebackup: write-ahead log end point: 0/3000050\n15:45:12 21574 INFO  pg_basebackup: waiting for background process to finish streaming ...\n15:45:12 21574 INFO  pg_basebackup: syncing data to disk ...\n15:45:15 21574 INFO  pg_basebackup: base backup completed\n15:45:15 21574 INFO  Creating the standby signal file at \"/var/lib/pgsql/ha/standby.signal\", and replication setup at \"/var/lib/pgsql/ha/postgresql-auto-failover-standby.conf\"\n15:45:15 21574 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node02\"\n15:45:16 21713 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *\n15:45:17 21573 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 21713\n15:45:17 21574 INFO  PostgreSQL started on port 5432\n15:45:17 21574 INFO  Fetched current list of 2 other nodes from the monitor to update HBA rules, including 2 changes.\n15:45:17 21574 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n15:45:17 21574 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.\n15:45:17 21574 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n15:45:17 21574 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"\n15:45:17 21574 INFO  Ensuring HBA rules for node 1 \"node_1\" (192.168.0.83:5432)\n15:45:17 21574 WARN  Failed to resolve hostname \"co7-node03\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n15:45:17 21574 WARN  Postgres might deny connection attempts from \"co7-node03\", even with the new HBA rules.\n15:45:17 21574 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n15:45:17 21574 WARN  Using IP address \"192.168.0.85\" in HBA file instead of hostname \"co7-node03\"\n15:45:17 21574 INFO  Ensuring HBA rules for node 3 \"node_3\" (192.168.0.85:5432)\n15:45:17 21574 INFO  Transition complete: current state is now \"catchingup\"\n15:45:18 21574 INFO  keeper has been successfully initialized.\n15:45:18 21571 WARN  pg_autoctl service node-init exited with exit status 0\n15:45:18 21573 INFO  Postgres controller service received signal SIGTERM, terminating\n15:45:18 21573 INFO  Stopping pg_autoctl postgres service\n15:45:18 21573 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast\n15:45:18 21571 INFO  Waiting for subprocesses to terminate.\n15:45:18 21571 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "15:45:06 21571 INFO  Using default --ssl-mode \"require\"",
            "15:45:06 21571 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "15:45:06 21571 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "15:45:06 21571 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "15:45:06 21571 INFO  Started pg_autoctl postgres service with pid 21573",
            "15:45:06 21573 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v",
            "15:45:06 21571 INFO  Started pg_autoctl node-init service with pid 21574",
            "15:45:06 21574 INFO  Registered node 2 (co7-node02:5432) with name \"node_2\" in formation \"default\", group 0, state \"wait_standby\"",
            "15:45:06 21574 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"",
            "15:45:06 21574 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"",
            "15:45:06 21574 INFO  Successfully registered as \"wait_standby\" to the monitor.",
            "15:45:06 21574 INFO  FSM transition from \"init\" to \"wait_standby\": Start following a primary",
            "15:45:06 21574 INFO  Transition complete: current state is now \"wait_standby\"",
            "15:45:06 21574 INFO  New state for node 3 \"node_3\" (co7-node03:5432): wait_standby ➜ wait_standby",
            "15:45:07 21574 INFO  New state for node 1 \"node_1\" (co7-node01:5432): single ➜ wait_primary",
            "15:45:07 21574 INFO  New state for node 1 \"node_1\" (co7-node01:5432): wait_primary ➜ wait_primary",
            "15:45:07 21574 INFO  Still waiting for the monitor to drive us to state \"catchingup\"",
            "15:45:07 21574 WARN  Please make sure that the primary node is currently running `pg_autoctl run` and contacting the monitor.",
            "15:45:07 21574 INFO  FSM transition from \"wait_standby\" to \"catchingup\": The primary is now ready to accept a standby",
            "15:45:07 21574 INFO  Initialising PostgreSQL as a hot standby",
            "15:45:07 21574 INFO   /bin/pg_basebackup -w -d application_name=pgautofailover_standby_2 host=co7-node01 port=5432 user=pgautofailover_replicator sslmode=require --pgdata /var/lib/pgsql/backup/node_2 -U pgautofailover_replicator --verbose --progress --max-rate 100M --wal-method=stream --slot pgautofailover_standby_2",
            "15:45:07 21574 INFO  pg_basebackup: initiating base backup, waiting for checkpoint to complete",
            "15:45:09 21574 INFO  pg_basebackup: checkpoint completed",
            "15:45:09 21574 INFO  pg_basebackup: write-ahead log start point: 0/20000D8 on timeline 1",
            "15:45:09 21574 INFO  pg_basebackup: starting background WAL receiver",
            "15:45:09 21574 INFO      0/33531 kB (0%), 0/1 tablespace (...pgsql/backup/node_2/backup_label)",
            "15:45:12 21574 INFO  33541/33541 kB (100%), 0/1 tablespace (.../backup/node_2/global/pg_control)",
            "15:45:12 21574 INFO  33541/33541 kB (100%), 0/1 tablespace (.../backup/node_2/global/pg_control)",
            "15:45:12 21574 INFO  33541/33541 kB (100%), 1/1 tablespace                                         ",
            "15:45:12 21574 INFO  pg_basebackup: write-ahead log end point: 0/3000050",
            "15:45:12 21574 INFO  pg_basebackup: waiting for background process to finish streaming ...",
            "15:45:12 21574 INFO  pg_basebackup: syncing data to disk ...",
            "15:45:15 21574 INFO  pg_basebackup: base backup completed",
            "15:45:15 21574 INFO  Creating the standby signal file at \"/var/lib/pgsql/ha/standby.signal\", and replication setup at \"/var/lib/pgsql/ha/postgresql-auto-failover-standby.conf\"",
            "15:45:15 21574 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node02\"",
            "15:45:16 21713 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *",
            "15:45:17 21573 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 21713",
            "15:45:17 21574 INFO  PostgreSQL started on port 5432",
            "15:45:17 21574 INFO  Fetched current list of 2 other nodes from the monitor to update HBA rules, including 2 changes.",
            "15:45:17 21574 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "15:45:17 21574 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.",
            "15:45:17 21574 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "15:45:17 21574 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"",
            "15:45:17 21574 INFO  Ensuring HBA rules for node 1 \"node_1\" (192.168.0.83:5432)",
            "15:45:17 21574 WARN  Failed to resolve hostname \"co7-node03\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "15:45:17 21574 WARN  Postgres might deny connection attempts from \"co7-node03\", even with the new HBA rules.",
            "15:45:17 21574 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "15:45:17 21574 WARN  Using IP address \"192.168.0.85\" in HBA file instead of hostname \"co7-node03\"",
            "15:45:17 21574 INFO  Ensuring HBA rules for node 3 \"node_3\" (192.168.0.85:5432)",
            "15:45:17 21574 INFO  Transition complete: current state is now \"catchingup\"",
            "15:45:18 21574 INFO  keeper has been successfully initialized.",
            "15:45:18 21571 WARN  pg_autoctl service node-init exited with exit status 0",
            "15:45:18 21573 INFO  Postgres controller service received signal SIGTERM, terminating",
            "15:45:18 21573 INFO  Stopping pg_autoctl postgres service",
            "15:45:18 21573 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast",
            "15:45:18 21571 INFO  Waiting for subprocesses to terminate.",
            "15:45:18 21571 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": [],
        "warnings": [
            "Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually"
        ]
    }
}
2022-03-21 15:45:23,705 p=34764 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "ansible_job_id": "62531648061.20818",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ;  pg_autoctl create postgres --pgdata \"ha\" --auth trust --ssl-self-signed --username ha-admin --dbname \"appdb\" --hostname \"co7-node03\" --pgctl /bin/pg_ctl --monitor 'postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require' )",
        "delta": "0:00:11.887817",
        "end": "2022-03-21 15:45:17.870862",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/62531648061.20818",
        "start": "2022-03-21 15:45:05.983045",
        "started": 1,
        "stderr": "15:45:06 20828 INFO  Using default --ssl-mode \"require\"\n15:45:06 20828 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n15:45:06 20828 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n15:45:06 20828 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n15:45:06 20828 INFO  Started pg_autoctl postgres service with pid 20830\n15:45:06 20828 INFO  Started pg_autoctl node-init service with pid 20831\n15:45:06 20830 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v\n15:45:06 20831 INFO  Registered node 3 (co7-node03:5432) with name \"node_3\" in formation \"default\", group 0, state \"wait_standby\"\n15:45:06 20831 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"\n15:45:06 20831 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"\n15:45:06 20831 INFO  Successfully registered as \"wait_standby\" to the monitor.\n15:45:06 20831 INFO  FSM transition from \"init\" to \"wait_standby\": Start following a primary\n15:45:06 20831 INFO  Transition complete: current state is now \"wait_standby\"\n15:45:06 20831 INFO  New state for node 1 \"node_1\" (co7-node01:5432): single ➜ wait_primary\n15:45:07 20831 INFO  New state for node 1 \"node_1\" (co7-node01:5432): wait_primary ➜ wait_primary\n15:45:07 20831 INFO  Still waiting for the monitor to drive us to state \"catchingup\"\n15:45:07 20831 WARN  Please make sure that the primary node is currently running `pg_autoctl run` and contacting the monitor.\n15:45:07 20831 INFO  FSM transition from \"wait_standby\" to \"catchingup\": The primary is now ready to accept a standby\n15:45:07 20831 INFO  Initialising PostgreSQL as a hot standby\n15:45:07 20831 INFO   /bin/pg_basebackup -w -d application_name=pgautofailover_standby_3 host=co7-node01 port=5432 user=pgautofailover_replicator sslmode=require --pgdata /var/lib/pgsql/backup/node_3 -U pgautofailover_replicator --verbose --progress --max-rate 100M --wal-method=stream --slot pgautofailover_standby_3\n15:45:07 20831 INFO  pg_basebackup: initiating base backup, waiting for checkpoint to complete\n15:45:09 20831 INFO  pg_basebackup: checkpoint completed\n15:45:09 20831 INFO  pg_basebackup: write-ahead log start point: 0/2000028 on timeline 1\n15:45:09 20831 INFO  pg_basebackup: starting background WAL receiver\n15:45:09 20831 INFO      0/33532 kB (0%), 0/1 tablespace (...pgsql/backup/node_3/backup_label)\n15:45:09 20831 INFO  33541/33541 kB (100%), 0/1 tablespace (.../backup/node_3/global/pg_control)\n15:45:09 20831 INFO  33541/33541 kB (100%), 1/1 tablespace                                         \n15:45:09 20831 INFO  pg_basebackup: write-ahead log end point: 0/20001B0\n15:45:09 20831 INFO  pg_basebackup: waiting for background process to finish streaming ...\n15:45:09 20831 INFO  pg_basebackup: syncing data to disk ...\n15:45:11 20831 INFO  pg_basebackup: base backup completed\n15:45:11 20831 INFO  Creating the standby signal file at \"/var/lib/pgsql/ha/standby.signal\", and replication setup at \"/var/lib/pgsql/ha/postgresql-auto-failover-standby.conf\"\n15:45:11 20831 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node03\"\n15:45:12 20969 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *\n15:45:16 20830 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 20969\n15:45:16 20831 INFO  PostgreSQL started on port 5432\n15:45:16 20831 INFO  Fetched current list of 2 other nodes from the monitor to update HBA rules, including 2 changes.\n15:45:16 20831 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n15:45:16 20831 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.\n15:45:16 20831 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n15:45:16 20831 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"\n15:45:16 20831 INFO  Ensuring HBA rules for node 1 \"node_1\" (192.168.0.83:5432)\n15:45:16 20831 WARN  Failed to resolve hostname \"co7-node02\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n15:45:16 20831 WARN  Postgres might deny connection attempts from \"co7-node02\", even with the new HBA rules.\n15:45:16 20831 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n15:45:16 20831 WARN  Using IP address \"192.168.0.84\" in HBA file instead of hostname \"co7-node02\"\n15:45:16 20831 INFO  Ensuring HBA rules for node 2 \"node_2\" (192.168.0.84:5432)\n15:45:16 20831 INFO  Transition complete: current state is now \"catchingup\"\n15:45:16 20831 INFO  keeper has been successfully initialized.\n15:45:16 20828 WARN  pg_autoctl service node-init exited with exit status 0\n15:45:16 20830 INFO  Postgres controller service received signal SIGTERM, terminating\n15:45:16 20830 INFO  Stopping pg_autoctl postgres service\n15:45:16 20830 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast\n15:45:16 20828 INFO  Waiting for subprocesses to terminate.\n15:45:17 20828 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "15:45:06 20828 INFO  Using default --ssl-mode \"require\"",
            "15:45:06 20828 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "15:45:06 20828 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "15:45:06 20828 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "15:45:06 20828 INFO  Started pg_autoctl postgres service with pid 20830",
            "15:45:06 20828 INFO  Started pg_autoctl node-init service with pid 20831",
            "15:45:06 20830 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v",
            "15:45:06 20831 INFO  Registered node 3 (co7-node03:5432) with name \"node_3\" in formation \"default\", group 0, state \"wait_standby\"",
            "15:45:06 20831 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"",
            "15:45:06 20831 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"",
            "15:45:06 20831 INFO  Successfully registered as \"wait_standby\" to the monitor.",
            "15:45:06 20831 INFO  FSM transition from \"init\" to \"wait_standby\": Start following a primary",
            "15:45:06 20831 INFO  Transition complete: current state is now \"wait_standby\"",
            "15:45:06 20831 INFO  New state for node 1 \"node_1\" (co7-node01:5432): single ➜ wait_primary",
            "15:45:07 20831 INFO  New state for node 1 \"node_1\" (co7-node01:5432): wait_primary ➜ wait_primary",
            "15:45:07 20831 INFO  Still waiting for the monitor to drive us to state \"catchingup\"",
            "15:45:07 20831 WARN  Please make sure that the primary node is currently running `pg_autoctl run` and contacting the monitor.",
            "15:45:07 20831 INFO  FSM transition from \"wait_standby\" to \"catchingup\": The primary is now ready to accept a standby",
            "15:45:07 20831 INFO  Initialising PostgreSQL as a hot standby",
            "15:45:07 20831 INFO   /bin/pg_basebackup -w -d application_name=pgautofailover_standby_3 host=co7-node01 port=5432 user=pgautofailover_replicator sslmode=require --pgdata /var/lib/pgsql/backup/node_3 -U pgautofailover_replicator --verbose --progress --max-rate 100M --wal-method=stream --slot pgautofailover_standby_3",
            "15:45:07 20831 INFO  pg_basebackup: initiating base backup, waiting for checkpoint to complete",
            "15:45:09 20831 INFO  pg_basebackup: checkpoint completed",
            "15:45:09 20831 INFO  pg_basebackup: write-ahead log start point: 0/2000028 on timeline 1",
            "15:45:09 20831 INFO  pg_basebackup: starting background WAL receiver",
            "15:45:09 20831 INFO      0/33532 kB (0%), 0/1 tablespace (...pgsql/backup/node_3/backup_label)",
            "15:45:09 20831 INFO  33541/33541 kB (100%), 0/1 tablespace (.../backup/node_3/global/pg_control)",
            "15:45:09 20831 INFO  33541/33541 kB (100%), 1/1 tablespace                                         ",
            "15:45:09 20831 INFO  pg_basebackup: write-ahead log end point: 0/20001B0",
            "15:45:09 20831 INFO  pg_basebackup: waiting for background process to finish streaming ...",
            "15:45:09 20831 INFO  pg_basebackup: syncing data to disk ...",
            "15:45:11 20831 INFO  pg_basebackup: base backup completed",
            "15:45:11 20831 INFO  Creating the standby signal file at \"/var/lib/pgsql/ha/standby.signal\", and replication setup at \"/var/lib/pgsql/ha/postgresql-auto-failover-standby.conf\"",
            "15:45:11 20831 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node03\"",
            "15:45:12 20969 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *",
            "15:45:16 20830 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 20969",
            "15:45:16 20831 INFO  PostgreSQL started on port 5432",
            "15:45:16 20831 INFO  Fetched current list of 2 other nodes from the monitor to update HBA rules, including 2 changes.",
            "15:45:16 20831 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "15:45:16 20831 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.",
            "15:45:16 20831 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "15:45:16 20831 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"",
            "15:45:16 20831 INFO  Ensuring HBA rules for node 1 \"node_1\" (192.168.0.83:5432)",
            "15:45:16 20831 WARN  Failed to resolve hostname \"co7-node02\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "15:45:16 20831 WARN  Postgres might deny connection attempts from \"co7-node02\", even with the new HBA rules.",
            "15:45:16 20831 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "15:45:16 20831 WARN  Using IP address \"192.168.0.84\" in HBA file instead of hostname \"co7-node02\"",
            "15:45:16 20831 INFO  Ensuring HBA rules for node 2 \"node_2\" (192.168.0.84:5432)",
            "15:45:16 20831 INFO  Transition complete: current state is now \"catchingup\"",
            "15:45:16 20831 INFO  keeper has been successfully initialized.",
            "15:45:16 20828 WARN  pg_autoctl service node-init exited with exit status 0",
            "15:45:16 20830 INFO  Postgres controller service received signal SIGTERM, terminating",
            "15:45:16 20830 INFO  Stopping pg_autoctl postgres service",
            "15:45:16 20830 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast",
            "15:45:16 20828 INFO  Waiting for subprocesses to terminate.",
            "15:45:17 20828 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": [],
        "warnings": [
            "Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually"
        ]
    }
}
2022-03-21 15:45:23,716 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of secondary instance] *****************************************************
2022-03-21 15:45:23,750 p=34764 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:45:30,075 p=34764 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:45:30,075 p=34764 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:45:30,086 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:45:30,111 p=34764 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:45:30,132 p=34764 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "ansible_job_id": "244010278654.22129",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl -q show systemd --pgdata ~postgres/ha > pgautofailover.service )",
        "delta": "0:00:00.032955",
        "end": "2022-03-21 15:45:24.747902",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/244010278654.22129",
        "start": "2022-03-21 15:45:24.714947",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 15:45:30,146 p=34764 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "ansible_job_id": "380273366252.21386",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl -q show systemd --pgdata ~postgres/ha > pgautofailover.service )",
        "delta": "0:00:00.032775",
        "end": "2022-03-21 15:45:24.739248",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/380273366252.21386",
        "start": "2022-03-21 15:45:24.706473",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 15:45:30,156 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : Copy secondary systemd service file of secondary instance] *********************************************
2022-03-21 15:45:30,192 p=34764 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:45:30,619 p=34764 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:45:30,619 p=34764 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:45:30,629 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start secondary systemd service of secondary instance] **************************************
2022-03-21 15:45:30,664 p=34764 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:45:31,445 p=34764 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:45:31,451 p=34764 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:45:31,463 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 15:45:31,483 p=34764 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:45:31,997 p=34764 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:45:31,997 p=34764 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:45:32,008 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the state of secondary instance] ****************************************************************
2022-03-21 15:45:32,043 p=34764 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:45:32,633 p=34764 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:45:32,634 p=34764 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:45:32,643 p=34764 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:45:32,664 p=34764 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:45:32,708 p=34764 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "changed": true,
        "cmd": "( source ~/.bash_profile ; pg_autoctl show state )",
        "delta": "0:00:00.068358",
        "end": "2022-03-21 15:45:32.965351",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-21 15:45:32.896993",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State\n-------+-------+-----------------+-----------+-----------+---------------------+--------------------\nnode_1 |     1 | co7-node01:5432 | 0/4000060 |       yes |        wait_primary |        wait_primary\nnode_2 |     2 | co7-node02:5432 | 0/4000000 |        no |          catchingup |          catchingup\nnode_3 |     3 | co7-node03:5432 | 0/3020000 |        no |          catchingup |          catchingup",
        "stdout_lines": [
            "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State",
            "-------+-------+-----------------+-----------+-----------+---------------------+--------------------",
            "node_1 |     1 | co7-node01:5432 | 0/4000060 |       yes |        wait_primary |        wait_primary",
            "node_2 |     2 | co7-node02:5432 | 0/4000000 |        no |          catchingup |          catchingup",
            "node_3 |     3 | co7-node03:5432 | 0/3020000 |        no |          catchingup |          catchingup"
        ]
    }
}
2022-03-21 15:45:32,710 p=34764 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "changed": true,
        "cmd": "( source ~/.bash_profile ; pg_autoctl show state )",
        "delta": "0:00:00.067847",
        "end": "2022-03-21 15:45:32.967123",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-21 15:45:32.899276",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State\n-------+-------+-----------------+-----------+-----------+---------------------+--------------------\nnode_1 |     1 | co7-node01:5432 | 0/4000060 |       yes |        wait_primary |        wait_primary\nnode_2 |     2 | co7-node02:5432 | 0/4000000 |        no |          catchingup |          catchingup\nnode_3 |     3 | co7-node03:5432 | 0/3020000 |        no |          catchingup |          catchingup",
        "stdout_lines": [
            "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State",
            "-------+-------+-----------------+-----------+-----------+---------------------+--------------------",
            "node_1 |     1 | co7-node01:5432 | 0/4000060 |       yes |        wait_primary |        wait_primary",
            "node_2 |     2 | co7-node02:5432 | 0/4000000 |        no |          catchingup |          catchingup",
            "node_3 |     3 | co7-node03:5432 | 0/3020000 |        no |          catchingup |          catchingup"
        ]
    }
}
2022-03-21 15:45:32,788 p=34764 u=moonja n=ansible | PLAY RECAP *************************************************************************************************************************
2022-03-21 15:45:32,788 p=34764 u=moonja n=ansible | co7-master                 : ok=25   changed=14   unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2022-03-21 15:45:32,788 p=34764 u=moonja n=ansible | co7-node01                 : ok=21   changed=12   unreachable=0    failed=0    skipped=25   rescued=0    ignored=0   
2022-03-21 15:45:32,788 p=34764 u=moonja n=ansible | co7-node02                 : ok=21   changed=12   unreachable=0    failed=0    skipped=25   rescued=0    ignored=0   
2022-03-21 15:45:32,788 p=34764 u=moonja n=ansible | co7-node03                 : ok=21   changed=12   unreachable=0    failed=0    skipped=25   rescued=0    ignored=0   
2022-03-21 15:48:14,381 p=38751 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from 
ansible-core in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 15:48:14,633 p=38751 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 
2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 15:48:14,638 p=38751 u=moonja n=ansible | [WARNING]: While constructing a mapping from /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/install.yml, line 307,
column 3, found a duplicate dict key (when). Using last defined value only.

2022-03-21 15:48:14,688 p=38751 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/upgrade.yml is empty and had no tasks to include

2022-03-21 15:48:14,703 p=38751 u=moonja n=ansible | PLAY [all] *************************************************************************************************************************
2022-03-21 15:48:14,733 p=38751 u=moonja n=ansible | TASK [Gathering Facts] *************************************************************************************************************
2022-03-21 15:48:17,022 p=38751 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 15:48:17,027 p=38751 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 15:48:17,035 p=38751 u=moonja n=ansible | ok: [co7-master]
2022-03-21 15:48:17,092 p=38751 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 15:48:17,109 p=38751 u=moonja n=ansible | TASK [pgfailover-postgres : Disable port from public zone] *************************************************************************
2022-03-21 15:48:18,038 p=38751 u=moonja n=ansible | changed: [co7-node03] => (item=5432)
2022-03-21 15:48:18,062 p=38751 u=moonja n=ansible | changed: [co7-master] => (item=5432)
2022-03-21 15:48:18,064 p=38751 u=moonja n=ansible | changed: [co7-node02] => (item=5432)
2022-03-21 15:48:18,065 p=38751 u=moonja n=ansible | changed: [co7-node01] => (item=5432)
2022-03-21 15:48:18,076 p=38751 u=moonja n=ansible | TASK [pgfailover-postgres : Disable IP Addresses in whitelist] *********************************************************************
2022-03-21 15:48:18,744 p=38751 u=moonja n=ansible | changed: [co7-master] => (item=co7-master)
2022-03-21 15:48:18,790 p=38751 u=moonja n=ansible | changed: [co7-node01] => (item=co7-master)
2022-03-21 15:48:18,797 p=38751 u=moonja n=ansible | changed: [co7-node03] => (item=co7-master)
2022-03-21 15:48:18,809 p=38751 u=moonja n=ansible | changed: [co7-node02] => (item=co7-master)
2022-03-21 15:48:19,359 p=38751 u=moonja n=ansible | changed: [co7-master] => (item=co7-node01)
2022-03-21 15:48:19,388 p=38751 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node01)
2022-03-21 15:48:19,435 p=38751 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node01)
2022-03-21 15:48:19,460 p=38751 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node01)
2022-03-21 15:48:19,984 p=38751 u=moonja n=ansible | changed: [co7-master] => (item=co7-node02)
2022-03-21 15:48:20,031 p=38751 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node02)
2022-03-21 15:48:20,055 p=38751 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node02)
2022-03-21 15:48:20,078 p=38751 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node02)
2022-03-21 15:48:20,611 p=38751 u=moonja n=ansible | changed: [co7-master] => (item=co7-node03)
2022-03-21 15:48:20,648 p=38751 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node03)
2022-03-21 15:48:20,691 p=38751 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node03)
2022-03-21 15:48:20,709 p=38751 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node03)
2022-03-21 15:48:20,720 p=38751 u=moonja n=ansible | TASK [pgfailover-postgres : Bounce firewalld] **************************************************************************************
2022-03-21 15:48:22,681 p=38751 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:48:22,710 p=38751 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:48:22,718 p=38751 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:48:22,744 p=38751 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:48:22,753 p=38751 u=moonja n=ansible | TASK [pgfailover-postgres : Stop and disable firewalld.] ***************************************************************************
2022-03-21 15:48:24,263 p=38751 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:48:24,268 p=38751 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:48:25,038 p=38751 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:48:25,657 p=38751 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:48:25,669 p=38751 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 15:48:25,702 p=38751 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:48:25,718 p=38751 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:48:25,731 p=38751 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:48:26,371 p=38751 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:48:26,381 p=38751 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 15:48:26,416 p=38751 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:48:26,432 p=38751 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:48:26,444 p=38751 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:48:26,892 p=38751 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:48:26,902 p=38751 u=moonja n=ansible | TASK [pgfailover-postgres : Getting process IDs of the pg_autoctl process] *********************************************************
2022-03-21 15:48:27,623 p=38751 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 15:48:27,625 p=38751 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 15:48:27,630 p=38751 u=moonja n=ansible | ok: [co7-master]
2022-03-21 15:48:27,630 p=38751 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 15:48:27,642 p=38751 u=moonja n=ansible | TASK [pgfailover-postgres : Stop pgautofailover service of systemd] ****************************************************************
2022-03-21 15:48:29,366 p=38751 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:48:29,502 p=38751 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:48:31,166 p=38751 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:48:31,360 p=38751 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:48:31,373 p=38751 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] ************************************************************************
2022-03-21 15:48:31,395 p=38751 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:48:31,411 p=38751 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:48:32,132 p=38751 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:48:32,133 p=38751 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:48:32,143 p=38751 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start secondary systemd service of secondary instance] **************************************
2022-03-21 15:48:32,164 p=38751 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:48:32,193 p=38751 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:48:33,010 p=38751 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:48:33,011 p=38751 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:48:33,021 p=38751 u=moonja n=ansible | TASK [pgfailover-postgres : Delete secondary systemd service file of secondary instance] *******************************************
2022-03-21 15:48:33,044 p=38751 u=moonja n=ansible | skipping: [co7-master] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:48:33,045 p=38751 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:48:33,049 p=38751 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:48:33,053 p=38751 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:48:33,054 p=38751 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:48:33,054 p=38751 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql) 
2022-03-21 15:48:33,060 p=38751 u=moonja n=ansible | skipping: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:48:33,061 p=38751 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:48:33,063 p=38751 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:48:33,067 p=38751 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:48:33,073 p=38751 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:48:33,077 p=38751 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql) 
2022-03-21 15:48:33,740 p=38751 u=moonja n=ansible | changed: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 15:48:33,741 p=38751 u=moonja n=ansible | changed: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 15:48:34,253 p=38751 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 15:48:34,254 p=38751 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 15:48:34,704 p=38751 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 15:48:34,704 p=38751 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 15:48:35,131 p=38751 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.config)
2022-03-21 15:48:35,132 p=38751 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.config)
2022-03-21 15:48:35,565 p=38751 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.ansible)
2022-03-21 15:48:35,566 p=38751 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.ansible)
2022-03-21 15:48:36,078 p=38751 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql)
2022-03-21 15:48:36,081 p=38751 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql)
2022-03-21 15:48:36,097 p=38751 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] ************************************************************************
2022-03-21 15:48:36,117 p=38751 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:48:36,145 p=38751 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:48:36,157 p=38751 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:48:36,619 p=38751 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:48:36,632 p=38751 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start primary systemd service of primary instance] ******************************************
2022-03-21 15:48:36,667 p=38751 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:48:36,683 p=38751 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:48:36,696 p=38751 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:48:37,515 p=38751 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:48:37,527 p=38751 u=moonja n=ansible | TASK [pgfailover-postgres : Delete primary systemd service file of secondary instance] *********************************************
2022-03-21 15:48:37,551 p=38751 u=moonja n=ansible | skipping: [co7-master] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:48:37,571 p=38751 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:48:37,576 p=38751 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:48:37,593 p=38751 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:48:37,594 p=38751 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:48:37,594 p=38751 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql) 
2022-03-21 15:48:37,599 p=38751 u=moonja n=ansible | skipping: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:48:37,601 p=38751 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:48:37,601 p=38751 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:48:37,602 p=38751 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:48:37,604 p=38751 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:48:37,604 p=38751 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql) 
2022-03-21 15:48:37,616 p=38751 u=moonja n=ansible | skipping: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:48:37,623 p=38751 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:48:37,623 p=38751 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:48:37,623 p=38751 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:48:37,626 p=38751 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:48:37,627 p=38751 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql) 
2022-03-21 15:48:38,061 p=38751 u=moonja n=ansible | changed: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 15:48:38,502 p=38751 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 15:48:38,995 p=38751 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 15:48:39,449 p=38751 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.config)
2022-03-21 15:48:39,980 p=38751 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.ansible)
2022-03-21 15:48:40,511 p=38751 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql)
2022-03-21 15:48:40,556 p=38751 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] ************************************************************************
2022-03-21 15:48:40,610 p=38751 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:48:40,611 p=38751 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:48:40,623 p=38751 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:48:41,053 p=38751 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:48:41,064 p=38751 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start systemd service of monitor instance] **************************************************
2022-03-21 15:48:41,098 p=38751 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:48:41,114 p=38751 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:48:41,127 p=38751 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:48:41,778 p=38751 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:48:41,788 p=38751 u=moonja n=ansible | TASK [pgfailover-postgres : Delete primary systemd service file of secondary instance] *********************************************
2022-03-21 15:48:41,827 p=38751 u=moonja n=ansible | skipping: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:48:41,831 p=38751 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:48:41,839 p=38751 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:48:41,840 p=38751 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:48:41,840 p=38751 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:48:41,841 p=38751 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql) 
2022-03-21 15:48:41,841 p=38751 u=moonja n=ansible | skipping: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:48:41,843 p=38751 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:48:41,846 p=38751 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:48:41,851 p=38751 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:48:41,853 p=38751 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:48:41,853 p=38751 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql) 
2022-03-21 15:48:41,857 p=38751 u=moonja n=ansible | skipping: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 15:48:41,860 p=38751 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 15:48:41,866 p=38751 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 15:48:41,866 p=38751 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.config) 
2022-03-21 15:48:41,867 p=38751 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 15:48:41,868 p=38751 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql) 
2022-03-21 15:48:42,243 p=38751 u=moonja n=ansible | changed: [co7-master] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 15:48:42,831 p=38751 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 15:48:43,275 p=38751 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 15:48:43,763 p=38751 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/.config)
2022-03-21 15:48:44,204 p=38751 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/.ansible)
2022-03-21 15:48:44,771 p=38751 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql)
2022-03-21 15:48:44,784 p=38751 u=moonja n=ansible | TASK [pgfailover-postgres : Uninstall VMware Postgres on all hosts as root] ********************************************************
2022-03-21 15:49:13,427 p=38751 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:49:13,464 p=38751 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:49:14,912 p=38751 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:49:16,790 p=38751 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:49:16,801 p=38751 u=moonja n=ansible | TASK [pgfailover-postgres : Copy the vmwawre-postgres rpm file to all hosts in cluster] ********************************************
2022-03-21 15:49:17,274 p=38751 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:49:17,277 p=38751 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:49:17,280 p=38751 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:49:17,305 p=38751 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:49:17,353 p=38751 u=moonja n=ansible | PLAY RECAP *************************************************************************************************************************
2022-03-21 15:49:17,353 p=38751 u=moonja n=ansible | co7-master                 : ok=14   changed=12   unreachable=0    failed=0    skipped=6    rescued=0    ignored=0   
2022-03-21 15:49:17,354 p=38751 u=moonja n=ansible | co7-node01                 : ok=12   changed=10   unreachable=0    failed=0    skipped=8    rescued=0    ignored=0   
2022-03-21 15:49:17,354 p=38751 u=moonja n=ansible | co7-node02                 : ok=12   changed=10   unreachable=0    failed=0    skipped=8    rescued=0    ignored=0   
2022-03-21 15:49:17,354 p=38751 u=moonja n=ansible | co7-node03                 : ok=12   changed=10   unreachable=0    failed=0    skipped=8    rescued=0    ignored=0   
2022-03-21 15:51:35,202 p=40269 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from 
ansible-core in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 15:51:35,447 p=40269 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 
2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 15:51:35,452 p=40269 u=moonja n=ansible | [WARNING]: While constructing a mapping from /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/install.yml, line 307,
column 3, found a duplicate dict key (when). Using last defined value only.

2022-03-21 15:51:35,502 p=40269 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/upgrade.yml is empty and had no tasks to include

2022-03-21 15:51:35,516 p=40269 u=moonja n=ansible | PLAY [all] *************************************************************************************************************************
2022-03-21 15:51:35,547 p=40269 u=moonja n=ansible | TASK [Gathering Facts] *************************************************************************************************************
2022-03-21 15:51:37,817 p=40269 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 15:51:37,875 p=40269 u=moonja n=ansible | ok: [co7-master]
2022-03-21 15:51:37,886 p=40269 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 15:51:37,899 p=40269 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 15:51:37,916 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : Install rpm packages of dependenies to need installing packages regarding kubernates] ******************
2022-03-21 15:51:39,083 p=40269 u=moonja n=ansible | ok: [co7-node01] => (item=firewalld)
2022-03-21 15:51:39,084 p=40269 u=moonja n=ansible | ok: [co7-master] => (item=firewalld)
2022-03-21 15:51:39,091 p=40269 u=moonja n=ansible | ok: [co7-node02] => (item=firewalld)
2022-03-21 15:51:39,093 p=40269 u=moonja n=ansible | ok: [co7-node03] => (item=firewalld)
2022-03-21 15:51:39,821 p=40269 u=moonja n=ansible | ok: [co7-node02] => (item=python3)
2022-03-21 15:51:39,832 p=40269 u=moonja n=ansible | ok: [co7-master] => (item=python3)
2022-03-21 15:51:39,839 p=40269 u=moonja n=ansible | ok: [co7-node03] => (item=python3)
2022-03-21 15:51:39,919 p=40269 u=moonja n=ansible | ok: [co7-node01] => (item=python3)
2022-03-21 15:51:40,666 p=40269 u=moonja n=ansible | ok: [co7-node03] => (item=python3-libselinux)
2022-03-21 15:51:40,673 p=40269 u=moonja n=ansible | ok: [co7-master] => (item=python3-libselinux)
2022-03-21 15:51:41,163 p=40269 u=moonja n=ansible | ok: [co7-node02] => (item=python3-libselinux)
2022-03-21 15:51:41,768 p=40269 u=moonja n=ansible | ok: [co7-node01] => (item=python3-libselinux)
2022-03-21 15:51:41,779 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : Start and enable firewalld.] ***************************************************************************
2022-03-21 15:51:42,982 p=40269 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:51:43,001 p=40269 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:51:43,017 p=40269 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:51:43,681 p=40269 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:51:43,693 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : Open Firewall] *****************************************************************************************
2022-03-21 15:51:44,532 p=40269 u=moonja n=ansible | changed: [co7-node01] => (item=5432)
2022-03-21 15:51:44,537 p=40269 u=moonja n=ansible | changed: [co7-master] => (item=5432)
2022-03-21 15:51:44,546 p=40269 u=moonja n=ansible | changed: [co7-node02] => (item=5432)
2022-03-21 15:51:44,546 p=40269 u=moonja n=ansible | changed: [co7-node03] => (item=5432)
2022-03-21 15:51:44,558 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : Whitelist of Ip addresses] *****************************************************************************
2022-03-21 15:51:45,237 p=40269 u=moonja n=ansible | changed: [co7-master] => (item=co7-master)
2022-03-21 15:51:45,247 p=40269 u=moonja n=ansible | changed: [co7-node01] => (item=co7-master)
2022-03-21 15:51:45,256 p=40269 u=moonja n=ansible | changed: [co7-node02] => (item=co7-master)
2022-03-21 15:51:45,270 p=40269 u=moonja n=ansible | changed: [co7-node03] => (item=co7-master)
2022-03-21 15:51:45,852 p=40269 u=moonja n=ansible | changed: [co7-master] => (item=co7-node01)
2022-03-21 15:51:45,880 p=40269 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node01)
2022-03-21 15:51:45,882 p=40269 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node01)
2022-03-21 15:51:46,032 p=40269 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node01)
2022-03-21 15:51:46,480 p=40269 u=moonja n=ansible | changed: [co7-master] => (item=co7-node02)
2022-03-21 15:51:46,521 p=40269 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node02)
2022-03-21 15:51:46,548 p=40269 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node02)
2022-03-21 15:51:46,669 p=40269 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node02)
2022-03-21 15:51:47,099 p=40269 u=moonja n=ansible | changed: [co7-master] => (item=co7-node03)
2022-03-21 15:51:47,162 p=40269 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node03)
2022-03-21 15:51:47,162 p=40269 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node03)
2022-03-21 15:51:47,293 p=40269 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node03)
2022-03-21 15:51:47,305 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : Bounce firewalld] **************************************************************************************
2022-03-21 15:51:48,922 p=40269 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:51:48,929 p=40269 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:51:48,934 p=40269 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:51:48,983 p=40269 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:51:48,996 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : Copy the vmwawre-postgres rpm file to all hosts in cluster] ********************************************
2022-03-21 15:51:50,426 p=40269 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:51:50,427 p=40269 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:51:50,427 p=40269 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:51:51,561 p=40269 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:51:51,572 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : Install dependency rpm package for pgautofailover] *****************************************************
2022-03-21 15:51:58,502 p=40269 u=moonja n=ansible | ok: [co7-master] => (item=python2-psutil)
2022-03-21 15:51:58,550 p=40269 u=moonja n=ansible | ok: [co7-node03] => (item=python2-psutil)
2022-03-21 15:51:58,551 p=40269 u=moonja n=ansible | ok: [co7-node02] => (item=python2-psutil)
2022-03-21 15:51:59,638 p=40269 u=moonja n=ansible | ok: [co7-node01] => (item=python2-psutil)
2022-03-21 15:51:59,647 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : Install VMware Postgres on all hosts as root] **********************************************************
2022-03-21 15:52:16,745 p=40269 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 15:52:17,090 p=40269 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:52:17,279 p=40269 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 15:52:17,666 p=40269 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:52:17,676 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 15:52:17,712 p=40269 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:52:17,728 p=40269 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:52:17,741 p=40269 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:52:18,389 p=40269 u=moonja n=ansible | [WARNING]: Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues
when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually

2022-03-21 15:52:18,389 p=40269 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:52:18,402 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:52:18,444 p=40269 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "pg_autoctl version 1.4.2\npg_autoctl extension version 1.4\ncompiled with PostgreSQL 13.3 (VMware Postgres 13.3.0) on x86_64-redhat-linux-gnu, compiled by gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-44), 64-bit\ncompatible with Postgres 10, 11, 12, and 13"
}
2022-03-21 15:52:18,462 p=40269 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:52:18,464 p=40269 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:52:18,475 p=40269 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:52:18,485 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 15:52:18,519 p=40269 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:52:18,533 p=40269 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:52:18,545 p=40269 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:52:18,990 p=40269 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:52:19,001 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:52:19,039 p=40269 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "pg_ctl (PostgreSQL) 13.3 (VMware Postgres 13.3.0)"
}
2022-03-21 15:52:19,055 p=40269 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:52:19,056 p=40269 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:52:19,067 p=40269 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:52:19,077 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : Getting process IDs of the pg_autoctl process] *********************************************************
2022-03-21 15:52:19,805 p=40269 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 15:52:19,811 p=40269 u=moonja n=ansible | ok: [co7-master]
2022-03-21 15:52:19,816 p=40269 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 15:52:19,819 p=40269 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 15:52:19,830 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : Printing the process IDs obtained] *********************************************************************
2022-03-21 15:52:19,878 p=40269 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 15:52:19,883 p=40269 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 15:52:19,899 p=40269 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 15:52:19,915 p=40269 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 15:52:19,925 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : Stop pgautofailover service of systemd] ****************************************************************
2022-03-21 15:52:19,974 p=40269 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 15:52:19,978 p=40269 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:52:19,993 p=40269 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:52:20,009 p=40269 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:52:20,020 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:52:20,052 p=40269 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 15:52:20,071 p=40269 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 15:52:20,072 p=40269 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 15:52:20,084 p=40269 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 15:52:20,094 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : Create the monitor node] *******************************************************************************
2022-03-21 15:52:20,141 p=40269 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:52:20,142 p=40269 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:52:20,151 p=40269 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:52:27,742 p=40269 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:52:27,751 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:52:27,788 p=40269 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "ansible_job_id": "122113649895.24633",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl create monitor --auth trust --ssl-self-signed --pgdata monitor )",
        "delta": "0:00:04.787410",
        "end": "2022-03-21 15:52:25.957021",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/122113649895.24633",
        "start": "2022-03-21 15:52:21.169611",
        "started": 1,
        "stderr": "15:52:21 24643 INFO  Using default --ssl-mode \"require\"\n15:52:21 24643 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n15:52:21 24643 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n15:52:21 24643 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n15:52:21 24643 INFO  Initialising a PostgreSQL cluster at \"monitor\"\n15:52:21 24643 INFO  /bin/pg_ctl initdb -s -D monitor --option '--auth=trust'\n15:52:22 24643 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/monitor/server.crt -keyout /var/lib/pgsql/monitor/server.key -subj \"/CN=co7-master\"\n15:52:23 24643 INFO  Started pg_autoctl postgres service with pid 24659\n15:52:23 24659 INFO   /usr/bin/pg_autoctl do service postgres --pgdata monitor -v\n15:52:23 24643 INFO  Started pg_autoctl monitor-init service with pid 24660\n15:52:23 24660 INFO  Granting connection privileges on 192.168.0.0/24\n15:52:23 24665 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\n15:52:23 24659 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/monitor\" on port 5432 with pid 24665\n15:52:24 24660 WARN  NOTICE:  installing required extension \"btree_gist\"\n15:52:25 24660 INFO  Your pg_auto_failover monitor instance is now ready on port 5432.\n15:52:25 24660 INFO  Monitor has been successfully initialized.\n15:52:25 24643 WARN  pg_autoctl service monitor-init exited with exit status 0\n15:52:25 24659 INFO  Postgres controller service received signal SIGTERM, terminating\n15:52:25 24659 INFO  Stopping pg_autoctl postgres service\n15:52:25 24659 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/monitor --wait stop --mode fast\n15:52:25 24643 INFO  Waiting for subprocesses to terminate.\n15:52:25 24643 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "15:52:21 24643 INFO  Using default --ssl-mode \"require\"",
            "15:52:21 24643 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "15:52:21 24643 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "15:52:21 24643 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "15:52:21 24643 INFO  Initialising a PostgreSQL cluster at \"monitor\"",
            "15:52:21 24643 INFO  /bin/pg_ctl initdb -s -D monitor --option '--auth=trust'",
            "15:52:22 24643 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/monitor/server.crt -keyout /var/lib/pgsql/monitor/server.key -subj \"/CN=co7-master\"",
            "15:52:23 24643 INFO  Started pg_autoctl postgres service with pid 24659",
            "15:52:23 24659 INFO   /usr/bin/pg_autoctl do service postgres --pgdata monitor -v",
            "15:52:23 24643 INFO  Started pg_autoctl monitor-init service with pid 24660",
            "15:52:23 24660 INFO  Granting connection privileges on 192.168.0.0/24",
            "15:52:23 24665 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *",
            "15:52:23 24659 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/monitor\" on port 5432 with pid 24665",
            "15:52:24 24660 WARN  NOTICE:  installing required extension \"btree_gist\"",
            "15:52:25 24660 INFO  Your pg_auto_failover monitor instance is now ready on port 5432.",
            "15:52:25 24660 INFO  Monitor has been successfully initialized.",
            "15:52:25 24643 WARN  pg_autoctl service monitor-init exited with exit status 0",
            "15:52:25 24659 INFO  Postgres controller service received signal SIGTERM, terminating",
            "15:52:25 24659 INFO  Stopping pg_autoctl postgres service",
            "15:52:25 24659 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/monitor --wait stop --mode fast",
            "15:52:25 24643 INFO  Waiting for subprocesses to terminate.",
            "15:52:25 24643 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 15:52:27,804 p=40269 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:52:27,804 p=40269 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:52:27,817 p=40269 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:52:27,826 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of monitor instance] *******************************************************
2022-03-21 15:52:27,858 p=40269 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:52:27,873 p=40269 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:52:27,886 p=40269 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:52:34,296 p=40269 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:52:34,305 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : Copy systemd service file of monitor instance] *********************************************************
2022-03-21 15:52:34,353 p=40269 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:52:34,353 p=40269 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:52:34,365 p=40269 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:52:34,806 p=40269 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:52:34,818 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start systemd service of monitor instance] **************************************************
2022-03-21 15:52:34,855 p=40269 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:52:34,870 p=40269 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:52:34,883 p=40269 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:52:35,945 p=40269 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:52:35,957 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:52:36,012 p=40269 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": true,
        "enabled": true,
        "failed": false,
        "name": "pgautofailover",
        "state": "started",
        "status": {
            "ActiveEnterTimestampMonotonic": "0",
            "ActiveExitTimestampMonotonic": "0",
            "ActiveState": "inactive",
            "After": "basic.target systemd-journald.socket -.mount system.slice",
            "AllowIsolate": "no",
            "AmbientCapabilities": "0",
            "AssertResult": "no",
            "AssertTimestampMonotonic": "0",
            "Before": "shutdown.target",
            "BlockIOAccounting": "no",
            "BlockIOWeight": "18446744073709551615",
            "CPUAccounting": "no",
            "CPUQuotaPerSecUSec": "infinity",
            "CPUSchedulingPolicy": "0",
            "CPUSchedulingPriority": "0",
            "CPUSchedulingResetOnFork": "no",
            "CPUShares": "18446744073709551615",
            "CanIsolate": "no",
            "CanReload": "no",
            "CanStart": "yes",
            "CanStop": "yes",
            "CapabilityBoundingSet": "18446744073709551615",
            "CollectMode": "inactive",
            "ConditionResult": "no",
            "ConditionTimestampMonotonic": "0",
            "Conflicts": "shutdown.target",
            "ControlPID": "0",
            "DefaultDependencies": "yes",
            "Delegate": "no",
            "Description": "pg_auto_failover",
            "DevicePolicy": "auto",
            "Environment": "PGDATA=/var/lib/pgsql/monitor",
            "ExecMainCode": "0",
            "ExecMainExitTimestampMonotonic": "0",
            "ExecMainPID": "0",
            "ExecMainStartTimestampMonotonic": "0",
            "ExecMainStatus": "0",
            "ExecStart": "{ path=/usr/bin/pg_autoctl ; argv[]=/usr/bin/pg_autoctl run ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }",
            "FailureAction": "none",
            "FileDescriptorStoreMax": "0",
            "FragmentPath": "/etc/systemd/system/pgautofailover.service",
            "GuessMainPID": "yes",
            "IOScheduling": "0",
            "Id": "pgautofailover.service",
            "IgnoreOnIsolate": "no",
            "IgnoreOnSnapshot": "no",
            "IgnoreSIGPIPE": "yes",
            "InactiveEnterTimestampMonotonic": "0",
            "InactiveExitTimestampMonotonic": "0",
            "JobTimeoutAction": "none",
            "JobTimeoutUSec": "0",
            "KillMode": "control-group",
            "KillSignal": "15",
            "LimitAS": "18446744073709551615",
            "LimitCORE": "18446744073709551615",
            "LimitCPU": "18446744073709551615",
            "LimitDATA": "18446744073709551615",
            "LimitFSIZE": "18446744073709551615",
            "LimitLOCKS": "18446744073709551615",
            "LimitMEMLOCK": "65536",
            "LimitMSGQUEUE": "819200",
            "LimitNICE": "0",
            "LimitNOFILE": "4096",
            "LimitNPROC": "47321",
            "LimitRSS": "18446744073709551615",
            "LimitRTPRIO": "0",
            "LimitRTTIME": "18446744073709551615",
            "LimitSIGPENDING": "47321",
            "LimitSTACK": "18446744073709551615",
            "LoadState": "loaded",
            "MainPID": "0",
            "MemoryAccounting": "no",
            "MemoryCurrent": "18446744073709551615",
            "MemoryLimit": "18446744073709551615",
            "MountFlags": "0",
            "Names": "pgautofailover.service",
            "NeedDaemonReload": "no",
            "Nice": "0",
            "NoNewPrivileges": "no",
            "NonBlocking": "no",
            "NotifyAccess": "none",
            "OOMScoreAdjust": "0",
            "OnFailureJobMode": "replace",
            "PermissionsStartOnly": "no",
            "PrivateDevices": "no",
            "PrivateNetwork": "no",
            "PrivateTmp": "no",
            "ProtectHome": "no",
            "ProtectSystem": "no",
            "RefuseManualStart": "no",
            "RefuseManualStop": "no",
            "RemainAfterExit": "no",
            "Requires": "basic.target -.mount system.slice",
            "RequiresMountsFor": "/var/lib/pgsql",
            "Restart": "always",
            "RestartUSec": "100ms",
            "Result": "success",
            "RootDirectoryStartOnly": "no",
            "RuntimeDirectoryMode": "0755",
            "SameProcessGroup": "no",
            "SecureBits": "0",
            "SendSIGHUP": "no",
            "SendSIGKILL": "yes",
            "Slice": "system.slice",
            "StandardError": "inherit",
            "StandardInput": "null",
            "StandardOutput": "journal",
            "StartLimitAction": "none",
            "StartLimitBurst": "0",
            "StartLimitInterval": "10000000",
            "StartupBlockIOWeight": "18446744073709551615",
            "StartupCPUShares": "18446744073709551615",
            "StatusErrno": "0",
            "StopWhenUnneeded": "no",
            "SubState": "dead",
            "SyslogLevelPrefix": "yes",
            "SyslogPriority": "30",
            "SystemCallErrorNumber": "0",
            "TTYReset": "no",
            "TTYVHangup": "no",
            "TTYVTDisallocate": "no",
            "TasksAccounting": "no",
            "TasksCurrent": "18446744073709551615",
            "TasksMax": "18446744073709551615",
            "TimeoutStartUSec": "1min 30s",
            "TimeoutStopUSec": "1min 30s",
            "TimerSlackNSec": "50000",
            "Transient": "no",
            "Type": "simple",
            "UMask": "0022",
            "UnitFilePreset": "disabled",
            "UnitFileState": "disabled",
            "User": "postgres",
            "WatchdogTimestampMonotonic": "0",
            "WatchdogUSec": "0",
            "WorkingDirectory": "/var/lib/pgsql"
        }
    }
}
2022-03-21 15:52:36,025 p=40269 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:52:36,026 p=40269 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:52:36,038 p=40269 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:52:36,047 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 15:52:36,096 p=40269 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:52:36,097 p=40269 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:52:36,109 p=40269 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:52:36,768 p=40269 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:52:36,781 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the current state of monitor instance] **********************************************************
2022-03-21 15:52:36,818 p=40269 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:52:36,833 p=40269 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:52:36,845 p=40269 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:52:37,279 p=40269 u=moonja n=ansible | changed: [co7-master]
2022-03-21 15:52:37,291 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:52:37,361 p=40269 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": true,
        "cmd": "( ps -ef | grep postgres )",
        "delta": "0:00:00.034827",
        "end": "2022-03-21 15:52:37.669593",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-21 15:52:37.634766",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "postgres 25580     1  0 15:52 ?        00:00:00 /usr/bin/pg_autoctl run\npostgres 25583 25580  0 15:52 ?        00:00:00 pg_autoctl: start/stop postgres\npostgres 25584 25580  0 15:52 ?        00:00:00 pg_autoctl: monitor listener\npostgres 25696 25583  0 15:52 ?        00:00:00 /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\npostgres 25724 25696  0 15:52 ?        00:00:00 postgres: pg_auto_failover monitor: logger \njomoon   25831 21113  0 15:52 pts/0    00:00:00 /bin/sh -c sudo -H -S  -p \"[sudo via ansible, key=mlcbthknozlfegkvwsigywfauyotzbxa] password:\" -u postgres /bin/sh -c 'echo BECOME-SUCCESS-mlcbthknozlfegkvwsigywfauyotzbxa ; /usr/bin/python /var/tmp/ansible-tmp-1647845556.855768-41693-273610286698109/AnsiballZ_command.py' && sleep 0\nroot     25855 25831  0 15:52 pts/0    00:00:00 sudo -H -S -p [sudo via ansible, key=mlcbthknozlfegkvwsigywfauyotzbxa] password: -u postgres /bin/sh -c echo BECOME-SUCCESS-mlcbthknozlfegkvwsigywfauyotzbxa ; /usr/bin/python /var/tmp/ansible-tmp-1647845556.855768-41693-273610286698109/AnsiballZ_command.py\npostgres 25856 25855  0 15:52 pts/0    00:00:00 /bin/sh -c echo BECOME-SUCCESS-mlcbthknozlfegkvwsigywfauyotzbxa ; /usr/bin/python /var/tmp/ansible-tmp-1647845556.855768-41693-273610286698109/AnsiballZ_command.py\npostgres 25857 25856  0 15:52 pts/0    00:00:00 /usr/bin/python /var/tmp/ansible-tmp-1647845556.855768-41693-273610286698109/AnsiballZ_command.py\npostgres 25859 25857  0 15:52 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )\npostgres 25860 25859  0 15:52 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )\npostgres 25861 25860  0 15:52 pts/0    00:00:00 ps -ef\npostgres 25862 25860  0 15:52 pts/0    00:00:00 grep postgres",
        "stdout_lines": [
            "postgres 25580     1  0 15:52 ?        00:00:00 /usr/bin/pg_autoctl run",
            "postgres 25583 25580  0 15:52 ?        00:00:00 pg_autoctl: start/stop postgres",
            "postgres 25584 25580  0 15:52 ?        00:00:00 pg_autoctl: monitor listener",
            "postgres 25696 25583  0 15:52 ?        00:00:00 /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *",
            "postgres 25724 25696  0 15:52 ?        00:00:00 postgres: pg_auto_failover monitor: logger ",
            "jomoon   25831 21113  0 15:52 pts/0    00:00:00 /bin/sh -c sudo -H -S  -p \"[sudo via ansible, key=mlcbthknozlfegkvwsigywfauyotzbxa] password:\" -u postgres /bin/sh -c 'echo BECOME-SUCCESS-mlcbthknozlfegkvwsigywfauyotzbxa ; /usr/bin/python /var/tmp/ansible-tmp-1647845556.855768-41693-273610286698109/AnsiballZ_command.py' && sleep 0",
            "root     25855 25831  0 15:52 pts/0    00:00:00 sudo -H -S -p [sudo via ansible, key=mlcbthknozlfegkvwsigywfauyotzbxa] password: -u postgres /bin/sh -c echo BECOME-SUCCESS-mlcbthknozlfegkvwsigywfauyotzbxa ; /usr/bin/python /var/tmp/ansible-tmp-1647845556.855768-41693-273610286698109/AnsiballZ_command.py",
            "postgres 25856 25855  0 15:52 pts/0    00:00:00 /bin/sh -c echo BECOME-SUCCESS-mlcbthknozlfegkvwsigywfauyotzbxa ; /usr/bin/python /var/tmp/ansible-tmp-1647845556.855768-41693-273610286698109/AnsiballZ_command.py",
            "postgres 25857 25856  0 15:52 pts/0    00:00:00 /usr/bin/python /var/tmp/ansible-tmp-1647845556.855768-41693-273610286698109/AnsiballZ_command.py",
            "postgres 25859 25857  0 15:52 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )",
            "postgres 25860 25859  0 15:52 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )",
            "postgres 25861 25860  0 15:52 pts/0    00:00:00 ps -ef",
            "postgres 25862 25860  0 15:52 pts/0    00:00:00 grep postgres"
        ]
    }
}
2022-03-21 15:52:37,378 p=40269 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:52:37,378 p=40269 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:52:37,392 p=40269 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:52:37,402 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the current state of monitor] *******************************************************************
2022-03-21 15:52:37,451 p=40269 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:52:37,452 p=40269 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:52:37,464 p=40269 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:52:53,361 p=40269 u=moonja n=ansible | fatal: [co7-master]: FAILED! => {"changed": true, "cmd": "( psql -c \"\\l\" )", "delta": "0:00:12.946109", "end": "2022-03-21 15:52:53.750374", "msg": "non-zero return code", "rc": 2, "start": "2022-03-21 15:52:40.804265", "stderr": "psql: error: FATAL:  the database system is starting up", "stderr_lines": ["psql: error: FATAL:  the database system is starting up"], "stdout": "", "stdout_lines": []}
2022-03-21 15:52:53,370 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:52:53,391 p=40269 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:52:53,411 p=40269 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:52:53,436 p=40269 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:52:53,485 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : Create primiary instance. It will automatically be set by the monitor as the primary node with read-write capability (PGDATA = /var/lib/pgpsql/ha)] ***
2022-03-21 15:52:53,524 p=40269 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:52:53,534 p=40269 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:53:05,995 p=40269 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:53:06,005 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:53:06,061 p=40269 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "403319836638.28051",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ;  pg_autoctl create postgres --pgdata \"ha\" --auth trust --ssl-self-signed --username ha-admin --dbname \"appdb\" --hostname \"co7-node01\" --pgctl /bin/pg_ctl --monitor 'postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require' )",
        "delta": "0:00:06.366942",
        "end": "2022-03-21 15:53:03.188930",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/403319836638.28051",
        "start": "2022-03-21 15:52:56.821988",
        "started": 1,
        "stderr": "15:52:56 28061 INFO  Using default --ssl-mode \"require\"\n15:52:56 28061 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n15:52:56 28061 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n15:52:56 28061 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n15:52:56 28061 INFO  Started pg_autoctl postgres service with pid 28063\n15:52:56 28061 INFO  Started pg_autoctl node-init service with pid 28064\n15:52:56 28063 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v\n15:52:57 28064 INFO  Registered node 1 (co7-node01:5432) with name \"node_1\" in formation \"default\", group 0, state \"single\"\n15:52:57 28064 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"\n15:52:57 28064 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"\n15:52:57 28064 INFO  Successfully registered as \"single\" to the monitor.\n15:52:57 28064 INFO  FSM transition from \"init\" to \"single\": Start as a single node\n15:52:57 28064 INFO  Initialising postgres as a primary\n15:52:57 28064 INFO  Initialising a PostgreSQL cluster at \"ha\"\n15:52:57 28064 INFO  /bin/pg_ctl initdb -s -D ha --option '--auth=trust'\n15:52:59 28064 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n15:52:59 28064 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.\n15:52:59 28064 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n15:52:59 28064 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"\n15:52:59 28064 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node01\"\n15:52:59 28194 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *\n15:53:00 28063 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 28194\n15:53:00 28064 INFO  CREATE DATABASE appdb;\n15:53:01 28064 INFO  CREATE EXTENSION pg_stat_statements;\n15:53:01 28064 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node01\"\n15:53:01 28064 INFO  Contents of \"/var/lib/pgsql/ha/postgresql-auto-failover.conf\" have changed, overwriting\n15:53:01 28064 WARN  Failed to resolve hostname \"co7-master\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n15:53:01 28064 WARN  Postgres might deny connection attempts from \"co7-master\", even with the new HBA rules.\n15:53:01 28064 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n15:53:01 28064 WARN  Using IP address \"192.168.0.81\" in HBA file instead of hostname \"co7-master\"\n15:53:01 28064 INFO  Transition complete: current state is now \"single\"\n15:53:01 28064 INFO  keeper has been successfully initialized.\n15:53:01 28061 WARN  pg_autoctl service node-init exited with exit status 0\n15:53:01 28063 INFO  Postgres controller service received signal SIGTERM, terminating\n15:53:01 28063 INFO  Stopping pg_autoctl postgres service\n15:53:01 28063 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast\n15:53:02 28061 INFO  Waiting for subprocesses to terminate.\n15:53:03 28061 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "15:52:56 28061 INFO  Using default --ssl-mode \"require\"",
            "15:52:56 28061 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "15:52:56 28061 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "15:52:56 28061 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "15:52:56 28061 INFO  Started pg_autoctl postgres service with pid 28063",
            "15:52:56 28061 INFO  Started pg_autoctl node-init service with pid 28064",
            "15:52:56 28063 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v",
            "15:52:57 28064 INFO  Registered node 1 (co7-node01:5432) with name \"node_1\" in formation \"default\", group 0, state \"single\"",
            "15:52:57 28064 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"",
            "15:52:57 28064 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"",
            "15:52:57 28064 INFO  Successfully registered as \"single\" to the monitor.",
            "15:52:57 28064 INFO  FSM transition from \"init\" to \"single\": Start as a single node",
            "15:52:57 28064 INFO  Initialising postgres as a primary",
            "15:52:57 28064 INFO  Initialising a PostgreSQL cluster at \"ha\"",
            "15:52:57 28064 INFO  /bin/pg_ctl initdb -s -D ha --option '--auth=trust'",
            "15:52:59 28064 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "15:52:59 28064 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.",
            "15:52:59 28064 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "15:52:59 28064 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"",
            "15:52:59 28064 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node01\"",
            "15:52:59 28194 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *",
            "15:53:00 28063 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 28194",
            "15:53:00 28064 INFO  CREATE DATABASE appdb;",
            "15:53:01 28064 INFO  CREATE EXTENSION pg_stat_statements;",
            "15:53:01 28064 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node01\"",
            "15:53:01 28064 INFO  Contents of \"/var/lib/pgsql/ha/postgresql-auto-failover.conf\" have changed, overwriting",
            "15:53:01 28064 WARN  Failed to resolve hostname \"co7-master\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "15:53:01 28064 WARN  Postgres might deny connection attempts from \"co7-master\", even with the new HBA rules.",
            "15:53:01 28064 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "15:53:01 28064 WARN  Using IP address \"192.168.0.81\" in HBA file instead of hostname \"co7-master\"",
            "15:53:01 28064 INFO  Transition complete: current state is now \"single\"",
            "15:53:01 28064 INFO  keeper has been successfully initialized.",
            "15:53:01 28061 WARN  pg_autoctl service node-init exited with exit status 0",
            "15:53:01 28063 INFO  Postgres controller service received signal SIGTERM, terminating",
            "15:53:01 28063 INFO  Stopping pg_autoctl postgres service",
            "15:53:01 28063 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast",
            "15:53:02 28061 INFO  Waiting for subprocesses to terminate.",
            "15:53:03 28061 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": [],
        "warnings": [
            "Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually"
        ]
    }
}
2022-03-21 15:53:06,062 p=40269 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:53:06,062 p=40269 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:53:06,071 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of pirmary instance] *******************************************************
2022-03-21 15:53:06,104 p=40269 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:53:06,116 p=40269 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:53:13,328 p=40269 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:53:13,338 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:53:13,375 p=40269 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "540578066802.28556",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl -q show systemd --pgdata ~postgres/ha > pgautofailover.service )",
        "delta": "0:00:00.031626",
        "end": "2022-03-21 15:53:07.137197",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/540578066802.28556",
        "start": "2022-03-21 15:53:07.105571",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 15:53:13,375 p=40269 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:53:13,383 p=40269 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:53:13,409 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : Copy primary systemd service file of primary instance] *************************************************
2022-03-21 15:53:13,446 p=40269 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:53:13,457 p=40269 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:53:13,982 p=40269 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:53:13,994 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start primary systemd service of primary instance] ******************************************
2022-03-21 15:53:14,029 p=40269 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:53:14,041 p=40269 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:53:14,820 p=40269 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:53:14,832 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 15:53:14,866 p=40269 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:53:14,877 p=40269 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:53:15,346 p=40269 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:53:15,356 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the state of primary instance] ******************************************************************
2022-03-21 15:53:15,390 p=40269 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:53:15,402 p=40269 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:53:15,882 p=40269 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 15:53:15,892 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:53:15,959 p=40269 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "changed": true,
        "cmd": "( source ~/.bash_profile ; pg_autoctl show state )",
        "delta": "0:00:00.068872",
        "end": "2022-03-21 15:53:16.272248",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-21 15:53:16.203376",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State\n-------+-------+-----------------+-----------+-----------+---------------------+--------------------\nnode_1 |     1 | co7-node01:5432 | 0/1662668 |        no |              single |              single",
        "stdout_lines": [
            "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State",
            "-------+-------+-----------------+-----------+-----------+---------------------+--------------------",
            "node_1 |     1 | co7-node01:5432 | 0/1662668 |        no |              single |              single"
        ]
    }
}
2022-03-21 15:53:15,961 p=40269 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 15:53:15,961 p=40269 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 15:53:15,974 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : Create secondary instance. It will automatically be set by the monitor as the secondary  node with read-write capability (PGDATA = /var/lib/pgpsql/ha)] ***
2022-03-21 15:53:16,009 p=40269 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:59:26,197 p=40269 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"ansible_job_id": "873672803847.29324", "changed": false, "child_pid": 29328, "finished": 1, "msg": "Timeout exceeded", "results_file": "/var/lib/pgsql/.ansible_async/873672803847.29324", "started": 1, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2022-03-21 15:59:26,473 p=40269 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"ansible_job_id": "800093376140.30062", "changed": false, "child_pid": 30066, "finished": 1, "msg": "Timeout exceeded", "results_file": "/var/lib/pgsql/.ansible_async/800093376140.30062", "started": 1, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2022-03-21 15:59:26,484 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:59:26,506 p=40269 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:59:26,516 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of secondary instance] *****************************************************
2022-03-21 15:59:26,534 p=40269 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:59:26,543 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:59:26,561 p=40269 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:59:26,570 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : Copy secondary systemd service file of secondary instance] *********************************************
2022-03-21 15:59:26,588 p=40269 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:59:26,597 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start secondary systemd service of secondary instance] **************************************
2022-03-21 15:59:26,614 p=40269 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:59:26,624 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 15:59:26,641 p=40269 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:59:26,650 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the state of secondary instance] ****************************************************************
2022-03-21 15:59:26,667 p=40269 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:59:26,676 p=40269 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 15:59:26,693 p=40269 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 15:59:26,716 p=40269 u=moonja n=ansible | PLAY RECAP *************************************************************************************************************************
2022-03-21 15:59:26,717 p=40269 u=moonja n=ansible | co7-master                 : ok=25   changed=14   unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2022-03-21 15:59:26,717 p=40269 u=moonja n=ansible | co7-node01                 : ok=21   changed=12   unreachable=0    failed=0    skipped=25   rescued=0    ignored=0   
2022-03-21 15:59:26,717 p=40269 u=moonja n=ansible | co7-node02                 : ok=12   changed=6    unreachable=0    failed=1    skipped=25   rescued=0    ignored=0   
2022-03-21 15:59:26,717 p=40269 u=moonja n=ansible | co7-node03                 : ok=12   changed=6    unreachable=0    failed=1    skipped=25   rescued=0    ignored=0   
2022-03-21 16:00:05,050 p=45265 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from 
ansible-core in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 16:00:05,298 p=45265 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 
2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 16:00:05,303 p=45265 u=moonja n=ansible | [WARNING]: While constructing a mapping from /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/install.yml, line 307,
column 3, found a duplicate dict key (when). Using last defined value only.

2022-03-21 16:00:05,353 p=45265 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/upgrade.yml is empty and had no tasks to include

2022-03-21 16:00:05,368 p=45265 u=moonja n=ansible | PLAY [all] *************************************************************************************************************************
2022-03-21 16:00:05,398 p=45265 u=moonja n=ansible | TASK [Gathering Facts] *************************************************************************************************************
2022-03-21 16:00:07,533 p=45265 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 16:00:07,602 p=45265 u=moonja n=ansible | ok: [co7-master]
2022-03-21 16:00:07,659 p=45265 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 16:00:07,660 p=45265 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 16:00:07,676 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : Install rpm packages of dependenies to need installing packages regarding kubernates] ******************
2022-03-21 16:00:08,733 p=45265 u=moonja n=ansible | ok: [co7-node01] => (item=firewalld)
2022-03-21 16:00:08,746 p=45265 u=moonja n=ansible | ok: [co7-node03] => (item=firewalld)
2022-03-21 16:00:08,750 p=45265 u=moonja n=ansible | ok: [co7-master] => (item=firewalld)
2022-03-21 16:00:08,762 p=45265 u=moonja n=ansible | ok: [co7-node02] => (item=firewalld)
2022-03-21 16:00:09,482 p=45265 u=moonja n=ansible | ok: [co7-node03] => (item=python3)
2022-03-21 16:00:09,502 p=45265 u=moonja n=ansible | ok: [co7-master] => (item=python3)
2022-03-21 16:00:09,515 p=45265 u=moonja n=ansible | ok: [co7-node01] => (item=python3)
2022-03-21 16:00:09,515 p=45265 u=moonja n=ansible | ok: [co7-node02] => (item=python3)
2022-03-21 16:00:14,974 p=45265 u=moonja n=ansible | ok: [co7-node01] => (item=python3-libselinux)
2022-03-21 16:00:15,123 p=45265 u=moonja n=ansible | ok: [co7-node03] => (item=python3-libselinux)
2022-03-21 16:00:15,696 p=45265 u=moonja n=ansible | ok: [co7-master] => (item=python3-libselinux)
2022-03-21 16:00:15,841 p=45265 u=moonja n=ansible | ok: [co7-node02] => (item=python3-libselinux)
2022-03-21 16:00:15,853 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : Start and enable firewalld.] ***************************************************************************
2022-03-21 16:00:16,799 p=45265 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 16:00:16,828 p=45265 u=moonja n=ansible | ok: [co7-master]
2022-03-21 16:00:16,829 p=45265 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 16:00:16,852 p=45265 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 16:00:16,862 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : Open Firewall] *****************************************************************************************
2022-03-21 16:00:17,703 p=45265 u=moonja n=ansible | ok: [co7-node01] => (item=5432)
2022-03-21 16:00:17,708 p=45265 u=moonja n=ansible | ok: [co7-node03] => (item=5432)
2022-03-21 16:00:17,710 p=45265 u=moonja n=ansible | ok: [co7-master] => (item=5432)
2022-03-21 16:00:17,711 p=45265 u=moonja n=ansible | ok: [co7-node02] => (item=5432)
2022-03-21 16:00:17,722 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : Whitelist of Ip addresses] *****************************************************************************
2022-03-21 16:00:18,381 p=45265 u=moonja n=ansible | ok: [co7-node01] => (item=co7-master)
2022-03-21 16:00:18,382 p=45265 u=moonja n=ansible | ok: [co7-master] => (item=co7-master)
2022-03-21 16:00:18,392 p=45265 u=moonja n=ansible | ok: [co7-node02] => (item=co7-master)
2022-03-21 16:00:18,397 p=45265 u=moonja n=ansible | ok: [co7-node03] => (item=co7-master)
2022-03-21 16:00:18,964 p=45265 u=moonja n=ansible | ok: [co7-master] => (item=co7-node01)
2022-03-21 16:00:18,970 p=45265 u=moonja n=ansible | ok: [co7-node03] => (item=co7-node01)
2022-03-21 16:00:18,970 p=45265 u=moonja n=ansible | ok: [co7-node01] => (item=co7-node01)
2022-03-21 16:00:18,980 p=45265 u=moonja n=ansible | ok: [co7-node02] => (item=co7-node01)
2022-03-21 16:00:19,550 p=45265 u=moonja n=ansible | ok: [co7-node03] => (item=co7-node02)
2022-03-21 16:00:19,563 p=45265 u=moonja n=ansible | ok: [co7-master] => (item=co7-node02)
2022-03-21 16:00:19,574 p=45265 u=moonja n=ansible | ok: [co7-node01] => (item=co7-node02)
2022-03-21 16:00:19,577 p=45265 u=moonja n=ansible | ok: [co7-node02] => (item=co7-node02)
2022-03-21 16:00:20,119 p=45265 u=moonja n=ansible | ok: [co7-node03] => (item=co7-node03)
2022-03-21 16:00:20,151 p=45265 u=moonja n=ansible | ok: [co7-master] => (item=co7-node03)
2022-03-21 16:00:20,169 p=45265 u=moonja n=ansible | ok: [co7-node01] => (item=co7-node03)
2022-03-21 16:00:20,172 p=45265 u=moonja n=ansible | ok: [co7-node02] => (item=co7-node03)
2022-03-21 16:00:20,183 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : Bounce firewalld] **************************************************************************************
2022-03-21 16:00:21,797 p=45265 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:00:21,808 p=45265 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 16:00:21,814 p=45265 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:00:21,815 p=45265 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 16:00:21,826 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : Copy the vmwawre-postgres rpm file to all hosts in cluster] ********************************************
2022-03-21 16:00:23,061 p=45265 u=moonja n=ansible | ok: [co7-master]
2022-03-21 16:00:23,070 p=45265 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 16:00:23,085 p=45265 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 16:00:23,089 p=45265 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 16:00:23,099 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : Install dependency rpm package for pgautofailover] *****************************************************
2022-03-21 16:00:29,735 p=45265 u=moonja n=ansible | ok: [co7-node01] => (item=python2-psutil)
2022-03-21 16:00:30,791 p=45265 u=moonja n=ansible | ok: [co7-node03] => (item=python2-psutil)
2022-03-21 16:00:30,800 p=45265 u=moonja n=ansible | ok: [co7-node02] => (item=python2-psutil)
2022-03-21 16:00:31,275 p=45265 u=moonja n=ansible | ok: [co7-master] => (item=python2-psutil)
2022-03-21 16:00:31,284 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : Install VMware Postgres on all hosts as root] **********************************************************
2022-03-21 16:00:38,053 p=45265 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 16:00:38,068 p=45265 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 16:00:38,068 p=45265 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 16:00:38,570 p=45265 u=moonja n=ansible | ok: [co7-master]
2022-03-21 16:00:38,580 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 16:00:38,615 p=45265 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:00:38,629 p=45265 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:00:38,642 p=45265 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:00:39,331 p=45265 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:00:39,340 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:00:39,376 p=45265 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "pg_autoctl version 1.4.2\npg_autoctl extension version 1.4\ncompiled with PostgreSQL 13.3 (VMware Postgres 13.3.0) on x86_64-redhat-linux-gnu, compiled by gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-44), 64-bit\ncompatible with Postgres 10, 11, 12, and 13"
}
2022-03-21 16:00:39,392 p=45265 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:00:39,393 p=45265 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:00:39,404 p=45265 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:00:39,414 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 16:00:39,459 p=45265 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:00:39,460 p=45265 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:00:39,471 p=45265 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:00:39,934 p=45265 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:00:39,943 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:00:39,978 p=45265 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "pg_ctl (PostgreSQL) 13.3 (VMware Postgres 13.3.0)"
}
2022-03-21 16:00:39,994 p=45265 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:00:39,994 p=45265 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:00:40,007 p=45265 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:00:40,017 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : Getting process IDs of the pg_autoctl process] *********************************************************
2022-03-21 16:00:40,694 p=45265 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 16:00:40,698 p=45265 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 16:00:40,702 p=45265 u=moonja n=ansible | ok: [co7-master]
2022-03-21 16:00:40,702 p=45265 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 16:00:40,712 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : Printing the process IDs obtained] *********************************************************************
2022-03-21 16:00:40,760 p=45265 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "PIDS of pg_autoctl:25580,25583,25584"
}
2022-03-21 16:00:40,765 p=45265 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": "PIDS of pg_autoctl:29094,29097,29098"
}
2022-03-21 16:00:40,780 p=45265 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 16:00:40,796 p=45265 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 16:00:40,806 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : Stop pgautofailover service of systemd] ****************************************************************
2022-03-21 16:00:40,874 p=45265 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:00:40,889 p=45265 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:00:42,914 p=45265 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:00:43,127 p=45265 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:00:43,137 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:00:43,173 p=45265 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": true,
        "failed": false,
        "name": "pgautofailover",
        "state": "stopped",
        "status": {
            "ActiveEnterTimestamp": "Mon 2022-03-21 15:52:36 KST",
            "ActiveEnterTimestampMonotonic": "8159644853",
            "ActiveExitTimestampMonotonic": "0",
            "ActiveState": "active",
            "After": "-.mount basic.target system.slice systemd-journald.socket",
            "AllowIsolate": "no",
            "AmbientCapabilities": "0",
            "AssertResult": "yes",
            "AssertTimestamp": "Mon 2022-03-21 15:52:36 KST",
            "AssertTimestampMonotonic": "8159644469",
            "Before": "shutdown.target multi-user.target",
            "BlockIOAccounting": "no",
            "BlockIOWeight": "18446744073709551615",
            "CPUAccounting": "no",
            "CPUQuotaPerSecUSec": "infinity",
            "CPUSchedulingPolicy": "0",
            "CPUSchedulingPriority": "0",
            "CPUSchedulingResetOnFork": "no",
            "CPUShares": "18446744073709551615",
            "CanIsolate": "no",
            "CanReload": "no",
            "CanStart": "yes",
            "CanStop": "yes",
            "CapabilityBoundingSet": "18446744073709551615",
            "CollectMode": "inactive",
            "ConditionResult": "yes",
            "ConditionTimestamp": "Mon 2022-03-21 15:52:36 KST",
            "ConditionTimestampMonotonic": "8159644469",
            "Conflicts": "shutdown.target",
            "ControlGroup": "/system.slice/pgautofailover.service",
            "ControlPID": "0",
            "DefaultDependencies": "yes",
            "Delegate": "no",
            "Description": "pg_auto_failover",
            "DevicePolicy": "auto",
            "Environment": "PGDATA=/var/lib/pgsql/monitor",
            "ExecMainCode": "0",
            "ExecMainExitTimestampMonotonic": "0",
            "ExecMainPID": "25580",
            "ExecMainStartTimestamp": "Mon 2022-03-21 15:52:36 KST",
            "ExecMainStartTimestampMonotonic": "8159644812",
            "ExecMainStatus": "0",
            "ExecStart": "{ path=/usr/bin/pg_autoctl ; argv[]=/usr/bin/pg_autoctl run ; ignore_errors=no ; start_time=[Mon 2022-03-21 15:52:36 KST] ; stop_time=[n/a] ; pid=25580 ; code=(null) ; status=0/0 }",
            "FailureAction": "none",
            "FileDescriptorStoreMax": "0",
            "FragmentPath": "/etc/systemd/system/pgautofailover.service",
            "GuessMainPID": "yes",
            "IOScheduling": "0",
            "Id": "pgautofailover.service",
            "IgnoreOnIsolate": "no",
            "IgnoreOnSnapshot": "no",
            "IgnoreSIGPIPE": "yes",
            "InactiveEnterTimestampMonotonic": "0",
            "InactiveExitTimestamp": "Mon 2022-03-21 15:52:36 KST",
            "InactiveExitTimestampMonotonic": "8159644853",
            "JobTimeoutAction": "none",
            "JobTimeoutUSec": "0",
            "KillMode": "control-group",
            "KillSignal": "15",
            "LimitAS": "18446744073709551615",
            "LimitCORE": "18446744073709551615",
            "LimitCPU": "18446744073709551615",
            "LimitDATA": "18446744073709551615",
            "LimitFSIZE": "18446744073709551615",
            "LimitLOCKS": "18446744073709551615",
            "LimitMEMLOCK": "65536",
            "LimitMSGQUEUE": "819200",
            "LimitNICE": "0",
            "LimitNOFILE": "4096",
            "LimitNPROC": "47321",
            "LimitRSS": "18446744073709551615",
            "LimitRTPRIO": "0",
            "LimitRTTIME": "18446744073709551615",
            "LimitSIGPENDING": "47321",
            "LimitSTACK": "18446744073709551615",
            "LoadState": "loaded",
            "MainPID": "25580",
            "MemoryAccounting": "no",
            "MemoryCurrent": "18446744073709551615",
            "MemoryLimit": "18446744073709551615",
            "MountFlags": "0",
            "Names": "pgautofailover.service",
            "NeedDaemonReload": "no",
            "Nice": "0",
            "NoNewPrivileges": "no",
            "NonBlocking": "no",
            "NotifyAccess": "none",
            "OOMScoreAdjust": "0",
            "OnFailureJobMode": "replace",
            "PermissionsStartOnly": "no",
            "PrivateDevices": "no",
            "PrivateNetwork": "no",
            "PrivateTmp": "no",
            "ProtectHome": "no",
            "ProtectSystem": "no",
            "RefuseManualStart": "no",
            "RefuseManualStop": "no",
            "RemainAfterExit": "no",
            "Requires": "basic.target system.slice -.mount",
            "RequiresMountsFor": "/var/lib/pgsql",
            "Restart": "always",
            "RestartUSec": "100ms",
            "Result": "success",
            "RootDirectoryStartOnly": "no",
            "RuntimeDirectoryMode": "0755",
            "SameProcessGroup": "no",
            "SecureBits": "0",
            "SendSIGHUP": "no",
            "SendSIGKILL": "yes",
            "Slice": "system.slice",
            "StandardError": "inherit",
            "StandardInput": "null",
            "StandardOutput": "journal",
            "StartLimitAction": "none",
            "StartLimitBurst": "0",
            "StartLimitInterval": "10000000",
            "StartupBlockIOWeight": "18446744073709551615",
            "StartupCPUShares": "18446744073709551615",
            "StatusErrno": "0",
            "StopWhenUnneeded": "no",
            "SubState": "running",
            "SyslogLevelPrefix": "yes",
            "SyslogPriority": "30",
            "SystemCallErrorNumber": "0",
            "TTYReset": "no",
            "TTYVHangup": "no",
            "TTYVTDisallocate": "no",
            "TasksAccounting": "no",
            "TasksCurrent": "18446744073709551615",
            "TasksMax": "18446744073709551615",
            "TimeoutStartUSec": "1min 30s",
            "TimeoutStopUSec": "1min 30s",
            "TimerSlackNSec": "50000",
            "Transient": "no",
            "Type": "simple",
            "UMask": "0022",
            "UnitFilePreset": "disabled",
            "UnitFileState": "enabled",
            "User": "postgres",
            "WantedBy": "multi-user.target",
            "WatchdogTimestamp": "Mon 2022-03-21 15:52:36 KST",
            "WatchdogTimestampMonotonic": "8159644839",
            "WatchdogUSec": "0",
            "WorkingDirectory": "/var/lib/pgsql"
        }
    }
}
2022-03-21 16:00:43,193 p=45265 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "changed": true,
        "failed": false,
        "name": "pgautofailover",
        "state": "stopped",
        "status": {
            "ActiveEnterTimestamp": "Mon 2022-03-21 15:53:15 KST",
            "ActiveEnterTimestampMonotonic": "8197528020",
            "ActiveExitTimestampMonotonic": "0",
            "ActiveState": "active",
            "After": "basic.target -.mount system.slice systemd-journald.socket",
            "AllowIsolate": "no",
            "AmbientCapabilities": "0",
            "AssertResult": "yes",
            "AssertTimestamp": "Mon 2022-03-21 15:53:15 KST",
            "AssertTimestampMonotonic": "8197527600",
            "Before": "shutdown.target multi-user.target",
            "BlockIOAccounting": "no",
            "BlockIOWeight": "18446744073709551615",
            "CPUAccounting": "no",
            "CPUQuotaPerSecUSec": "infinity",
            "CPUSchedulingPolicy": "0",
            "CPUSchedulingPriority": "0",
            "CPUSchedulingResetOnFork": "no",
            "CPUShares": "18446744073709551615",
            "CanIsolate": "no",
            "CanReload": "no",
            "CanStart": "yes",
            "CanStop": "yes",
            "CapabilityBoundingSet": "18446744073709551615",
            "CollectMode": "inactive",
            "ConditionResult": "yes",
            "ConditionTimestamp": "Mon 2022-03-21 15:53:15 KST",
            "ConditionTimestampMonotonic": "8197527600",
            "Conflicts": "shutdown.target",
            "ControlGroup": "/system.slice/pgautofailover.service",
            "ControlPID": "0",
            "DefaultDependencies": "yes",
            "Delegate": "no",
            "Description": "pg_auto_failover",
            "DevicePolicy": "auto",
            "Environment": "PGDATA=/var/lib/pgsql/ha",
            "ExecMainCode": "0",
            "ExecMainExitTimestampMonotonic": "0",
            "ExecMainPID": "29094",
            "ExecMainStartTimestamp": "Mon 2022-03-21 15:53:15 KST",
            "ExecMainStartTimestampMonotonic": "8197527964",
            "ExecMainStatus": "0",
            "ExecStart": "{ path=/usr/bin/pg_autoctl ; argv[]=/usr/bin/pg_autoctl run ; ignore_errors=no ; start_time=[Mon 2022-03-21 15:53:15 KST] ; stop_time=[n/a] ; pid=29094 ; code=(null) ; status=0/0 }",
            "FailureAction": "none",
            "FileDescriptorStoreMax": "0",
            "FragmentPath": "/etc/systemd/system/pgautofailover.service",
            "GuessMainPID": "yes",
            "IOScheduling": "0",
            "Id": "pgautofailover.service",
            "IgnoreOnIsolate": "no",
            "IgnoreOnSnapshot": "no",
            "IgnoreSIGPIPE": "yes",
            "InactiveEnterTimestampMonotonic": "0",
            "InactiveExitTimestamp": "Mon 2022-03-21 15:53:15 KST",
            "InactiveExitTimestampMonotonic": "8197528020",
            "JobTimeoutAction": "none",
            "JobTimeoutUSec": "0",
            "KillMode": "control-group",
            "KillSignal": "15",
            "LimitAS": "18446744073709551615",
            "LimitCORE": "18446744073709551615",
            "LimitCPU": "18446744073709551615",
            "LimitDATA": "18446744073709551615",
            "LimitFSIZE": "18446744073709551615",
            "LimitLOCKS": "18446744073709551615",
            "LimitMEMLOCK": "65536",
            "LimitMSGQUEUE": "819200",
            "LimitNICE": "0",
            "LimitNOFILE": "4096",
            "LimitNPROC": "31193",
            "LimitRSS": "18446744073709551615",
            "LimitRTPRIO": "0",
            "LimitRTTIME": "18446744073709551615",
            "LimitSIGPENDING": "31193",
            "LimitSTACK": "18446744073709551615",
            "LoadState": "loaded",
            "MainPID": "29094",
            "MemoryAccounting": "no",
            "MemoryCurrent": "18446744073709551615",
            "MemoryLimit": "18446744073709551615",
            "MountFlags": "0",
            "Names": "pgautofailover.service",
            "NeedDaemonReload": "no",
            "Nice": "0",
            "NoNewPrivileges": "no",
            "NonBlocking": "no",
            "NotifyAccess": "none",
            "OOMScoreAdjust": "0",
            "OnFailureJobMode": "replace",
            "PermissionsStartOnly": "no",
            "PrivateDevices": "no",
            "PrivateNetwork": "no",
            "PrivateTmp": "no",
            "ProtectHome": "no",
            "ProtectSystem": "no",
            "RefuseManualStart": "no",
            "RefuseManualStop": "no",
            "RemainAfterExit": "no",
            "Requires": "-.mount system.slice basic.target",
            "RequiresMountsFor": "/var/lib/pgsql",
            "Restart": "always",
            "RestartUSec": "100ms",
            "Result": "success",
            "RootDirectoryStartOnly": "no",
            "RuntimeDirectoryMode": "0755",
            "SameProcessGroup": "no",
            "SecureBits": "0",
            "SendSIGHUP": "no",
            "SendSIGKILL": "yes",
            "Slice": "system.slice",
            "StandardError": "inherit",
            "StandardInput": "null",
            "StandardOutput": "journal",
            "StartLimitAction": "none",
            "StartLimitBurst": "0",
            "StartLimitInterval": "10000000",
            "StartupBlockIOWeight": "18446744073709551615",
            "StartupCPUShares": "18446744073709551615",
            "StatusErrno": "0",
            "StopWhenUnneeded": "no",
            "SubState": "running",
            "SyslogLevelPrefix": "yes",
            "SyslogPriority": "30",
            "SystemCallErrorNumber": "0",
            "TTYReset": "no",
            "TTYVHangup": "no",
            "TTYVTDisallocate": "no",
            "TasksAccounting": "no",
            "TasksCurrent": "18446744073709551615",
            "TasksMax": "18446744073709551615",
            "TimeoutStartUSec": "1min 30s",
            "TimeoutStopUSec": "1min 30s",
            "TimerSlackNSec": "50000",
            "Transient": "no",
            "Type": "simple",
            "UMask": "0022",
            "UnitFilePreset": "disabled",
            "UnitFileState": "enabled",
            "User": "postgres",
            "WantedBy": "multi-user.target",
            "WatchdogTimestamp": "Mon 2022-03-21 15:53:15 KST",
            "WatchdogTimestampMonotonic": "8197527993",
            "WatchdogUSec": "0",
            "WorkingDirectory": "/var/lib/pgsql"
        }
    }
}
2022-03-21 16:00:43,194 p=45265 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 16:00:43,206 p=45265 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 16:00:43,216 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : Create the monitor node] *******************************************************************************
2022-03-21 16:00:43,249 p=45265 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:00:43,263 p=45265 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:00:43,276 p=45265 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:00:49,517 p=45265 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:00:49,526 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:00:49,565 p=45265 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "ansible_job_id": "416899454421.29772",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl create monitor --auth trust --ssl-self-signed --pgdata monitor )",
        "delta": "0:00:01.981433",
        "end": "2022-03-21 16:00:46.220976",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/416899454421.29772",
        "start": "2022-03-21 16:00:44.239543",
        "started": 1,
        "stderr": "16:00:44 29790 INFO  Using default --ssl-mode \"require\"\n16:00:44 29790 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n16:00:44 29790 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n16:00:44 29790 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n16:00:44 29790 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/monitor/server.crt -keyout /var/lib/pgsql/monitor/server.key -subj \"/CN=co7-master\"\n16:00:44 29790 INFO  Started pg_autoctl postgres service with pid 29794\n16:00:44 29794 INFO   /usr/bin/pg_autoctl do service postgres --pgdata monitor -v\n16:00:44 29790 INFO  Started pg_autoctl monitor-init service with pid 29795\n16:00:44 29795 INFO  Granting connection privileges on 192.168.0.0/24\n16:00:44 29798 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\n16:00:44 29794 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/monitor\" on port 5432 with pid 29798\n16:00:45 29795 INFO  The user \"autoctl\" already exists, skipping.\n16:00:45 29795 INFO  The database \"pg_auto_failover\" already exists, skipping.\n16:00:45 29795 WARN  NOTICE:  extension \"pgautofailover\" already exists, skipping\n16:00:45 29795 INFO  Your pg_auto_failover monitor instance is now ready on port 5432.\n16:00:45 29795 INFO  Monitor has been successfully initialized.\n16:00:45 29790 WARN  pg_autoctl service monitor-init exited with exit status 0\n16:00:45 29794 INFO  Postgres controller service received signal SIGTERM, terminating\n16:00:45 29794 INFO  Stopping pg_autoctl postgres service\n16:00:45 29794 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/monitor --wait stop --mode fast\n16:00:45 29790 INFO  Waiting for subprocesses to terminate.\n16:00:46 29790 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "16:00:44 29790 INFO  Using default --ssl-mode \"require\"",
            "16:00:44 29790 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "16:00:44 29790 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "16:00:44 29790 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "16:00:44 29790 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/monitor/server.crt -keyout /var/lib/pgsql/monitor/server.key -subj \"/CN=co7-master\"",
            "16:00:44 29790 INFO  Started pg_autoctl postgres service with pid 29794",
            "16:00:44 29794 INFO   /usr/bin/pg_autoctl do service postgres --pgdata monitor -v",
            "16:00:44 29790 INFO  Started pg_autoctl monitor-init service with pid 29795",
            "16:00:44 29795 INFO  Granting connection privileges on 192.168.0.0/24",
            "16:00:44 29798 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *",
            "16:00:44 29794 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/monitor\" on port 5432 with pid 29798",
            "16:00:45 29795 INFO  The user \"autoctl\" already exists, skipping.",
            "16:00:45 29795 INFO  The database \"pg_auto_failover\" already exists, skipping.",
            "16:00:45 29795 WARN  NOTICE:  extension \"pgautofailover\" already exists, skipping",
            "16:00:45 29795 INFO  Your pg_auto_failover monitor instance is now ready on port 5432.",
            "16:00:45 29795 INFO  Monitor has been successfully initialized.",
            "16:00:45 29790 WARN  pg_autoctl service monitor-init exited with exit status 0",
            "16:00:45 29794 INFO  Postgres controller service received signal SIGTERM, terminating",
            "16:00:45 29794 INFO  Stopping pg_autoctl postgres service",
            "16:00:45 29794 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/monitor --wait stop --mode fast",
            "16:00:45 29790 INFO  Waiting for subprocesses to terminate.",
            "16:00:46 29790 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 16:00:49,581 p=45265 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:00:49,581 p=45265 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:00:49,593 p=45265 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:00:49,603 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of monitor instance] *******************************************************
2022-03-21 16:00:49,654 p=45265 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:00:49,655 p=45265 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:00:49,667 p=45265 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:00:55,979 p=45265 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:00:55,987 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : Copy systemd service file of monitor instance] *********************************************************
2022-03-21 16:00:56,022 p=45265 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:00:56,036 p=45265 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:00:56,049 p=45265 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:00:56,706 p=45265 u=moonja n=ansible | ok: [co7-master]
2022-03-21 16:00:56,726 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start systemd service of monitor instance] **************************************************
2022-03-21 16:00:56,771 p=45265 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:00:56,789 p=45265 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:00:56,804 p=45265 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:00:57,425 p=45265 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:00:57,435 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:00:57,474 p=45265 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": true,
        "enabled": true,
        "failed": false,
        "name": "pgautofailover",
        "state": "started",
        "status": {
            "ActiveEnterTimestamp": "Mon 2022-03-21 15:52:36 KST",
            "ActiveEnterTimestampMonotonic": "8159644853",
            "ActiveExitTimestamp": "Mon 2022-03-21 16:00:42 KST",
            "ActiveExitTimestampMonotonic": "8645498397",
            "ActiveState": "inactive",
            "After": "-.mount systemd-journald.socket system.slice basic.target",
            "AllowIsolate": "no",
            "AmbientCapabilities": "0",
            "AssertResult": "yes",
            "AssertTimestamp": "Mon 2022-03-21 15:52:36 KST",
            "AssertTimestampMonotonic": "8159644469",
            "Before": "multi-user.target shutdown.target",
            "BlockIOAccounting": "no",
            "BlockIOWeight": "18446744073709551615",
            "CPUAccounting": "no",
            "CPUQuotaPerSecUSec": "infinity",
            "CPUSchedulingPolicy": "0",
            "CPUSchedulingPriority": "0",
            "CPUSchedulingResetOnFork": "no",
            "CPUShares": "18446744073709551615",
            "CanIsolate": "no",
            "CanReload": "no",
            "CanStart": "yes",
            "CanStop": "yes",
            "CapabilityBoundingSet": "18446744073709551615",
            "CollectMode": "inactive",
            "ConditionResult": "yes",
            "ConditionTimestamp": "Mon 2022-03-21 15:52:36 KST",
            "ConditionTimestampMonotonic": "8159644469",
            "Conflicts": "shutdown.target",
            "ControlPID": "0",
            "DefaultDependencies": "yes",
            "Delegate": "no",
            "Description": "pg_auto_failover",
            "DevicePolicy": "auto",
            "Environment": "PGDATA=/var/lib/pgsql/monitor",
            "ExecMainCode": "1",
            "ExecMainExitTimestamp": "Mon 2022-03-21 16:00:43 KST",
            "ExecMainExitTimestampMonotonic": "8646809286",
            "ExecMainPID": "25580",
            "ExecMainStartTimestamp": "Mon 2022-03-21 15:52:36 KST",
            "ExecMainStartTimestampMonotonic": "8159644812",
            "ExecMainStatus": "0",
            "ExecStart": "{ path=/usr/bin/pg_autoctl ; argv[]=/usr/bin/pg_autoctl run ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }",
            "FailureAction": "none",
            "FileDescriptorStoreMax": "0",
            "FragmentPath": "/etc/systemd/system/pgautofailover.service",
            "GuessMainPID": "yes",
            "IOScheduling": "0",
            "Id": "pgautofailover.service",
            "IgnoreOnIsolate": "no",
            "IgnoreOnSnapshot": "no",
            "IgnoreSIGPIPE": "yes",
            "InactiveEnterTimestamp": "Mon 2022-03-21 16:00:43 KST",
            "InactiveEnterTimestampMonotonic": "8646809553",
            "InactiveExitTimestamp": "Mon 2022-03-21 15:52:36 KST",
            "InactiveExitTimestampMonotonic": "8159644853",
            "JobTimeoutAction": "none",
            "JobTimeoutUSec": "0",
            "KillMode": "control-group",
            "KillSignal": "15",
            "LimitAS": "18446744073709551615",
            "LimitCORE": "18446744073709551615",
            "LimitCPU": "18446744073709551615",
            "LimitDATA": "18446744073709551615",
            "LimitFSIZE": "18446744073709551615",
            "LimitLOCKS": "18446744073709551615",
            "LimitMEMLOCK": "65536",
            "LimitMSGQUEUE": "819200",
            "LimitNICE": "0",
            "LimitNOFILE": "4096",
            "LimitNPROC": "47321",
            "LimitRSS": "18446744073709551615",
            "LimitRTPRIO": "0",
            "LimitRTTIME": "18446744073709551615",
            "LimitSIGPENDING": "47321",
            "LimitSTACK": "18446744073709551615",
            "LoadState": "loaded",
            "MainPID": "0",
            "MemoryAccounting": "no",
            "MemoryCurrent": "18446744073709551615",
            "MemoryLimit": "18446744073709551615",
            "MountFlags": "0",
            "Names": "pgautofailover.service",
            "NeedDaemonReload": "no",
            "Nice": "0",
            "NoNewPrivileges": "no",
            "NonBlocking": "no",
            "NotifyAccess": "none",
            "OOMScoreAdjust": "0",
            "OnFailureJobMode": "replace",
            "PermissionsStartOnly": "no",
            "PrivateDevices": "no",
            "PrivateNetwork": "no",
            "PrivateTmp": "no",
            "ProtectHome": "no",
            "ProtectSystem": "no",
            "RefuseManualStart": "no",
            "RefuseManualStop": "no",
            "RemainAfterExit": "no",
            "Requires": "-.mount system.slice basic.target",
            "RequiresMountsFor": "/var/lib/pgsql",
            "Restart": "always",
            "RestartUSec": "100ms",
            "Result": "success",
            "RootDirectoryStartOnly": "no",
            "RuntimeDirectoryMode": "0755",
            "SameProcessGroup": "no",
            "SecureBits": "0",
            "SendSIGHUP": "no",
            "SendSIGKILL": "yes",
            "Slice": "system.slice",
            "StandardError": "inherit",
            "StandardInput": "null",
            "StandardOutput": "journal",
            "StartLimitAction": "none",
            "StartLimitBurst": "0",
            "StartLimitInterval": "10000000",
            "StartupBlockIOWeight": "18446744073709551615",
            "StartupCPUShares": "18446744073709551615",
            "StatusErrno": "0",
            "StopWhenUnneeded": "no",
            "SubState": "dead",
            "SyslogLevelPrefix": "yes",
            "SyslogPriority": "30",
            "SystemCallErrorNumber": "0",
            "TTYReset": "no",
            "TTYVHangup": "no",
            "TTYVTDisallocate": "no",
            "TasksAccounting": "no",
            "TasksCurrent": "18446744073709551615",
            "TasksMax": "18446744073709551615",
            "TimeoutStartUSec": "1min 30s",
            "TimeoutStopUSec": "1min 30s",
            "TimerSlackNSec": "50000",
            "Transient": "no",
            "Type": "simple",
            "UMask": "0022",
            "UnitFilePreset": "disabled",
            "UnitFileState": "enabled",
            "User": "postgres",
            "WantedBy": "multi-user.target",
            "WatchdogTimestampMonotonic": "0",
            "WatchdogUSec": "0",
            "WorkingDirectory": "/var/lib/pgsql"
        }
    }
}
2022-03-21 16:00:57,491 p=45265 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:00:57,510 p=45265 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:00:57,510 p=45265 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:00:57,520 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 16:00:57,570 p=45265 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:00:57,582 p=45265 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:00:57,582 p=45265 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:00:58,193 p=45265 u=moonja n=ansible | ok: [co7-master]
2022-03-21 16:00:58,211 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the current state of monitor instance] **********************************************************
2022-03-21 16:00:58,245 p=45265 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:00:58,260 p=45265 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:00:58,272 p=45265 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:00:58,704 p=45265 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:00:58,714 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:00:58,752 p=45265 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": true,
        "cmd": "( ps -ef | grep postgres )",
        "delta": "0:00:00.035066",
        "end": "2022-03-21 16:00:59.134727",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-21 16:00:59.099661",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "postgres 30695     1  0 16:00 ?        00:00:00 /usr/bin/pg_autoctl run\npostgres 30698 30695  0 16:00 ?        00:00:00 pg_autoctl: start/stop postgres\npostgres 30699 30695  0 16:00 ?        00:00:00 pg_autoctl: monitor listener\npostgres 30729 30698  1 16:00 ?        00:00:00 /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\npostgres 30840 30729  0 16:00 ?        00:00:00 postgres: pg_auto_failover monitor: logger \npostgres 30875 30729  0 16:00 ?        00:00:00 postgres: pg_auto_failover monitor: checkpointer \npostgres 30876 30729  0 16:00 ?        00:00:00 postgres: pg_auto_failover monitor: background writer\npostgres 30877 30729  0 16:00 ?        00:00:00 postgres: pg_auto_failover monitor: walwriter \npostgres 30878 30729  0 16:00 ?        00:00:00 postgres: pg_auto_failover monitor: autovacuum launcher\npostgres 30879 30729  0 16:00 ?        00:00:00 postgres: pg_auto_failover monitor: stats collector \npostgres 30880 30729  0 16:00 ?        00:00:00 postgres: pg_auto_failover monitor: pg_auto_failover monitor\npostgres 30881 30729  0 16:00 ?        00:00:00 postgres: pg_auto_failover monitor: logical replication launcher\npostgres 30898 30729  0 16:00 ?        00:00:00 postgres: pg_auto_failover monitor: pg_auto_failover monitor worker\npostgres 30899 30729  0 16:00 ?        00:00:00 postgres: pg_auto_failover monitor: pg_auto_failover monitor worker\npostgres 30900 30729  0 16:00 ?        00:00:00 postgres: pg_auto_failover monitor: autoctl_node pg_auto_failover [local] idle\njomoon   30955 26424  0 16:00 pts/0    00:00:00 /bin/sh -c sudo -H -S  -p \"[sudo via ansible, key=xciqyjiwdgzbulhevzrixwgvcworzeey] password:\" -u postgres /bin/sh -c 'echo BECOME-SUCCESS-xciqyjiwdgzbulhevzrixwgvcworzeey ; /usr/bin/python /var/tmp/ansible-tmp-1647846058.3119528-46622-229900803028078/AnsiballZ_command.py' && sleep 0\nroot     30979 30955  0 16:00 pts/0    00:00:00 sudo -H -S -p [sudo via ansible, key=xciqyjiwdgzbulhevzrixwgvcworzeey] password: -u postgres /bin/sh -c echo BECOME-SUCCESS-xciqyjiwdgzbulhevzrixwgvcworzeey ; /usr/bin/python /var/tmp/ansible-tmp-1647846058.3119528-46622-229900803028078/AnsiballZ_command.py\npostgres 30980 30979  0 16:00 pts/0    00:00:00 /bin/sh -c echo BECOME-SUCCESS-xciqyjiwdgzbulhevzrixwgvcworzeey ; /usr/bin/python /var/tmp/ansible-tmp-1647846058.3119528-46622-229900803028078/AnsiballZ_command.py\npostgres 30981 30980  0 16:00 pts/0    00:00:00 /usr/bin/python /var/tmp/ansible-tmp-1647846058.3119528-46622-229900803028078/AnsiballZ_command.py\npostgres 30983 30981  0 16:00 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )\npostgres 30984 30983  0 16:00 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )\npostgres 30985 30984  0 16:00 pts/0    00:00:00 ps -ef\npostgres 30986 30984  0 16:00 pts/0    00:00:00 grep postgres",
        "stdout_lines": [
            "postgres 30695     1  0 16:00 ?        00:00:00 /usr/bin/pg_autoctl run",
            "postgres 30698 30695  0 16:00 ?        00:00:00 pg_autoctl: start/stop postgres",
            "postgres 30699 30695  0 16:00 ?        00:00:00 pg_autoctl: monitor listener",
            "postgres 30729 30698  1 16:00 ?        00:00:00 /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *",
            "postgres 30840 30729  0 16:00 ?        00:00:00 postgres: pg_auto_failover monitor: logger ",
            "postgres 30875 30729  0 16:00 ?        00:00:00 postgres: pg_auto_failover monitor: checkpointer ",
            "postgres 30876 30729  0 16:00 ?        00:00:00 postgres: pg_auto_failover monitor: background writer",
            "postgres 30877 30729  0 16:00 ?        00:00:00 postgres: pg_auto_failover monitor: walwriter ",
            "postgres 30878 30729  0 16:00 ?        00:00:00 postgres: pg_auto_failover monitor: autovacuum launcher",
            "postgres 30879 30729  0 16:00 ?        00:00:00 postgres: pg_auto_failover monitor: stats collector ",
            "postgres 30880 30729  0 16:00 ?        00:00:00 postgres: pg_auto_failover monitor: pg_auto_failover monitor",
            "postgres 30881 30729  0 16:00 ?        00:00:00 postgres: pg_auto_failover monitor: logical replication launcher",
            "postgres 30898 30729  0 16:00 ?        00:00:00 postgres: pg_auto_failover monitor: pg_auto_failover monitor worker",
            "postgres 30899 30729  0 16:00 ?        00:00:00 postgres: pg_auto_failover monitor: pg_auto_failover monitor worker",
            "postgres 30900 30729  0 16:00 ?        00:00:00 postgres: pg_auto_failover monitor: autoctl_node pg_auto_failover [local] idle",
            "jomoon   30955 26424  0 16:00 pts/0    00:00:00 /bin/sh -c sudo -H -S  -p \"[sudo via ansible, key=xciqyjiwdgzbulhevzrixwgvcworzeey] password:\" -u postgres /bin/sh -c 'echo BECOME-SUCCESS-xciqyjiwdgzbulhevzrixwgvcworzeey ; /usr/bin/python /var/tmp/ansible-tmp-1647846058.3119528-46622-229900803028078/AnsiballZ_command.py' && sleep 0",
            "root     30979 30955  0 16:00 pts/0    00:00:00 sudo -H -S -p [sudo via ansible, key=xciqyjiwdgzbulhevzrixwgvcworzeey] password: -u postgres /bin/sh -c echo BECOME-SUCCESS-xciqyjiwdgzbulhevzrixwgvcworzeey ; /usr/bin/python /var/tmp/ansible-tmp-1647846058.3119528-46622-229900803028078/AnsiballZ_command.py",
            "postgres 30980 30979  0 16:00 pts/0    00:00:00 /bin/sh -c echo BECOME-SUCCESS-xciqyjiwdgzbulhevzrixwgvcworzeey ; /usr/bin/python /var/tmp/ansible-tmp-1647846058.3119528-46622-229900803028078/AnsiballZ_command.py",
            "postgres 30981 30980  0 16:00 pts/0    00:00:00 /usr/bin/python /var/tmp/ansible-tmp-1647846058.3119528-46622-229900803028078/AnsiballZ_command.py",
            "postgres 30983 30981  0 16:00 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )",
            "postgres 30984 30983  0 16:00 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )",
            "postgres 30985 30984  0 16:00 pts/0    00:00:00 ps -ef",
            "postgres 30986 30984  0 16:00 pts/0    00:00:00 grep postgres"
        ]
    }
}
2022-03-21 16:00:58,768 p=45265 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:00:58,768 p=45265 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:00:58,782 p=45265 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:00:58,792 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the current state of monitor] *******************************************************************
2022-03-21 16:00:58,825 p=45265 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:00:58,841 p=45265 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:00:58,853 p=45265 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:00:59,307 p=45265 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:00:59,318 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:00:59,355 p=45265 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": true,
        "cmd": "( psql -c \"\\l\" )",
        "delta": "0:00:00.034183",
        "end": "2022-03-21 16:00:59.731341",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-21 16:00:59.697158",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "                                    List of databases\n       Name       |  Owner   | Encoding |  Collate   |   Ctype    |   Access privileges   \n------------------+----------+----------+------------+------------+-----------------------\n pg_auto_failover | autoctl  | UTF8     | en_US.utf8 | en_US.utf8 | \n postgres         | postgres | UTF8     | en_US.utf8 | en_US.utf8 | \n template0        | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +\n                  |          |          |            |            | postgres=CTc/postgres\n template1        | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +\n                  |          |          |            |            | postgres=CTc/postgres\n(4 rows)",
        "stdout_lines": [
            "                                    List of databases",
            "       Name       |  Owner   | Encoding |  Collate   |   Ctype    |   Access privileges   ",
            "------------------+----------+----------+------------+------------+-----------------------",
            " pg_auto_failover | autoctl  | UTF8     | en_US.utf8 | en_US.utf8 | ",
            " postgres         | postgres | UTF8     | en_US.utf8 | en_US.utf8 | ",
            " template0        | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +",
            "                  |          |          |            |            | postgres=CTc/postgres",
            " template1        | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +",
            "                  |          |          |            |            | postgres=CTc/postgres",
            "(4 rows)"
        ]
    }
}
2022-03-21 16:00:59,370 p=45265 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:00:59,371 p=45265 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:00:59,384 p=45265 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:00:59,393 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : Create primiary instance. It will automatically be set by the monitor as the primary node with read-write capability (PGDATA = /var/lib/pgpsql/ha)] ***
2022-03-21 16:00:59,412 p=45265 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:00:59,442 p=45265 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:00:59,454 p=45265 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:01:06,866 p=45265 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:01:06,875 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:01:06,897 p=45265 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:01:06,934 p=45265 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "363785253599.524",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ;  pg_autoctl create postgres --pgdata \"ha\" --auth trust --ssl-self-signed --username ha-admin --dbname \"appdb\" --hostname \"co7-node01\" --pgctl /bin/pg_ctl --monitor 'postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require' )",
        "delta": "0:00:00.237427",
        "end": "2022-03-21 16:01:00.803074",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/363785253599.524",
        "start": "2022-03-21 16:01:00.565647",
        "started": 1,
        "stderr": "16:01:00 535 INFO  Using default --ssl-mode \"require\"\n16:01:00 535 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n16:01:00 535 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n16:01:00 535 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n16:01:00 535 INFO  Started pg_autoctl postgres service with pid 540\n16:01:00 540 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v\n16:01:00 535 INFO  Started pg_autoctl node-init service with pid 541\n16:01:00 541 FATAL The state file \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\" exists and there's no init in progress\n16:01:00 541 INFO  HINT: use `pg_autoctl run` to start the service.\n16:01:00 535 WARN  pg_autoctl service node-init exited with exit status 0\n16:01:00 540 INFO  Postgres controller service received signal SIGTERM, terminating\n16:01:00 535 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "16:01:00 535 INFO  Using default --ssl-mode \"require\"",
            "16:01:00 535 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "16:01:00 535 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "16:01:00 535 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "16:01:00 535 INFO  Started pg_autoctl postgres service with pid 540",
            "16:01:00 540 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v",
            "16:01:00 535 INFO  Started pg_autoctl node-init service with pid 541",
            "16:01:00 541 FATAL The state file \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\" exists and there's no init in progress",
            "16:01:00 541 INFO  HINT: use `pg_autoctl run` to start the service.",
            "16:01:00 535 WARN  pg_autoctl service node-init exited with exit status 0",
            "16:01:00 540 INFO  Postgres controller service received signal SIGTERM, terminating",
            "16:01:00 535 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 16:01:06,935 p=45265 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:01:06,942 p=45265 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:01:06,951 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of pirmary instance] *******************************************************
2022-03-21 16:01:06,971 p=45265 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:01:07,001 p=45265 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:01:07,011 p=45265 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:01:13,992 p=45265 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:01:14,001 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:01:14,023 p=45265 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:01:14,057 p=45265 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "731639986748.958",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl -q show systemd --pgdata ~postgres/ha > pgautofailover.service )",
        "delta": "0:00:00.032985",
        "end": "2022-03-21 16:01:08.044934",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/731639986748.958",
        "start": "2022-03-21 16:01:08.011949",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 16:01:14,058 p=45265 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:01:14,069 p=45265 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:01:14,084 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : Copy primary systemd service file of primary instance] *************************************************
2022-03-21 16:01:14,104 p=45265 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:01:14,133 p=45265 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:01:14,145 p=45265 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:01:14,586 p=45265 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 16:01:14,596 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start primary systemd service of primary instance] ******************************************
2022-03-21 16:01:14,617 p=45265 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:01:14,647 p=45265 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:01:14,660 p=45265 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:01:15,325 p=45265 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:01:15,335 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 16:01:15,356 p=45265 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:01:15,386 p=45265 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:01:15,399 p=45265 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:01:15,832 p=45265 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 16:01:15,843 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the state of primary instance] ******************************************************************
2022-03-21 16:01:15,863 p=45265 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:01:15,893 p=45265 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:01:15,904 p=45265 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:01:16,392 p=45265 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:01:16,402 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:01:16,437 p=45265 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:01:16,484 p=45265 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "changed": true,
        "cmd": "( source ~/.bash_profile ; pg_autoctl show state )",
        "delta": "0:00:00.066544",
        "end": "2022-03-21 16:01:16.819092",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-21 16:01:16.752548",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State\n-------+-------+-----------------+-----------+-----------+---------------------+--------------------\nnode_1 |     1 | co7-node01:5432 | 0/1665598 |        no |              single |            draining\nnode_2 |     2 | co7-node02:5432 |       0/0 |        no |        wait_standby |        wait_standby\nnode_3 |     3 | co7-node03:5432 |       0/0 |        no |        wait_standby |        wait_standby",
        "stdout_lines": [
            "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State",
            "-------+-------+-----------------+-----------+-----------+---------------------+--------------------",
            "node_1 |     1 | co7-node01:5432 | 0/1665598 |        no |              single |            draining",
            "node_2 |     2 | co7-node02:5432 |       0/0 |        no |        wait_standby |        wait_standby",
            "node_3 |     3 | co7-node03:5432 |       0/0 |        no |        wait_standby |        wait_standby"
        ]
    }
}
2022-03-21 16:01:16,486 p=45265 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:01:16,486 p=45265 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:01:16,497 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : Create secondary instance. It will automatically be set by the monitor as the secondary  node with read-write capability (PGDATA = /var/lib/pgpsql/ha)] ***
2022-03-21 16:01:16,517 p=45265 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:01:16,534 p=45265 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:07:26,372 p=45265 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"ansible_job_id": "156293738109.6023", "changed": false, "child_pid": 6027, "finished": 1, "msg": "Timeout exceeded", "results_file": "/var/lib/pgsql/.ansible_async/156293738109.6023", "started": 1, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2022-03-21 16:07:27,604 p=45265 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"ansible_job_id": "674339048306.6769", "changed": false, "child_pid": 6773, "finished": 1, "msg": "Timeout exceeded", "results_file": "/var/lib/pgsql/.ansible_async/674339048306.6769", "started": 1, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2022-03-21 16:07:27,612 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:07:27,634 p=45265 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:07:27,644 p=45265 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:07:27,655 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of secondary instance] *****************************************************
2022-03-21 16:07:27,676 p=45265 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:07:27,688 p=45265 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:07:27,698 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:07:27,718 p=45265 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:07:27,729 p=45265 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:07:27,740 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : Copy secondary systemd service file of secondary instance] *********************************************
2022-03-21 16:07:27,760 p=45265 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:07:27,772 p=45265 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:07:27,782 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start secondary systemd service of secondary instance] **************************************
2022-03-21 16:07:27,803 p=45265 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:07:27,812 p=45265 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:07:27,823 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 16:07:27,844 p=45265 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:07:27,855 p=45265 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:07:27,865 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the state of secondary instance] ****************************************************************
2022-03-21 16:07:27,886 p=45265 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:07:27,896 p=45265 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:07:27,909 p=45265 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:07:27,929 p=45265 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:07:27,939 p=45265 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:07:27,971 p=45265 u=moonja n=ansible | PLAY RECAP *************************************************************************************************************************
2022-03-21 16:07:27,972 p=45265 u=moonja n=ansible | co7-master                 : ok=28   changed=9    unreachable=0    failed=0    skipped=18   rescued=0    ignored=0   
2022-03-21 16:07:27,972 p=45265 u=moonja n=ansible | co7-node01                 : ok=22   changed=6    unreachable=0    failed=0    skipped=24   rescued=0    ignored=0   
2022-03-21 16:07:27,972 p=45265 u=moonja n=ansible | co7-node02                 : ok=12   changed=1    unreachable=0    failed=1    skipped=25   rescued=0    ignored=0   
2022-03-21 16:07:27,972 p=45265 u=moonja n=ansible | co7-node03                 : ok=12   changed=1    unreachable=0    failed=1    skipped=25   rescued=0    ignored=0   
2022-03-21 16:17:40,289 p=50178 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from 
ansible-core in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 16:17:40,538 p=50178 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 
2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 16:17:40,543 p=50178 u=moonja n=ansible | [WARNING]: While constructing a mapping from /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/install.yml, line 307,
column 3, found a duplicate dict key (when). Using last defined value only.

2022-03-21 16:17:40,593 p=50178 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/upgrade.yml is empty and had no tasks to include

2022-03-21 16:17:40,607 p=50178 u=moonja n=ansible | PLAY [all] *************************************************************************************************************************
2022-03-21 16:17:40,637 p=50178 u=moonja n=ansible | TASK [Gathering Facts] *************************************************************************************************************
2022-03-21 16:17:42,840 p=50178 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 16:17:42,882 p=50178 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 16:17:42,909 p=50178 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 16:17:43,892 p=50178 u=moonja n=ansible | ok: [co7-master]
2022-03-21 16:17:43,908 p=50178 u=moonja n=ansible | TASK [pgfailover-postgres : Disable port from public zone] *************************************************************************
2022-03-21 16:17:44,808 p=50178 u=moonja n=ansible | changed: [co7-node02] => (item=5432)
2022-03-21 16:17:44,815 p=50178 u=moonja n=ansible | changed: [co7-master] => (item=5432)
2022-03-21 16:17:44,841 p=50178 u=moonja n=ansible | changed: [co7-node03] => (item=5432)
2022-03-21 16:17:44,841 p=50178 u=moonja n=ansible | changed: [co7-node01] => (item=5432)
2022-03-21 16:17:44,852 p=50178 u=moonja n=ansible | TASK [pgfailover-postgres : Disable IP Addresses in whitelist] *********************************************************************
2022-03-21 16:17:45,524 p=50178 u=moonja n=ansible | changed: [co7-master] => (item=co7-master)
2022-03-21 16:17:45,537 p=50178 u=moonja n=ansible | changed: [co7-node02] => (item=co7-master)
2022-03-21 16:17:45,544 p=50178 u=moonja n=ansible | changed: [co7-node01] => (item=co7-master)
2022-03-21 16:17:45,619 p=50178 u=moonja n=ansible | changed: [co7-node03] => (item=co7-master)
2022-03-21 16:17:46,132 p=50178 u=moonja n=ansible | changed: [co7-master] => (item=co7-node01)
2022-03-21 16:17:46,145 p=50178 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node01)
2022-03-21 16:17:46,175 p=50178 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node01)
2022-03-21 16:17:46,229 p=50178 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node01)
2022-03-21 16:17:46,761 p=50178 u=moonja n=ansible | changed: [co7-master] => (item=co7-node02)
2022-03-21 16:17:46,788 p=50178 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node02)
2022-03-21 16:17:46,808 p=50178 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node02)
2022-03-21 16:17:46,877 p=50178 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node02)
2022-03-21 16:17:47,371 p=50178 u=moonja n=ansible | changed: [co7-master] => (item=co7-node03)
2022-03-21 16:17:47,400 p=50178 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node03)
2022-03-21 16:17:47,422 p=50178 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node03)
2022-03-21 16:17:47,487 p=50178 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node03)
2022-03-21 16:17:47,497 p=50178 u=moonja n=ansible | TASK [pgfailover-postgres : Bounce firewalld] **************************************************************************************
2022-03-21 16:17:49,445 p=50178 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 16:17:49,451 p=50178 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:17:49,456 p=50178 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 16:17:49,468 p=50178 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:17:49,477 p=50178 u=moonja n=ansible | TASK [pgfailover-postgres : Stop and disable firewalld.] ***************************************************************************
2022-03-21 16:17:50,933 p=50178 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:17:50,954 p=50178 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 16:17:50,969 p=50178 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 16:17:51,003 p=50178 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:17:51,013 p=50178 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 16:17:51,059 p=50178 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:17:51,060 p=50178 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:17:51,071 p=50178 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:17:51,819 p=50178 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:17:51,828 p=50178 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 16:17:51,861 p=50178 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:17:51,884 p=50178 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:17:51,896 p=50178 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:17:52,436 p=50178 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:17:52,446 p=50178 u=moonja n=ansible | TASK [pgfailover-postgres : Getting process IDs of the pg_autoctl process] *********************************************************
2022-03-21 16:17:53,161 p=50178 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 16:17:53,165 p=50178 u=moonja n=ansible | ok: [co7-master]
2022-03-21 16:17:53,168 p=50178 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 16:17:53,172 p=50178 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 16:17:53,182 p=50178 u=moonja n=ansible | TASK [pgfailover-postgres : Stop pgautofailover service of systemd] ****************************************************************
2022-03-21 16:17:53,248 p=50178 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:17:53,261 p=50178 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:17:54,688 p=50178 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:17:54,946 p=50178 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:17:54,957 p=50178 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] ************************************************************************
2022-03-21 16:17:54,977 p=50178 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:17:54,993 p=50178 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:17:55,610 p=50178 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 16:17:55,611 p=50178 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 16:17:55,620 p=50178 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start secondary systemd service of secondary instance] **************************************
2022-03-21 16:17:55,640 p=50178 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:17:55,657 p=50178 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:17:56,334 p=50178 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": false, "msg": "Could not find the requested service pgautofailover: host"}
2022-03-21 16:17:56,335 p=50178 u=moonja n=ansible | ...ignoring
2022-03-21 16:17:56,335 p=50178 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": false, "msg": "Could not find the requested service pgautofailover: host"}
2022-03-21 16:17:56,335 p=50178 u=moonja n=ansible | ...ignoring
2022-03-21 16:17:56,343 p=50178 u=moonja n=ansible | TASK [pgfailover-postgres : Delete secondary systemd service file of secondary instance] *******************************************
2022-03-21 16:17:56,366 p=50178 u=moonja n=ansible | skipping: [co7-master] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 16:17:56,368 p=50178 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 16:17:56,371 p=50178 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 16:17:56,375 p=50178 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.config) 
2022-03-21 16:17:56,379 p=50178 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 16:17:56,380 p=50178 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql) 
2022-03-21 16:17:56,381 p=50178 u=moonja n=ansible | skipping: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 16:17:56,383 p=50178 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 16:17:56,385 p=50178 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 16:17:56,388 p=50178 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.config) 
2022-03-21 16:17:56,391 p=50178 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 16:17:56,395 p=50178 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql) 
2022-03-21 16:17:57,097 p=50178 u=moonja n=ansible | ok: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 16:17:57,098 p=50178 u=moonja n=ansible | ok: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 16:17:57,532 p=50178 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 16:17:57,536 p=50178 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 16:17:57,997 p=50178 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 16:17:57,998 p=50178 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 16:17:58,511 p=50178 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.config)
2022-03-21 16:17:58,512 p=50178 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.config)
2022-03-21 16:17:58,909 p=50178 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.ansible)
2022-03-21 16:17:58,911 p=50178 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.ansible)
2022-03-21 16:17:59,319 p=50178 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql)
2022-03-21 16:17:59,320 p=50178 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql)
2022-03-21 16:17:59,332 p=50178 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] ************************************************************************
2022-03-21 16:17:59,352 p=50178 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:17:59,382 p=50178 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:17:59,391 p=50178 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:17:59,840 p=50178 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:17:59,851 p=50178 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start primary systemd service of primary instance] ******************************************
2022-03-21 16:17:59,870 p=50178 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:17:59,900 p=50178 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:17:59,911 p=50178 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:18:00,610 p=50178 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:18:00,620 p=50178 u=moonja n=ansible | TASK [pgfailover-postgres : Delete primary systemd service file of secondary instance] *********************************************
2022-03-21 16:18:00,641 p=50178 u=moonja n=ansible | skipping: [co7-master] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 16:18:00,646 p=50178 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 16:18:00,646 p=50178 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 16:18:00,654 p=50178 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.config) 
2022-03-21 16:18:00,655 p=50178 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 16:18:00,655 p=50178 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql) 
2022-03-21 16:18:00,674 p=50178 u=moonja n=ansible | skipping: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 16:18:00,675 p=50178 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 16:18:00,681 p=50178 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 16:18:00,683 p=50178 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.config) 
2022-03-21 16:18:00,684 p=50178 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 16:18:00,684 p=50178 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql) 
2022-03-21 16:18:00,688 p=50178 u=moonja n=ansible | skipping: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 16:18:00,691 p=50178 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 16:18:00,694 p=50178 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 16:18:00,696 p=50178 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.config) 
2022-03-21 16:18:00,699 p=50178 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 16:18:00,699 p=50178 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql) 
2022-03-21 16:18:01,125 p=50178 u=moonja n=ansible | changed: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 16:18:01,532 p=50178 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 16:18:01,955 p=50178 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 16:18:02,387 p=50178 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.config)
2022-03-21 16:18:02,813 p=50178 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.ansible)
2022-03-21 16:18:03,985 p=50178 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql)
2022-03-21 16:18:03,997 p=50178 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] ************************************************************************
2022-03-21 16:18:04,030 p=50178 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:18:04,045 p=50178 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:18:04,058 p=50178 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:18:04,540 p=50178 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:18:04,550 p=50178 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start systemd service of monitor instance] **************************************************
2022-03-21 16:18:04,584 p=50178 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:18:04,599 p=50178 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:18:04,610 p=50178 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:18:05,450 p=50178 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:18:05,460 p=50178 u=moonja n=ansible | TASK [pgfailover-postgres : Delete primary systemd service file of secondary instance] *********************************************
2022-03-21 16:18:05,498 p=50178 u=moonja n=ansible | skipping: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 16:18:05,499 p=50178 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 16:18:05,502 p=50178 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 16:18:05,506 p=50178 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.config) 
2022-03-21 16:18:05,510 p=50178 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 16:18:05,511 p=50178 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql) 
2022-03-21 16:18:05,512 p=50178 u=moonja n=ansible | skipping: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 16:18:05,513 p=50178 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 16:18:05,516 p=50178 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 16:18:05,521 p=50178 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.config) 
2022-03-21 16:18:05,522 p=50178 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 16:18:05,523 p=50178 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql) 
2022-03-21 16:18:05,527 p=50178 u=moonja n=ansible | skipping: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 16:18:05,530 p=50178 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 16:18:05,532 p=50178 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 16:18:05,535 p=50178 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.config) 
2022-03-21 16:18:05,538 p=50178 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 16:18:05,538 p=50178 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql) 
2022-03-21 16:18:05,937 p=50178 u=moonja n=ansible | changed: [co7-master] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 16:18:06,466 p=50178 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 16:18:07,055 p=50178 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 16:18:07,603 p=50178 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/.config)
2022-03-21 16:18:08,089 p=50178 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/.ansible)
2022-03-21 16:18:08,719 p=50178 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql)
2022-03-21 16:18:08,732 p=50178 u=moonja n=ansible | TASK [pgfailover-postgres : Uninstall VMware Postgres on all hosts as root] ********************************************************
2022-03-21 16:18:31,688 p=50178 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:18:31,914 p=50178 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 16:18:32,141 p=50178 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 16:18:37,232 p=50178 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:18:37,244 p=50178 u=moonja n=ansible | TASK [pgfailover-postgres : Copy the vmwawre-postgres rpm file to all hosts in cluster] ********************************************
2022-03-21 16:18:37,710 p=50178 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:18:37,726 p=50178 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 16:18:37,737 p=50178 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:18:37,740 p=50178 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 16:18:37,785 p=50178 u=moonja n=ansible | PLAY RECAP *************************************************************************************************************************
2022-03-21 16:18:37,785 p=50178 u=moonja n=ansible | co7-master                 : ok=14   changed=12   unreachable=0    failed=0    skipped=6    rescued=0    ignored=0   
2022-03-21 16:18:37,785 p=50178 u=moonja n=ansible | co7-node01                 : ok=12   changed=10   unreachable=0    failed=0    skipped=8    rescued=0    ignored=0   
2022-03-21 16:18:37,785 p=50178 u=moonja n=ansible | co7-node02                 : ok=11   changed=8    unreachable=0    failed=0    skipped=9    rescued=0    ignored=1   
2022-03-21 16:18:37,786 p=50178 u=moonja n=ansible | co7-node03                 : ok=11   changed=8    unreachable=0    failed=0    skipped=9    rescued=0    ignored=1   
2022-03-21 16:19:51,737 p=53431 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from 
ansible-core in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 16:19:51,990 p=53431 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 
2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 16:19:51,995 p=53431 u=moonja n=ansible | [WARNING]: While constructing a mapping from /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/install.yml, line 307,
column 3, found a duplicate dict key (when). Using last defined value only.

2022-03-21 16:19:52,044 p=53431 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/upgrade.yml is empty and had no tasks to include

2022-03-21 16:19:52,058 p=53431 u=moonja n=ansible | PLAY [all] *************************************************************************************************************************
2022-03-21 16:19:52,088 p=53431 u=moonja n=ansible | TASK [Gathering Facts] *************************************************************************************************************
2022-03-21 16:19:54,271 p=53431 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 16:19:54,296 p=53431 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 16:19:54,324 p=53431 u=moonja n=ansible | ok: [co7-master]
2022-03-21 16:19:55,329 p=53431 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 16:19:55,346 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : Install rpm packages of dependenies to need installing packages regarding kubernates] ******************
2022-03-21 16:19:56,322 p=53431 u=moonja n=ansible | ok: [co7-node02] => (item=firewalld)
2022-03-21 16:19:56,329 p=53431 u=moonja n=ansible | ok: [co7-node01] => (item=firewalld)
2022-03-21 16:19:56,371 p=53431 u=moonja n=ansible | ok: [co7-node03] => (item=firewalld)
2022-03-21 16:19:56,391 p=53431 u=moonja n=ansible | ok: [co7-master] => (item=firewalld)
2022-03-21 16:19:57,051 p=53431 u=moonja n=ansible | ok: [co7-node01] => (item=python3)
2022-03-21 16:19:57,056 p=53431 u=moonja n=ansible | ok: [co7-node02] => (item=python3)
2022-03-21 16:19:57,109 p=53431 u=moonja n=ansible | ok: [co7-node03] => (item=python3)
2022-03-21 16:19:57,151 p=53431 u=moonja n=ansible | ok: [co7-master] => (item=python3)
2022-03-21 16:19:57,922 p=53431 u=moonja n=ansible | ok: [co7-node01] => (item=python3-libselinux)
2022-03-21 16:19:57,944 p=53431 u=moonja n=ansible | ok: [co7-node02] => (item=python3-libselinux)
2022-03-21 16:19:57,994 p=53431 u=moonja n=ansible | ok: [co7-node03] => (item=python3-libselinux)
2022-03-21 16:19:58,010 p=53431 u=moonja n=ansible | ok: [co7-master] => (item=python3-libselinux)
2022-03-21 16:19:58,021 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : Start and enable firewalld.] ***************************************************************************
2022-03-21 16:19:59,319 p=53431 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 16:19:59,320 p=53431 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 16:19:59,331 p=53431 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:20:00,810 p=53431 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:20:00,820 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : Open Firewall] *****************************************************************************************
2022-03-21 16:20:01,713 p=53431 u=moonja n=ansible | changed: [co7-node01] => (item=5432)
2022-03-21 16:20:01,714 p=53431 u=moonja n=ansible | changed: [co7-node02] => (item=5432)
2022-03-21 16:20:01,715 p=53431 u=moonja n=ansible | changed: [co7-master] => (item=5432)
2022-03-21 16:20:01,722 p=53431 u=moonja n=ansible | changed: [co7-node03] => (item=5432)
2022-03-21 16:20:01,732 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : Whitelist of Ip addresses] *****************************************************************************
2022-03-21 16:20:02,539 p=53431 u=moonja n=ansible | changed: [co7-node02] => (item=co7-master)
2022-03-21 16:20:02,540 p=53431 u=moonja n=ansible | changed: [co7-master] => (item=co7-master)
2022-03-21 16:20:02,584 p=53431 u=moonja n=ansible | changed: [co7-node01] => (item=co7-master)
2022-03-21 16:20:02,587 p=53431 u=moonja n=ansible | changed: [co7-node03] => (item=co7-master)
2022-03-21 16:20:03,150 p=53431 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node01)
2022-03-21 16:20:03,152 p=53431 u=moonja n=ansible | changed: [co7-master] => (item=co7-node01)
2022-03-21 16:20:03,183 p=53431 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node01)
2022-03-21 16:20:03,196 p=53431 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node01)
2022-03-21 16:20:03,748 p=53431 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node02)
2022-03-21 16:20:03,783 p=53431 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node02)
2022-03-21 16:20:03,794 p=53431 u=moonja n=ansible | changed: [co7-master] => (item=co7-node02)
2022-03-21 16:20:03,840 p=53431 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node02)
2022-03-21 16:20:04,425 p=53431 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node03)
2022-03-21 16:20:04,452 p=53431 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node03)
2022-03-21 16:20:04,805 p=53431 u=moonja n=ansible | changed: [co7-master] => (item=co7-node03)
2022-03-21 16:20:04,814 p=53431 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node03)
2022-03-21 16:20:04,824 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : Bounce firewalld] **************************************************************************************
2022-03-21 16:20:06,482 p=53431 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:20:06,498 p=53431 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 16:20:06,506 p=53431 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:20:06,512 p=53431 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 16:20:06,522 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : Copy the vmwawre-postgres rpm file to all hosts in cluster] ********************************************
2022-03-21 16:20:08,086 p=53431 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:20:08,086 p=53431 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 16:20:08,093 p=53431 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 16:20:08,702 p=53431 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:20:08,712 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : Install dependency rpm package for pgautofailover] *****************************************************
2022-03-21 16:20:15,473 p=53431 u=moonja n=ansible | ok: [co7-master] => (item=python2-psutil)
2022-03-21 16:20:15,512 p=53431 u=moonja n=ansible | ok: [co7-node01] => (item=python2-psutil)
2022-03-21 16:20:15,528 p=53431 u=moonja n=ansible | ok: [co7-node03] => (item=python2-psutil)
2022-03-21 16:20:15,529 p=53431 u=moonja n=ansible | ok: [co7-node02] => (item=python2-psutil)
2022-03-21 16:20:15,539 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : Install VMware Postgres on all hosts as root] **********************************************************
2022-03-21 16:20:43,634 p=53431 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:20:43,834 p=53431 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 16:20:45,876 p=53431 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:20:47,697 p=53431 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 16:20:47,708 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 16:20:47,756 p=53431 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:20:47,757 p=53431 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:20:47,768 p=53431 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:20:48,480 p=53431 u=moonja n=ansible | [WARNING]: Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues
when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually

2022-03-21 16:20:48,480 p=53431 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:20:48,491 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:20:48,528 p=53431 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "pg_autoctl version 1.4.2\npg_autoctl extension version 1.4\ncompiled with PostgreSQL 11.12 (VMware Postgres 11.12.0) on x86_64-redhat-linux-gnu, compiled by gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-44), 64-bit\ncompatible with Postgres 10, 11, 12, and 13"
}
2022-03-21 16:20:48,544 p=53431 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:20:48,545 p=53431 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:20:48,558 p=53431 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:20:48,601 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 16:20:48,636 p=53431 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:20:48,654 p=53431 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:20:48,668 p=53431 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:20:49,302 p=53431 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:20:49,314 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:20:49,351 p=53431 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "pg_ctl (PostgreSQL) 11.12 (VMware Postgres 11.12.0)"
}
2022-03-21 16:20:49,366 p=53431 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:20:49,368 p=53431 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:20:49,378 p=53431 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:20:49,388 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : Getting process IDs of the pg_autoctl process] *********************************************************
2022-03-21 16:20:50,077 p=53431 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 16:20:50,078 p=53431 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 16:20:50,078 p=53431 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 16:20:50,078 p=53431 u=moonja n=ansible | ok: [co7-master]
2022-03-21 16:20:50,086 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : Printing the process IDs obtained] *********************************************************************
2022-03-21 16:20:50,133 p=53431 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 16:20:50,139 p=53431 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 16:20:50,153 p=53431 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 16:20:50,168 p=53431 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 16:20:50,179 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : Stop pgautofailover service of systemd] ****************************************************************
2022-03-21 16:20:50,226 p=53431 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:20:50,228 p=53431 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:20:50,243 p=53431 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:20:50,261 p=53431 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:20:50,271 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:20:50,305 p=53431 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 16:20:50,323 p=53431 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 16:20:50,324 p=53431 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 16:20:50,336 p=53431 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 16:20:50,347 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : Create the monitor node] *******************************************************************************
2022-03-21 16:20:50,382 p=53431 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:20:50,397 p=53431 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:20:50,411 p=53431 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:21:13,097 p=53431 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:21:13,106 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:21:13,173 p=53431 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "ansible_job_id": "670426044247.7325",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl create monitor --auth trust --ssl-self-signed --pgdata monitor )",
        "delta": "0:00:19.356767",
        "end": "2022-03-21 16:21:10.842001",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/670426044247.7325",
        "start": "2022-03-21 16:20:51.485234",
        "started": 1,
        "stderr": "16:20:51 7335 INFO  Using default --ssl-mode \"require\"\n16:20:51 7335 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n16:20:51 7335 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n16:20:51 7335 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n16:20:51 7335 INFO  Initialising a PostgreSQL cluster at \"monitor\"\n16:20:51 7335 INFO  /bin/pg_ctl initdb -s -D monitor --option '--auth=trust'\n16:20:54 7335 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/monitor/server.crt -keyout /var/lib/pgsql/monitor/server.key -subj \"/CN=co7-master\"\n16:20:54 7335 INFO  Started pg_autoctl postgres service with pid 7351\n16:20:54 7351 INFO   /usr/bin/pg_autoctl do service postgres --pgdata monitor -v\n16:20:54 7335 INFO  Started pg_autoctl monitor-init service with pid 7352\n16:20:54 7352 INFO  Granting connection privileges on 192.168.0.0/24\n16:20:56 7388 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\n16:20:57 7351 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/monitor\" on port 5432 with pid 7388\n16:21:06 7352 WARN  NOTICE:  installing required extension \"btree_gist\"\n16:21:07 7352 INFO  Your pg_auto_failover monitor instance is now ready on port 5432.\n16:21:07 7352 INFO  Monitor has been successfully initialized.\n16:21:07 7335 WARN  pg_autoctl service monitor-init exited with exit status 0\n16:21:07 7351 INFO  Postgres controller service received signal SIGTERM, terminating\n16:21:07 7351 INFO  Stopping pg_autoctl postgres service\n16:21:07 7351 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/monitor --wait stop --mode fast\n16:21:07 7335 INFO  Waiting for subprocesses to terminate.\n16:21:10 7335 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "16:20:51 7335 INFO  Using default --ssl-mode \"require\"",
            "16:20:51 7335 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "16:20:51 7335 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "16:20:51 7335 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "16:20:51 7335 INFO  Initialising a PostgreSQL cluster at \"monitor\"",
            "16:20:51 7335 INFO  /bin/pg_ctl initdb -s -D monitor --option '--auth=trust'",
            "16:20:54 7335 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/monitor/server.crt -keyout /var/lib/pgsql/monitor/server.key -subj \"/CN=co7-master\"",
            "16:20:54 7335 INFO  Started pg_autoctl postgres service with pid 7351",
            "16:20:54 7351 INFO   /usr/bin/pg_autoctl do service postgres --pgdata monitor -v",
            "16:20:54 7335 INFO  Started pg_autoctl monitor-init service with pid 7352",
            "16:20:54 7352 INFO  Granting connection privileges on 192.168.0.0/24",
            "16:20:56 7388 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *",
            "16:20:57 7351 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/monitor\" on port 5432 with pid 7388",
            "16:21:06 7352 WARN  NOTICE:  installing required extension \"btree_gist\"",
            "16:21:07 7352 INFO  Your pg_auto_failover monitor instance is now ready on port 5432.",
            "16:21:07 7352 INFO  Monitor has been successfully initialized.",
            "16:21:07 7335 WARN  pg_autoctl service monitor-init exited with exit status 0",
            "16:21:07 7351 INFO  Postgres controller service received signal SIGTERM, terminating",
            "16:21:07 7351 INFO  Stopping pg_autoctl postgres service",
            "16:21:07 7351 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/monitor --wait stop --mode fast",
            "16:21:07 7335 INFO  Waiting for subprocesses to terminate.",
            "16:21:10 7335 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 16:21:13,186 p=53431 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:21:13,187 p=53431 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:21:13,200 p=53431 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:21:13,209 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of monitor instance] *******************************************************
2022-03-21 16:21:13,256 p=53431 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:21:13,256 p=53431 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:21:13,267 p=53431 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:21:19,816 p=53431 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:21:19,826 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : Copy systemd service file of monitor instance] *********************************************************
2022-03-21 16:21:19,860 p=53431 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:21:19,874 p=53431 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:21:19,886 p=53431 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:21:20,352 p=53431 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:21:20,363 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start systemd service of monitor instance] **************************************************
2022-03-21 16:21:20,395 p=53431 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:21:20,410 p=53431 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:21:20,421 p=53431 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:21:21,670 p=53431 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:21:21,683 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:21:21,723 p=53431 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": true,
        "enabled": true,
        "failed": false,
        "name": "pgautofailover",
        "state": "started",
        "status": {
            "ActiveEnterTimestampMonotonic": "0",
            "ActiveExitTimestampMonotonic": "0",
            "ActiveState": "inactive",
            "After": "basic.target systemd-journald.socket system.slice -.mount",
            "AllowIsolate": "no",
            "AmbientCapabilities": "0",
            "AssertResult": "no",
            "AssertTimestampMonotonic": "0",
            "Before": "shutdown.target",
            "BlockIOAccounting": "no",
            "BlockIOWeight": "18446744073709551615",
            "CPUAccounting": "no",
            "CPUQuotaPerSecUSec": "infinity",
            "CPUSchedulingPolicy": "0",
            "CPUSchedulingPriority": "0",
            "CPUSchedulingResetOnFork": "no",
            "CPUShares": "18446744073709551615",
            "CanIsolate": "no",
            "CanReload": "no",
            "CanStart": "yes",
            "CanStop": "yes",
            "CapabilityBoundingSet": "18446744073709551615",
            "CollectMode": "inactive",
            "ConditionResult": "no",
            "ConditionTimestampMonotonic": "0",
            "Conflicts": "shutdown.target",
            "ControlPID": "0",
            "DefaultDependencies": "yes",
            "Delegate": "no",
            "Description": "pg_auto_failover",
            "DevicePolicy": "auto",
            "Environment": "PGDATA=/var/lib/pgsql/monitor",
            "ExecMainCode": "0",
            "ExecMainExitTimestampMonotonic": "0",
            "ExecMainPID": "0",
            "ExecMainStartTimestampMonotonic": "0",
            "ExecMainStatus": "0",
            "ExecStart": "{ path=/usr/bin/pg_autoctl ; argv[]=/usr/bin/pg_autoctl run ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }",
            "FailureAction": "none",
            "FileDescriptorStoreMax": "0",
            "FragmentPath": "/etc/systemd/system/pgautofailover.service",
            "GuessMainPID": "yes",
            "IOScheduling": "0",
            "Id": "pgautofailover.service",
            "IgnoreOnIsolate": "no",
            "IgnoreOnSnapshot": "no",
            "IgnoreSIGPIPE": "yes",
            "InactiveEnterTimestampMonotonic": "0",
            "InactiveExitTimestampMonotonic": "0",
            "JobTimeoutAction": "none",
            "JobTimeoutUSec": "0",
            "KillMode": "control-group",
            "KillSignal": "15",
            "LimitAS": "18446744073709551615",
            "LimitCORE": "18446744073709551615",
            "LimitCPU": "18446744073709551615",
            "LimitDATA": "18446744073709551615",
            "LimitFSIZE": "18446744073709551615",
            "LimitLOCKS": "18446744073709551615",
            "LimitMEMLOCK": "65536",
            "LimitMSGQUEUE": "819200",
            "LimitNICE": "0",
            "LimitNOFILE": "4096",
            "LimitNPROC": "47321",
            "LimitRSS": "18446744073709551615",
            "LimitRTPRIO": "0",
            "LimitRTTIME": "18446744073709551615",
            "LimitSIGPENDING": "47321",
            "LimitSTACK": "18446744073709551615",
            "LoadState": "loaded",
            "MainPID": "0",
            "MemoryAccounting": "no",
            "MemoryCurrent": "18446744073709551615",
            "MemoryLimit": "18446744073709551615",
            "MountFlags": "0",
            "Names": "pgautofailover.service",
            "NeedDaemonReload": "no",
            "Nice": "0",
            "NoNewPrivileges": "no",
            "NonBlocking": "no",
            "NotifyAccess": "none",
            "OOMScoreAdjust": "0",
            "OnFailureJobMode": "replace",
            "PermissionsStartOnly": "no",
            "PrivateDevices": "no",
            "PrivateNetwork": "no",
            "PrivateTmp": "no",
            "ProtectHome": "no",
            "ProtectSystem": "no",
            "RefuseManualStart": "no",
            "RefuseManualStop": "no",
            "RemainAfterExit": "no",
            "Requires": "basic.target system.slice -.mount",
            "RequiresMountsFor": "/var/lib/pgsql",
            "Restart": "always",
            "RestartUSec": "100ms",
            "Result": "success",
            "RootDirectoryStartOnly": "no",
            "RuntimeDirectoryMode": "0755",
            "SameProcessGroup": "no",
            "SecureBits": "0",
            "SendSIGHUP": "no",
            "SendSIGKILL": "yes",
            "Slice": "system.slice",
            "StandardError": "inherit",
            "StandardInput": "null",
            "StandardOutput": "journal",
            "StartLimitAction": "none",
            "StartLimitBurst": "0",
            "StartLimitInterval": "10000000",
            "StartupBlockIOWeight": "18446744073709551615",
            "StartupCPUShares": "18446744073709551615",
            "StatusErrno": "0",
            "StopWhenUnneeded": "no",
            "SubState": "dead",
            "SyslogLevelPrefix": "yes",
            "SyslogPriority": "30",
            "SystemCallErrorNumber": "0",
            "TTYReset": "no",
            "TTYVHangup": "no",
            "TTYVTDisallocate": "no",
            "TasksAccounting": "no",
            "TasksCurrent": "18446744073709551615",
            "TasksMax": "18446744073709551615",
            "TimeoutStartUSec": "1min 30s",
            "TimeoutStopUSec": "1min 30s",
            "TimerSlackNSec": "50000",
            "Transient": "no",
            "Type": "simple",
            "UMask": "0022",
            "UnitFilePreset": "disabled",
            "UnitFileState": "disabled",
            "User": "postgres",
            "WatchdogTimestampMonotonic": "0",
            "WatchdogUSec": "0",
            "WorkingDirectory": "/var/lib/pgsql"
        }
    }
}
2022-03-21 16:21:21,739 p=53431 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:21:21,739 p=53431 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:21:21,752 p=53431 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:21:21,761 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 16:21:21,808 p=53431 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:21:21,810 p=53431 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:21:21,820 p=53431 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:21:22,581 p=53431 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:21:22,593 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the current state of monitor instance] **********************************************************
2022-03-21 16:21:22,642 p=53431 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:21:22,643 p=53431 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:21:22,654 p=53431 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:21:23,137 p=53431 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:21:23,149 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:21:23,224 p=53431 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": true,
        "cmd": "( ps -ef | grep postgres )",
        "delta": "0:00:00.035776",
        "end": "2022-03-21 16:21:23.545482",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-21 16:21:23.509706",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "postgres  8530     1  0 16:21 ?        00:00:00 /usr/bin/pg_autoctl run\npostgres  8533  8530  0 16:21 ?        00:00:00 pg_autoctl: start/stop postgres\npostgres  8534  8530  0 16:21 ?        00:00:00 pg_autoctl: monitor listener\npostgres  8564  8533  3 16:21 ?        00:00:00 /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\npostgres  8607  8564  0 16:21 ?        00:00:00 postgres: pg_auto_failover monitor: logger   \npostgres  8611  8564  0 16:21 ?        00:00:00 postgres: pg_auto_failover monitor: checkpointer   \npostgres  8612  8564  0 16:21 ?        00:00:00 postgres: pg_auto_failover monitor: background writer  \npostgres  8613  8564  0 16:21 ?        00:00:00 postgres: pg_auto_failover monitor: walwriter   \npostgres  8614  8564  0 16:21 ?        00:00:00 postgres: pg_auto_failover monitor: autovacuum launcher  \npostgres  8615  8564  0 16:21 ?        00:00:00 postgres: pg_auto_failover monitor: stats collector  \npostgres  8616  8564  0 16:21 ?        00:00:00 postgres: pg_auto_failover monitor: pg_auto_failover monitor  \npostgres  8617  8564  0 16:21 ?        00:00:00 postgres: pg_auto_failover monitor: logical replication launcher  \npostgres  8618  8564  0 16:21 ?        00:00:00 postgres: pg_auto_failover monitor: pg_auto_failover monitor worker  \npostgres  8619  8564  0 16:21 ?        00:00:00 postgres: pg_auto_failover monitor: autoctl_node pg_auto_failover [local] idle\npostgres  8620  8564  0 16:21 ?        00:00:00 postgres: pg_auto_failover monitor: pg_auto_failover monitor worker  \njomoon    8792  3629  0 16:21 pts/0    00:00:00 /bin/sh -c sudo -H -S  -p \"[sudo via ansible, key=loqfskpotitrqiughlyhlaqknzwduogk] password:\" -u postgres /bin/sh -c 'echo BECOME-SUCCESS-loqfskpotitrqiughlyhlaqknzwduogk ; /usr/bin/python /var/tmp/ansible-tmp-1647847282.7130601-54964-173071772392752/AnsiballZ_command.py' && sleep 0\nroot      8816  8792  0 16:21 pts/0    00:00:00 sudo -H -S -p [sudo via ansible, key=loqfskpotitrqiughlyhlaqknzwduogk] password: -u postgres /bin/sh -c echo BECOME-SUCCESS-loqfskpotitrqiughlyhlaqknzwduogk ; /usr/bin/python /var/tmp/ansible-tmp-1647847282.7130601-54964-173071772392752/AnsiballZ_command.py\npostgres  8817  8816  0 16:21 pts/0    00:00:00 /bin/sh -c echo BECOME-SUCCESS-loqfskpotitrqiughlyhlaqknzwduogk ; /usr/bin/python /var/tmp/ansible-tmp-1647847282.7130601-54964-173071772392752/AnsiballZ_command.py\npostgres  8818  8817  0 16:21 pts/0    00:00:00 /usr/bin/python /var/tmp/ansible-tmp-1647847282.7130601-54964-173071772392752/AnsiballZ_command.py\npostgres  8820  8818  0 16:21 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )\npostgres  8821  8820  0 16:21 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )\npostgres  8822  8821  0 16:21 pts/0    00:00:00 ps -ef\npostgres  8823  8821  0 16:21 pts/0    00:00:00 grep postgres",
        "stdout_lines": [
            "postgres  8530     1  0 16:21 ?        00:00:00 /usr/bin/pg_autoctl run",
            "postgres  8533  8530  0 16:21 ?        00:00:00 pg_autoctl: start/stop postgres",
            "postgres  8534  8530  0 16:21 ?        00:00:00 pg_autoctl: monitor listener",
            "postgres  8564  8533  3 16:21 ?        00:00:00 /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *",
            "postgres  8607  8564  0 16:21 ?        00:00:00 postgres: pg_auto_failover monitor: logger   ",
            "postgres  8611  8564  0 16:21 ?        00:00:00 postgres: pg_auto_failover monitor: checkpointer   ",
            "postgres  8612  8564  0 16:21 ?        00:00:00 postgres: pg_auto_failover monitor: background writer  ",
            "postgres  8613  8564  0 16:21 ?        00:00:00 postgres: pg_auto_failover monitor: walwriter   ",
            "postgres  8614  8564  0 16:21 ?        00:00:00 postgres: pg_auto_failover monitor: autovacuum launcher  ",
            "postgres  8615  8564  0 16:21 ?        00:00:00 postgres: pg_auto_failover monitor: stats collector  ",
            "postgres  8616  8564  0 16:21 ?        00:00:00 postgres: pg_auto_failover monitor: pg_auto_failover monitor  ",
            "postgres  8617  8564  0 16:21 ?        00:00:00 postgres: pg_auto_failover monitor: logical replication launcher  ",
            "postgres  8618  8564  0 16:21 ?        00:00:00 postgres: pg_auto_failover monitor: pg_auto_failover monitor worker  ",
            "postgres  8619  8564  0 16:21 ?        00:00:00 postgres: pg_auto_failover monitor: autoctl_node pg_auto_failover [local] idle",
            "postgres  8620  8564  0 16:21 ?        00:00:00 postgres: pg_auto_failover monitor: pg_auto_failover monitor worker  ",
            "jomoon    8792  3629  0 16:21 pts/0    00:00:00 /bin/sh -c sudo -H -S  -p \"[sudo via ansible, key=loqfskpotitrqiughlyhlaqknzwduogk] password:\" -u postgres /bin/sh -c 'echo BECOME-SUCCESS-loqfskpotitrqiughlyhlaqknzwduogk ; /usr/bin/python /var/tmp/ansible-tmp-1647847282.7130601-54964-173071772392752/AnsiballZ_command.py' && sleep 0",
            "root      8816  8792  0 16:21 pts/0    00:00:00 sudo -H -S -p [sudo via ansible, key=loqfskpotitrqiughlyhlaqknzwduogk] password: -u postgres /bin/sh -c echo BECOME-SUCCESS-loqfskpotitrqiughlyhlaqknzwduogk ; /usr/bin/python /var/tmp/ansible-tmp-1647847282.7130601-54964-173071772392752/AnsiballZ_command.py",
            "postgres  8817  8816  0 16:21 pts/0    00:00:00 /bin/sh -c echo BECOME-SUCCESS-loqfskpotitrqiughlyhlaqknzwduogk ; /usr/bin/python /var/tmp/ansible-tmp-1647847282.7130601-54964-173071772392752/AnsiballZ_command.py",
            "postgres  8818  8817  0 16:21 pts/0    00:00:00 /usr/bin/python /var/tmp/ansible-tmp-1647847282.7130601-54964-173071772392752/AnsiballZ_command.py",
            "postgres  8820  8818  0 16:21 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )",
            "postgres  8821  8820  0 16:21 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )",
            "postgres  8822  8821  0 16:21 pts/0    00:00:00 ps -ef",
            "postgres  8823  8821  0 16:21 pts/0    00:00:00 grep postgres"
        ]
    }
}
2022-03-21 16:21:23,240 p=53431 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:21:23,241 p=53431 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:21:23,253 p=53431 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:21:23,262 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the current state of monitor] *******************************************************************
2022-03-21 16:21:23,294 p=53431 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:21:23,308 p=53431 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:21:23,320 p=53431 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:21:23,864 p=53431 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:21:23,875 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:21:23,922 p=53431 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": true,
        "cmd": "( psql -c \"\\l\" )",
        "delta": "0:00:00.034281",
        "end": "2022-03-21 16:21:24.269682",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-21 16:21:24.235401",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "                                    List of databases\n       Name       |  Owner   | Encoding |  Collate   |   Ctype    |   Access privileges   \n------------------+----------+----------+------------+------------+-----------------------\n pg_auto_failover | autoctl  | UTF8     | en_US.utf8 | en_US.utf8 | \n postgres         | postgres | UTF8     | en_US.utf8 | en_US.utf8 | \n template0        | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +\n                  |          |          |            |            | postgres=CTc/postgres\n template1        | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +\n                  |          |          |            |            | postgres=CTc/postgres\n(4 rows)",
        "stdout_lines": [
            "                                    List of databases",
            "       Name       |  Owner   | Encoding |  Collate   |   Ctype    |   Access privileges   ",
            "------------------+----------+----------+------------+------------+-----------------------",
            " pg_auto_failover | autoctl  | UTF8     | en_US.utf8 | en_US.utf8 | ",
            " postgres         | postgres | UTF8     | en_US.utf8 | en_US.utf8 | ",
            " template0        | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +",
            "                  |          |          |            |            | postgres=CTc/postgres",
            " template1        | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +",
            "                  |          |          |            |            | postgres=CTc/postgres",
            "(4 rows)"
        ]
    }
}
2022-03-21 16:21:23,936 p=53431 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:21:23,937 p=53431 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:21:23,949 p=53431 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:21:23,958 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : Create primiary instance. It will automatically be set by the monitor as the primary node with read-write capability (PGDATA = /var/lib/pgpsql/ha)] ***
2022-03-21 16:21:23,978 p=53431 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:21:24,006 p=53431 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:21:24,018 p=53431 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:21:36,051 p=53431 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:21:36,060 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:21:36,094 p=53431 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:21:36,123 p=53431 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "596143772422.8988",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ;  pg_autoctl create postgres --pgdata \"ha\" --auth trust --ssl-self-signed --username ha-admin --dbname \"appdb\" --hostname \"co7-node01\" --pgctl /bin/pg_ctl --monitor 'postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require' )",
        "delta": "0:00:07.770736",
        "end": "2022-03-21 16:21:32.898070",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/596143772422.8988",
        "start": "2022-03-21 16:21:25.127334",
        "started": 1,
        "stderr": "16:21:25 8998 INFO  Using default --ssl-mode \"require\"\n16:21:25 8998 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n16:21:25 8998 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n16:21:25 8998 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n16:21:25 8998 INFO  Started pg_autoctl postgres service with pid 9000\n16:21:25 8998 INFO  Started pg_autoctl node-init service with pid 9001\n16:21:25 9000 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v\n16:21:25 9001 INFO  Registered node 1 (co7-node01:5432) with name \"node_1\" in formation \"default\", group 0, state \"single\"\n16:21:25 9001 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"\n16:21:25 9001 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"\n16:21:25 9001 INFO  Successfully registered as \"single\" to the monitor.\n16:21:25 9001 INFO  FSM transition from \"init\" to \"single\": Start as a single node\n16:21:25 9001 INFO  Initialising postgres as a primary\n16:21:25 9001 INFO  Initialising a PostgreSQL cluster at \"ha\"\n16:21:25 9001 INFO  /bin/pg_ctl initdb -s -D ha --option '--auth=trust'\n16:21:27 9001 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n16:21:27 9001 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.\n16:21:27 9001 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n16:21:27 9001 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"\n16:21:27 9001 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node01\"\n16:21:27 9022 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *\n16:21:28 9000 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 9022\n16:21:28 9001 INFO  CREATE DATABASE appdb;\n16:21:31 9001 INFO  CREATE EXTENSION pg_stat_statements;\n16:21:31 9001 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node01\"\n16:21:31 9001 INFO  Contents of \"/var/lib/pgsql/ha/postgresql-auto-failover.conf\" have changed, overwriting\n16:21:31 9001 WARN  Failed to resolve hostname \"co7-master\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n16:21:31 9001 WARN  Postgres might deny connection attempts from \"co7-master\", even with the new HBA rules.\n16:21:31 9001 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n16:21:31 9001 WARN  Using IP address \"192.168.0.81\" in HBA file instead of hostname \"co7-master\"\n16:21:31 9001 INFO  Transition complete: current state is now \"single\"\n16:21:32 9001 INFO  keeper has been successfully initialized.\n16:21:32 8998 WARN  pg_autoctl service node-init exited with exit status 0\n16:21:32 9000 INFO  Postgres controller service received signal SIGTERM, terminating\n16:21:32 9000 INFO  Stopping pg_autoctl postgres service\n16:21:32 9000 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast\n16:21:32 8998 INFO  Waiting for subprocesses to terminate.\n16:21:32 8998 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "16:21:25 8998 INFO  Using default --ssl-mode \"require\"",
            "16:21:25 8998 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "16:21:25 8998 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "16:21:25 8998 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "16:21:25 8998 INFO  Started pg_autoctl postgres service with pid 9000",
            "16:21:25 8998 INFO  Started pg_autoctl node-init service with pid 9001",
            "16:21:25 9000 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v",
            "16:21:25 9001 INFO  Registered node 1 (co7-node01:5432) with name \"node_1\" in formation \"default\", group 0, state \"single\"",
            "16:21:25 9001 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"",
            "16:21:25 9001 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"",
            "16:21:25 9001 INFO  Successfully registered as \"single\" to the monitor.",
            "16:21:25 9001 INFO  FSM transition from \"init\" to \"single\": Start as a single node",
            "16:21:25 9001 INFO  Initialising postgres as a primary",
            "16:21:25 9001 INFO  Initialising a PostgreSQL cluster at \"ha\"",
            "16:21:25 9001 INFO  /bin/pg_ctl initdb -s -D ha --option '--auth=trust'",
            "16:21:27 9001 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "16:21:27 9001 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.",
            "16:21:27 9001 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "16:21:27 9001 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"",
            "16:21:27 9001 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node01\"",
            "16:21:27 9022 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *",
            "16:21:28 9000 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 9022",
            "16:21:28 9001 INFO  CREATE DATABASE appdb;",
            "16:21:31 9001 INFO  CREATE EXTENSION pg_stat_statements;",
            "16:21:31 9001 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node01\"",
            "16:21:31 9001 INFO  Contents of \"/var/lib/pgsql/ha/postgresql-auto-failover.conf\" have changed, overwriting",
            "16:21:31 9001 WARN  Failed to resolve hostname \"co7-master\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "16:21:31 9001 WARN  Postgres might deny connection attempts from \"co7-master\", even with the new HBA rules.",
            "16:21:31 9001 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "16:21:31 9001 WARN  Using IP address \"192.168.0.81\" in HBA file instead of hostname \"co7-master\"",
            "16:21:31 9001 INFO  Transition complete: current state is now \"single\"",
            "16:21:32 9001 INFO  keeper has been successfully initialized.",
            "16:21:32 8998 WARN  pg_autoctl service node-init exited with exit status 0",
            "16:21:32 9000 INFO  Postgres controller service received signal SIGTERM, terminating",
            "16:21:32 9000 INFO  Stopping pg_autoctl postgres service",
            "16:21:32 9000 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast",
            "16:21:32 8998 INFO  Waiting for subprocesses to terminate.",
            "16:21:32 8998 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": [],
        "warnings": [
            "Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually"
        ]
    }
}
2022-03-21 16:21:36,123 p=53431 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:21:36,124 p=53431 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:21:36,134 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of pirmary instance] *******************************************************
2022-03-21 16:21:36,164 p=53431 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:21:36,180 p=53431 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:21:36,191 p=53431 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:21:42,947 p=53431 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:21:42,956 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:21:42,976 p=53431 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:21:43,007 p=53431 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "486239306482.9492",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl -q show systemd --pgdata ~postgres/ha > pgautofailover.service )",
        "delta": "0:00:00.032804",
        "end": "2022-03-21 16:21:37.568984",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/486239306482.9492",
        "start": "2022-03-21 16:21:37.536180",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 16:21:43,009 p=53431 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:21:43,018 p=53431 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:21:43,029 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : Copy primary systemd service file of primary instance] *************************************************
2022-03-21 16:21:43,061 p=53431 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:21:43,077 p=53431 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:21:43,088 p=53431 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:21:43,535 p=53431 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:21:43,546 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start primary systemd service of primary instance] ******************************************
2022-03-21 16:21:43,580 p=53431 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:21:43,595 p=53431 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:21:43,607 p=53431 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:21:44,376 p=53431 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:21:44,386 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 16:21:44,407 p=53431 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:21:44,436 p=53431 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:21:44,447 p=53431 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:21:44,996 p=53431 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:21:45,008 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the state of primary instance] ******************************************************************
2022-03-21 16:21:45,029 p=53431 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:21:45,057 p=53431 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:21:45,068 p=53431 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:21:45,544 p=53431 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:21:45,554 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:21:45,573 p=53431 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:21:45,622 p=53431 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "changed": true,
        "cmd": "( source ~/.bash_profile ; pg_autoctl show state )",
        "delta": "0:00:00.064463",
        "end": "2022-03-21 16:21:45.950677",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-21 16:21:45.886214",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State\n-------+-------+-----------------+-----------+-----------+---------------------+--------------------\nnode_1 |     1 | co7-node01:5432 | 0/16E46E0 |        no |              single |              single",
        "stdout_lines": [
            "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State",
            "-------+-------+-----------------+-----------+-----------+---------------------+--------------------",
            "node_1 |     1 | co7-node01:5432 | 0/16E46E0 |        no |              single |              single"
        ]
    }
}
2022-03-21 16:21:45,623 p=53431 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:21:45,623 p=53431 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:21:45,631 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : Create secondary instance. It will automatically be set by the monitor as the secondary  node with read-write capability (PGDATA = /var/lib/pgpsql/ha)] ***
2022-03-21 16:21:45,665 p=53431 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:21:45,681 p=53431 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:21:57,638 p=53431 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 16:21:57,638 p=53431 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 16:21:57,648 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:21:57,669 p=53431 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:21:57,685 p=53431 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:21:57,724 p=53431 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "ansible_job_id": "603687608349.19798",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ;  pg_autoctl create postgres --pgdata \"ha\" --auth trust --ssl-self-signed --username ha-admin --dbname \"appdb\" --hostname \"co7-node02\" --pgctl /bin/pg_ctl --monitor 'postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require' )",
        "delta": "0:00:10.481262",
        "end": "2022-03-21 16:21:57.158875",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/603687608349.19798",
        "start": "2022-03-21 16:21:46.677613",
        "started": 1,
        "stderr": "16:21:46 19808 INFO  Using default --ssl-mode \"require\"\n16:21:46 19808 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n16:21:46 19808 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n16:21:46 19808 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n16:21:46 19808 INFO  Found a stale pidfile at \"/tmp/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.pid\"\n16:21:46 19808 WARN  Removing the stale pid file \"/tmp/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.pid\"\n16:21:46 19808 INFO  Started pg_autoctl postgres service with pid 19810\n16:21:46 19808 INFO  Started pg_autoctl node-init service with pid 19811\n16:21:46 19810 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v\n16:21:47 19811 INFO  Registered node 3 (co7-node02:5432) with name \"node_3\" in formation \"default\", group 0, state \"wait_standby\"\n16:21:47 19811 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"\n16:21:47 19811 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"\n16:21:47 19811 INFO  Successfully registered as \"wait_standby\" to the monitor.\n16:21:47 19811 INFO  FSM transition from \"init\" to \"wait_standby\": Start following a primary\n16:21:47 19811 INFO  Transition complete: current state is now \"wait_standby\"\n16:21:47 19811 INFO  New state for node 1 \"node_1\" (co7-node01:5432): single ➜ wait_primary\n16:21:48 19811 INFO  New state for node 1 \"node_1\" (co7-node01:5432): wait_primary ➜ wait_primary\n16:21:48 19811 INFO  Still waiting for the monitor to drive us to state \"catchingup\"\n16:21:48 19811 WARN  Please make sure that the primary node is currently running `pg_autoctl run` and contacting the monitor.\n16:21:48 19811 INFO  FSM transition from \"wait_standby\" to \"catchingup\": The primary is now ready to accept a standby\n16:21:48 19811 INFO  Initialising PostgreSQL as a hot standby\n16:21:48 19811 INFO   /bin/pg_basebackup -w -d application_name=pgautofailover_standby_3 host=co7-node01 port=5432 user=pgautofailover_replicator sslmode=require --pgdata /var/lib/pgsql/backup/node_3 -U pgautofailover_replicator --verbose --progress --max-rate 100M --wal-method=stream --slot pgautofailover_standby_3\n16:21:48 19811 INFO  pg_basebackup: initiating base backup, waiting for checkpoint to complete\n16:21:50 19811 INFO  pg_basebackup: checkpoint completed\n16:21:50 19811 INFO  pg_basebackup: write-ahead log start point: 0/2000028 on timeline 1\n16:21:50 19811 INFO  pg_basebackup: starting background WAL receiver\n16:21:50 19811 INFO      0/32462 kB (0%), 0/1 tablespace (...pgsql/backup/node_3/backup_label)\n16:21:50 19811 INFO  32471/32471 kB (100%), 0/1 tablespace (.../backup/node_3/global/pg_control)\n16:21:50 19811 INFO  32471/32471 kB (100%), 1/1 tablespace                                         \n16:21:50 19811 INFO  pg_basebackup: write-ahead log end point: 0/20001A0\n16:21:50 19811 INFO  pg_basebackup: waiting for background process to finish streaming ...\n16:21:53 19811 INFO  pg_basebackup: base backup completed\n16:21:53 19811 INFO  Writing recovery configuration to \"/var/lib/pgsql/ha/recovery.conf\"\n16:21:53 19811 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node02\"\n16:21:53 19957 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *\n16:21:55 19810 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 19957\n16:21:55 19811 INFO  PostgreSQL started on port 5432\n16:21:55 19811 INFO  Fetched current list of 2 other nodes from the monitor to update HBA rules, including 2 changes.\n16:21:55 19811 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n16:21:55 19811 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.\n16:21:55 19811 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n16:21:55 19811 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"\n16:21:55 19811 INFO  Ensuring HBA rules for node 1 \"node_1\" (192.168.0.83:5432)\n16:21:55 19811 WARN  Failed to resolve hostname \"co7-node03\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n16:21:55 19811 WARN  Postgres might deny connection attempts from \"co7-node03\", even with the new HBA rules.\n16:21:55 19811 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n16:21:55 19811 WARN  Using IP address \"192.168.0.85\" in HBA file instead of hostname \"co7-node03\"\n16:21:55 19811 INFO  Ensuring HBA rules for node 2 \"node_2\" (192.168.0.85:5432)\n16:21:55 19811 INFO  Transition complete: current state is now \"catchingup\"\n16:21:56 19811 INFO  keeper has been successfully initialized.\n16:21:56 19808 WARN  pg_autoctl service node-init exited with exit status 0\n16:21:56 19810 INFO  Postgres controller service received signal SIGTERM, terminating\n16:21:56 19810 INFO  Stopping pg_autoctl postgres service\n16:21:56 19810 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast\n16:21:56 19808 INFO  Waiting for subprocesses to terminate.\n16:21:57 19808 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "16:21:46 19808 INFO  Using default --ssl-mode \"require\"",
            "16:21:46 19808 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "16:21:46 19808 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "16:21:46 19808 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "16:21:46 19808 INFO  Found a stale pidfile at \"/tmp/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.pid\"",
            "16:21:46 19808 WARN  Removing the stale pid file \"/tmp/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.pid\"",
            "16:21:46 19808 INFO  Started pg_autoctl postgres service with pid 19810",
            "16:21:46 19808 INFO  Started pg_autoctl node-init service with pid 19811",
            "16:21:46 19810 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v",
            "16:21:47 19811 INFO  Registered node 3 (co7-node02:5432) with name \"node_3\" in formation \"default\", group 0, state \"wait_standby\"",
            "16:21:47 19811 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"",
            "16:21:47 19811 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"",
            "16:21:47 19811 INFO  Successfully registered as \"wait_standby\" to the monitor.",
            "16:21:47 19811 INFO  FSM transition from \"init\" to \"wait_standby\": Start following a primary",
            "16:21:47 19811 INFO  Transition complete: current state is now \"wait_standby\"",
            "16:21:47 19811 INFO  New state for node 1 \"node_1\" (co7-node01:5432): single ➜ wait_primary",
            "16:21:48 19811 INFO  New state for node 1 \"node_1\" (co7-node01:5432): wait_primary ➜ wait_primary",
            "16:21:48 19811 INFO  Still waiting for the monitor to drive us to state \"catchingup\"",
            "16:21:48 19811 WARN  Please make sure that the primary node is currently running `pg_autoctl run` and contacting the monitor.",
            "16:21:48 19811 INFO  FSM transition from \"wait_standby\" to \"catchingup\": The primary is now ready to accept a standby",
            "16:21:48 19811 INFO  Initialising PostgreSQL as a hot standby",
            "16:21:48 19811 INFO   /bin/pg_basebackup -w -d application_name=pgautofailover_standby_3 host=co7-node01 port=5432 user=pgautofailover_replicator sslmode=require --pgdata /var/lib/pgsql/backup/node_3 -U pgautofailover_replicator --verbose --progress --max-rate 100M --wal-method=stream --slot pgautofailover_standby_3",
            "16:21:48 19811 INFO  pg_basebackup: initiating base backup, waiting for checkpoint to complete",
            "16:21:50 19811 INFO  pg_basebackup: checkpoint completed",
            "16:21:50 19811 INFO  pg_basebackup: write-ahead log start point: 0/2000028 on timeline 1",
            "16:21:50 19811 INFO  pg_basebackup: starting background WAL receiver",
            "16:21:50 19811 INFO      0/32462 kB (0%), 0/1 tablespace (...pgsql/backup/node_3/backup_label)",
            "16:21:50 19811 INFO  32471/32471 kB (100%), 0/1 tablespace (.../backup/node_3/global/pg_control)",
            "16:21:50 19811 INFO  32471/32471 kB (100%), 1/1 tablespace                                         ",
            "16:21:50 19811 INFO  pg_basebackup: write-ahead log end point: 0/20001A0",
            "16:21:50 19811 INFO  pg_basebackup: waiting for background process to finish streaming ...",
            "16:21:53 19811 INFO  pg_basebackup: base backup completed",
            "16:21:53 19811 INFO  Writing recovery configuration to \"/var/lib/pgsql/ha/recovery.conf\"",
            "16:21:53 19811 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node02\"",
            "16:21:53 19957 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *",
            "16:21:55 19810 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 19957",
            "16:21:55 19811 INFO  PostgreSQL started on port 5432",
            "16:21:55 19811 INFO  Fetched current list of 2 other nodes from the monitor to update HBA rules, including 2 changes.",
            "16:21:55 19811 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "16:21:55 19811 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.",
            "16:21:55 19811 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "16:21:55 19811 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"",
            "16:21:55 19811 INFO  Ensuring HBA rules for node 1 \"node_1\" (192.168.0.83:5432)",
            "16:21:55 19811 WARN  Failed to resolve hostname \"co7-node03\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "16:21:55 19811 WARN  Postgres might deny connection attempts from \"co7-node03\", even with the new HBA rules.",
            "16:21:55 19811 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "16:21:55 19811 WARN  Using IP address \"192.168.0.85\" in HBA file instead of hostname \"co7-node03\"",
            "16:21:55 19811 INFO  Ensuring HBA rules for node 2 \"node_2\" (192.168.0.85:5432)",
            "16:21:55 19811 INFO  Transition complete: current state is now \"catchingup\"",
            "16:21:56 19811 INFO  keeper has been successfully initialized.",
            "16:21:56 19808 WARN  pg_autoctl service node-init exited with exit status 0",
            "16:21:56 19810 INFO  Postgres controller service received signal SIGTERM, terminating",
            "16:21:56 19810 INFO  Stopping pg_autoctl postgres service",
            "16:21:56 19810 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast",
            "16:21:56 19808 INFO  Waiting for subprocesses to terminate.",
            "16:21:57 19808 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": [],
        "warnings": [
            "Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually"
        ]
    }
}
2022-03-21 16:21:57,727 p=53431 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "ansible_job_id": "498952013830.19052",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ;  pg_autoctl create postgres --pgdata \"ha\" --auth trust --ssl-self-signed --username ha-admin --dbname \"appdb\" --hostname \"co7-node03\" --pgctl /bin/pg_ctl --monitor 'postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require' )",
        "delta": "0:00:10.885831",
        "end": "2022-03-21 16:21:57.561925",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/498952013830.19052",
        "start": "2022-03-21 16:21:46.676094",
        "started": 1,
        "stderr": "16:21:46 19062 INFO  Using default --ssl-mode \"require\"\n16:21:46 19062 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n16:21:46 19062 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n16:21:46 19062 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n16:21:46 19062 INFO  Found a stale pidfile at \"/tmp/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.pid\"\n16:21:46 19062 WARN  Removing the stale pid file \"/tmp/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.pid\"\n16:21:46 19062 INFO  Started pg_autoctl postgres service with pid 19064\n16:21:46 19062 INFO  Started pg_autoctl node-init service with pid 19065\n16:21:46 19064 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v\n16:21:46 19065 INFO  Registered node 2 (co7-node03:5432) with name \"node_2\" in formation \"default\", group 0, state \"wait_standby\"\n16:21:46 19065 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"\n16:21:46 19065 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"\n16:21:47 19065 INFO  Successfully registered as \"wait_standby\" to the monitor.\n16:21:47 19065 INFO  FSM transition from \"init\" to \"wait_standby\": Start following a primary\n16:21:47 19065 INFO  Transition complete: current state is now \"wait_standby\"\n16:21:47 19065 INFO  New state for node 3 \"node_3\" (co7-node02:5432): wait_standby ➜ wait_standby\n16:21:48 19065 INFO  New state for node 1 \"node_1\" (co7-node01:5432): single ➜ wait_primary\n16:21:48 19065 INFO  New state for node 1 \"node_1\" (co7-node01:5432): wait_primary ➜ wait_primary\n16:21:48 19065 INFO  Still waiting for the monitor to drive us to state \"catchingup\"\n16:21:48 19065 WARN  Please make sure that the primary node is currently running `pg_autoctl run` and contacting the monitor.\n16:21:48 19065 INFO  FSM transition from \"wait_standby\" to \"catchingup\": The primary is now ready to accept a standby\n16:21:48 19065 INFO  Initialising PostgreSQL as a hot standby\n16:21:48 19065 INFO   /bin/pg_basebackup -w -d application_name=pgautofailover_standby_2 host=co7-node01 port=5432 user=pgautofailover_replicator sslmode=require --pgdata /var/lib/pgsql/backup/node_2 -U pgautofailover_replicator --verbose --progress --max-rate 100M --wal-method=stream --slot pgautofailover_standby_2\n16:21:48 19065 INFO  pg_basebackup: initiating base backup, waiting for checkpoint to complete\n16:21:50 19065 INFO  pg_basebackup: checkpoint completed\n16:21:50 19065 INFO  pg_basebackup: write-ahead log start point: 0/20000D0 on timeline 1\n16:21:50 19065 INFO  pg_basebackup: starting background WAL receiver\n16:21:50 19065 INFO      0/32461 kB (0%), 0/1 tablespace (...pgsql/backup/node_2/backup_label)\n16:21:53 19065 INFO  32471/32471 kB (100%), 0/1 tablespace (.../backup/node_2/global/pg_control)\n16:21:53 19065 INFO  32471/32471 kB (100%), 0/1 tablespace (.../backup/node_2/global/pg_control)\n16:21:53 19065 INFO  32471/32471 kB (100%), 1/1 tablespace                                         \n16:21:53 19065 INFO  pg_basebackup: write-ahead log end point: 0/3000050\n16:21:53 19065 INFO  pg_basebackup: waiting for background process to finish streaming ...\n16:21:54 19065 INFO  pg_basebackup: base backup completed\n16:21:54 19065 INFO  Writing recovery configuration to \"/var/lib/pgsql/ha/recovery.conf\"\n16:21:54 19065 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node03\"\n16:21:55 19211 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *\n16:21:56 19064 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 19211\n16:21:56 19065 INFO  PostgreSQL started on port 5432\n16:21:56 19065 INFO  Fetched current list of 2 other nodes from the monitor to update HBA rules, including 2 changes.\n16:21:56 19065 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n16:21:56 19065 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.\n16:21:56 19065 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n16:21:56 19065 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"\n16:21:56 19065 INFO  Ensuring HBA rules for node 1 \"node_1\" (192.168.0.83:5432)\n16:21:56 19065 WARN  Failed to resolve hostname \"co7-node02\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n16:21:56 19065 WARN  Postgres might deny connection attempts from \"co7-node02\", even with the new HBA rules.\n16:21:56 19065 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n16:21:56 19065 WARN  Using IP address \"192.168.0.84\" in HBA file instead of hostname \"co7-node02\"\n16:21:56 19065 INFO  Ensuring HBA rules for node 3 \"node_3\" (192.168.0.84:5432)\n16:21:56 19065 INFO  Transition complete: current state is now \"catchingup\"\n16:21:57 19065 INFO  keeper has been successfully initialized.\n16:21:57 19062 WARN  pg_autoctl service node-init exited with exit status 0\n16:21:57 19064 INFO  Postgres controller service received signal SIGTERM, terminating\n16:21:57 19064 INFO  Stopping pg_autoctl postgres service\n16:21:57 19064 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast\n16:21:57 19062 INFO  Waiting for subprocesses to terminate.\n16:21:57 19062 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "16:21:46 19062 INFO  Using default --ssl-mode \"require\"",
            "16:21:46 19062 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "16:21:46 19062 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "16:21:46 19062 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "16:21:46 19062 INFO  Found a stale pidfile at \"/tmp/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.pid\"",
            "16:21:46 19062 WARN  Removing the stale pid file \"/tmp/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.pid\"",
            "16:21:46 19062 INFO  Started pg_autoctl postgres service with pid 19064",
            "16:21:46 19062 INFO  Started pg_autoctl node-init service with pid 19065",
            "16:21:46 19064 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v",
            "16:21:46 19065 INFO  Registered node 2 (co7-node03:5432) with name \"node_2\" in formation \"default\", group 0, state \"wait_standby\"",
            "16:21:46 19065 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"",
            "16:21:46 19065 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"",
            "16:21:47 19065 INFO  Successfully registered as \"wait_standby\" to the monitor.",
            "16:21:47 19065 INFO  FSM transition from \"init\" to \"wait_standby\": Start following a primary",
            "16:21:47 19065 INFO  Transition complete: current state is now \"wait_standby\"",
            "16:21:47 19065 INFO  New state for node 3 \"node_3\" (co7-node02:5432): wait_standby ➜ wait_standby",
            "16:21:48 19065 INFO  New state for node 1 \"node_1\" (co7-node01:5432): single ➜ wait_primary",
            "16:21:48 19065 INFO  New state for node 1 \"node_1\" (co7-node01:5432): wait_primary ➜ wait_primary",
            "16:21:48 19065 INFO  Still waiting for the monitor to drive us to state \"catchingup\"",
            "16:21:48 19065 WARN  Please make sure that the primary node is currently running `pg_autoctl run` and contacting the monitor.",
            "16:21:48 19065 INFO  FSM transition from \"wait_standby\" to \"catchingup\": The primary is now ready to accept a standby",
            "16:21:48 19065 INFO  Initialising PostgreSQL as a hot standby",
            "16:21:48 19065 INFO   /bin/pg_basebackup -w -d application_name=pgautofailover_standby_2 host=co7-node01 port=5432 user=pgautofailover_replicator sslmode=require --pgdata /var/lib/pgsql/backup/node_2 -U pgautofailover_replicator --verbose --progress --max-rate 100M --wal-method=stream --slot pgautofailover_standby_2",
            "16:21:48 19065 INFO  pg_basebackup: initiating base backup, waiting for checkpoint to complete",
            "16:21:50 19065 INFO  pg_basebackup: checkpoint completed",
            "16:21:50 19065 INFO  pg_basebackup: write-ahead log start point: 0/20000D0 on timeline 1",
            "16:21:50 19065 INFO  pg_basebackup: starting background WAL receiver",
            "16:21:50 19065 INFO      0/32461 kB (0%), 0/1 tablespace (...pgsql/backup/node_2/backup_label)",
            "16:21:53 19065 INFO  32471/32471 kB (100%), 0/1 tablespace (.../backup/node_2/global/pg_control)",
            "16:21:53 19065 INFO  32471/32471 kB (100%), 0/1 tablespace (.../backup/node_2/global/pg_control)",
            "16:21:53 19065 INFO  32471/32471 kB (100%), 1/1 tablespace                                         ",
            "16:21:53 19065 INFO  pg_basebackup: write-ahead log end point: 0/3000050",
            "16:21:53 19065 INFO  pg_basebackup: waiting for background process to finish streaming ...",
            "16:21:54 19065 INFO  pg_basebackup: base backup completed",
            "16:21:54 19065 INFO  Writing recovery configuration to \"/var/lib/pgsql/ha/recovery.conf\"",
            "16:21:54 19065 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node03\"",
            "16:21:55 19211 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *",
            "16:21:56 19064 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 19211",
            "16:21:56 19065 INFO  PostgreSQL started on port 5432",
            "16:21:56 19065 INFO  Fetched current list of 2 other nodes from the monitor to update HBA rules, including 2 changes.",
            "16:21:56 19065 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "16:21:56 19065 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.",
            "16:21:56 19065 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "16:21:56 19065 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"",
            "16:21:56 19065 INFO  Ensuring HBA rules for node 1 \"node_1\" (192.168.0.83:5432)",
            "16:21:56 19065 WARN  Failed to resolve hostname \"co7-node02\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "16:21:56 19065 WARN  Postgres might deny connection attempts from \"co7-node02\", even with the new HBA rules.",
            "16:21:56 19065 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "16:21:56 19065 WARN  Using IP address \"192.168.0.84\" in HBA file instead of hostname \"co7-node02\"",
            "16:21:56 19065 INFO  Ensuring HBA rules for node 3 \"node_3\" (192.168.0.84:5432)",
            "16:21:56 19065 INFO  Transition complete: current state is now \"catchingup\"",
            "16:21:57 19065 INFO  keeper has been successfully initialized.",
            "16:21:57 19062 WARN  pg_autoctl service node-init exited with exit status 0",
            "16:21:57 19064 INFO  Postgres controller service received signal SIGTERM, terminating",
            "16:21:57 19064 INFO  Stopping pg_autoctl postgres service",
            "16:21:57 19064 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast",
            "16:21:57 19062 INFO  Waiting for subprocesses to terminate.",
            "16:21:57 19062 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": [],
        "warnings": [
            "Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually"
        ]
    }
}
2022-03-21 16:21:57,735 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of secondary instance] *****************************************************
2022-03-21 16:21:57,769 p=53431 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:21:57,783 p=53431 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:22:04,429 p=53431 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 16:22:04,429 p=53431 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 16:22:04,439 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:22:04,475 p=53431 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:22:04,488 p=53431 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:22:04,493 p=53431 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "ansible_job_id": "602211633613.20286",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl -q show systemd --pgdata ~postgres/ha > pgautofailover.service )",
        "delta": "0:00:00.032570",
        "end": "2022-03-21 16:21:58.926732",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/602211633613.20286",
        "start": "2022-03-21 16:21:58.894162",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 16:22:04,521 p=53431 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "ansible_job_id": "951616395537.19541",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl -q show systemd --pgdata ~postgres/ha > pgautofailover.service )",
        "delta": "0:00:00.032420",
        "end": "2022-03-21 16:21:58.925808",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/951616395537.19541",
        "start": "2022-03-21 16:21:58.893388",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 16:22:04,535 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : Copy secondary systemd service file of secondary instance] *********************************************
2022-03-21 16:22:04,568 p=53431 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:22:04,582 p=53431 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:22:05,172 p=53431 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 16:22:05,174 p=53431 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 16:22:05,184 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start secondary systemd service of secondary instance] **************************************
2022-03-21 16:22:05,206 p=53431 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:22:05,221 p=53431 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:22:05,971 p=53431 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 16:22:05,973 p=53431 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 16:22:05,983 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 16:22:06,003 p=53431 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:22:06,020 p=53431 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:22:06,549 p=53431 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 16:22:06,550 p=53431 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 16:22:06,560 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the state of secondary instance] ****************************************************************
2022-03-21 16:22:06,581 p=53431 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:22:06,598 p=53431 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:22:07,171 p=53431 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 16:22:07,171 p=53431 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 16:22:07,180 p=53431 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:22:07,216 p=53431 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:22:07,229 p=53431 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:22:07,271 p=53431 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "changed": true,
        "cmd": "( source ~/.bash_profile ; pg_autoctl show state )",
        "delta": "0:00:00.068907",
        "end": "2022-03-21 16:22:07.578992",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-21 16:22:07.510085",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State\n-------+-------+-----------------+-----------+-----------+---------------------+--------------------\nnode_1 |     1 | co7-node01:5432 | 0/4000060 |       yes |        wait_primary |        wait_primary\nnode_2 |     2 | co7-node03:5432 | 0/4000000 |        no |          catchingup |          catchingup\nnode_3 |     3 | co7-node02:5432 | 0/3000000 |       yes |          catchingup |          catchingup",
        "stdout_lines": [
            "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State",
            "-------+-------+-----------------+-----------+-----------+---------------------+--------------------",
            "node_1 |     1 | co7-node01:5432 | 0/4000060 |       yes |        wait_primary |        wait_primary",
            "node_2 |     2 | co7-node03:5432 | 0/4000000 |        no |          catchingup |          catchingup",
            "node_3 |     3 | co7-node02:5432 | 0/3000000 |       yes |          catchingup |          catchingup"
        ]
    }
}
2022-03-21 16:22:07,273 p=53431 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "changed": true,
        "cmd": "( source ~/.bash_profile ; pg_autoctl show state )",
        "delta": "0:00:00.067690",
        "end": "2022-03-21 16:22:07.578914",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-21 16:22:07.511224",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State\n-------+-------+-----------------+-----------+-----------+---------------------+--------------------\nnode_1 |     1 | co7-node01:5432 | 0/4000060 |       yes |        wait_primary |        wait_primary\nnode_2 |     2 | co7-node03:5432 | 0/4000000 |        no |          catchingup |          catchingup\nnode_3 |     3 | co7-node02:5432 | 0/3000000 |       yes |          catchingup |          catchingup",
        "stdout_lines": [
            "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State",
            "-------+-------+-----------------+-----------+-----------+---------------------+--------------------",
            "node_1 |     1 | co7-node01:5432 | 0/4000060 |       yes |        wait_primary |        wait_primary",
            "node_2 |     2 | co7-node03:5432 | 0/4000000 |        no |          catchingup |          catchingup",
            "node_3 |     3 | co7-node02:5432 | 0/3000000 |       yes |          catchingup |          catchingup"
        ]
    }
}
2022-03-21 16:22:07,329 p=53431 u=moonja n=ansible | PLAY RECAP *************************************************************************************************************************
2022-03-21 16:22:07,329 p=53431 u=moonja n=ansible | co7-master                 : ok=27   changed=15   unreachable=0    failed=0    skipped=19   rescued=0    ignored=0   
2022-03-21 16:22:07,329 p=53431 u=moonja n=ansible | co7-node01                 : ok=21   changed=12   unreachable=0    failed=0    skipped=25   rescued=0    ignored=0   
2022-03-21 16:22:07,329 p=53431 u=moonja n=ansible | co7-node02                 : ok=21   changed=12   unreachable=0    failed=0    skipped=25   rescued=0    ignored=0   
2022-03-21 16:22:07,329 p=53431 u=moonja n=ansible | co7-node03                 : ok=21   changed=12   unreachable=0    failed=0    skipped=25   rescued=0    ignored=0   
2022-03-21 16:23:39,953 p=55549 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from 
ansible-core in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 16:23:40,187 p=55549 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 
2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 16:23:40,192 p=55549 u=moonja n=ansible | [WARNING]: While constructing a mapping from /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/install.yml, line 307,
column 3, found a duplicate dict key (when). Using last defined value only.

2022-03-21 16:23:40,243 p=55549 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/upgrade.yml is empty and had no tasks to include

2022-03-21 16:23:40,256 p=55549 u=moonja n=ansible | PLAY [all] *************************************************************************************************************************
2022-03-21 16:23:40,285 p=55549 u=moonja n=ansible | TASK [Gathering Facts] *************************************************************************************************************
2022-03-21 16:23:42,612 p=55549 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 16:23:42,614 p=55549 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 16:23:42,669 p=55549 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 16:23:42,680 p=55549 u=moonja n=ansible | ok: [co7-master]
2022-03-21 16:23:42,696 p=55549 u=moonja n=ansible | TASK [pgfailover-postgres : Disable port from public zone] *************************************************************************
2022-03-21 16:23:43,559 p=55549 u=moonja n=ansible | changed: [co7-node02] => (item=5432)
2022-03-21 16:23:43,560 p=55549 u=moonja n=ansible | changed: [co7-node03] => (item=5432)
2022-03-21 16:23:43,565 p=55549 u=moonja n=ansible | changed: [co7-node01] => (item=5432)
2022-03-21 16:23:43,573 p=55549 u=moonja n=ansible | changed: [co7-master] => (item=5432)
2022-03-21 16:23:43,583 p=55549 u=moonja n=ansible | TASK [pgfailover-postgres : Disable IP Addresses in whitelist] *********************************************************************
2022-03-21 16:23:44,325 p=55549 u=moonja n=ansible | changed: [co7-master] => (item=co7-master)
2022-03-21 16:23:44,328 p=55549 u=moonja n=ansible | changed: [co7-node03] => (item=co7-master)
2022-03-21 16:23:44,350 p=55549 u=moonja n=ansible | changed: [co7-node01] => (item=co7-master)
2022-03-21 16:23:44,389 p=55549 u=moonja n=ansible | changed: [co7-node02] => (item=co7-master)
2022-03-21 16:23:44,915 p=55549 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node01)
2022-03-21 16:23:44,926 p=55549 u=moonja n=ansible | changed: [co7-master] => (item=co7-node01)
2022-03-21 16:23:44,947 p=55549 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node01)
2022-03-21 16:23:44,991 p=55549 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node01)
2022-03-21 16:23:45,516 p=55549 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node02)
2022-03-21 16:23:45,541 p=55549 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node02)
2022-03-21 16:23:45,552 p=55549 u=moonja n=ansible | changed: [co7-master] => (item=co7-node02)
2022-03-21 16:23:45,607 p=55549 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node02)
2022-03-21 16:23:46,148 p=55549 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node03)
2022-03-21 16:23:46,152 p=55549 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node03)
2022-03-21 16:23:46,173 p=55549 u=moonja n=ansible | changed: [co7-master] => (item=co7-node03)
2022-03-21 16:23:46,251 p=55549 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node03)
2022-03-21 16:23:46,264 p=55549 u=moonja n=ansible | TASK [pgfailover-postgres : Bounce firewalld] **************************************************************************************
2022-03-21 16:23:48,467 p=55549 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 16:23:48,478 p=55549 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 16:23:48,492 p=55549 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:23:48,495 p=55549 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:23:48,506 p=55549 u=moonja n=ansible | TASK [pgfailover-postgres : Stop and disable firewalld.] ***************************************************************************
2022-03-21 16:23:50,076 p=55549 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 16:23:50,091 p=55549 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 16:23:50,103 p=55549 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:23:50,671 p=55549 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:23:50,684 p=55549 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 16:23:50,723 p=55549 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:23:50,739 p=55549 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:23:50,751 p=55549 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:23:51,491 p=55549 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:23:51,500 p=55549 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 16:23:51,532 p=55549 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:23:51,547 p=55549 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:23:51,557 p=55549 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:23:52,010 p=55549 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:23:52,018 p=55549 u=moonja n=ansible | TASK [pgfailover-postgres : Getting process IDs of the pg_autoctl process] *********************************************************
2022-03-21 16:23:52,748 p=55549 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 16:23:52,749 p=55549 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 16:23:52,766 p=55549 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 16:23:52,768 p=55549 u=moonja n=ansible | ok: [co7-master]
2022-03-21 16:23:52,779 p=55549 u=moonja n=ansible | TASK [pgfailover-postgres : Stop pgautofailover service of systemd] ****************************************************************
2022-03-21 16:23:55,983 p=55549 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 16:23:55,984 p=55549 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 16:23:57,740 p=55549 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:23:58,005 p=55549 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:23:58,014 p=55549 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] ************************************************************************
2022-03-21 16:23:58,035 p=55549 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:23:58,051 p=55549 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:23:58,826 p=55549 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 16:23:58,827 p=55549 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 16:23:58,836 p=55549 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start secondary systemd service of secondary instance] **************************************
2022-03-21 16:23:58,855 p=55549 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:23:58,872 p=55549 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:23:59,566 p=55549 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 16:23:59,598 p=55549 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 16:23:59,608 p=55549 u=moonja n=ansible | TASK [pgfailover-postgres : Delete secondary systemd service file of secondary instance] *******************************************
2022-03-21 16:23:59,630 p=55549 u=moonja n=ansible | skipping: [co7-master] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 16:23:59,631 p=55549 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 16:23:59,635 p=55549 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 16:23:59,639 p=55549 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.config) 
2022-03-21 16:23:59,645 p=55549 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 16:23:59,646 p=55549 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql) 
2022-03-21 16:23:59,647 p=55549 u=moonja n=ansible | skipping: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 16:23:59,647 p=55549 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 16:23:59,649 p=55549 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 16:23:59,653 p=55549 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.config) 
2022-03-21 16:23:59,654 p=55549 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 16:23:59,655 p=55549 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql) 
2022-03-21 16:24:00,348 p=55549 u=moonja n=ansible | changed: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 16:24:00,349 p=55549 u=moonja n=ansible | changed: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 16:24:00,780 p=55549 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 16:24:00,780 p=55549 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 16:24:01,303 p=55549 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 16:24:01,739 p=55549 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.config)
2022-03-21 16:24:01,982 p=55549 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 16:24:02,143 p=55549 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.ansible)
2022-03-21 16:24:02,424 p=55549 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.config)
2022-03-21 16:24:02,741 p=55549 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql)
2022-03-21 16:24:02,875 p=55549 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.ansible)
2022-03-21 16:24:03,363 p=55549 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql)
2022-03-21 16:24:03,378 p=55549 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] ************************************************************************
2022-03-21 16:24:03,398 p=55549 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:24:03,428 p=55549 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:24:03,439 p=55549 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:24:03,879 p=55549 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:24:03,888 p=55549 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start primary systemd service of primary instance] ******************************************
2022-03-21 16:24:03,908 p=55549 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:24:03,937 p=55549 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:24:03,948 p=55549 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:24:04,679 p=55549 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:24:04,691 p=55549 u=moonja n=ansible | TASK [pgfailover-postgres : Delete primary systemd service file of secondary instance] *********************************************
2022-03-21 16:24:04,729 p=55549 u=moonja n=ansible | skipping: [co7-master] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 16:24:04,745 p=55549 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 16:24:04,745 p=55549 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 16:24:04,746 p=55549 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.config) 
2022-03-21 16:24:04,752 p=55549 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 16:24:04,753 p=55549 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql) 
2022-03-21 16:24:04,772 p=55549 u=moonja n=ansible | skipping: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 16:24:04,777 p=55549 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 16:24:04,777 p=55549 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 16:24:04,777 p=55549 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.config) 
2022-03-21 16:24:04,782 p=55549 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 16:24:04,782 p=55549 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql) 
2022-03-21 16:24:04,787 p=55549 u=moonja n=ansible | skipping: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 16:24:04,793 p=55549 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 16:24:04,794 p=55549 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 16:24:04,794 p=55549 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.config) 
2022-03-21 16:24:04,798 p=55549 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 16:24:04,798 p=55549 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql) 
2022-03-21 16:24:05,244 p=55549 u=moonja n=ansible | changed: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 16:24:05,684 p=55549 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 16:24:06,113 p=55549 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 16:24:06,526 p=55549 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.config)
2022-03-21 16:24:06,984 p=55549 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.ansible)
2022-03-21 16:24:07,473 p=55549 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql)
2022-03-21 16:24:07,485 p=55549 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] ************************************************************************
2022-03-21 16:24:07,518 p=55549 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:24:07,533 p=55549 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:24:07,545 p=55549 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:24:07,981 p=55549 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:24:07,990 p=55549 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start systemd service of monitor instance] **************************************************
2022-03-21 16:24:08,024 p=55549 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:24:08,038 p=55549 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:24:08,050 p=55549 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:24:08,943 p=55549 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:24:08,953 p=55549 u=moonja n=ansible | TASK [pgfailover-postgres : Delete primary systemd service file of secondary instance] *********************************************
2022-03-21 16:24:08,992 p=55549 u=moonja n=ansible | skipping: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 16:24:08,993 p=55549 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 16:24:08,998 p=55549 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 16:24:08,999 p=55549 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.config) 
2022-03-21 16:24:09,004 p=55549 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 16:24:09,005 p=55549 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql) 
2022-03-21 16:24:09,006 p=55549 u=moonja n=ansible | skipping: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 16:24:09,007 p=55549 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 16:24:09,009 p=55549 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 16:24:09,012 p=55549 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.config) 
2022-03-21 16:24:09,015 p=55549 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 16:24:09,015 p=55549 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql) 
2022-03-21 16:24:09,021 p=55549 u=moonja n=ansible | skipping: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-21 16:24:09,023 p=55549 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-21 16:24:09,026 p=55549 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-21 16:24:09,028 p=55549 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.config) 
2022-03-21 16:24:09,031 p=55549 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.ansible) 
2022-03-21 16:24:09,031 p=55549 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql) 
2022-03-21 16:24:09,536 p=55549 u=moonja n=ansible | changed: [co7-master] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-21 16:24:10,145 p=55549 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-21 16:24:10,779 p=55549 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/.bash_profile)
2022-03-21 16:24:11,270 p=55549 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/.config)
2022-03-21 16:24:11,781 p=55549 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/.ansible)
2022-03-21 16:24:13,445 p=55549 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql)
2022-03-21 16:24:13,459 p=55549 u=moonja n=ansible | TASK [pgfailover-postgres : Uninstall VMware Postgres on all hosts as root] ********************************************************
2022-03-21 16:24:45,887 p=55549 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 16:24:47,271 p=55549 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 16:24:47,343 p=55549 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:24:50,567 p=55549 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:24:50,576 p=55549 u=moonja n=ansible | TASK [pgfailover-postgres : Copy the vmwawre-postgres rpm file to all hosts in cluster] ********************************************
2022-03-21 16:24:51,016 p=55549 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:24:51,044 p=55549 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:24:51,048 p=55549 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 16:24:51,059 p=55549 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 16:24:51,101 p=55549 u=moonja n=ansible | PLAY RECAP *************************************************************************************************************************
2022-03-21 16:24:51,102 p=55549 u=moonja n=ansible | co7-master                 : ok=14   changed=12   unreachable=0    failed=0    skipped=6    rescued=0    ignored=0   
2022-03-21 16:24:51,102 p=55549 u=moonja n=ansible | co7-node01                 : ok=12   changed=10   unreachable=0    failed=0    skipped=8    rescued=0    ignored=0   
2022-03-21 16:24:51,102 p=55549 u=moonja n=ansible | co7-node02                 : ok=12   changed=10   unreachable=0    failed=0    skipped=8    rescued=0    ignored=0   
2022-03-21 16:24:51,102 p=55549 u=moonja n=ansible | co7-node03                 : ok=12   changed=10   unreachable=0    failed=0    skipped=8    rescued=0    ignored=0   
2022-03-21 16:26:02,123 p=57136 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from 
ansible-core in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 16:26:02,356 p=57136 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 
2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-21 16:26:02,360 p=57136 u=moonja n=ansible | [WARNING]: While constructing a mapping from /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/install.yml, line 307,
column 3, found a duplicate dict key (when). Using last defined value only.

2022-03-21 16:26:02,407 p=57136 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/upgrade.yml is empty and had no tasks to include

2022-03-21 16:26:02,419 p=57136 u=moonja n=ansible | PLAY [all] *************************************************************************************************************************
2022-03-21 16:26:02,447 p=57136 u=moonja n=ansible | TASK [Gathering Facts] *************************************************************************************************************
2022-03-21 16:26:04,685 p=57136 u=moonja n=ansible | ok: [co7-master]
2022-03-21 16:26:04,696 p=57136 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 16:26:04,828 p=57136 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 16:26:04,829 p=57136 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 16:26:04,847 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : Install rpm packages of dependenies to need installing packages regarding kubernates] ******************
2022-03-21 16:26:06,009 p=57136 u=moonja n=ansible | ok: [co7-master] => (item=firewalld)
2022-03-21 16:26:06,010 p=57136 u=moonja n=ansible | ok: [co7-node03] => (item=firewalld)
2022-03-21 16:26:06,011 p=57136 u=moonja n=ansible | ok: [co7-node02] => (item=firewalld)
2022-03-21 16:26:06,663 p=57136 u=moonja n=ansible | ok: [co7-node01] => (item=firewalld)
2022-03-21 16:26:06,804 p=57136 u=moonja n=ansible | ok: [co7-node02] => (item=python3)
2022-03-21 16:26:06,804 p=57136 u=moonja n=ansible | ok: [co7-node03] => (item=python3)
2022-03-21 16:26:06,808 p=57136 u=moonja n=ansible | ok: [co7-master] => (item=python3)
2022-03-21 16:26:07,409 p=57136 u=moonja n=ansible | ok: [co7-node01] => (item=python3)
2022-03-21 16:26:07,681 p=57136 u=moonja n=ansible | ok: [co7-node02] => (item=python3-libselinux)
2022-03-21 16:26:07,685 p=57136 u=moonja n=ansible | ok: [co7-node03] => (item=python3-libselinux)
2022-03-21 16:26:07,713 p=57136 u=moonja n=ansible | ok: [co7-master] => (item=python3-libselinux)
2022-03-21 16:26:08,648 p=57136 u=moonja n=ansible | ok: [co7-node01] => (item=python3-libselinux)
2022-03-21 16:26:08,660 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : Start and enable firewalld.] ***************************************************************************
2022-03-21 16:26:09,941 p=57136 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:26:09,958 p=57136 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:26:09,996 p=57136 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 16:26:10,009 p=57136 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 16:26:10,019 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : Open Firewall] *****************************************************************************************
2022-03-21 16:26:11,005 p=57136 u=moonja n=ansible | changed: [co7-node02] => (item=5432)
2022-03-21 16:26:11,006 p=57136 u=moonja n=ansible | changed: [co7-node01] => (item=5432)
2022-03-21 16:26:11,007 p=57136 u=moonja n=ansible | changed: [co7-master] => (item=5432)
2022-03-21 16:26:11,008 p=57136 u=moonja n=ansible | changed: [co7-node03] => (item=5432)
2022-03-21 16:26:11,022 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : Whitelist of Ip addresses] *****************************************************************************
2022-03-21 16:26:11,833 p=57136 u=moonja n=ansible | changed: [co7-node01] => (item=co7-master)
2022-03-21 16:26:11,843 p=57136 u=moonja n=ansible | changed: [co7-node02] => (item=co7-master)
2022-03-21 16:26:11,860 p=57136 u=moonja n=ansible | changed: [co7-master] => (item=co7-master)
2022-03-21 16:26:11,861 p=57136 u=moonja n=ansible | changed: [co7-node03] => (item=co7-master)
2022-03-21 16:26:12,468 p=57136 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node01)
2022-03-21 16:26:12,470 p=57136 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node01)
2022-03-21 16:26:12,487 p=57136 u=moonja n=ansible | changed: [co7-master] => (item=co7-node01)
2022-03-21 16:26:12,549 p=57136 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node01)
2022-03-21 16:26:13,308 p=57136 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node02)
2022-03-21 16:26:13,322 p=57136 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node02)
2022-03-21 16:26:13,334 p=57136 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node02)
2022-03-21 16:26:13,737 p=57136 u=moonja n=ansible | changed: [co7-master] => (item=co7-node02)
2022-03-21 16:26:13,922 p=57136 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node03)
2022-03-21 16:26:13,939 p=57136 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node03)
2022-03-21 16:26:13,955 p=57136 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node03)
2022-03-21 16:26:14,321 p=57136 u=moonja n=ansible | changed: [co7-master] => (item=co7-node03)
2022-03-21 16:26:14,331 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : Bounce firewalld] **************************************************************************************
2022-03-21 16:26:16,092 p=57136 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 16:26:16,101 p=57136 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:26:16,106 p=57136 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 16:26:16,116 p=57136 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:26:16,126 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : Copy the vmwawre-postgres rpm file to all hosts in cluster] ********************************************
2022-03-21 16:26:18,193 p=57136 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:26:18,200 p=57136 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 16:26:18,204 p=57136 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 16:26:19,178 p=57136 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:26:19,187 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : Install dependency rpm package for pgautofailover] *****************************************************
2022-03-21 16:26:26,020 p=57136 u=moonja n=ansible | ok: [co7-master] => (item=python2-psutil)
2022-03-21 16:26:26,047 p=57136 u=moonja n=ansible | ok: [co7-node01] => (item=python2-psutil)
2022-03-21 16:26:26,102 p=57136 u=moonja n=ansible | ok: [co7-node02] => (item=python2-psutil)
2022-03-21 16:26:26,110 p=57136 u=moonja n=ansible | ok: [co7-node03] => (item=python2-psutil)
2022-03-21 16:26:26,131 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : Install VMware Postgres on all hosts as root] **********************************************************
2022-03-21 16:26:48,615 p=57136 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:26:48,625 p=57136 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 16:26:49,540 p=57136 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 16:26:50,512 p=57136 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:26:50,525 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 16:26:50,558 p=57136 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:26:50,573 p=57136 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:26:50,585 p=57136 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:26:51,396 p=57136 u=moonja n=ansible | [WARNING]: Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues
when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually

2022-03-21 16:26:51,396 p=57136 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:26:51,409 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:26:51,450 p=57136 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "pg_autoctl version 1.4.2\npg_autoctl extension version 1.4\ncompiled with PostgreSQL 13.3 (VMware Postgres 13.3.0) on x86_64-redhat-linux-gnu, compiled by gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-44), 64-bit\ncompatible with Postgres 10, 11, 12, and 13"
}
2022-03-21 16:26:51,465 p=57136 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:26:51,465 p=57136 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:26:51,477 p=57136 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:26:51,486 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ******************************************
2022-03-21 16:26:51,532 p=57136 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:26:51,532 p=57136 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:26:51,543 p=57136 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:26:52,069 p=57136 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:26:52,080 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:26:52,115 p=57136 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "pg_ctl (PostgreSQL) 13.3 (VMware Postgres 13.3.0)"
}
2022-03-21 16:26:52,131 p=57136 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:26:52,132 p=57136 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:26:52,144 p=57136 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:26:52,153 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : Getting process IDs of the pg_autoctl process] *********************************************************
2022-03-21 16:26:52,903 p=57136 u=moonja n=ansible | ok: [co7-node01]
2022-03-21 16:26:52,904 p=57136 u=moonja n=ansible | ok: [co7-master]
2022-03-21 16:26:52,912 p=57136 u=moonja n=ansible | ok: [co7-node03]
2022-03-21 16:26:52,913 p=57136 u=moonja n=ansible | ok: [co7-node02]
2022-03-21 16:26:52,923 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : Printing the process IDs obtained] *********************************************************************
2022-03-21 16:26:52,969 p=57136 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 16:26:52,974 p=57136 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 16:26:52,989 p=57136 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 16:26:53,004 p=57136 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-21 16:26:53,015 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : Stop pgautofailover service of systemd] ****************************************************************
2022-03-21 16:26:53,060 p=57136 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:26:53,064 p=57136 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:26:53,077 p=57136 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:26:53,093 p=57136 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:26:53,103 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:26:53,137 p=57136 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 16:26:53,153 p=57136 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 16:26:53,155 p=57136 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 16:26:53,167 p=57136 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-21 16:26:53,177 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : Create the monitor node] *******************************************************************************
2022-03-21 16:26:53,209 p=57136 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:26:53,223 p=57136 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:26:53,236 p=57136 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:27:05,382 p=57136 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:27:05,391 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:27:05,461 p=57136 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "ansible_job_id": "796055890259.16911",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl create monitor --auth trust --ssl-self-signed --pgdata monitor )",
        "delta": "0:00:08.563634",
        "end": "2022-03-21 16:27:02.854076",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/796055890259.16911",
        "start": "2022-03-21 16:26:54.290442",
        "started": 1,
        "stderr": "16:26:54 16921 INFO  Using default --ssl-mode \"require\"\n16:26:54 16921 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n16:26:54 16921 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n16:26:54 16921 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n16:26:54 16921 INFO  Initialising a PostgreSQL cluster at \"monitor\"\n16:26:54 16921 INFO  /bin/pg_ctl initdb -s -D monitor --option '--auth=trust'\n16:26:58 16921 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/monitor/server.crt -keyout /var/lib/pgsql/monitor/server.key -subj \"/CN=co7-master\"\n16:26:58 16921 INFO  Started pg_autoctl postgres service with pid 16937\n16:26:58 16937 INFO   /usr/bin/pg_autoctl do service postgres --pgdata monitor -v\n16:26:58 16921 INFO  Started pg_autoctl monitor-init service with pid 16938\n16:26:58 16938 INFO  Granting connection privileges on 192.168.0.0/24\n16:26:58 16943 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\n16:27:00 16937 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/monitor\" on port 5432 with pid 16943\n16:27:00 16938 WARN  NOTICE:  installing required extension \"btree_gist\"\n16:27:01 16938 INFO  Your pg_auto_failover monitor instance is now ready on port 5432.\n16:27:01 16938 INFO  Monitor has been successfully initialized.\n16:27:01 16921 WARN  pg_autoctl service monitor-init exited with exit status 0\n16:27:01 16937 INFO  Postgres controller service received signal SIGTERM, terminating\n16:27:01 16937 INFO  Stopping pg_autoctl postgres service\n16:27:01 16937 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/monitor --wait stop --mode fast\n16:27:01 16921 INFO  Waiting for subprocesses to terminate.\n16:27:02 16921 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "16:26:54 16921 INFO  Using default --ssl-mode \"require\"",
            "16:26:54 16921 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "16:26:54 16921 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "16:26:54 16921 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "16:26:54 16921 INFO  Initialising a PostgreSQL cluster at \"monitor\"",
            "16:26:54 16921 INFO  /bin/pg_ctl initdb -s -D monitor --option '--auth=trust'",
            "16:26:58 16921 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/monitor/server.crt -keyout /var/lib/pgsql/monitor/server.key -subj \"/CN=co7-master\"",
            "16:26:58 16921 INFO  Started pg_autoctl postgres service with pid 16937",
            "16:26:58 16937 INFO   /usr/bin/pg_autoctl do service postgres --pgdata monitor -v",
            "16:26:58 16921 INFO  Started pg_autoctl monitor-init service with pid 16938",
            "16:26:58 16938 INFO  Granting connection privileges on 192.168.0.0/24",
            "16:26:58 16943 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *",
            "16:27:00 16937 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/monitor\" on port 5432 with pid 16943",
            "16:27:00 16938 WARN  NOTICE:  installing required extension \"btree_gist\"",
            "16:27:01 16938 INFO  Your pg_auto_failover monitor instance is now ready on port 5432.",
            "16:27:01 16938 INFO  Monitor has been successfully initialized.",
            "16:27:01 16921 WARN  pg_autoctl service monitor-init exited with exit status 0",
            "16:27:01 16937 INFO  Postgres controller service received signal SIGTERM, terminating",
            "16:27:01 16937 INFO  Stopping pg_autoctl postgres service",
            "16:27:01 16937 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/monitor --wait stop --mode fast",
            "16:27:01 16921 INFO  Waiting for subprocesses to terminate.",
            "16:27:02 16921 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 16:27:05,475 p=57136 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:27:05,476 p=57136 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:27:05,490 p=57136 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:27:05,500 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of monitor instance] *******************************************************
2022-03-21 16:27:05,547 p=57136 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:27:05,548 p=57136 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:27:05,560 p=57136 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:27:13,493 p=57136 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:27:13,503 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : Copy systemd service file of monitor instance] *********************************************************
2022-03-21 16:27:13,538 p=57136 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:27:13,552 p=57136 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:27:13,565 p=57136 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:27:13,984 p=57136 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:27:13,996 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start systemd service of monitor instance] **************************************************
2022-03-21 16:27:14,030 p=57136 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:27:14,046 p=57136 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:27:14,059 p=57136 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:27:15,213 p=57136 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:27:15,223 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:27:15,261 p=57136 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": true,
        "enabled": true,
        "failed": false,
        "name": "pgautofailover",
        "state": "started",
        "status": {
            "ActiveEnterTimestampMonotonic": "0",
            "ActiveExitTimestampMonotonic": "0",
            "ActiveState": "inactive",
            "After": "-.mount basic.target systemd-journald.socket system.slice",
            "AllowIsolate": "no",
            "AmbientCapabilities": "0",
            "AssertResult": "no",
            "AssertTimestampMonotonic": "0",
            "Before": "shutdown.target",
            "BlockIOAccounting": "no",
            "BlockIOWeight": "18446744073709551615",
            "CPUAccounting": "no",
            "CPUQuotaPerSecUSec": "infinity",
            "CPUSchedulingPolicy": "0",
            "CPUSchedulingPriority": "0",
            "CPUSchedulingResetOnFork": "no",
            "CPUShares": "18446744073709551615",
            "CanIsolate": "no",
            "CanReload": "no",
            "CanStart": "yes",
            "CanStop": "yes",
            "CapabilityBoundingSet": "18446744073709551615",
            "CollectMode": "inactive",
            "ConditionResult": "no",
            "ConditionTimestampMonotonic": "0",
            "Conflicts": "shutdown.target",
            "ControlPID": "0",
            "DefaultDependencies": "yes",
            "Delegate": "no",
            "Description": "pg_auto_failover",
            "DevicePolicy": "auto",
            "Environment": "PGDATA=/var/lib/pgsql/monitor",
            "ExecMainCode": "0",
            "ExecMainExitTimestampMonotonic": "0",
            "ExecMainPID": "0",
            "ExecMainStartTimestampMonotonic": "0",
            "ExecMainStatus": "0",
            "ExecStart": "{ path=/usr/bin/pg_autoctl ; argv[]=/usr/bin/pg_autoctl run ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }",
            "FailureAction": "none",
            "FileDescriptorStoreMax": "0",
            "FragmentPath": "/etc/systemd/system/pgautofailover.service",
            "GuessMainPID": "yes",
            "IOScheduling": "0",
            "Id": "pgautofailover.service",
            "IgnoreOnIsolate": "no",
            "IgnoreOnSnapshot": "no",
            "IgnoreSIGPIPE": "yes",
            "InactiveEnterTimestampMonotonic": "0",
            "InactiveExitTimestampMonotonic": "0",
            "JobTimeoutAction": "none",
            "JobTimeoutUSec": "0",
            "KillMode": "control-group",
            "KillSignal": "15",
            "LimitAS": "18446744073709551615",
            "LimitCORE": "18446744073709551615",
            "LimitCPU": "18446744073709551615",
            "LimitDATA": "18446744073709551615",
            "LimitFSIZE": "18446744073709551615",
            "LimitLOCKS": "18446744073709551615",
            "LimitMEMLOCK": "65536",
            "LimitMSGQUEUE": "819200",
            "LimitNICE": "0",
            "LimitNOFILE": "4096",
            "LimitNPROC": "47321",
            "LimitRSS": "18446744073709551615",
            "LimitRTPRIO": "0",
            "LimitRTTIME": "18446744073709551615",
            "LimitSIGPENDING": "47321",
            "LimitSTACK": "18446744073709551615",
            "LoadState": "loaded",
            "MainPID": "0",
            "MemoryAccounting": "no",
            "MemoryCurrent": "18446744073709551615",
            "MemoryLimit": "18446744073709551615",
            "MountFlags": "0",
            "Names": "pgautofailover.service",
            "NeedDaemonReload": "no",
            "Nice": "0",
            "NoNewPrivileges": "no",
            "NonBlocking": "no",
            "NotifyAccess": "none",
            "OOMScoreAdjust": "0",
            "OnFailureJobMode": "replace",
            "PermissionsStartOnly": "no",
            "PrivateDevices": "no",
            "PrivateNetwork": "no",
            "PrivateTmp": "no",
            "ProtectHome": "no",
            "ProtectSystem": "no",
            "RefuseManualStart": "no",
            "RefuseManualStop": "no",
            "RemainAfterExit": "no",
            "Requires": "-.mount basic.target system.slice",
            "RequiresMountsFor": "/var/lib/pgsql",
            "Restart": "always",
            "RestartUSec": "100ms",
            "Result": "success",
            "RootDirectoryStartOnly": "no",
            "RuntimeDirectoryMode": "0755",
            "SameProcessGroup": "no",
            "SecureBits": "0",
            "SendSIGHUP": "no",
            "SendSIGKILL": "yes",
            "Slice": "system.slice",
            "StandardError": "inherit",
            "StandardInput": "null",
            "StandardOutput": "journal",
            "StartLimitAction": "none",
            "StartLimitBurst": "0",
            "StartLimitInterval": "10000000",
            "StartupBlockIOWeight": "18446744073709551615",
            "StartupCPUShares": "18446744073709551615",
            "StatusErrno": "0",
            "StopWhenUnneeded": "no",
            "SubState": "dead",
            "SyslogLevelPrefix": "yes",
            "SyslogPriority": "30",
            "SystemCallErrorNumber": "0",
            "TTYReset": "no",
            "TTYVHangup": "no",
            "TTYVTDisallocate": "no",
            "TasksAccounting": "no",
            "TasksCurrent": "18446744073709551615",
            "TasksMax": "18446744073709551615",
            "TimeoutStartUSec": "1min 30s",
            "TimeoutStopUSec": "1min 30s",
            "TimerSlackNSec": "50000",
            "Transient": "no",
            "Type": "simple",
            "UMask": "0022",
            "UnitFilePreset": "disabled",
            "UnitFileState": "disabled",
            "User": "postgres",
            "WatchdogTimestampMonotonic": "0",
            "WatchdogUSec": "0",
            "WorkingDirectory": "/var/lib/pgsql"
        }
    }
}
2022-03-21 16:27:15,277 p=57136 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:27:15,278 p=57136 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:27:15,290 p=57136 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:27:15,299 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 16:27:15,335 p=57136 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:27:15,351 p=57136 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:27:15,363 p=57136 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:27:16,063 p=57136 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:27:16,071 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the current state of monitor instance] **********************************************************
2022-03-21 16:27:16,106 p=57136 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:27:16,121 p=57136 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:27:16,133 p=57136 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:27:16,659 p=57136 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:27:16,669 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:27:16,710 p=57136 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": true,
        "cmd": "( ps -ef | grep postgres )",
        "delta": "0:00:00.036431",
        "end": "2022-03-21 16:27:17.047176",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-21 16:27:17.010745",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "postgres 17944     1  0 16:27 ?        00:00:00 /usr/bin/pg_autoctl run\npostgres 17947 17944  0 16:27 ?        00:00:00 pg_autoctl: start/stop postgres\npostgres 17948 17944  0 16:27 ?        00:00:00 pg_autoctl: monitor listener\npostgres 18022 17947  2 16:27 ?        00:00:00 /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\npostgres 18072 18022  0 16:27 ?        00:00:00 postgres: pg_auto_failover monitor: logger \npostgres 18094 18022  0 16:27 ?        00:00:00 postgres: pg_auto_failover monitor: checkpointer \npostgres 18095 18022  0 16:27 ?        00:00:00 postgres: pg_auto_failover monitor: background writer\npostgres 18096 18022  0 16:27 ?        00:00:00 postgres: pg_auto_failover monitor: walwriter \npostgres 18097 18022  0 16:27 ?        00:00:00 postgres: pg_auto_failover monitor: autovacuum launcher\npostgres 18098 18022  0 16:27 ?        00:00:00 postgres: pg_auto_failover monitor: stats collector \npostgres 18099 18022  0 16:27 ?        00:00:00 postgres: pg_auto_failover monitor: pg_auto_failover monitor\npostgres 18100 18022  0 16:27 ?        00:00:00 postgres: pg_auto_failover monitor: logical replication launcher\npostgres 18105 18022  0 16:27 ?        00:00:00 postgres: pg_auto_failover monitor: pg_auto_failover monitor worker\npostgres 18107 18022  0 16:27 ?        00:00:00 postgres: pg_auto_failover monitor: pg_auto_failover monitor worker\npostgres 18179 18022  0 16:27 ?        00:00:00 postgres: pg_auto_failover monitor: autoctl_node pg_auto_failover [local] idle\njomoon   18206 13304  0 16:27 pts/0    00:00:00 /bin/sh -c sudo -H -S  -p \"[sudo via ansible, key=czlaaovvkfdmkxjcgiewuvutfhacbrot] password:\" -u postgres /bin/sh -c 'echo BECOME-SUCCESS-czlaaovvkfdmkxjcgiewuvutfhacbrot ; /usr/bin/python /var/tmp/ansible-tmp-1647847636.181525-58610-203086208141054/AnsiballZ_command.py' && sleep 0\nroot     18230 18206  0 16:27 pts/0    00:00:00 sudo -H -S -p [sudo via ansible, key=czlaaovvkfdmkxjcgiewuvutfhacbrot] password: -u postgres /bin/sh -c echo BECOME-SUCCESS-czlaaovvkfdmkxjcgiewuvutfhacbrot ; /usr/bin/python /var/tmp/ansible-tmp-1647847636.181525-58610-203086208141054/AnsiballZ_command.py\npostgres 18231 18230  0 16:27 pts/0    00:00:00 /bin/sh -c echo BECOME-SUCCESS-czlaaovvkfdmkxjcgiewuvutfhacbrot ; /usr/bin/python /var/tmp/ansible-tmp-1647847636.181525-58610-203086208141054/AnsiballZ_command.py\npostgres 18232 18231  0 16:27 pts/0    00:00:00 /usr/bin/python /var/tmp/ansible-tmp-1647847636.181525-58610-203086208141054/AnsiballZ_command.py\npostgres 18234 18232  0 16:27 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )\npostgres 18235 18234  0 16:27 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )\npostgres 18236 18235  0 16:27 pts/0    00:00:00 ps -ef\npostgres 18237 18235  0 16:27 pts/0    00:00:00 grep postgres",
        "stdout_lines": [
            "postgres 17944     1  0 16:27 ?        00:00:00 /usr/bin/pg_autoctl run",
            "postgres 17947 17944  0 16:27 ?        00:00:00 pg_autoctl: start/stop postgres",
            "postgres 17948 17944  0 16:27 ?        00:00:00 pg_autoctl: monitor listener",
            "postgres 18022 17947  2 16:27 ?        00:00:00 /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *",
            "postgres 18072 18022  0 16:27 ?        00:00:00 postgres: pg_auto_failover monitor: logger ",
            "postgres 18094 18022  0 16:27 ?        00:00:00 postgres: pg_auto_failover monitor: checkpointer ",
            "postgres 18095 18022  0 16:27 ?        00:00:00 postgres: pg_auto_failover monitor: background writer",
            "postgres 18096 18022  0 16:27 ?        00:00:00 postgres: pg_auto_failover monitor: walwriter ",
            "postgres 18097 18022  0 16:27 ?        00:00:00 postgres: pg_auto_failover monitor: autovacuum launcher",
            "postgres 18098 18022  0 16:27 ?        00:00:00 postgres: pg_auto_failover monitor: stats collector ",
            "postgres 18099 18022  0 16:27 ?        00:00:00 postgres: pg_auto_failover monitor: pg_auto_failover monitor",
            "postgres 18100 18022  0 16:27 ?        00:00:00 postgres: pg_auto_failover monitor: logical replication launcher",
            "postgres 18105 18022  0 16:27 ?        00:00:00 postgres: pg_auto_failover monitor: pg_auto_failover monitor worker",
            "postgres 18107 18022  0 16:27 ?        00:00:00 postgres: pg_auto_failover monitor: pg_auto_failover monitor worker",
            "postgres 18179 18022  0 16:27 ?        00:00:00 postgres: pg_auto_failover monitor: autoctl_node pg_auto_failover [local] idle",
            "jomoon   18206 13304  0 16:27 pts/0    00:00:00 /bin/sh -c sudo -H -S  -p \"[sudo via ansible, key=czlaaovvkfdmkxjcgiewuvutfhacbrot] password:\" -u postgres /bin/sh -c 'echo BECOME-SUCCESS-czlaaovvkfdmkxjcgiewuvutfhacbrot ; /usr/bin/python /var/tmp/ansible-tmp-1647847636.181525-58610-203086208141054/AnsiballZ_command.py' && sleep 0",
            "root     18230 18206  0 16:27 pts/0    00:00:00 sudo -H -S -p [sudo via ansible, key=czlaaovvkfdmkxjcgiewuvutfhacbrot] password: -u postgres /bin/sh -c echo BECOME-SUCCESS-czlaaovvkfdmkxjcgiewuvutfhacbrot ; /usr/bin/python /var/tmp/ansible-tmp-1647847636.181525-58610-203086208141054/AnsiballZ_command.py",
            "postgres 18231 18230  0 16:27 pts/0    00:00:00 /bin/sh -c echo BECOME-SUCCESS-czlaaovvkfdmkxjcgiewuvutfhacbrot ; /usr/bin/python /var/tmp/ansible-tmp-1647847636.181525-58610-203086208141054/AnsiballZ_command.py",
            "postgres 18232 18231  0 16:27 pts/0    00:00:00 /usr/bin/python /var/tmp/ansible-tmp-1647847636.181525-58610-203086208141054/AnsiballZ_command.py",
            "postgres 18234 18232  0 16:27 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )",
            "postgres 18235 18234  0 16:27 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )",
            "postgres 18236 18235  0 16:27 pts/0    00:00:00 ps -ef",
            "postgres 18237 18235  0 16:27 pts/0    00:00:00 grep postgres"
        ]
    }
}
2022-03-21 16:27:16,725 p=57136 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:27:16,726 p=57136 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:27:16,738 p=57136 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:27:16,748 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the current state of monitor] *******************************************************************
2022-03-21 16:27:16,796 p=57136 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:27:16,797 p=57136 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:27:16,809 p=57136 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:27:17,245 p=57136 u=moonja n=ansible | changed: [co7-master]
2022-03-21 16:27:17,255 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:27:17,311 p=57136 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": true,
        "cmd": "( psql -c \"\\l\" )",
        "delta": "0:00:00.034044",
        "end": "2022-03-21 16:27:17.676186",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-21 16:27:17.642142",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "                                    List of databases\n       Name       |  Owner   | Encoding |  Collate   |   Ctype    |   Access privileges   \n------------------+----------+----------+------------+------------+-----------------------\n pg_auto_failover | autoctl  | UTF8     | en_US.utf8 | en_US.utf8 | \n postgres         | postgres | UTF8     | en_US.utf8 | en_US.utf8 | \n template0        | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +\n                  |          |          |            |            | postgres=CTc/postgres\n template1        | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +\n                  |          |          |            |            | postgres=CTc/postgres\n(4 rows)",
        "stdout_lines": [
            "                                    List of databases",
            "       Name       |  Owner   | Encoding |  Collate   |   Ctype    |   Access privileges   ",
            "------------------+----------+----------+------------+------------+-----------------------",
            " pg_auto_failover | autoctl  | UTF8     | en_US.utf8 | en_US.utf8 | ",
            " postgres         | postgres | UTF8     | en_US.utf8 | en_US.utf8 | ",
            " template0        | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +",
            "                  |          |          |            |            | postgres=CTc/postgres",
            " template1        | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +",
            "                  |          |          |            |            | postgres=CTc/postgres",
            "(4 rows)"
        ]
    }
}
2022-03-21 16:27:17,326 p=57136 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:27:17,327 p=57136 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:27:17,339 p=57136 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:27:17,348 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : Create primiary instance. It will automatically be set by the monitor as the primary node with read-write capability (PGDATA = /var/lib/pgpsql/ha)] ***
2022-03-21 16:27:17,368 p=57136 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:27:17,396 p=57136 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:27:17,406 p=57136 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:27:33,752 p=57136 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:27:33,761 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:27:33,794 p=57136 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:27:33,814 p=57136 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "814802905459.17635",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ;  pg_autoctl create postgres --pgdata \"ha\" --auth trust --ssl-self-signed --username ha-admin --dbname \"appdb\" --hostname \"co7-node01\" --pgctl /bin/pg_ctl --monitor 'postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require' )",
        "delta": "0:00:06.261189",
        "end": "2022-03-21 16:27:25.830665",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/814802905459.17635",
        "start": "2022-03-21 16:27:19.569476",
        "started": 1,
        "stderr": "16:27:19 17645 INFO  Using default --ssl-mode \"require\"\n16:27:19 17645 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n16:27:19 17645 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n16:27:19 17645 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n16:27:19 17645 INFO  Started pg_autoctl postgres service with pid 17647\n16:27:19 17647 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v\n16:27:19 17645 INFO  Started pg_autoctl node-init service with pid 17648\n16:27:19 17648 INFO  Registered node 1 (co7-node01:5432) with name \"node_1\" in formation \"default\", group 0, state \"single\"\n16:27:19 17648 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"\n16:27:19 17648 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"\n16:27:20 17648 INFO  Successfully registered as \"single\" to the monitor.\n16:27:20 17648 INFO  FSM transition from \"init\" to \"single\": Start as a single node\n16:27:20 17648 INFO  Initialising postgres as a primary\n16:27:20 17648 INFO  Initialising a PostgreSQL cluster at \"ha\"\n16:27:20 17648 INFO  /bin/pg_ctl initdb -s -D ha --option '--auth=trust'\n16:27:21 17648 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n16:27:21 17648 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.\n16:27:21 17648 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n16:27:21 17648 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"\n16:27:21 17648 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node01\"\n16:27:21 17669 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *\n16:27:22 17647 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 17669\n16:27:22 17648 INFO  CREATE DATABASE appdb;\n16:27:24 17648 INFO  CREATE EXTENSION pg_stat_statements;\n16:27:24 17648 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node01\"\n16:27:24 17648 INFO  Contents of \"/var/lib/pgsql/ha/postgresql-auto-failover.conf\" have changed, overwriting\n16:27:24 17648 WARN  Failed to resolve hostname \"co7-master\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n16:27:24 17648 WARN  Postgres might deny connection attempts from \"co7-master\", even with the new HBA rules.\n16:27:24 17648 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n16:27:24 17648 WARN  Using IP address \"192.168.0.81\" in HBA file instead of hostname \"co7-master\"\n16:27:24 17648 INFO  Transition complete: current state is now \"single\"\n16:27:24 17648 INFO  keeper has been successfully initialized.\n16:27:24 17645 WARN  pg_autoctl service node-init exited with exit status 0\n16:27:24 17647 INFO  Postgres controller service received signal SIGTERM, terminating\n16:27:24 17647 INFO  Stopping pg_autoctl postgres service\n16:27:24 17647 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast\n16:27:24 17645 INFO  Waiting for subprocesses to terminate.\n16:27:25 17645 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "16:27:19 17645 INFO  Using default --ssl-mode \"require\"",
            "16:27:19 17645 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "16:27:19 17645 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "16:27:19 17645 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "16:27:19 17645 INFO  Started pg_autoctl postgres service with pid 17647",
            "16:27:19 17647 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v",
            "16:27:19 17645 INFO  Started pg_autoctl node-init service with pid 17648",
            "16:27:19 17648 INFO  Registered node 1 (co7-node01:5432) with name \"node_1\" in formation \"default\", group 0, state \"single\"",
            "16:27:19 17648 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"",
            "16:27:19 17648 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"",
            "16:27:20 17648 INFO  Successfully registered as \"single\" to the monitor.",
            "16:27:20 17648 INFO  FSM transition from \"init\" to \"single\": Start as a single node",
            "16:27:20 17648 INFO  Initialising postgres as a primary",
            "16:27:20 17648 INFO  Initialising a PostgreSQL cluster at \"ha\"",
            "16:27:20 17648 INFO  /bin/pg_ctl initdb -s -D ha --option '--auth=trust'",
            "16:27:21 17648 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "16:27:21 17648 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.",
            "16:27:21 17648 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "16:27:21 17648 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"",
            "16:27:21 17648 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node01\"",
            "16:27:21 17669 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *",
            "16:27:22 17647 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 17669",
            "16:27:22 17648 INFO  CREATE DATABASE appdb;",
            "16:27:24 17648 INFO  CREATE EXTENSION pg_stat_statements;",
            "16:27:24 17648 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node01\"",
            "16:27:24 17648 INFO  Contents of \"/var/lib/pgsql/ha/postgresql-auto-failover.conf\" have changed, overwriting",
            "16:27:24 17648 WARN  Failed to resolve hostname \"co7-master\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "16:27:24 17648 WARN  Postgres might deny connection attempts from \"co7-master\", even with the new HBA rules.",
            "16:27:24 17648 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "16:27:24 17648 WARN  Using IP address \"192.168.0.81\" in HBA file instead of hostname \"co7-master\"",
            "16:27:24 17648 INFO  Transition complete: current state is now \"single\"",
            "16:27:24 17648 INFO  keeper has been successfully initialized.",
            "16:27:24 17645 WARN  pg_autoctl service node-init exited with exit status 0",
            "16:27:24 17647 INFO  Postgres controller service received signal SIGTERM, terminating",
            "16:27:24 17647 INFO  Stopping pg_autoctl postgres service",
            "16:27:24 17647 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast",
            "16:27:24 17645 INFO  Waiting for subprocesses to terminate.",
            "16:27:25 17645 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": [],
        "warnings": [
            "Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually"
        ]
    }
}
2022-03-21 16:27:33,814 p=57136 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:27:33,825 p=57136 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:27:33,834 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of pirmary instance] *******************************************************
2022-03-21 16:27:33,852 p=57136 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:27:33,881 p=57136 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:27:33,892 p=57136 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:27:41,874 p=57136 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:27:41,884 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:27:41,905 p=57136 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:27:41,937 p=57136 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "825069521193.18137",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl -q show systemd --pgdata ~postgres/ha > pgautofailover.service )",
        "delta": "0:00:00.031655",
        "end": "2022-03-21 16:27:35.513757",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/825069521193.18137",
        "start": "2022-03-21 16:27:35.482102",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 16:27:41,938 p=57136 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:27:41,946 p=57136 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:27:41,959 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : Copy primary systemd service file of primary instance] *************************************************
2022-03-21 16:27:41,990 p=57136 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:27:42,005 p=57136 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:27:42,015 p=57136 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:27:42,498 p=57136 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:27:42,510 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start primary systemd service of primary instance] ******************************************
2022-03-21 16:27:42,533 p=57136 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:27:42,563 p=57136 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:27:42,573 p=57136 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:27:43,378 p=57136 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:27:43,388 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 16:27:43,407 p=57136 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:27:43,437 p=57136 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:27:43,449 p=57136 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:27:43,964 p=57136 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:27:43,976 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the state of primary instance] ******************************************************************
2022-03-21 16:27:43,996 p=57136 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:27:44,025 p=57136 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:27:44,035 p=57136 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:27:44,553 p=57136 u=moonja n=ansible | changed: [co7-node01]
2022-03-21 16:27:44,564 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:27:44,597 p=57136 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:27:44,616 p=57136 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "changed": true,
        "cmd": "( source ~/.bash_profile ; pg_autoctl show state )",
        "delta": "0:00:00.064096",
        "end": "2022-03-21 16:27:44.974572",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-21 16:27:44.910476",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State\n-------+-------+-----------------+-----------+-----------+---------------------+--------------------\nnode_1 |     1 | co7-node01:5432 | 0/1662668 |       yes |              single |              single",
        "stdout_lines": [
            "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State",
            "-------+-------+-----------------+-----------+-----------+---------------------+--------------------",
            "node_1 |     1 | co7-node01:5432 | 0/1662668 |       yes |              single |              single"
        ]
    }
}
2022-03-21 16:27:44,616 p=57136 u=moonja n=ansible | skipping: [co7-node02]
2022-03-21 16:27:44,626 p=57136 u=moonja n=ansible | skipping: [co7-node03]
2022-03-21 16:27:44,636 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : Create secondary instance. It will automatically be set by the monitor as the secondary  node with read-write capability (PGDATA = /var/lib/pgpsql/ha)] ***
2022-03-21 16:27:44,669 p=57136 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:27:44,683 p=57136 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:27:56,379 p=57136 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 16:28:01,951 p=57136 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 16:28:01,959 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:28:01,995 p=57136 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:28:02,008 p=57136 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:28:02,015 p=57136 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "ansible_job_id": "721599183308.28200",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ;  pg_autoctl create postgres --pgdata \"ha\" --auth trust --ssl-self-signed --username ha-admin --dbname \"appdb\" --hostname \"co7-node02\" --pgctl /bin/pg_ctl --monitor 'postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require' )",
        "delta": "0:00:10.882728",
        "end": "2022-03-21 16:27:56.569125",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/721599183308.28200",
        "start": "2022-03-21 16:27:45.686397",
        "started": 1,
        "stderr": "16:27:45 28210 INFO  Using default --ssl-mode \"require\"\n16:27:45 28210 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n16:27:45 28210 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n16:27:45 28210 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n16:27:45 28210 INFO  Started pg_autoctl postgres service with pid 28212\n16:27:45 28212 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v\n16:27:45 28210 INFO  Started pg_autoctl node-init service with pid 28213\n16:27:46 28213 INFO  Registered node 3 (co7-node02:5432) with name \"node_3\" in formation \"default\", group 0, state \"wait_standby\"\n16:27:46 28213 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"\n16:27:46 28213 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"\n16:27:47 28213 INFO  Successfully registered as \"wait_standby\" to the monitor.\n16:27:47 28213 INFO  FSM transition from \"init\" to \"wait_standby\": Start following a primary\n16:27:47 28213 INFO  Transition complete: current state is now \"wait_standby\"\n16:27:47 28213 INFO  New state for node 1 \"node_1\" (co7-node01:5432): single ➜ wait_primary\n16:27:47 28213 INFO  New state for node 1 \"node_1\" (co7-node01:5432): wait_primary ➜ wait_primary\n16:27:47 28213 INFO  Still waiting for the monitor to drive us to state \"catchingup\"\n16:27:47 28213 WARN  Please make sure that the primary node is currently running `pg_autoctl run` and contacting the monitor.\n16:27:47 28213 INFO  FSM transition from \"wait_standby\" to \"catchingup\": The primary is now ready to accept a standby\n16:27:47 28213 INFO  Initialising PostgreSQL as a hot standby\n16:27:47 28213 INFO   /bin/pg_basebackup -w -d application_name=pgautofailover_standby_3 host=co7-node01 port=5432 user=pgautofailover_replicator sslmode=require --pgdata /var/lib/pgsql/backup/node_3 -U pgautofailover_replicator --verbose --progress --max-rate 100M --wal-method=stream --slot pgautofailover_standby_3\n16:27:47 28213 INFO  pg_basebackup: initiating base backup, waiting for checkpoint to complete\n16:27:50 28213 INFO  pg_basebackup: checkpoint completed\n16:27:50 28213 INFO  pg_basebackup: write-ahead log start point: 0/20000D8 on timeline 1\n16:27:50 28213 INFO  pg_basebackup: starting background WAL receiver\n16:27:50 28213 INFO      0/33120 kB (0%), 0/1 tablespace (...pgsql/backup/node_3/backup_label)\n16:27:51 28213 INFO  13070/33120 kB (39%), 0/1 tablespace (...ql/backup/node_3/base/14173/2655)\n16:27:51 28213 INFO  33129/33129 kB (100%), 0/1 tablespace (.../backup/node_3/global/pg_control)\n16:27:51 28213 INFO  33129/33129 kB (100%), 1/1 tablespace                                         \n16:27:51 28213 INFO  pg_basebackup: write-ahead log end point: 0/3000100\n16:27:51 28213 INFO  pg_basebackup: waiting for background process to finish streaming ...\n16:27:51 28213 INFO  pg_basebackup: syncing data to disk ...\n16:27:53 28213 INFO  pg_basebackup: renaming backup_manifest.tmp to backup_manifest\n16:27:53 28213 INFO  pg_basebackup: base backup completed\n16:27:53 28213 INFO  Creating the standby signal file at \"/var/lib/pgsql/ha/standby.signal\", and replication setup at \"/var/lib/pgsql/ha/postgresql-auto-failover-standby.conf\"\n16:27:53 28213 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node02\"\n16:27:53 28359 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *\n16:27:55 28212 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 28359\n16:27:55 28213 INFO  PostgreSQL started on port 5432\n16:27:55 28213 INFO  Fetched current list of 2 other nodes from the monitor to update HBA rules, including 2 changes.\n16:27:55 28213 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n16:27:55 28213 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.\n16:27:55 28213 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n16:27:55 28213 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"\n16:27:55 28213 INFO  Ensuring HBA rules for node 1 \"node_1\" (192.168.0.83:5432)\n16:27:55 28213 WARN  Failed to resolve hostname \"co7-node03\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n16:27:55 28213 WARN  Postgres might deny connection attempts from \"co7-node03\", even with the new HBA rules.\n16:27:55 28213 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n16:27:55 28213 WARN  Using IP address \"192.168.0.85\" in HBA file instead of hostname \"co7-node03\"\n16:27:55 28213 INFO  Ensuring HBA rules for node 2 \"node_2\" (192.168.0.85:5432)\n16:27:55 28213 INFO  Transition complete: current state is now \"catchingup\"\n16:27:56 28213 INFO  keeper has been successfully initialized.\n16:27:56 28210 WARN  pg_autoctl service node-init exited with exit status 0\n16:27:56 28212 INFO  Postgres controller service received signal SIGTERM, terminating\n16:27:56 28212 INFO  Stopping pg_autoctl postgres service\n16:27:56 28212 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast\n16:27:56 28210 INFO  Waiting for subprocesses to terminate.\n16:27:56 28210 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "16:27:45 28210 INFO  Using default --ssl-mode \"require\"",
            "16:27:45 28210 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "16:27:45 28210 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "16:27:45 28210 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "16:27:45 28210 INFO  Started pg_autoctl postgres service with pid 28212",
            "16:27:45 28212 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v",
            "16:27:45 28210 INFO  Started pg_autoctl node-init service with pid 28213",
            "16:27:46 28213 INFO  Registered node 3 (co7-node02:5432) with name \"node_3\" in formation \"default\", group 0, state \"wait_standby\"",
            "16:27:46 28213 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"",
            "16:27:46 28213 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"",
            "16:27:47 28213 INFO  Successfully registered as \"wait_standby\" to the monitor.",
            "16:27:47 28213 INFO  FSM transition from \"init\" to \"wait_standby\": Start following a primary",
            "16:27:47 28213 INFO  Transition complete: current state is now \"wait_standby\"",
            "16:27:47 28213 INFO  New state for node 1 \"node_1\" (co7-node01:5432): single ➜ wait_primary",
            "16:27:47 28213 INFO  New state for node 1 \"node_1\" (co7-node01:5432): wait_primary ➜ wait_primary",
            "16:27:47 28213 INFO  Still waiting for the monitor to drive us to state \"catchingup\"",
            "16:27:47 28213 WARN  Please make sure that the primary node is currently running `pg_autoctl run` and contacting the monitor.",
            "16:27:47 28213 INFO  FSM transition from \"wait_standby\" to \"catchingup\": The primary is now ready to accept a standby",
            "16:27:47 28213 INFO  Initialising PostgreSQL as a hot standby",
            "16:27:47 28213 INFO   /bin/pg_basebackup -w -d application_name=pgautofailover_standby_3 host=co7-node01 port=5432 user=pgautofailover_replicator sslmode=require --pgdata /var/lib/pgsql/backup/node_3 -U pgautofailover_replicator --verbose --progress --max-rate 100M --wal-method=stream --slot pgautofailover_standby_3",
            "16:27:47 28213 INFO  pg_basebackup: initiating base backup, waiting for checkpoint to complete",
            "16:27:50 28213 INFO  pg_basebackup: checkpoint completed",
            "16:27:50 28213 INFO  pg_basebackup: write-ahead log start point: 0/20000D8 on timeline 1",
            "16:27:50 28213 INFO  pg_basebackup: starting background WAL receiver",
            "16:27:50 28213 INFO      0/33120 kB (0%), 0/1 tablespace (...pgsql/backup/node_3/backup_label)",
            "16:27:51 28213 INFO  13070/33120 kB (39%), 0/1 tablespace (...ql/backup/node_3/base/14173/2655)",
            "16:27:51 28213 INFO  33129/33129 kB (100%), 0/1 tablespace (.../backup/node_3/global/pg_control)",
            "16:27:51 28213 INFO  33129/33129 kB (100%), 1/1 tablespace                                         ",
            "16:27:51 28213 INFO  pg_basebackup: write-ahead log end point: 0/3000100",
            "16:27:51 28213 INFO  pg_basebackup: waiting for background process to finish streaming ...",
            "16:27:51 28213 INFO  pg_basebackup: syncing data to disk ...",
            "16:27:53 28213 INFO  pg_basebackup: renaming backup_manifest.tmp to backup_manifest",
            "16:27:53 28213 INFO  pg_basebackup: base backup completed",
            "16:27:53 28213 INFO  Creating the standby signal file at \"/var/lib/pgsql/ha/standby.signal\", and replication setup at \"/var/lib/pgsql/ha/postgresql-auto-failover-standby.conf\"",
            "16:27:53 28213 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node02\"",
            "16:27:53 28359 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *",
            "16:27:55 28212 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 28359",
            "16:27:55 28213 INFO  PostgreSQL started on port 5432",
            "16:27:55 28213 INFO  Fetched current list of 2 other nodes from the monitor to update HBA rules, including 2 changes.",
            "16:27:55 28213 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "16:27:55 28213 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.",
            "16:27:55 28213 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "16:27:55 28213 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"",
            "16:27:55 28213 INFO  Ensuring HBA rules for node 1 \"node_1\" (192.168.0.83:5432)",
            "16:27:55 28213 WARN  Failed to resolve hostname \"co7-node03\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "16:27:55 28213 WARN  Postgres might deny connection attempts from \"co7-node03\", even with the new HBA rules.",
            "16:27:55 28213 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "16:27:55 28213 WARN  Using IP address \"192.168.0.85\" in HBA file instead of hostname \"co7-node03\"",
            "16:27:55 28213 INFO  Ensuring HBA rules for node 2 \"node_2\" (192.168.0.85:5432)",
            "16:27:55 28213 INFO  Transition complete: current state is now \"catchingup\"",
            "16:27:56 28213 INFO  keeper has been successfully initialized.",
            "16:27:56 28210 WARN  pg_autoctl service node-init exited with exit status 0",
            "16:27:56 28212 INFO  Postgres controller service received signal SIGTERM, terminating",
            "16:27:56 28212 INFO  Stopping pg_autoctl postgres service",
            "16:27:56 28212 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast",
            "16:27:56 28210 INFO  Waiting for subprocesses to terminate.",
            "16:27:56 28210 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": [],
        "warnings": [
            "Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually"
        ]
    }
}
2022-03-21 16:28:02,060 p=57136 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "ansible_job_id": "128310841374.27549",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ;  pg_autoctl create postgres --pgdata \"ha\" --auth trust --ssl-self-signed --username ha-admin --dbname \"appdb\" --hostname \"co7-node03\" --pgctl /bin/pg_ctl --monitor 'postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require' )",
        "delta": "0:00:10.182647",
        "end": "2022-03-21 16:27:55.865108",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/128310841374.27549",
        "start": "2022-03-21 16:27:45.682461",
        "started": 1,
        "stderr": "16:27:45 27559 INFO  Using default --ssl-mode \"require\"\n16:27:45 27559 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n16:27:45 27559 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n16:27:45 27559 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n16:27:45 27559 INFO  Started pg_autoctl postgres service with pid 27561\n16:27:45 27559 INFO  Started pg_autoctl node-init service with pid 27562\n16:27:45 27561 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v\n16:27:46 27562 INFO  Registered node 2 (co7-node03:5432) with name \"node_2\" in formation \"default\", group 0, state \"wait_standby\"\n16:27:46 27562 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"\n16:27:46 27562 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"\n16:27:46 27562 INFO  Successfully registered as \"wait_standby\" to the monitor.\n16:27:46 27562 INFO  FSM transition from \"init\" to \"wait_standby\": Start following a primary\n16:27:46 27562 INFO  Transition complete: current state is now \"wait_standby\"\n16:27:47 27562 INFO  New state for node 3 \"node_3\" (co7-node02:5432): wait_standby ➜ wait_standby\n16:27:47 27562 INFO  New state for node 1 \"node_1\" (co7-node01:5432): single ➜ wait_primary\n16:27:47 27562 INFO  New state for node 1 \"node_1\" (co7-node01:5432): wait_primary ➜ wait_primary\n16:27:47 27562 INFO  Still waiting for the monitor to drive us to state \"catchingup\"\n16:27:47 27562 WARN  Please make sure that the primary node is currently running `pg_autoctl run` and contacting the monitor.\n16:27:47 27562 INFO  FSM transition from \"wait_standby\" to \"catchingup\": The primary is now ready to accept a standby\n16:27:47 27562 INFO  Initialising PostgreSQL as a hot standby\n16:27:47 27562 INFO   /bin/pg_basebackup -w -d application_name=pgautofailover_standby_2 host=co7-node01 port=5432 user=pgautofailover_replicator sslmode=require --pgdata /var/lib/pgsql/backup/node_2 -U pgautofailover_replicator --verbose --progress --max-rate 100M --wal-method=stream --slot pgautofailover_standby_2\n16:27:47 27562 INFO  pg_basebackup: initiating base backup, waiting for checkpoint to complete\n16:27:49 27562 INFO  pg_basebackup: checkpoint completed\n16:27:49 27562 INFO  pg_basebackup: write-ahead log start point: 0/2000028 on timeline 1\n16:27:49 27562 INFO  pg_basebackup: starting background WAL receiver\n16:27:49 27562 INFO      0/33121 kB (0%), 0/1 tablespace (...pgsql/backup/node_2/backup_label)\n16:27:50 27562 INFO  33130/33130 kB (100%), 0/1 tablespace (.../backup/node_2/global/pg_control)\n16:27:50 27562 INFO  33130/33130 kB (100%), 0/1 tablespace (.../backup/node_2/global/pg_control)\n16:27:50 27562 INFO  33130/33130 kB (100%), 1/1 tablespace                                         \n16:27:50 27562 INFO  pg_basebackup: write-ahead log end point: 0/2000100\n16:27:50 27562 INFO  pg_basebackup: waiting for background process to finish streaming ...\n16:27:50 27562 INFO  pg_basebackup: syncing data to disk ...\n16:27:51 27562 INFO  pg_basebackup: renaming backup_manifest.tmp to backup_manifest\n16:27:51 27562 INFO  pg_basebackup: base backup completed\n16:27:51 27562 INFO  Creating the standby signal file at \"/var/lib/pgsql/ha/standby.signal\", and replication setup at \"/var/lib/pgsql/ha/postgresql-auto-failover-standby.conf\"\n16:27:51 27562 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node03\"\n16:27:52 27708 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *\n16:27:54 27561 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 27708\n16:27:54 27562 INFO  PostgreSQL started on port 5432\n16:27:54 27562 INFO  Fetched current list of 2 other nodes from the monitor to update HBA rules, including 2 changes.\n16:27:54 27562 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n16:27:54 27562 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.\n16:27:54 27562 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n16:27:54 27562 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"\n16:27:54 27562 INFO  Ensuring HBA rules for node 1 \"node_1\" (192.168.0.83:5432)\n16:27:54 27562 WARN  Failed to resolve hostname \"co7-node02\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n16:27:54 27562 WARN  Postgres might deny connection attempts from \"co7-node02\", even with the new HBA rules.\n16:27:54 27562 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n16:27:54 27562 WARN  Using IP address \"192.168.0.84\" in HBA file instead of hostname \"co7-node02\"\n16:27:54 27562 INFO  Ensuring HBA rules for node 3 \"node_3\" (192.168.0.84:5432)\n16:27:54 27562 INFO  Transition complete: current state is now \"catchingup\"\n16:27:54 27562 INFO  keeper has been successfully initialized.\n16:27:54 27559 WARN  pg_autoctl service node-init exited with exit status 0\n16:27:54 27561 INFO  Postgres controller service received signal SIGTERM, terminating\n16:27:54 27561 INFO  Stopping pg_autoctl postgres service\n16:27:54 27561 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast\n16:27:55 27559 INFO  Waiting for subprocesses to terminate.\n16:27:55 27559 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "16:27:45 27559 INFO  Using default --ssl-mode \"require\"",
            "16:27:45 27559 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "16:27:45 27559 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "16:27:45 27559 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "16:27:45 27559 INFO  Started pg_autoctl postgres service with pid 27561",
            "16:27:45 27559 INFO  Started pg_autoctl node-init service with pid 27562",
            "16:27:45 27561 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v",
            "16:27:46 27562 INFO  Registered node 2 (co7-node03:5432) with name \"node_2\" in formation \"default\", group 0, state \"wait_standby\"",
            "16:27:46 27562 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"",
            "16:27:46 27562 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"",
            "16:27:46 27562 INFO  Successfully registered as \"wait_standby\" to the monitor.",
            "16:27:46 27562 INFO  FSM transition from \"init\" to \"wait_standby\": Start following a primary",
            "16:27:46 27562 INFO  Transition complete: current state is now \"wait_standby\"",
            "16:27:47 27562 INFO  New state for node 3 \"node_3\" (co7-node02:5432): wait_standby ➜ wait_standby",
            "16:27:47 27562 INFO  New state for node 1 \"node_1\" (co7-node01:5432): single ➜ wait_primary",
            "16:27:47 27562 INFO  New state for node 1 \"node_1\" (co7-node01:5432): wait_primary ➜ wait_primary",
            "16:27:47 27562 INFO  Still waiting for the monitor to drive us to state \"catchingup\"",
            "16:27:47 27562 WARN  Please make sure that the primary node is currently running `pg_autoctl run` and contacting the monitor.",
            "16:27:47 27562 INFO  FSM transition from \"wait_standby\" to \"catchingup\": The primary is now ready to accept a standby",
            "16:27:47 27562 INFO  Initialising PostgreSQL as a hot standby",
            "16:27:47 27562 INFO   /bin/pg_basebackup -w -d application_name=pgautofailover_standby_2 host=co7-node01 port=5432 user=pgautofailover_replicator sslmode=require --pgdata /var/lib/pgsql/backup/node_2 -U pgautofailover_replicator --verbose --progress --max-rate 100M --wal-method=stream --slot pgautofailover_standby_2",
            "16:27:47 27562 INFO  pg_basebackup: initiating base backup, waiting for checkpoint to complete",
            "16:27:49 27562 INFO  pg_basebackup: checkpoint completed",
            "16:27:49 27562 INFO  pg_basebackup: write-ahead log start point: 0/2000028 on timeline 1",
            "16:27:49 27562 INFO  pg_basebackup: starting background WAL receiver",
            "16:27:49 27562 INFO      0/33121 kB (0%), 0/1 tablespace (...pgsql/backup/node_2/backup_label)",
            "16:27:50 27562 INFO  33130/33130 kB (100%), 0/1 tablespace (.../backup/node_2/global/pg_control)",
            "16:27:50 27562 INFO  33130/33130 kB (100%), 0/1 tablespace (.../backup/node_2/global/pg_control)",
            "16:27:50 27562 INFO  33130/33130 kB (100%), 1/1 tablespace                                         ",
            "16:27:50 27562 INFO  pg_basebackup: write-ahead log end point: 0/2000100",
            "16:27:50 27562 INFO  pg_basebackup: waiting for background process to finish streaming ...",
            "16:27:50 27562 INFO  pg_basebackup: syncing data to disk ...",
            "16:27:51 27562 INFO  pg_basebackup: renaming backup_manifest.tmp to backup_manifest",
            "16:27:51 27562 INFO  pg_basebackup: base backup completed",
            "16:27:51 27562 INFO  Creating the standby signal file at \"/var/lib/pgsql/ha/standby.signal\", and replication setup at \"/var/lib/pgsql/ha/postgresql-auto-failover-standby.conf\"",
            "16:27:51 27562 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node03\"",
            "16:27:52 27708 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *",
            "16:27:54 27561 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 27708",
            "16:27:54 27562 INFO  PostgreSQL started on port 5432",
            "16:27:54 27562 INFO  Fetched current list of 2 other nodes from the monitor to update HBA rules, including 2 changes.",
            "16:27:54 27562 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "16:27:54 27562 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.",
            "16:27:54 27562 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "16:27:54 27562 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"",
            "16:27:54 27562 INFO  Ensuring HBA rules for node 1 \"node_1\" (192.168.0.83:5432)",
            "16:27:54 27562 WARN  Failed to resolve hostname \"co7-node02\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "16:27:54 27562 WARN  Postgres might deny connection attempts from \"co7-node02\", even with the new HBA rules.",
            "16:27:54 27562 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "16:27:54 27562 WARN  Using IP address \"192.168.0.84\" in HBA file instead of hostname \"co7-node02\"",
            "16:27:54 27562 INFO  Ensuring HBA rules for node 3 \"node_3\" (192.168.0.84:5432)",
            "16:27:54 27562 INFO  Transition complete: current state is now \"catchingup\"",
            "16:27:54 27562 INFO  keeper has been successfully initialized.",
            "16:27:54 27559 WARN  pg_autoctl service node-init exited with exit status 0",
            "16:27:54 27561 INFO  Postgres controller service received signal SIGTERM, terminating",
            "16:27:54 27561 INFO  Stopping pg_autoctl postgres service",
            "16:27:54 27561 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast",
            "16:27:55 27559 INFO  Waiting for subprocesses to terminate.",
            "16:27:55 27559 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": [],
        "warnings": [
            "Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually"
        ]
    }
}
2022-03-21 16:28:02,073 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of secondary instance] *****************************************************
2022-03-21 16:28:02,110 p=57136 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:28:02,123 p=57136 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:28:08,662 p=57136 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 16:28:08,860 p=57136 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 16:28:08,869 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:28:08,889 p=57136 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:28:08,905 p=57136 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:28:08,924 p=57136 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "ansible_job_id": "13683770174.28776",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl -q show systemd --pgdata ~postgres/ha > pgautofailover.service )",
        "delta": "0:00:00.042954",
        "end": "2022-03-21 16:28:03.287812",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/13683770174.28776",
        "start": "2022-03-21 16:28:03.244858",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 16:28:08,958 p=57136 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "ansible_job_id": "612263494570.28039",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl -q show systemd --pgdata ~postgres/ha > pgautofailover.service )",
        "delta": "0:00:00.034969",
        "end": "2022-03-21 16:28:03.276404",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/612263494570.28039",
        "start": "2022-03-21 16:28:03.241435",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-21 16:28:08,968 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : Copy secondary systemd service file of secondary instance] *********************************************
2022-03-21 16:28:08,987 p=57136 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:28:09,003 p=57136 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:28:09,599 p=57136 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 16:28:09,599 p=57136 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 16:28:09,607 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start secondary systemd service of secondary instance] **************************************
2022-03-21 16:28:09,627 p=57136 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:28:09,644 p=57136 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:28:10,500 p=57136 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 16:28:10,502 p=57136 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 16:28:10,511 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] ****************************************************************************
2022-03-21 16:28:10,531 p=57136 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:28:10,548 p=57136 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:28:11,071 p=57136 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 16:28:11,071 p=57136 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 16:28:11,084 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the state of secondary instance] ****************************************************************
2022-03-21 16:28:11,103 p=57136 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:28:11,133 p=57136 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:28:11,925 p=57136 u=moonja n=ansible | changed: [co7-node03]
2022-03-21 16:28:12,244 p=57136 u=moonja n=ansible | changed: [co7-node02]
2022-03-21 16:28:12,256 p=57136 u=moonja n=ansible | TASK [pgfailover-postgres : debug] *************************************************************************************************
2022-03-21 16:28:12,276 p=57136 u=moonja n=ansible | skipping: [co7-master]
2022-03-21 16:28:12,292 p=57136 u=moonja n=ansible | skipping: [co7-node01]
2022-03-21 16:28:12,311 p=57136 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "changed": true,
        "cmd": "( source ~/.bash_profile ; pg_autoctl show state )",
        "delta": "0:00:00.473070",
        "end": "2022-03-21 16:28:12.630218",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-21 16:28:12.157148",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State\n-------+-------+-----------------+-----------+-----------+---------------------+--------------------\nnode_1 |     1 | co7-node01:5432 | 0/4000060 |       yes |        wait_primary |        wait_primary\nnode_2 |     2 | co7-node03:5432 | 0/3000000 |        no |          catchingup |          catchingup\nnode_3 |     3 | co7-node02:5432 | 0/4000000 |       yes |          catchingup |          catchingup",
        "stdout_lines": [
            "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State",
            "-------+-------+-----------------+-----------+-----------+---------------------+--------------------",
            "node_1 |     1 | co7-node01:5432 | 0/4000060 |       yes |        wait_primary |        wait_primary",
            "node_2 |     2 | co7-node03:5432 | 0/3000000 |        no |          catchingup |          catchingup",
            "node_3 |     3 | co7-node02:5432 | 0/4000000 |       yes |          catchingup |          catchingup"
        ]
    }
}
2022-03-21 16:28:12,358 p=57136 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "changed": true,
        "cmd": "( source ~/.bash_profile ; pg_autoctl show state )",
        "delta": "0:00:00.171683",
        "end": "2022-03-21 16:28:12.330790",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-21 16:28:12.159107",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State\n-------+-------+-----------------+-----------+-----------+---------------------+--------------------\nnode_1 |     1 | co7-node01:5432 | 0/4000060 |       yes |        wait_primary |        wait_primary\nnode_2 |     2 | co7-node03:5432 | 0/3000000 |        no |          catchingup |          catchingup\nnode_3 |     3 | co7-node02:5432 | 0/4000000 |        no |          catchingup |          catchingup",
        "stdout_lines": [
            "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State",
            "-------+-------+-----------------+-----------+-----------+---------------------+--------------------",
            "node_1 |     1 | co7-node01:5432 | 0/4000060 |       yes |        wait_primary |        wait_primary",
            "node_2 |     2 | co7-node03:5432 | 0/3000000 |        no |          catchingup |          catchingup",
            "node_3 |     3 | co7-node02:5432 | 0/4000000 |        no |          catchingup |          catchingup"
        ]
    }
}
2022-03-21 16:28:12,405 p=57136 u=moonja n=ansible | PLAY RECAP *************************************************************************************************************************
2022-03-21 16:28:12,405 p=57136 u=moonja n=ansible | co7-master                 : ok=27   changed=15   unreachable=0    failed=0    skipped=19   rescued=0    ignored=0   
2022-03-21 16:28:12,405 p=57136 u=moonja n=ansible | co7-node01                 : ok=21   changed=12   unreachable=0    failed=0    skipped=25   rescued=0    ignored=0   
2022-03-21 16:28:12,405 p=57136 u=moonja n=ansible | co7-node02                 : ok=21   changed=12   unreachable=0    failed=0    skipped=25   rescued=0    ignored=0   
2022-03-21 16:28:12,405 p=57136 u=moonja n=ansible | co7-node03                 : ok=21   changed=12   unreachable=0    failed=0    skipped=25   rescued=0    ignored=0   
2022-03-22 02:01:31,533 p=1674 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from ansible-core
 in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-22 02:01:31,801 p=1674 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 2.16. 
Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-22 02:01:31,806 p=1674 u=moonja n=ansible | [WARNING]: While constructing a mapping from /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/install.yml, line 307, column 3,
found a duplicate dict key (when). Using last defined value only.

2022-03-22 02:01:31,856 p=1674 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/upgrade.yml is empty and had no tasks to include

2022-03-22 02:01:31,870 p=1674 u=moonja n=ansible | PLAY [all] ***********************************************************************************************************************************
2022-03-22 02:01:31,899 p=1674 u=moonja n=ansible | TASK [Gathering Facts] ***********************************************************************************************************************
2022-03-22 02:01:33,972 p=1674 u=moonja n=ansible | fatal: [co7-node02]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: ssh: connect to host 192.168.0.84 port 22: Connection refused", "unreachable": true}
2022-03-22 02:01:36,764 p=1674 u=moonja n=ansible | fatal: [co7-node01]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: ssh: connect to host 192.168.0.83 port 22: Connection refused", "unreachable": true}
2022-03-22 02:01:41,242 p=1674 u=moonja n=ansible |  [ERROR]: User interrupted execution

2022-03-22 04:13:45,404 p=15118 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from ansible-core
 in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-22 04:13:45,704 p=15118 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 2.16. 
Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-22 04:13:45,709 p=15118 u=moonja n=ansible | [WARNING]: While constructing a mapping from /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/install.yml, line 307, column 3,
found a duplicate dict key (when). Using last defined value only.

2022-03-22 04:13:45,759 p=15118 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/upgrade.yml is empty and had no tasks to include

2022-03-22 04:13:45,773 p=15118 u=moonja n=ansible | PLAY [all] ***********************************************************************************************************************************
2022-03-22 04:13:45,802 p=15118 u=moonja n=ansible | TASK [Gathering Facts] ***********************************************************************************************************************
2022-03-22 04:13:58,032 p=15118 u=moonja n=ansible | ok: [co7-node03]
2022-03-22 04:13:59,053 p=15118 u=moonja n=ansible | ok: [co7-master]
2022-03-22 04:13:59,571 p=15118 u=moonja n=ansible | ok: [co7-node01]
2022-03-22 04:14:00,280 p=15118 u=moonja n=ansible | ok: [co7-node02]
2022-03-22 04:14:00,297 p=15118 u=moonja n=ansible | TASK [pgfailover-postgres : Disable port from public zone] ***********************************************************************************
2022-03-22 04:14:02,731 p=15118 u=moonja n=ansible | changed: [co7-node03] => (item=5432)
2022-03-22 04:14:02,741 p=15118 u=moonja n=ansible | changed: [co7-node01] => (item=5432)
2022-03-22 04:14:02,851 p=15118 u=moonja n=ansible | changed: [co7-node02] => (item=5432)
2022-03-22 04:14:02,897 p=15118 u=moonja n=ansible | changed: [co7-master] => (item=5432)
2022-03-22 04:14:02,909 p=15118 u=moonja n=ansible | TASK [pgfailover-postgres : Disable IP Addresses in whitelist] *******************************************************************************
2022-03-22 04:14:03,684 p=15118 u=moonja n=ansible | changed: [co7-node03] => (item=co7-master)
2022-03-22 04:14:03,694 p=15118 u=moonja n=ansible | changed: [co7-node02] => (item=co7-master)
2022-03-22 04:14:03,695 p=15118 u=moonja n=ansible | changed: [co7-master] => (item=co7-master)
2022-03-22 04:14:03,700 p=15118 u=moonja n=ansible | changed: [co7-node01] => (item=co7-master)
2022-03-22 04:14:04,319 p=15118 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node01)
2022-03-22 04:14:04,326 p=15118 u=moonja n=ansible | changed: [co7-master] => (item=co7-node01)
2022-03-22 04:14:04,332 p=15118 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node01)
2022-03-22 04:14:04,369 p=15118 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node01)
2022-03-22 04:14:04,935 p=15118 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node02)
2022-03-22 04:14:04,945 p=15118 u=moonja n=ansible | changed: [co7-master] => (item=co7-node02)
2022-03-22 04:14:04,962 p=15118 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node02)
2022-03-22 04:14:04,969 p=15118 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node02)
2022-03-22 04:14:05,590 p=15118 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node03)
2022-03-22 04:14:05,608 p=15118 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node03)
2022-03-22 04:14:05,615 p=15118 u=moonja n=ansible | changed: [co7-master] => (item=co7-node03)
2022-03-22 04:14:05,617 p=15118 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node03)
2022-03-22 04:14:05,629 p=15118 u=moonja n=ansible | TASK [pgfailover-postgres : Bounce firewalld] ************************************************************************************************
2022-03-22 04:14:08,288 p=15118 u=moonja n=ansible | changed: [co7-node01]
2022-03-22 04:14:08,292 p=15118 u=moonja n=ansible | changed: [co7-node03]
2022-03-22 04:14:08,458 p=15118 u=moonja n=ansible | changed: [co7-node02]
2022-03-22 04:14:08,779 p=15118 u=moonja n=ansible | changed: [co7-master]
2022-03-22 04:14:08,792 p=15118 u=moonja n=ansible | TASK [pgfailover-postgres : Stop and disable firewalld.] *************************************************************************************
2022-03-22 04:14:10,302 p=15118 u=moonja n=ansible | changed: [co7-node03]
2022-03-22 04:14:10,303 p=15118 u=moonja n=ansible | changed: [co7-node01]
2022-03-22 04:14:10,306 p=15118 u=moonja n=ansible | changed: [co7-node02]
2022-03-22 04:14:10,307 p=15118 u=moonja n=ansible | changed: [co7-master]
2022-03-22 04:14:10,317 p=15118 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ****************************************************
2022-03-22 04:14:10,350 p=15118 u=moonja n=ansible | skipping: [co7-node01]
2022-03-22 04:14:10,364 p=15118 u=moonja n=ansible | skipping: [co7-node02]
2022-03-22 04:14:10,375 p=15118 u=moonja n=ansible | skipping: [co7-node03]
2022-03-22 04:14:12,487 p=15118 u=moonja n=ansible | changed: [co7-master]
2022-03-22 04:14:12,496 p=15118 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ****************************************************
2022-03-22 04:14:12,530 p=15118 u=moonja n=ansible | skipping: [co7-node01]
2022-03-22 04:14:12,544 p=15118 u=moonja n=ansible | skipping: [co7-node02]
2022-03-22 04:14:12,556 p=15118 u=moonja n=ansible | skipping: [co7-node03]
2022-03-22 04:14:12,973 p=15118 u=moonja n=ansible | changed: [co7-master]
2022-03-22 04:14:12,985 p=15118 u=moonja n=ansible | TASK [pgfailover-postgres : Getting process IDs of the pg_autoctl process] *******************************************************************
2022-03-22 04:14:15,947 p=15118 u=moonja n=ansible | ok: [co7-node02]
2022-03-22 04:14:15,950 p=15118 u=moonja n=ansible | ok: [co7-node01]
2022-03-22 04:14:15,950 p=15118 u=moonja n=ansible | ok: [co7-master]
2022-03-22 04:14:15,953 p=15118 u=moonja n=ansible | ok: [co7-node03]
2022-03-22 04:14:15,965 p=15118 u=moonja n=ansible | TASK [pgfailover-postgres : Stop pgautofailover service of systemd] **************************************************************************
2022-03-22 04:14:17,779 p=15118 u=moonja n=ansible | changed: [co7-node02]
2022-03-22 04:14:18,150 p=15118 u=moonja n=ansible | changed: [co7-node01]
2022-03-22 04:14:18,279 p=15118 u=moonja n=ansible | changed: [co7-master]
2022-03-22 04:14:18,327 p=15118 u=moonja n=ansible | changed: [co7-node03]
2022-03-22 04:14:18,339 p=15118 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] **********************************************************************************
2022-03-22 04:14:18,359 p=15118 u=moonja n=ansible | skipping: [co7-master]
2022-03-22 04:14:18,375 p=15118 u=moonja n=ansible | skipping: [co7-node01]
2022-03-22 04:14:20,160 p=15118 u=moonja n=ansible | changed: [co7-node03]
2022-03-22 04:14:20,161 p=15118 u=moonja n=ansible | changed: [co7-node02]
2022-03-22 04:14:20,173 p=15118 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start secondary systemd service of secondary instance] ************************************************
2022-03-22 04:14:20,193 p=15118 u=moonja n=ansible | skipping: [co7-master]
2022-03-22 04:14:20,210 p=15118 u=moonja n=ansible | skipping: [co7-node01]
2022-03-22 04:14:20,917 p=15118 u=moonja n=ansible | changed: [co7-node03]
2022-03-22 04:14:20,923 p=15118 u=moonja n=ansible | changed: [co7-node02]
2022-03-22 04:14:20,933 p=15118 u=moonja n=ansible | TASK [pgfailover-postgres : Delete secondary systemd service file of secondary instance] *****************************************************
2022-03-22 04:14:20,955 p=15118 u=moonja n=ansible | skipping: [co7-master] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-22 04:14:20,956 p=15118 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-22 04:14:20,959 p=15118 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-22 04:14:20,963 p=15118 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.config) 
2022-03-22 04:14:20,964 p=15118 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.ansible) 
2022-03-22 04:14:20,970 p=15118 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql) 
2022-03-22 04:14:20,971 p=15118 u=moonja n=ansible | skipping: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-22 04:14:20,971 p=15118 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-22 04:14:20,972 p=15118 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-22 04:14:20,975 p=15118 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.config) 
2022-03-22 04:14:20,978 p=15118 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.ansible) 
2022-03-22 04:14:20,978 p=15118 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql) 
2022-03-22 04:14:21,642 p=15118 u=moonja n=ansible | changed: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-22 04:14:21,643 p=15118 u=moonja n=ansible | changed: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-22 04:14:22,076 p=15118 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-22 04:14:22,077 p=15118 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-22 04:14:22,476 p=15118 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.bash_profile)
2022-03-22 04:14:22,476 p=15118 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.bash_profile)
2022-03-22 04:14:22,877 p=15118 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.config)
2022-03-22 04:14:22,878 p=15118 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.config)
2022-03-22 04:14:23,299 p=15118 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.ansible)
2022-03-22 04:14:23,299 p=15118 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.ansible)
2022-03-22 04:14:23,807 p=15118 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql)
2022-03-22 04:14:24,711 p=15118 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql)
2022-03-22 04:14:24,724 p=15118 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] **********************************************************************************
2022-03-22 04:14:24,757 p=15118 u=moonja n=ansible | skipping: [co7-master]
2022-03-22 04:14:24,800 p=15118 u=moonja n=ansible | skipping: [co7-node02]
2022-03-22 04:14:24,814 p=15118 u=moonja n=ansible | skipping: [co7-node03]
2022-03-22 04:14:25,357 p=15118 u=moonja n=ansible | changed: [co7-node01]
2022-03-22 04:14:25,369 p=15118 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start primary systemd service of primary instance] ****************************************************
2022-03-22 04:14:25,390 p=15118 u=moonja n=ansible | skipping: [co7-master]
2022-03-22 04:14:25,418 p=15118 u=moonja n=ansible | skipping: [co7-node02]
2022-03-22 04:14:25,428 p=15118 u=moonja n=ansible | skipping: [co7-node03]
2022-03-22 04:14:26,145 p=15118 u=moonja n=ansible | changed: [co7-node01]
2022-03-22 04:14:26,156 p=15118 u=moonja n=ansible | TASK [pgfailover-postgres : Delete primary systemd service file of secondary instance] *******************************************************
2022-03-22 04:14:26,180 p=15118 u=moonja n=ansible | skipping: [co7-master] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-22 04:14:26,182 p=15118 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-22 04:14:26,186 p=15118 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-22 04:14:26,191 p=15118 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.config) 
2022-03-22 04:14:26,196 p=15118 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.ansible) 
2022-03-22 04:14:26,197 p=15118 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql) 
2022-03-22 04:14:26,214 p=15118 u=moonja n=ansible | skipping: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-22 04:14:26,215 p=15118 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-22 04:14:26,218 p=15118 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-22 04:14:26,220 p=15118 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.config) 
2022-03-22 04:14:26,223 p=15118 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.ansible) 
2022-03-22 04:14:26,223 p=15118 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql) 
2022-03-22 04:14:26,228 p=15118 u=moonja n=ansible | skipping: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-22 04:14:26,231 p=15118 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-22 04:14:26,236 p=15118 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-22 04:14:26,237 p=15118 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.config) 
2022-03-22 04:14:26,237 p=15118 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.ansible) 
2022-03-22 04:14:26,239 p=15118 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql) 
2022-03-22 04:14:26,684 p=15118 u=moonja n=ansible | changed: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-22 04:14:27,108 p=15118 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-22 04:14:27,504 p=15118 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.bash_profile)
2022-03-22 04:14:27,949 p=15118 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.config)
2022-03-22 04:14:28,345 p=15118 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.ansible)
2022-03-22 04:14:28,826 p=15118 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql)
2022-03-22 04:14:28,838 p=15118 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] **********************************************************************************
2022-03-22 04:14:28,871 p=15118 u=moonja n=ansible | skipping: [co7-node01]
2022-03-22 04:14:28,886 p=15118 u=moonja n=ansible | skipping: [co7-node02]
2022-03-22 04:14:28,898 p=15118 u=moonja n=ansible | skipping: [co7-node03]
2022-03-22 04:14:29,335 p=15118 u=moonja n=ansible | changed: [co7-master]
2022-03-22 04:14:29,346 p=15118 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start systemd service of monitor instance] ************************************************************
2022-03-22 04:14:29,380 p=15118 u=moonja n=ansible | skipping: [co7-node01]
2022-03-22 04:14:29,394 p=15118 u=moonja n=ansible | skipping: [co7-node02]
2022-03-22 04:14:29,406 p=15118 u=moonja n=ansible | skipping: [co7-node03]
2022-03-22 04:14:30,093 p=15118 u=moonja n=ansible | changed: [co7-master]
2022-03-22 04:14:30,105 p=15118 u=moonja n=ansible | TASK [pgfailover-postgres : Delete primary systemd service file of secondary instance] *******************************************************
2022-03-22 04:14:30,143 p=15118 u=moonja n=ansible | skipping: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-22 04:14:30,148 p=15118 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-22 04:14:30,148 p=15118 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-22 04:14:30,148 p=15118 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.config) 
2022-03-22 04:14:30,156 p=15118 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.ansible) 
2022-03-22 04:14:30,157 p=15118 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql) 
2022-03-22 04:14:30,158 p=15118 u=moonja n=ansible | skipping: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-22 04:14:30,160 p=15118 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-22 04:14:30,163 p=15118 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-22 04:14:30,165 p=15118 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.config) 
2022-03-22 04:14:30,168 p=15118 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.ansible) 
2022-03-22 04:14:30,170 p=15118 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql) 
2022-03-22 04:14:30,174 p=15118 u=moonja n=ansible | skipping: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-22 04:14:30,177 p=15118 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-22 04:14:30,179 p=15118 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-22 04:14:30,182 p=15118 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.config) 
2022-03-22 04:14:30,184 p=15118 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.ansible) 
2022-03-22 04:14:30,184 p=15118 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql) 
2022-03-22 04:14:30,646 p=15118 u=moonja n=ansible | changed: [co7-master] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-22 04:14:31,072 p=15118 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-22 04:14:31,561 p=15118 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/.bash_profile)
2022-03-22 04:14:32,007 p=15118 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/.config)
2022-03-22 04:14:32,478 p=15118 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/.ansible)
2022-03-22 04:14:34,200 p=15118 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql)
2022-03-22 04:14:34,214 p=15118 u=moonja n=ansible | TASK [pgfailover-postgres : Uninstall VMware Postgres on all hosts as root] ******************************************************************
2022-03-22 04:16:29,250 p=15118 u=moonja n=ansible | changed: [co7-node01]
2022-03-22 04:16:39,387 p=15118 u=moonja n=ansible | changed: [co7-node02]
2022-03-22 04:16:39,418 p=15118 u=moonja n=ansible | changed: [co7-master]
2022-03-22 04:16:39,730 p=15118 u=moonja n=ansible | changed: [co7-node03]
2022-03-22 04:16:39,739 p=15118 u=moonja n=ansible | TASK [pgfailover-postgres : Copy the vmwawre-postgres rpm file to all hosts in cluster] ******************************************************
2022-03-22 04:16:40,195 p=15118 u=moonja n=ansible | changed: [co7-master]
2022-03-22 04:16:40,197 p=15118 u=moonja n=ansible | changed: [co7-node01]
2022-03-22 04:16:40,211 p=15118 u=moonja n=ansible | changed: [co7-node03]
2022-03-22 04:16:40,217 p=15118 u=moonja n=ansible | changed: [co7-node02]
2022-03-22 04:16:40,261 p=15118 u=moonja n=ansible | PLAY RECAP ***********************************************************************************************************************************
2022-03-22 04:16:40,261 p=15118 u=moonja n=ansible | co7-master                 : ok=14   changed=12   unreachable=0    failed=0    skipped=6    rescued=0    ignored=0   
2022-03-22 04:16:40,261 p=15118 u=moonja n=ansible | co7-node01                 : ok=12   changed=10   unreachable=0    failed=0    skipped=8    rescued=0    ignored=0   
2022-03-22 04:16:40,261 p=15118 u=moonja n=ansible | co7-node02                 : ok=12   changed=10   unreachable=0    failed=0    skipped=8    rescued=0    ignored=0   
2022-03-22 04:16:40,262 p=15118 u=moonja n=ansible | co7-node03                 : ok=12   changed=10   unreachable=0    failed=0    skipped=8    rescued=0    ignored=0   
2022-03-22 04:16:40,841 p=17297 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from ansible-core
 in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-22 04:16:41,088 p=17297 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 2.16. 
Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-22 04:16:41,092 p=17297 u=moonja n=ansible | [WARNING]: While constructing a mapping from /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/install.yml, line 307, column 3,
found a duplicate dict key (when). Using last defined value only.

2022-03-22 04:16:41,139 p=17297 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/upgrade.yml is empty and had no tasks to include

2022-03-22 04:16:41,152 p=17297 u=moonja n=ansible | PLAY [all] ***********************************************************************************************************************************
2022-03-22 04:16:41,180 p=17297 u=moonja n=ansible | TASK [Gathering Facts] ***********************************************************************************************************************
2022-03-22 04:16:43,287 p=17297 u=moonja n=ansible | ok: [co7-node02]
2022-03-22 04:16:43,296 p=17297 u=moonja n=ansible | ok: [co7-node01]
2022-03-22 04:16:43,297 p=17297 u=moonja n=ansible | ok: [co7-master]
2022-03-22 04:16:43,302 p=17297 u=moonja n=ansible | ok: [co7-node03]
2022-03-22 04:16:43,319 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : Install rpm packages of dependenies to need installing packages regarding kubernates] ****************************
2022-03-22 04:16:44,409 p=17297 u=moonja n=ansible | ok: [co7-master] => (item=firewalld)
2022-03-22 04:16:44,421 p=17297 u=moonja n=ansible | ok: [co7-node01] => (item=firewalld)
2022-03-22 04:16:44,426 p=17297 u=moonja n=ansible | ok: [co7-node02] => (item=firewalld)
2022-03-22 04:16:44,445 p=17297 u=moonja n=ansible | ok: [co7-node03] => (item=firewalld)
2022-03-22 04:16:45,124 p=17297 u=moonja n=ansible | ok: [co7-master] => (item=python3)
2022-03-22 04:16:45,175 p=17297 u=moonja n=ansible | ok: [co7-node03] => (item=python3)
2022-03-22 04:16:45,177 p=17297 u=moonja n=ansible | ok: [co7-node01] => (item=python3)
2022-03-22 04:16:45,186 p=17297 u=moonja n=ansible | ok: [co7-node02] => (item=python3)
2022-03-22 04:16:50,767 p=17297 u=moonja n=ansible | ok: [co7-node01] => (item=python3-libselinux)
2022-03-22 04:16:51,266 p=17297 u=moonja n=ansible | ok: [co7-master] => (item=python3-libselinux)
2022-03-22 04:16:52,554 p=17297 u=moonja n=ansible | ok: [co7-node02] => (item=python3-libselinux)
2022-03-22 04:16:52,570 p=17297 u=moonja n=ansible | ok: [co7-node03] => (item=python3-libselinux)
2022-03-22 04:16:52,581 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : Start and enable firewalld.] *************************************************************************************
2022-03-22 04:16:53,815 p=17297 u=moonja n=ansible | changed: [co7-master]
2022-03-22 04:16:53,859 p=17297 u=moonja n=ansible | changed: [co7-node02]
2022-03-22 04:16:53,864 p=17297 u=moonja n=ansible | changed: [co7-node03]
2022-03-22 04:16:53,966 p=17297 u=moonja n=ansible | changed: [co7-node01]
2022-03-22 04:16:53,975 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : Open Firewall] ***************************************************************************************************
2022-03-22 04:16:55,034 p=17297 u=moonja n=ansible | changed: [co7-node03] => (item=5432)
2022-03-22 04:16:55,046 p=17297 u=moonja n=ansible | changed: [co7-master] => (item=5432)
2022-03-22 04:16:55,047 p=17297 u=moonja n=ansible | changed: [co7-node02] => (item=5432)
2022-03-22 04:16:55,049 p=17297 u=moonja n=ansible | changed: [co7-node01] => (item=5432)
2022-03-22 04:16:55,058 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : Whitelist of Ip addresses] ***************************************************************************************
2022-03-22 04:16:55,780 p=17297 u=moonja n=ansible | changed: [co7-master] => (item=co7-master)
2022-03-22 04:16:55,789 p=17297 u=moonja n=ansible | changed: [co7-node01] => (item=co7-master)
2022-03-22 04:16:55,791 p=17297 u=moonja n=ansible | changed: [co7-node02] => (item=co7-master)
2022-03-22 04:16:55,805 p=17297 u=moonja n=ansible | changed: [co7-node03] => (item=co7-master)
2022-03-22 04:16:56,425 p=17297 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node01)
2022-03-22 04:16:56,428 p=17297 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node01)
2022-03-22 04:16:56,431 p=17297 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node01)
2022-03-22 04:16:57,283 p=17297 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node02)
2022-03-22 04:16:57,284 p=17297 u=moonja n=ansible | changed: [co7-master] => (item=co7-node01)
2022-03-22 04:16:57,285 p=17297 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node02)
2022-03-22 04:16:57,457 p=17297 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node02)
2022-03-22 04:16:57,958 p=17297 u=moonja n=ansible | changed: [co7-master] => (item=co7-node02)
2022-03-22 04:16:57,966 p=17297 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node03)
2022-03-22 04:16:57,967 p=17297 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node03)
2022-03-22 04:16:58,110 p=17297 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node03)
2022-03-22 04:16:58,525 p=17297 u=moonja n=ansible | changed: [co7-master] => (item=co7-node03)
2022-03-22 04:16:58,536 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : Bounce firewalld] ************************************************************************************************
2022-03-22 04:17:00,096 p=17297 u=moonja n=ansible | changed: [co7-master]
2022-03-22 04:17:00,106 p=17297 u=moonja n=ansible | changed: [co7-node01]
2022-03-22 04:17:00,124 p=17297 u=moonja n=ansible | changed: [co7-node03]
2022-03-22 04:17:00,125 p=17297 u=moonja n=ansible | changed: [co7-node02]
2022-03-22 04:17:00,137 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : Copy the vmwawre-postgres rpm file to all hosts in cluster] ******************************************************
2022-03-22 04:17:01,658 p=17297 u=moonja n=ansible | changed: [co7-node01]
2022-03-22 04:17:01,660 p=17297 u=moonja n=ansible | changed: [co7-node03]
2022-03-22 04:17:01,760 p=17297 u=moonja n=ansible | changed: [co7-master]
2022-03-22 04:17:01,770 p=17297 u=moonja n=ansible | changed: [co7-node02]
2022-03-22 04:17:01,780 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : Install dependency rpm package for pgautofailover] ***************************************************************
2022-03-22 04:17:08,538 p=17297 u=moonja n=ansible | ok: [co7-master] => (item=python2-psutil)
2022-03-22 04:17:08,546 p=17297 u=moonja n=ansible | ok: [co7-node03] => (item=python2-psutil)
2022-03-22 04:17:08,618 p=17297 u=moonja n=ansible | ok: [co7-node02] => (item=python2-psutil)
2022-03-22 04:17:09,214 p=17297 u=moonja n=ansible | ok: [co7-node01] => (item=python2-psutil)
2022-03-22 04:17:09,224 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : Install VMware Postgres on all hosts as root] ********************************************************************
2022-03-22 04:17:31,619 p=17297 u=moonja n=ansible | changed: [co7-node03]
2022-03-22 04:17:31,629 p=17297 u=moonja n=ansible | changed: [co7-master]
2022-03-22 04:17:31,658 p=17297 u=moonja n=ansible | changed: [co7-node02]
2022-03-22 04:17:32,367 p=17297 u=moonja n=ansible | changed: [co7-node01]
2022-03-22 04:17:32,376 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ****************************************************
2022-03-22 04:17:32,411 p=17297 u=moonja n=ansible | skipping: [co7-node01]
2022-03-22 04:17:32,427 p=17297 u=moonja n=ansible | skipping: [co7-node02]
2022-03-22 04:17:32,439 p=17297 u=moonja n=ansible | skipping: [co7-node03]
2022-03-22 04:17:33,014 p=17297 u=moonja n=ansible | [WARNING]: Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when
running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually

2022-03-22 04:17:33,014 p=17297 u=moonja n=ansible | changed: [co7-master]
2022-03-22 04:17:33,025 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : debug] ***********************************************************************************************************
2022-03-22 04:17:33,060 p=17297 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "pg_autoctl version 1.4.2\npg_autoctl extension version 1.4\ncompiled with PostgreSQL 13.3 (VMware Postgres 13.3.0) on x86_64-redhat-linux-gnu, compiled by gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-44), 64-bit\ncompatible with Postgres 10, 11, 12, and 13"
}
2022-03-22 04:17:33,077 p=17297 u=moonja n=ansible | skipping: [co7-node01]
2022-03-22 04:17:33,077 p=17297 u=moonja n=ansible | skipping: [co7-node02]
2022-03-22 04:17:33,088 p=17297 u=moonja n=ansible | skipping: [co7-node03]
2022-03-22 04:17:33,098 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ****************************************************
2022-03-22 04:17:33,130 p=17297 u=moonja n=ansible | skipping: [co7-node01]
2022-03-22 04:17:33,145 p=17297 u=moonja n=ansible | skipping: [co7-node02]
2022-03-22 04:17:33,156 p=17297 u=moonja n=ansible | skipping: [co7-node03]
2022-03-22 04:17:33,573 p=17297 u=moonja n=ansible | changed: [co7-master]
2022-03-22 04:17:33,583 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : debug] ***********************************************************************************************************
2022-03-22 04:17:33,619 p=17297 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "pg_ctl (PostgreSQL) 13.3 (VMware Postgres 13.3.0)"
}
2022-03-22 04:17:33,634 p=17297 u=moonja n=ansible | skipping: [co7-node01]
2022-03-22 04:17:33,635 p=17297 u=moonja n=ansible | skipping: [co7-node02]
2022-03-22 04:17:33,647 p=17297 u=moonja n=ansible | skipping: [co7-node03]
2022-03-22 04:17:33,656 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : Getting process IDs of the pg_autoctl process] *******************************************************************
2022-03-22 04:17:34,389 p=17297 u=moonja n=ansible | ok: [co7-master]
2022-03-22 04:17:34,391 p=17297 u=moonja n=ansible | ok: [co7-node03]
2022-03-22 04:17:34,400 p=17297 u=moonja n=ansible | ok: [co7-node01]
2022-03-22 04:17:34,406 p=17297 u=moonja n=ansible | ok: [co7-node02]
2022-03-22 04:17:34,415 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : Printing the process IDs obtained] *******************************************************************************
2022-03-22 04:17:34,462 p=17297 u=moonja n=ansible | ok: [co7-master] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-22 04:17:34,467 p=17297 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-22 04:17:34,480 p=17297 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-22 04:17:34,497 p=17297 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": "PIDS of pg_autoctl:"
}
2022-03-22 04:17:34,506 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : Stop pgautofailover service of systemd] **************************************************************************
2022-03-22 04:17:34,552 p=17297 u=moonja n=ansible | skipping: [co7-master]
2022-03-22 04:17:34,556 p=17297 u=moonja n=ansible | skipping: [co7-node01]
2022-03-22 04:17:34,571 p=17297 u=moonja n=ansible | skipping: [co7-node02]
2022-03-22 04:17:34,587 p=17297 u=moonja n=ansible | skipping: [co7-node03]
2022-03-22 04:17:34,598 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : debug] ***********************************************************************************************************
2022-03-22 04:17:34,634 p=17297 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-22 04:17:34,652 p=17297 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-22 04:17:34,652 p=17297 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-22 04:17:34,665 p=17297 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-03-22 04:17:34,675 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : Create the monitor node] *****************************************************************************************
2022-03-22 04:17:34,710 p=17297 u=moonja n=ansible | skipping: [co7-node01]
2022-03-22 04:17:34,724 p=17297 u=moonja n=ansible | skipping: [co7-node02]
2022-03-22 04:17:34,736 p=17297 u=moonja n=ansible | skipping: [co7-node03]
2022-03-22 04:17:46,403 p=17297 u=moonja n=ansible | changed: [co7-master]
2022-03-22 04:17:46,411 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : debug] ***********************************************************************************************************
2022-03-22 04:17:46,466 p=17297 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "ansible_job_id": "517647902031.27800",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl create monitor --auth trust --ssl-self-signed --pgdata monitor )",
        "delta": "0:00:09.124989",
        "end": "2022-03-22 04:17:44.628766",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/517647902031.27800",
        "start": "2022-03-22 04:17:35.503777",
        "started": 1,
        "stderr": "04:17:35 27810 INFO  Using default --ssl-mode \"require\"\n04:17:35 27810 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n04:17:35 27810 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n04:17:35 27810 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n04:17:35 27810 INFO  Initialising a PostgreSQL cluster at \"monitor\"\n04:17:35 27810 INFO  /bin/pg_ctl initdb -s -D monitor --option '--auth=trust'\n04:17:40 27810 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/monitor/server.crt -keyout /var/lib/pgsql/monitor/server.key -subj \"/CN=co7-master\"\n04:17:40 27810 INFO  Started pg_autoctl postgres service with pid 27907\n04:17:40 27810 INFO  Started pg_autoctl monitor-init service with pid 27908\n04:17:40 27907 INFO   /usr/bin/pg_autoctl do service postgres --pgdata monitor -v\n04:17:40 27908 INFO  Granting connection privileges on 192.168.0.0/24\n04:17:40 27940 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\n04:17:41 27907 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/monitor\" on port 5432 with pid 27940\n04:17:42 27908 WARN  NOTICE:  installing required extension \"btree_gist\"\n04:17:43 27908 INFO  Your pg_auto_failover monitor instance is now ready on port 5432.\n04:17:43 27908 INFO  Monitor has been successfully initialized.\n04:17:43 27810 WARN  pg_autoctl service monitor-init exited with exit status 0\n04:17:43 27907 INFO  Postgres controller service received signal SIGTERM, terminating\n04:17:43 27907 INFO  Stopping pg_autoctl postgres service\n04:17:43 27907 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/monitor --wait stop --mode fast\n04:17:43 27810 INFO  Waiting for subprocesses to terminate.\n04:17:44 27810 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "04:17:35 27810 INFO  Using default --ssl-mode \"require\"",
            "04:17:35 27810 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "04:17:35 27810 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "04:17:35 27810 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "04:17:35 27810 INFO  Initialising a PostgreSQL cluster at \"monitor\"",
            "04:17:35 27810 INFO  /bin/pg_ctl initdb -s -D monitor --option '--auth=trust'",
            "04:17:40 27810 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/monitor/server.crt -keyout /var/lib/pgsql/monitor/server.key -subj \"/CN=co7-master\"",
            "04:17:40 27810 INFO  Started pg_autoctl postgres service with pid 27907",
            "04:17:40 27810 INFO  Started pg_autoctl monitor-init service with pid 27908",
            "04:17:40 27907 INFO   /usr/bin/pg_autoctl do service postgres --pgdata monitor -v",
            "04:17:40 27908 INFO  Granting connection privileges on 192.168.0.0/24",
            "04:17:40 27940 INFO   /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *",
            "04:17:41 27907 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/monitor\" on port 5432 with pid 27940",
            "04:17:42 27908 WARN  NOTICE:  installing required extension \"btree_gist\"",
            "04:17:43 27908 INFO  Your pg_auto_failover monitor instance is now ready on port 5432.",
            "04:17:43 27908 INFO  Monitor has been successfully initialized.",
            "04:17:43 27810 WARN  pg_autoctl service monitor-init exited with exit status 0",
            "04:17:43 27907 INFO  Postgres controller service received signal SIGTERM, terminating",
            "04:17:43 27907 INFO  Stopping pg_autoctl postgres service",
            "04:17:43 27907 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/monitor --wait stop --mode fast",
            "04:17:43 27810 INFO  Waiting for subprocesses to terminate.",
            "04:17:44 27810 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-22 04:17:46,478 p=17297 u=moonja n=ansible | skipping: [co7-node01]
2022-03-22 04:17:46,479 p=17297 u=moonja n=ansible | skipping: [co7-node02]
2022-03-22 04:17:46,491 p=17297 u=moonja n=ansible | skipping: [co7-node03]
2022-03-22 04:17:46,501 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of monitor instance] *****************************************************************
2022-03-22 04:17:46,535 p=17297 u=moonja n=ansible | skipping: [co7-node01]
2022-03-22 04:17:46,550 p=17297 u=moonja n=ansible | skipping: [co7-node02]
2022-03-22 04:17:46,563 p=17297 u=moonja n=ansible | skipping: [co7-node03]
2022-03-22 04:17:53,208 p=17297 u=moonja n=ansible | changed: [co7-master]
2022-03-22 04:17:53,215 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : Copy systemd service file of monitor instance] *******************************************************************
2022-03-22 04:17:53,263 p=17297 u=moonja n=ansible | skipping: [co7-node01]
2022-03-22 04:17:53,264 p=17297 u=moonja n=ansible | skipping: [co7-node02]
2022-03-22 04:17:53,275 p=17297 u=moonja n=ansible | skipping: [co7-node03]
2022-03-22 04:17:53,727 p=17297 u=moonja n=ansible | changed: [co7-master]
2022-03-22 04:17:53,736 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start systemd service of monitor instance] ************************************************************
2022-03-22 04:17:53,769 p=17297 u=moonja n=ansible | skipping: [co7-node01]
2022-03-22 04:17:53,784 p=17297 u=moonja n=ansible | skipping: [co7-node02]
2022-03-22 04:17:53,797 p=17297 u=moonja n=ansible | skipping: [co7-node03]
2022-03-22 04:17:54,918 p=17297 u=moonja n=ansible | changed: [co7-master]
2022-03-22 04:17:54,928 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : debug] ***********************************************************************************************************
2022-03-22 04:17:54,966 p=17297 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": true,
        "enabled": true,
        "failed": false,
        "name": "pgautofailover",
        "state": "started",
        "status": {
            "ActiveEnterTimestampMonotonic": "0",
            "ActiveExitTimestampMonotonic": "0",
            "ActiveState": "inactive",
            "After": "basic.target systemd-journald.socket -.mount system.slice",
            "AllowIsolate": "no",
            "AmbientCapabilities": "0",
            "AssertResult": "no",
            "AssertTimestampMonotonic": "0",
            "Before": "shutdown.target",
            "BlockIOAccounting": "no",
            "BlockIOWeight": "18446744073709551615",
            "CPUAccounting": "no",
            "CPUQuotaPerSecUSec": "infinity",
            "CPUSchedulingPolicy": "0",
            "CPUSchedulingPriority": "0",
            "CPUSchedulingResetOnFork": "no",
            "CPUShares": "18446744073709551615",
            "CanIsolate": "no",
            "CanReload": "no",
            "CanStart": "yes",
            "CanStop": "yes",
            "CapabilityBoundingSet": "18446744073709551615",
            "CollectMode": "inactive",
            "ConditionResult": "no",
            "ConditionTimestampMonotonic": "0",
            "Conflicts": "shutdown.target",
            "ControlPID": "0",
            "DefaultDependencies": "yes",
            "Delegate": "no",
            "Description": "pg_auto_failover",
            "DevicePolicy": "auto",
            "Environment": "PGDATA=/var/lib/pgsql/monitor",
            "ExecMainCode": "0",
            "ExecMainExitTimestampMonotonic": "0",
            "ExecMainPID": "0",
            "ExecMainStartTimestampMonotonic": "0",
            "ExecMainStatus": "0",
            "ExecStart": "{ path=/usr/bin/pg_autoctl ; argv[]=/usr/bin/pg_autoctl run ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }",
            "FailureAction": "none",
            "FileDescriptorStoreMax": "0",
            "FragmentPath": "/etc/systemd/system/pgautofailover.service",
            "GuessMainPID": "yes",
            "IOScheduling": "0",
            "Id": "pgautofailover.service",
            "IgnoreOnIsolate": "no",
            "IgnoreOnSnapshot": "no",
            "IgnoreSIGPIPE": "yes",
            "InactiveEnterTimestampMonotonic": "0",
            "InactiveExitTimestampMonotonic": "0",
            "JobTimeoutAction": "none",
            "JobTimeoutUSec": "0",
            "KillMode": "control-group",
            "KillSignal": "15",
            "LimitAS": "18446744073709551615",
            "LimitCORE": "18446744073709551615",
            "LimitCPU": "18446744073709551615",
            "LimitDATA": "18446744073709551615",
            "LimitFSIZE": "18446744073709551615",
            "LimitLOCKS": "18446744073709551615",
            "LimitMEMLOCK": "65536",
            "LimitMSGQUEUE": "819200",
            "LimitNICE": "0",
            "LimitNOFILE": "4096",
            "LimitNPROC": "47321",
            "LimitRSS": "18446744073709551615",
            "LimitRTPRIO": "0",
            "LimitRTTIME": "18446744073709551615",
            "LimitSIGPENDING": "47321",
            "LimitSTACK": "18446744073709551615",
            "LoadState": "loaded",
            "MainPID": "0",
            "MemoryAccounting": "no",
            "MemoryCurrent": "18446744073709551615",
            "MemoryLimit": "18446744073709551615",
            "MountFlags": "0",
            "Names": "pgautofailover.service",
            "NeedDaemonReload": "no",
            "Nice": "0",
            "NoNewPrivileges": "no",
            "NonBlocking": "no",
            "NotifyAccess": "none",
            "OOMScoreAdjust": "0",
            "OnFailureJobMode": "replace",
            "PermissionsStartOnly": "no",
            "PrivateDevices": "no",
            "PrivateNetwork": "no",
            "PrivateTmp": "no",
            "ProtectHome": "no",
            "ProtectSystem": "no",
            "RefuseManualStart": "no",
            "RefuseManualStop": "no",
            "RemainAfterExit": "no",
            "Requires": "-.mount system.slice basic.target",
            "RequiresMountsFor": "/var/lib/pgsql",
            "Restart": "always",
            "RestartUSec": "100ms",
            "Result": "success",
            "RootDirectoryStartOnly": "no",
            "RuntimeDirectoryMode": "0755",
            "SameProcessGroup": "no",
            "SecureBits": "0",
            "SendSIGHUP": "no",
            "SendSIGKILL": "yes",
            "Slice": "system.slice",
            "StandardError": "inherit",
            "StandardInput": "null",
            "StandardOutput": "journal",
            "StartLimitAction": "none",
            "StartLimitBurst": "0",
            "StartLimitInterval": "10000000",
            "StartupBlockIOWeight": "18446744073709551615",
            "StartupCPUShares": "18446744073709551615",
            "StatusErrno": "0",
            "StopWhenUnneeded": "no",
            "SubState": "dead",
            "SyslogLevelPrefix": "yes",
            "SyslogPriority": "30",
            "SystemCallErrorNumber": "0",
            "TTYReset": "no",
            "TTYVHangup": "no",
            "TTYVTDisallocate": "no",
            "TasksAccounting": "no",
            "TasksCurrent": "18446744073709551615",
            "TasksMax": "18446744073709551615",
            "TimeoutStartUSec": "1min 30s",
            "TimeoutStopUSec": "1min 30s",
            "TimerSlackNSec": "50000",
            "Transient": "no",
            "Type": "simple",
            "UMask": "0022",
            "UnitFilePreset": "disabled",
            "UnitFileState": "disabled",
            "User": "postgres",
            "WatchdogTimestampMonotonic": "0",
            "WatchdogUSec": "0",
            "WorkingDirectory": "/var/lib/pgsql"
        }
    }
}
2022-03-22 04:17:54,981 p=17297 u=moonja n=ansible | skipping: [co7-node01]
2022-03-22 04:17:54,981 p=17297 u=moonja n=ansible | skipping: [co7-node02]
2022-03-22 04:17:54,993 p=17297 u=moonja n=ansible | skipping: [co7-node03]
2022-03-22 04:17:55,002 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] **************************************************************************************
2022-03-22 04:17:55,036 p=17297 u=moonja n=ansible | skipping: [co7-node01]
2022-03-22 04:17:55,051 p=17297 u=moonja n=ansible | skipping: [co7-node02]
2022-03-22 04:17:55,062 p=17297 u=moonja n=ansible | skipping: [co7-node03]
2022-03-22 04:17:56,713 p=17297 u=moonja n=ansible | changed: [co7-master]
2022-03-22 04:17:56,721 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the current state of monitor instance] ********************************************************************
2022-03-22 04:17:56,756 p=17297 u=moonja n=ansible | skipping: [co7-node01]
2022-03-22 04:17:56,771 p=17297 u=moonja n=ansible | skipping: [co7-node02]
2022-03-22 04:17:56,782 p=17297 u=moonja n=ansible | skipping: [co7-node03]
2022-03-22 04:17:57,609 p=17297 u=moonja n=ansible | changed: [co7-master]
2022-03-22 04:17:57,619 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : debug] ***********************************************************************************************************
2022-03-22 04:17:57,666 p=17297 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": true,
        "cmd": "( ps -ef | grep postgres )",
        "delta": "0:00:00.372650",
        "end": "2022-03-22 04:17:57.802762",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-22 04:17:57.430112",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "postgres 28834     1  0 04:17 ?        00:00:00 /usr/bin/pg_autoctl run\npostgres 28837 28834  0 04:17 ?        00:00:00 pg_autoctl: start/stop postgres\npostgres 28838 28834  0 04:17 ?        00:00:00 pg_autoctl: monitor listener\npostgres 28869 28837  0 04:17 ?        00:00:00 /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *\npostgres 28913 28869  0 04:17 ?        00:00:00 postgres: pg_auto_failover monitor: logger \njomoon   29085 18800  0 04:17 pts/0    00:00:00 /bin/sh -c sudo -H -S  -p \"[sudo via ansible, key=uawqzlxdcbxxywaqmdamqlmgcxtbqsig] password:\" -u postgres /bin/sh -c 'echo BECOME-SUCCESS-uawqzlxdcbxxywaqmdamqlmgcxtbqsig ; /usr/bin/python /var/tmp/ansible-tmp-1647890276.812725-18873-153200264375248/AnsiballZ_command.py' && sleep 0\nroot     29109 29085  0 04:17 pts/0    00:00:00 sudo -H -S -p [sudo via ansible, key=uawqzlxdcbxxywaqmdamqlmgcxtbqsig] password: -u postgres /bin/sh -c echo BECOME-SUCCESS-uawqzlxdcbxxywaqmdamqlmgcxtbqsig ; /usr/bin/python /var/tmp/ansible-tmp-1647890276.812725-18873-153200264375248/AnsiballZ_command.py\npostgres 29110 29109  0 04:17 pts/0    00:00:00 /bin/sh -c echo BECOME-SUCCESS-uawqzlxdcbxxywaqmdamqlmgcxtbqsig ; /usr/bin/python /var/tmp/ansible-tmp-1647890276.812725-18873-153200264375248/AnsiballZ_command.py\npostgres 29111 29110  5 04:17 pts/0    00:00:00 /usr/bin/python /var/tmp/ansible-tmp-1647890276.812725-18873-153200264375248/AnsiballZ_command.py\npostgres 29113 29111  2 04:17 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )\npostgres 29114 29113  0 04:17 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )\npostgres 29115 29114  3 04:17 pts/0    00:00:00 ps -ef\npostgres 29116 29114  0 04:17 pts/0    00:00:00 grep postgres",
        "stdout_lines": [
            "postgres 28834     1  0 04:17 ?        00:00:00 /usr/bin/pg_autoctl run",
            "postgres 28837 28834  0 04:17 ?        00:00:00 pg_autoctl: start/stop postgres",
            "postgres 28838 28834  0 04:17 ?        00:00:00 pg_autoctl: monitor listener",
            "postgres 28869 28837  0 04:17 ?        00:00:00 /bin/postgres -D /var/lib/pgsql/monitor -p 5432 -h *",
            "postgres 28913 28869  0 04:17 ?        00:00:00 postgres: pg_auto_failover monitor: logger ",
            "jomoon   29085 18800  0 04:17 pts/0    00:00:00 /bin/sh -c sudo -H -S  -p \"[sudo via ansible, key=uawqzlxdcbxxywaqmdamqlmgcxtbqsig] password:\" -u postgres /bin/sh -c 'echo BECOME-SUCCESS-uawqzlxdcbxxywaqmdamqlmgcxtbqsig ; /usr/bin/python /var/tmp/ansible-tmp-1647890276.812725-18873-153200264375248/AnsiballZ_command.py' && sleep 0",
            "root     29109 29085  0 04:17 pts/0    00:00:00 sudo -H -S -p [sudo via ansible, key=uawqzlxdcbxxywaqmdamqlmgcxtbqsig] password: -u postgres /bin/sh -c echo BECOME-SUCCESS-uawqzlxdcbxxywaqmdamqlmgcxtbqsig ; /usr/bin/python /var/tmp/ansible-tmp-1647890276.812725-18873-153200264375248/AnsiballZ_command.py",
            "postgres 29110 29109  0 04:17 pts/0    00:00:00 /bin/sh -c echo BECOME-SUCCESS-uawqzlxdcbxxywaqmdamqlmgcxtbqsig ; /usr/bin/python /var/tmp/ansible-tmp-1647890276.812725-18873-153200264375248/AnsiballZ_command.py",
            "postgres 29111 29110  5 04:17 pts/0    00:00:00 /usr/bin/python /var/tmp/ansible-tmp-1647890276.812725-18873-153200264375248/AnsiballZ_command.py",
            "postgres 29113 29111  2 04:17 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )",
            "postgres 29114 29113  0 04:17 pts/0    00:00:00 /bin/sh -c ( ps -ef | grep postgres )",
            "postgres 29115 29114  3 04:17 pts/0    00:00:00 ps -ef",
            "postgres 29116 29114  0 04:17 pts/0    00:00:00 grep postgres"
        ]
    }
}
2022-03-22 04:17:57,679 p=17297 u=moonja n=ansible | skipping: [co7-node01]
2022-03-22 04:17:57,679 p=17297 u=moonja n=ansible | skipping: [co7-node02]
2022-03-22 04:17:57,691 p=17297 u=moonja n=ansible | skipping: [co7-node03]
2022-03-22 04:17:57,701 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the current state of monitor] *****************************************************************************
2022-03-22 04:17:57,733 p=17297 u=moonja n=ansible | skipping: [co7-node01]
2022-03-22 04:17:57,749 p=17297 u=moonja n=ansible | skipping: [co7-node02]
2022-03-22 04:17:57,760 p=17297 u=moonja n=ansible | skipping: [co7-node03]
2022-03-22 04:17:58,199 p=17297 u=moonja n=ansible | changed: [co7-master]
2022-03-22 04:17:58,217 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : debug] ***********************************************************************************************************
2022-03-22 04:17:58,265 p=17297 u=moonja n=ansible | ok: [co7-master] => {
    "msg": {
        "changed": true,
        "cmd": "( psql -c \"\\l\" )",
        "delta": "0:00:00.034556",
        "end": "2022-03-22 04:17:58.402280",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-22 04:17:58.367724",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "                                    List of databases\n       Name       |  Owner   | Encoding |  Collate   |   Ctype    |   Access privileges   \n------------------+----------+----------+------------+------------+-----------------------\n pg_auto_failover | autoctl  | UTF8     | en_US.utf8 | en_US.utf8 | \n postgres         | postgres | UTF8     | en_US.utf8 | en_US.utf8 | \n template0        | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +\n                  |          |          |            |            | postgres=CTc/postgres\n template1        | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +\n                  |          |          |            |            | postgres=CTc/postgres\n(4 rows)",
        "stdout_lines": [
            "                                    List of databases",
            "       Name       |  Owner   | Encoding |  Collate   |   Ctype    |   Access privileges   ",
            "------------------+----------+----------+------------+------------+-----------------------",
            " pg_auto_failover | autoctl  | UTF8     | en_US.utf8 | en_US.utf8 | ",
            " postgres         | postgres | UTF8     | en_US.utf8 | en_US.utf8 | ",
            " template0        | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +",
            "                  |          |          |            |            | postgres=CTc/postgres",
            " template1        | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +",
            "                  |          |          |            |            | postgres=CTc/postgres",
            "(4 rows)"
        ]
    }
}
2022-03-22 04:17:58,278 p=17297 u=moonja n=ansible | skipping: [co7-node01]
2022-03-22 04:17:58,278 p=17297 u=moonja n=ansible | skipping: [co7-node02]
2022-03-22 04:17:58,291 p=17297 u=moonja n=ansible | skipping: [co7-node03]
2022-03-22 04:17:58,313 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : Create primiary instance. It will automatically be set by the monitor as the primary node with read-write capability (PGDATA = /var/lib/pgpsql/ha)] ***
2022-03-22 04:17:58,333 p=17297 u=moonja n=ansible | skipping: [co7-master]
2022-03-22 04:17:58,363 p=17297 u=moonja n=ansible | skipping: [co7-node02]
2022-03-22 04:17:58,375 p=17297 u=moonja n=ansible | skipping: [co7-node03]
2022-03-22 04:18:09,993 p=17297 u=moonja n=ansible | changed: [co7-node01]
2022-03-22 04:18:10,002 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : debug] ***********************************************************************************************************
2022-03-22 04:18:10,026 p=17297 u=moonja n=ansible | skipping: [co7-master]
2022-03-22 04:18:10,066 p=17297 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "279438537257.23690",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ;  pg_autoctl create postgres --pgdata \"ha\" --auth trust --ssl-self-signed --username ha-admin --dbname \"appdb\" --hostname \"co7-node01\" --pgctl /bin/pg_ctl --monitor 'postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require' )",
        "delta": "0:00:09.976259",
        "end": "2022-03-22 04:18:09.396435",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/279438537257.23690",
        "start": "2022-03-22 04:17:59.420176",
        "started": 1,
        "stderr": "04:17:59 23700 INFO  Using default --ssl-mode \"require\"\n04:17:59 23700 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n04:17:59 23700 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n04:17:59 23700 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n04:17:59 23700 INFO  Started pg_autoctl postgres service with pid 23702\n04:17:59 23702 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v\n04:17:59 23700 INFO  Started pg_autoctl node-init service with pid 23703\n04:17:59 23703 INFO  Registered node 1 (co7-node01:5432) with name \"node_1\" in formation \"default\", group 0, state \"single\"\n04:17:59 23703 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"\n04:17:59 23703 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"\n04:17:59 23703 INFO  Successfully registered as \"single\" to the monitor.\n04:17:59 23703 INFO  FSM transition from \"init\" to \"single\": Start as a single node\n04:17:59 23703 INFO  Initialising postgres as a primary\n04:17:59 23703 INFO  Initialising a PostgreSQL cluster at \"ha\"\n04:17:59 23703 INFO  /bin/pg_ctl initdb -s -D ha --option '--auth=trust'\n04:18:06 23703 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n04:18:06 23703 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.\n04:18:06 23703 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n04:18:06 23703 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"\n04:18:06 23703 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node01\"\n04:18:06 23855 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *\n04:18:07 23702 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 23855\n04:18:07 23703 INFO  CREATE DATABASE appdb;\n04:18:08 23703 INFO  CREATE EXTENSION pg_stat_statements;\n04:18:08 23703 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node01\"\n04:18:08 23703 INFO  Contents of \"/var/lib/pgsql/ha/postgresql-auto-failover.conf\" have changed, overwriting\n04:18:08 23703 WARN  Failed to resolve hostname \"co7-master\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n04:18:08 23703 WARN  Postgres might deny connection attempts from \"co7-master\", even with the new HBA rules.\n04:18:08 23703 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n04:18:08 23703 WARN  Using IP address \"192.168.0.81\" in HBA file instead of hostname \"co7-master\"\n04:18:08 23703 INFO  Transition complete: current state is now \"single\"\n04:18:08 23703 INFO  keeper has been successfully initialized.\n04:18:08 23700 WARN  pg_autoctl service node-init exited with exit status 0\n04:18:08 23702 INFO  Postgres controller service received signal SIGTERM, terminating\n04:18:08 23702 INFO  Stopping pg_autoctl postgres service\n04:18:08 23702 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast\n04:18:08 23700 INFO  Waiting for subprocesses to terminate.\n04:18:09 23700 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "04:17:59 23700 INFO  Using default --ssl-mode \"require\"",
            "04:17:59 23700 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "04:17:59 23700 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "04:17:59 23700 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "04:17:59 23700 INFO  Started pg_autoctl postgres service with pid 23702",
            "04:17:59 23702 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v",
            "04:17:59 23700 INFO  Started pg_autoctl node-init service with pid 23703",
            "04:17:59 23703 INFO  Registered node 1 (co7-node01:5432) with name \"node_1\" in formation \"default\", group 0, state \"single\"",
            "04:17:59 23703 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"",
            "04:17:59 23703 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"",
            "04:17:59 23703 INFO  Successfully registered as \"single\" to the monitor.",
            "04:17:59 23703 INFO  FSM transition from \"init\" to \"single\": Start as a single node",
            "04:17:59 23703 INFO  Initialising postgres as a primary",
            "04:17:59 23703 INFO  Initialising a PostgreSQL cluster at \"ha\"",
            "04:17:59 23703 INFO  /bin/pg_ctl initdb -s -D ha --option '--auth=trust'",
            "04:18:06 23703 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "04:18:06 23703 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.",
            "04:18:06 23703 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "04:18:06 23703 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"",
            "04:18:06 23703 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node01\"",
            "04:18:06 23855 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *",
            "04:18:07 23702 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 23855",
            "04:18:07 23703 INFO  CREATE DATABASE appdb;",
            "04:18:08 23703 INFO  CREATE EXTENSION pg_stat_statements;",
            "04:18:08 23703 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node01\"",
            "04:18:08 23703 INFO  Contents of \"/var/lib/pgsql/ha/postgresql-auto-failover.conf\" have changed, overwriting",
            "04:18:08 23703 WARN  Failed to resolve hostname \"co7-master\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "04:18:08 23703 WARN  Postgres might deny connection attempts from \"co7-master\", even with the new HBA rules.",
            "04:18:08 23703 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "04:18:08 23703 WARN  Using IP address \"192.168.0.81\" in HBA file instead of hostname \"co7-master\"",
            "04:18:08 23703 INFO  Transition complete: current state is now \"single\"",
            "04:18:08 23703 INFO  keeper has been successfully initialized.",
            "04:18:08 23700 WARN  pg_autoctl service node-init exited with exit status 0",
            "04:18:08 23702 INFO  Postgres controller service received signal SIGTERM, terminating",
            "04:18:08 23702 INFO  Stopping pg_autoctl postgres service",
            "04:18:08 23702 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast",
            "04:18:08 23700 INFO  Waiting for subprocesses to terminate.",
            "04:18:09 23700 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": [],
        "warnings": [
            "Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually"
        ]
    }
}
2022-03-22 04:18:10,083 p=17297 u=moonja n=ansible | skipping: [co7-node02]
2022-03-22 04:18:10,096 p=17297 u=moonja n=ansible | skipping: [co7-node03]
2022-03-22 04:18:10,105 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of pirmary instance] *****************************************************************
2022-03-22 04:18:10,126 p=17297 u=moonja n=ansible | skipping: [co7-master]
2022-03-22 04:18:10,155 p=17297 u=moonja n=ansible | skipping: [co7-node02]
2022-03-22 04:18:10,167 p=17297 u=moonja n=ansible | skipping: [co7-node03]
2022-03-22 04:18:16,982 p=17297 u=moonja n=ansible | changed: [co7-node01]
2022-03-22 04:18:16,992 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : debug] ***********************************************************************************************************
2022-03-22 04:18:17,027 p=17297 u=moonja n=ansible | skipping: [co7-master]
2022-03-22 04:18:17,047 p=17297 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "867709953823.24195",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl -q show systemd --pgdata ~postgres/ha > pgautofailover.service )",
        "delta": "0:00:00.031517",
        "end": "2022-03-22 04:18:11.145531",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/867709953823.24195",
        "start": "2022-03-22 04:18:11.114014",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-22 04:18:17,048 p=17297 u=moonja n=ansible | skipping: [co7-node02]
2022-03-22 04:18:17,059 p=17297 u=moonja n=ansible | skipping: [co7-node03]
2022-03-22 04:18:17,069 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : Copy primary systemd service file of primary instance] ***********************************************************
2022-03-22 04:18:17,102 p=17297 u=moonja n=ansible | skipping: [co7-master]
2022-03-22 04:18:17,118 p=17297 u=moonja n=ansible | skipping: [co7-node02]
2022-03-22 04:18:17,129 p=17297 u=moonja n=ansible | skipping: [co7-node03]
2022-03-22 04:18:18,654 p=17297 u=moonja n=ansible | changed: [co7-node01]
2022-03-22 04:18:18,664 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start primary systemd service of primary instance] ****************************************************
2022-03-22 04:18:18,685 p=17297 u=moonja n=ansible | skipping: [co7-master]
2022-03-22 04:18:18,714 p=17297 u=moonja n=ansible | skipping: [co7-node02]
2022-03-22 04:18:18,727 p=17297 u=moonja n=ansible | skipping: [co7-node03]
2022-03-22 04:18:19,494 p=17297 u=moonja n=ansible | changed: [co7-node01]
2022-03-22 04:18:19,505 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] **************************************************************************************
2022-03-22 04:18:19,525 p=17297 u=moonja n=ansible | skipping: [co7-master]
2022-03-22 04:18:19,555 p=17297 u=moonja n=ansible | skipping: [co7-node02]
2022-03-22 04:18:19,566 p=17297 u=moonja n=ansible | skipping: [co7-node03]
2022-03-22 04:18:20,203 p=17297 u=moonja n=ansible | changed: [co7-node01]
2022-03-22 04:18:20,214 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the state of primary instance] ****************************************************************************
2022-03-22 04:18:20,248 p=17297 u=moonja n=ansible | skipping: [co7-master]
2022-03-22 04:18:20,264 p=17297 u=moonja n=ansible | skipping: [co7-node02]
2022-03-22 04:18:20,277 p=17297 u=moonja n=ansible | skipping: [co7-node03]
2022-03-22 04:18:20,841 p=17297 u=moonja n=ansible | changed: [co7-node01]
2022-03-22 04:18:20,851 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : debug] ***********************************************************************************************************
2022-03-22 04:18:20,871 p=17297 u=moonja n=ansible | skipping: [co7-master]
2022-03-22 04:18:20,916 p=17297 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "changed": true,
        "cmd": "( source ~/.bash_profile ; pg_autoctl show state )",
        "delta": "0:00:00.108732",
        "end": "2022-03-22 04:18:21.046627",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-22 04:18:20.937895",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State\n-------+-------+-----------------+-----------+-----------+---------------------+--------------------\nnode_1 |     1 | co7-node01:5432 | 0/1662668 |        no |              single |              single",
        "stdout_lines": [
            "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State",
            "-------+-------+-----------------+-----------+-----------+---------------------+--------------------",
            "node_1 |     1 | co7-node01:5432 | 0/1662668 |        no |              single |              single"
        ]
    }
}
2022-03-22 04:18:20,917 p=17297 u=moonja n=ansible | skipping: [co7-node02]
2022-03-22 04:18:20,917 p=17297 u=moonja n=ansible | skipping: [co7-node03]
2022-03-22 04:18:20,925 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : Create secondary instance. It will automatically be set by the monitor as the secondary  node with read-write capability (PGDATA = /var/lib/pgpsql/ha)] ***
2022-03-22 04:18:20,946 p=17297 u=moonja n=ansible | skipping: [co7-master]
2022-03-22 04:18:20,962 p=17297 u=moonja n=ansible | skipping: [co7-node01]
2022-03-22 04:18:37,927 p=17297 u=moonja n=ansible | changed: [co7-node02]
2022-03-22 04:18:39,246 p=17297 u=moonja n=ansible | changed: [co7-node03]
2022-03-22 04:18:39,256 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : debug] ***********************************************************************************************************
2022-03-22 04:18:39,276 p=17297 u=moonja n=ansible | skipping: [co7-master]
2022-03-22 04:18:39,293 p=17297 u=moonja n=ansible | skipping: [co7-node01]
2022-03-22 04:18:39,318 p=17297 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "ansible_job_id": "898424506534.23604",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ;  pg_autoctl create postgres --pgdata \"ha\" --auth trust --ssl-self-signed --username ha-admin --dbname \"appdb\" --hostname \"co7-node02\" --pgctl /bin/pg_ctl --monitor 'postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require' )",
        "delta": "0:00:14.997968",
        "end": "2022-03-22 04:18:36.790044",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/898424506534.23604",
        "start": "2022-03-22 04:18:21.792076",
        "started": 1,
        "stderr": "04:18:21 23614 INFO  Using default --ssl-mode \"require\"\n04:18:21 23614 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n04:18:21 23614 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n04:18:21 23614 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n04:18:21 23614 INFO  Started pg_autoctl postgres service with pid 23616\n04:18:21 23614 INFO  Started pg_autoctl node-init service with pid 23617\n04:18:21 23616 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v\n04:18:23 23617 INFO  Registered node 3 (co7-node02:5432) with name \"node_3\" in formation \"default\", group 0, state \"wait_standby\"\n04:18:23 23617 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"\n04:18:23 23617 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"\n04:18:23 23617 INFO  Successfully registered as \"wait_standby\" to the monitor.\n04:18:23 23617 INFO  FSM transition from \"init\" to \"wait_standby\": Start following a primary\n04:18:23 23617 INFO  Transition complete: current state is now \"wait_standby\"\n04:18:25 23617 INFO  New state for node 1 \"node_1\" (co7-node01:5432): single ➜ wait_primary\n04:18:25 23617 INFO  Still waiting for the monitor to drive us to state \"catchingup\"\n04:18:25 23617 WARN  Please make sure that the primary node is currently running `pg_autoctl run` and contacting the monitor.\n04:18:27 23617 INFO  New state for node 1 \"node_1\" (co7-node01:5432): wait_primary ➜ wait_primary\n04:18:27 23617 INFO  FSM transition from \"wait_standby\" to \"catchingup\": The primary is now ready to accept a standby\n04:18:27 23617 INFO  Initialising PostgreSQL as a hot standby\n04:18:27 23617 INFO   /bin/pg_basebackup -w -d application_name=pgautofailover_standby_3 host=co7-node01 port=5432 user=pgautofailover_replicator sslmode=require --pgdata /var/lib/pgsql/backup/node_3 -U pgautofailover_replicator --verbose --progress --max-rate 100M --wal-method=stream --slot pgautofailover_standby_3\n04:18:27 23617 INFO  pg_basebackup: initiating base backup, waiting for checkpoint to complete\n04:18:28 23617 INFO  pg_basebackup: checkpoint completed\n04:18:28 23617 INFO  pg_basebackup: write-ahead log start point: 0/2000028 on timeline 1\n04:18:28 23617 INFO  pg_basebackup: starting background WAL receiver\n04:18:28 23617 INFO      0/33121 kB (0%), 0/1 tablespace (...pgsql/backup/node_3/backup_label)\n04:18:29 23617 INFO  13070/33121 kB (39%), 0/1 tablespace (...ql/backup/node_3/base/14173/2655)\n04:18:29 23617 INFO  33129/33129 kB (100%), 0/1 tablespace (.../backup/node_3/global/pg_control)\n04:18:29 23617 INFO  33129/33129 kB (100%), 1/1 tablespace                                         \n04:18:29 23617 INFO  pg_basebackup: write-ahead log end point: 0/20001B0\n04:18:29 23617 INFO  pg_basebackup: waiting for background process to finish streaming ...\n04:18:29 23617 INFO  pg_basebackup: syncing data to disk ...\n04:18:32 23617 INFO  pg_basebackup: renaming backup_manifest.tmp to backup_manifest\n04:18:32 23617 INFO  pg_basebackup: base backup completed\n04:18:32 23617 INFO  Creating the standby signal file at \"/var/lib/pgsql/ha/standby.signal\", and replication setup at \"/var/lib/pgsql/ha/postgresql-auto-failover-standby.conf\"\n04:18:32 23617 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node02\"\n04:18:33 23849 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *\n04:18:34 23616 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 23849\n04:18:34 23617 INFO  PostgreSQL started on port 5432\n04:18:34 23617 INFO  Fetched current list of 2 other nodes from the monitor to update HBA rules, including 2 changes.\n04:18:34 23617 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n04:18:34 23617 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.\n04:18:34 23617 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n04:18:34 23617 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"\n04:18:34 23617 INFO  Ensuring HBA rules for node 1 \"node_1\" (192.168.0.83:5432)\n04:18:34 23617 WARN  Failed to resolve hostname \"co7-node03\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n04:18:34 23617 WARN  Postgres might deny connection attempts from \"co7-node03\", even with the new HBA rules.\n04:18:34 23617 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n04:18:34 23617 WARN  Using IP address \"192.168.0.85\" in HBA file instead of hostname \"co7-node03\"\n04:18:34 23617 INFO  Ensuring HBA rules for node 2 \"node_2\" (192.168.0.85:5432)\n04:18:35 23617 INFO  Transition complete: current state is now \"catchingup\"\n04:18:35 23617 INFO  keeper has been successfully initialized.\n04:18:35 23614 WARN  pg_autoctl service node-init exited with exit status 0\n04:18:35 23616 INFO  Postgres controller service received signal SIGTERM, terminating\n04:18:35 23616 INFO  Stopping pg_autoctl postgres service\n04:18:35 23616 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast\n04:18:35 23614 INFO  Waiting for subprocesses to terminate.\n04:18:36 23614 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "04:18:21 23614 INFO  Using default --ssl-mode \"require\"",
            "04:18:21 23614 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "04:18:21 23614 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "04:18:21 23614 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "04:18:21 23614 INFO  Started pg_autoctl postgres service with pid 23616",
            "04:18:21 23614 INFO  Started pg_autoctl node-init service with pid 23617",
            "04:18:21 23616 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v",
            "04:18:23 23617 INFO  Registered node 3 (co7-node02:5432) with name \"node_3\" in formation \"default\", group 0, state \"wait_standby\"",
            "04:18:23 23617 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"",
            "04:18:23 23617 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"",
            "04:18:23 23617 INFO  Successfully registered as \"wait_standby\" to the monitor.",
            "04:18:23 23617 INFO  FSM transition from \"init\" to \"wait_standby\": Start following a primary",
            "04:18:23 23617 INFO  Transition complete: current state is now \"wait_standby\"",
            "04:18:25 23617 INFO  New state for node 1 \"node_1\" (co7-node01:5432): single ➜ wait_primary",
            "04:18:25 23617 INFO  Still waiting for the monitor to drive us to state \"catchingup\"",
            "04:18:25 23617 WARN  Please make sure that the primary node is currently running `pg_autoctl run` and contacting the monitor.",
            "04:18:27 23617 INFO  New state for node 1 \"node_1\" (co7-node01:5432): wait_primary ➜ wait_primary",
            "04:18:27 23617 INFO  FSM transition from \"wait_standby\" to \"catchingup\": The primary is now ready to accept a standby",
            "04:18:27 23617 INFO  Initialising PostgreSQL as a hot standby",
            "04:18:27 23617 INFO   /bin/pg_basebackup -w -d application_name=pgautofailover_standby_3 host=co7-node01 port=5432 user=pgautofailover_replicator sslmode=require --pgdata /var/lib/pgsql/backup/node_3 -U pgautofailover_replicator --verbose --progress --max-rate 100M --wal-method=stream --slot pgautofailover_standby_3",
            "04:18:27 23617 INFO  pg_basebackup: initiating base backup, waiting for checkpoint to complete",
            "04:18:28 23617 INFO  pg_basebackup: checkpoint completed",
            "04:18:28 23617 INFO  pg_basebackup: write-ahead log start point: 0/2000028 on timeline 1",
            "04:18:28 23617 INFO  pg_basebackup: starting background WAL receiver",
            "04:18:28 23617 INFO      0/33121 kB (0%), 0/1 tablespace (...pgsql/backup/node_3/backup_label)",
            "04:18:29 23617 INFO  13070/33121 kB (39%), 0/1 tablespace (...ql/backup/node_3/base/14173/2655)",
            "04:18:29 23617 INFO  33129/33129 kB (100%), 0/1 tablespace (.../backup/node_3/global/pg_control)",
            "04:18:29 23617 INFO  33129/33129 kB (100%), 1/1 tablespace                                         ",
            "04:18:29 23617 INFO  pg_basebackup: write-ahead log end point: 0/20001B0",
            "04:18:29 23617 INFO  pg_basebackup: waiting for background process to finish streaming ...",
            "04:18:29 23617 INFO  pg_basebackup: syncing data to disk ...",
            "04:18:32 23617 INFO  pg_basebackup: renaming backup_manifest.tmp to backup_manifest",
            "04:18:32 23617 INFO  pg_basebackup: base backup completed",
            "04:18:32 23617 INFO  Creating the standby signal file at \"/var/lib/pgsql/ha/standby.signal\", and replication setup at \"/var/lib/pgsql/ha/postgresql-auto-failover-standby.conf\"",
            "04:18:32 23617 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node02\"",
            "04:18:33 23849 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *",
            "04:18:34 23616 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 23849",
            "04:18:34 23617 INFO  PostgreSQL started on port 5432",
            "04:18:34 23617 INFO  Fetched current list of 2 other nodes from the monitor to update HBA rules, including 2 changes.",
            "04:18:34 23617 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "04:18:34 23617 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.",
            "04:18:34 23617 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "04:18:34 23617 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"",
            "04:18:34 23617 INFO  Ensuring HBA rules for node 1 \"node_1\" (192.168.0.83:5432)",
            "04:18:34 23617 WARN  Failed to resolve hostname \"co7-node03\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "04:18:34 23617 WARN  Postgres might deny connection attempts from \"co7-node03\", even with the new HBA rules.",
            "04:18:34 23617 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "04:18:34 23617 WARN  Using IP address \"192.168.0.85\" in HBA file instead of hostname \"co7-node03\"",
            "04:18:34 23617 INFO  Ensuring HBA rules for node 2 \"node_2\" (192.168.0.85:5432)",
            "04:18:35 23617 INFO  Transition complete: current state is now \"catchingup\"",
            "04:18:35 23617 INFO  keeper has been successfully initialized.",
            "04:18:35 23614 WARN  pg_autoctl service node-init exited with exit status 0",
            "04:18:35 23616 INFO  Postgres controller service received signal SIGTERM, terminating",
            "04:18:35 23616 INFO  Stopping pg_autoctl postgres service",
            "04:18:35 23616 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast",
            "04:18:35 23614 INFO  Waiting for subprocesses to terminate.",
            "04:18:36 23614 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": [],
        "warnings": [
            "Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually"
        ]
    }
}
2022-03-22 04:18:39,417 p=17297 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "ansible_job_id": "131533737775.24372",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ;  pg_autoctl create postgres --pgdata \"ha\" --auth trust --ssl-self-signed --username ha-admin --dbname \"appdb\" --hostname \"co7-node03\" --pgctl /bin/pg_ctl --monitor 'postgres://autoctl_node@co7-master/pg_auto_failover?sslmode=require' )",
        "delta": "0:00:15.503981",
        "end": "2022-03-22 04:18:37.288868",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/131533737775.24372",
        "start": "2022-03-22 04:18:21.784887",
        "started": 1,
        "stderr": "04:18:21 24382 INFO  Using default --ssl-mode \"require\"\n04:18:21 24382 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic\n04:18:21 24382 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.\n04:18:21 24382 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details\n04:18:21 24382 INFO  Started pg_autoctl postgres service with pid 24384\n04:18:21 24384 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v\n04:18:21 24382 INFO  Started pg_autoctl node-init service with pid 24385\n04:18:21 24385 INFO  Registered node 2 (co7-node03:5432) with name \"node_2\" in formation \"default\", group 0, state \"wait_standby\"\n04:18:21 24385 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"\n04:18:23 24385 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"\n04:18:23 24385 INFO  Successfully registered as \"wait_standby\" to the monitor.\n04:18:23 24385 INFO  FSM transition from \"init\" to \"wait_standby\": Start following a primary\n04:18:23 24385 INFO  Transition complete: current state is now \"wait_standby\"\n04:18:23 24385 INFO  New state for node 3 \"node_3\" (co7-node02:5432): wait_standby ➜ wait_standby\n04:18:24 24385 INFO  Still waiting for the monitor to drive us to state \"catchingup\"\n04:18:24 24385 WARN  Please make sure that the primary node is currently running `pg_autoctl run` and contacting the monitor.\n04:18:25 24385 INFO  New state for node 1 \"node_1\" (co7-node01:5432): single ➜ wait_primary\n04:18:27 24385 INFO  New state for node 1 \"node_1\" (co7-node01:5432): wait_primary ➜ wait_primary\n04:18:27 24385 INFO  FSM transition from \"wait_standby\" to \"catchingup\": The primary is now ready to accept a standby\n04:18:27 24385 INFO  Initialising PostgreSQL as a hot standby\n04:18:27 24385 INFO   /bin/pg_basebackup -w -d application_name=pgautofailover_standby_2 host=co7-node01 port=5432 user=pgautofailover_replicator sslmode=require --pgdata /var/lib/pgsql/backup/node_2 -U pgautofailover_replicator --verbose --progress --max-rate 100M --wal-method=stream --slot pgautofailover_standby_2\n04:18:28 24385 INFO  pg_basebackup: initiating base backup, waiting for checkpoint to complete\n04:18:28 24385 INFO  pg_basebackup: checkpoint completed\n04:18:28 24385 INFO  pg_basebackup: write-ahead log start point: 0/20000D8 on timeline 1\n04:18:28 24385 INFO  pg_basebackup: starting background WAL receiver\n04:18:28 24385 INFO      0/33120 kB (0%), 0/1 tablespace (...pgsql/backup/node_2/backup_label)\n04:18:29 24385 INFO  13070/33120 kB (39%), 0/1 tablespace (...ql/backup/node_2/base/14173/2655)\n04:18:31 24385 INFO  33129/33129 kB (100%), 0/1 tablespace (.../backup/node_2/global/pg_control)\n04:18:31 24385 INFO  33129/33129 kB (100%), 0/1 tablespace (.../backup/node_2/global/pg_control)\n04:18:31 24385 INFO  33129/33129 kB (100%), 1/1 tablespace                                         \n04:18:31 24385 INFO  pg_basebackup: write-ahead log end point: 0/3000050\n04:18:31 24385 INFO  pg_basebackup: waiting for background process to finish streaming ...\n04:18:31 24385 INFO  pg_basebackup: syncing data to disk ...\n04:18:34 24385 INFO  pg_basebackup: renaming backup_manifest.tmp to backup_manifest\n04:18:34 24385 INFO  pg_basebackup: base backup completed\n04:18:34 24385 INFO  Creating the standby signal file at \"/var/lib/pgsql/ha/standby.signal\", and replication setup at \"/var/lib/pgsql/ha/postgresql-auto-failover-standby.conf\"\n04:18:34 24385 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node03\"\n04:18:34 24609 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *\n04:18:35 24385 INFO  PostgreSQL started on port 5432\n04:18:35 24384 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 24609\n04:18:35 24385 INFO  Fetched current list of 2 other nodes from the monitor to update HBA rules, including 2 changes.\n04:18:35 24385 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n04:18:35 24385 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.\n04:18:35 24385 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n04:18:35 24385 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"\n04:18:35 24385 INFO  Ensuring HBA rules for node 1 \"node_1\" (192.168.0.83:5432)\n04:18:35 24385 WARN  Failed to resolve hostname \"co7-node02\" to an IP address that resolves back to the hostname on a reverse DNS lookup.\n04:18:35 24385 WARN  Postgres might deny connection attempts from \"co7-node02\", even with the new HBA rules.\n04:18:35 24385 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.\n04:18:35 24385 WARN  Using IP address \"192.168.0.84\" in HBA file instead of hostname \"co7-node02\"\n04:18:35 24385 INFO  Ensuring HBA rules for node 3 \"node_3\" (192.168.0.84:5432)\n04:18:35 24385 INFO  Transition complete: current state is now \"catchingup\"\n04:18:36 24385 INFO  keeper has been successfully initialized.\n04:18:36 24382 WARN  pg_autoctl service node-init exited with exit status 0\n04:18:36 24384 INFO  Postgres controller service received signal SIGTERM, terminating\n04:18:36 24384 INFO  Stopping pg_autoctl postgres service\n04:18:36 24384 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast\n04:18:36 24382 INFO  Waiting for subprocesses to terminate.\n04:18:37 24382 INFO  Stop pg_autoctl",
        "stderr_lines": [
            "04:18:21 24382 INFO  Using default --ssl-mode \"require\"",
            "04:18:21 24382 INFO  Using --ssl-self-signed: pg_autoctl will create self-signed certificates, allowing for encrypted network traffic",
            "04:18:21 24382 WARN  Self-signed certificates provide protection against eavesdropping; this setup does NOT protect against Man-In-The-Middle attacks nor Impersonation attacks.",
            "04:18:21 24382 WARN  See https://www.postgresql.org/docs/current/libpq-ssl.html for details",
            "04:18:21 24382 INFO  Started pg_autoctl postgres service with pid 24384",
            "04:18:21 24384 INFO   /usr/bin/pg_autoctl do service postgres --pgdata ha -v",
            "04:18:21 24382 INFO  Started pg_autoctl node-init service with pid 24385",
            "04:18:21 24385 INFO  Registered node 2 (co7-node03:5432) with name \"node_2\" in formation \"default\", group 0, state \"wait_standby\"",
            "04:18:21 24385 INFO  Writing keeper state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.state\"",
            "04:18:23 24385 INFO  Writing keeper init state file at \"/var/lib/pgsql/.local/share/pg_autoctl/var/lib/pgsql/ha/pg_autoctl.init\"",
            "04:18:23 24385 INFO  Successfully registered as \"wait_standby\" to the monitor.",
            "04:18:23 24385 INFO  FSM transition from \"init\" to \"wait_standby\": Start following a primary",
            "04:18:23 24385 INFO  Transition complete: current state is now \"wait_standby\"",
            "04:18:23 24385 INFO  New state for node 3 \"node_3\" (co7-node02:5432): wait_standby ➜ wait_standby",
            "04:18:24 24385 INFO  Still waiting for the monitor to drive us to state \"catchingup\"",
            "04:18:24 24385 WARN  Please make sure that the primary node is currently running `pg_autoctl run` and contacting the monitor.",
            "04:18:25 24385 INFO  New state for node 1 \"node_1\" (co7-node01:5432): single ➜ wait_primary",
            "04:18:27 24385 INFO  New state for node 1 \"node_1\" (co7-node01:5432): wait_primary ➜ wait_primary",
            "04:18:27 24385 INFO  FSM transition from \"wait_standby\" to \"catchingup\": The primary is now ready to accept a standby",
            "04:18:27 24385 INFO  Initialising PostgreSQL as a hot standby",
            "04:18:27 24385 INFO   /bin/pg_basebackup -w -d application_name=pgautofailover_standby_2 host=co7-node01 port=5432 user=pgautofailover_replicator sslmode=require --pgdata /var/lib/pgsql/backup/node_2 -U pgautofailover_replicator --verbose --progress --max-rate 100M --wal-method=stream --slot pgautofailover_standby_2",
            "04:18:28 24385 INFO  pg_basebackup: initiating base backup, waiting for checkpoint to complete",
            "04:18:28 24385 INFO  pg_basebackup: checkpoint completed",
            "04:18:28 24385 INFO  pg_basebackup: write-ahead log start point: 0/20000D8 on timeline 1",
            "04:18:28 24385 INFO  pg_basebackup: starting background WAL receiver",
            "04:18:28 24385 INFO      0/33120 kB (0%), 0/1 tablespace (...pgsql/backup/node_2/backup_label)",
            "04:18:29 24385 INFO  13070/33120 kB (39%), 0/1 tablespace (...ql/backup/node_2/base/14173/2655)",
            "04:18:31 24385 INFO  33129/33129 kB (100%), 0/1 tablespace (.../backup/node_2/global/pg_control)",
            "04:18:31 24385 INFO  33129/33129 kB (100%), 0/1 tablespace (.../backup/node_2/global/pg_control)",
            "04:18:31 24385 INFO  33129/33129 kB (100%), 1/1 tablespace                                         ",
            "04:18:31 24385 INFO  pg_basebackup: write-ahead log end point: 0/3000050",
            "04:18:31 24385 INFO  pg_basebackup: waiting for background process to finish streaming ...",
            "04:18:31 24385 INFO  pg_basebackup: syncing data to disk ...",
            "04:18:34 24385 INFO  pg_basebackup: renaming backup_manifest.tmp to backup_manifest",
            "04:18:34 24385 INFO  pg_basebackup: base backup completed",
            "04:18:34 24385 INFO  Creating the standby signal file at \"/var/lib/pgsql/ha/standby.signal\", and replication setup at \"/var/lib/pgsql/ha/postgresql-auto-failover-standby.conf\"",
            "04:18:34 24385 INFO   /bin/openssl req -new -x509 -days 365 -nodes -text -out /var/lib/pgsql/ha/server.crt -keyout /var/lib/pgsql/ha/server.key -subj \"/CN=co7-node03\"",
            "04:18:34 24609 INFO   /bin/postgres -D /var/lib/pgsql/ha -p 5432 -h *",
            "04:18:35 24385 INFO  PostgreSQL started on port 5432",
            "04:18:35 24384 INFO  Postgres is now serving PGDATA \"/var/lib/pgsql/ha\" on port 5432 with pid 24609",
            "04:18:35 24385 INFO  Fetched current list of 2 other nodes from the monitor to update HBA rules, including 2 changes.",
            "04:18:35 24385 WARN  Failed to resolve hostname \"co7-node01\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "04:18:35 24385 WARN  Postgres might deny connection attempts from \"co7-node01\", even with the new HBA rules.",
            "04:18:35 24385 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "04:18:35 24385 WARN  Using IP address \"192.168.0.83\" in HBA file instead of hostname \"co7-node01\"",
            "04:18:35 24385 INFO  Ensuring HBA rules for node 1 \"node_1\" (192.168.0.83:5432)",
            "04:18:35 24385 WARN  Failed to resolve hostname \"co7-node02\" to an IP address that resolves back to the hostname on a reverse DNS lookup.",
            "04:18:35 24385 WARN  Postgres might deny connection attempts from \"co7-node02\", even with the new HBA rules.",
            "04:18:35 24385 WARN  Hint: correct setup of HBA with host names requires proper reverse DNS setup. You might want to use IP addresses.",
            "04:18:35 24385 WARN  Using IP address \"192.168.0.84\" in HBA file instead of hostname \"co7-node02\"",
            "04:18:35 24385 INFO  Ensuring HBA rules for node 3 \"node_3\" (192.168.0.84:5432)",
            "04:18:35 24385 INFO  Transition complete: current state is now \"catchingup\"",
            "04:18:36 24385 INFO  keeper has been successfully initialized.",
            "04:18:36 24382 WARN  pg_autoctl service node-init exited with exit status 0",
            "04:18:36 24384 INFO  Postgres controller service received signal SIGTERM, terminating",
            "04:18:36 24384 INFO  Stopping pg_autoctl postgres service",
            "04:18:36 24384 INFO  /bin/pg_ctl --pgdata /var/lib/pgsql/ha --wait stop --mode fast",
            "04:18:36 24382 INFO  Waiting for subprocesses to terminate.",
            "04:18:37 24382 INFO  Stop pg_autoctl"
        ],
        "stdout": "",
        "stdout_lines": [],
        "warnings": [
            "Module remote_tmp /var/lib/pgsql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually"
        ]
    }
}
2022-03-22 04:18:39,430 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : Create systemd service file of secondary instance] ***************************************************************
2022-03-22 04:18:39,452 p=17297 u=moonja n=ansible | skipping: [co7-master]
2022-03-22 04:18:39,467 p=17297 u=moonja n=ansible | skipping: [co7-node01]
2022-03-22 04:18:45,785 p=17297 u=moonja n=ansible | changed: [co7-node03]
2022-03-22 04:18:46,745 p=17297 u=moonja n=ansible | changed: [co7-node02]
2022-03-22 04:18:46,754 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : debug] ***********************************************************************************************************
2022-03-22 04:18:46,775 p=17297 u=moonja n=ansible | skipping: [co7-master]
2022-03-22 04:18:46,792 p=17297 u=moonja n=ansible | skipping: [co7-node01]
2022-03-22 04:18:46,811 p=17297 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "ansible_job_id": "484323431870.24179",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl -q show systemd --pgdata ~postgres/ha > pgautofailover.service )",
        "delta": "0:00:00.032625",
        "end": "2022-03-22 04:18:40.330074",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/484323431870.24179",
        "start": "2022-03-22 04:18:40.297449",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-22 04:18:46,825 p=17297 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "ansible_job_id": "314137388960.24947",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; pg_autoctl -q show systemd --pgdata ~postgres/ha > pgautofailover.service )",
        "delta": "0:00:00.032581",
        "end": "2022-03-22 04:18:40.329870",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/314137388960.24947",
        "start": "2022-03-22 04:18:40.297289",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "",
        "stdout_lines": []
    }
}
2022-03-22 04:18:46,836 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : Copy secondary systemd service file of secondary instance] *******************************************************
2022-03-22 04:18:46,856 p=17297 u=moonja n=ansible | skipping: [co7-master]
2022-03-22 04:18:46,904 p=17297 u=moonja n=ansible | skipping: [co7-node01]
2022-03-22 04:18:47,363 p=17297 u=moonja n=ansible | changed: [co7-node02]
2022-03-22 04:18:47,468 p=17297 u=moonja n=ansible | changed: [co7-node03]
2022-03-22 04:18:47,481 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start secondary systemd service of secondary instance] ************************************************
2022-03-22 04:18:47,519 p=17297 u=moonja n=ansible | skipping: [co7-master]
2022-03-22 04:18:47,533 p=17297 u=moonja n=ansible | skipping: [co7-node01]
2022-03-22 04:18:48,316 p=17297 u=moonja n=ansible | changed: [co7-node03]
2022-03-22 04:18:48,317 p=17297 u=moonja n=ansible | changed: [co7-node02]
2022-03-22 04:18:48,327 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : Replace database directory] **************************************************************************************
2022-03-22 04:18:48,348 p=17297 u=moonja n=ansible | skipping: [co7-master]
2022-03-22 04:18:48,365 p=17297 u=moonja n=ansible | skipping: [co7-node01]
2022-03-22 04:18:49,201 p=17297 u=moonja n=ansible | changed: [co7-node03]
2022-03-22 04:18:49,218 p=17297 u=moonja n=ansible | changed: [co7-node02]
2022-03-22 04:18:49,228 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : Verify the state of secondary instance] **************************************************************************
2022-03-22 04:18:49,249 p=17297 u=moonja n=ansible | skipping: [co7-master]
2022-03-22 04:18:49,265 p=17297 u=moonja n=ansible | skipping: [co7-node01]
2022-03-22 04:18:49,851 p=17297 u=moonja n=ansible | changed: [co7-node03]
2022-03-22 04:18:49,863 p=17297 u=moonja n=ansible | changed: [co7-node02]
2022-03-22 04:18:49,874 p=17297 u=moonja n=ansible | TASK [pgfailover-postgres : debug] ***********************************************************************************************************
2022-03-22 04:18:49,894 p=17297 u=moonja n=ansible | skipping: [co7-master]
2022-03-22 04:18:49,911 p=17297 u=moonja n=ansible | skipping: [co7-node01]
2022-03-22 04:18:49,966 p=17297 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "changed": true,
        "cmd": "( source ~/.bash_profile ; pg_autoctl show state )",
        "delta": "0:00:00.118786",
        "end": "2022-03-22 04:18:50.061077",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-22 04:18:49.942291",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State\n-------+-------+-----------------+-----------+-----------+---------------------+--------------------\nnode_1 |     1 | co7-node01:5432 | 0/4000060 |       yes |        wait_primary |        wait_primary\nnode_2 |     2 | co7-node03:5432 | 0/4000000 |        no |          catchingup |          catchingup\nnode_3 |     3 | co7-node02:5432 | 0/3000000 |        no |          catchingup |          catchingup",
        "stdout_lines": [
            "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State",
            "-------+-------+-----------------+-----------+-----------+---------------------+--------------------",
            "node_1 |     1 | co7-node01:5432 | 0/4000060 |       yes |        wait_primary |        wait_primary",
            "node_2 |     2 | co7-node03:5432 | 0/4000000 |        no |          catchingup |          catchingup",
            "node_3 |     3 | co7-node02:5432 | 0/3000000 |        no |          catchingup |          catchingup"
        ]
    }
}
2022-03-22 04:18:49,969 p=17297 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "changed": true,
        "cmd": "( source ~/.bash_profile ; pg_autoctl show state )",
        "delta": "0:00:00.106707",
        "end": "2022-03-22 04:18:50.048126",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-03-22 04:18:49.941419",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State\n-------+-------+-----------------+-----------+-----------+---------------------+--------------------\nnode_1 |     1 | co7-node01:5432 | 0/4000060 |       yes |        wait_primary |        wait_primary\nnode_2 |     2 | co7-node03:5432 | 0/4000000 |        no |          catchingup |          catchingup\nnode_3 |     3 | co7-node02:5432 | 0/3000000 |        no |          catchingup |          catchingup",
        "stdout_lines": [
            "  Name |  Node |       Host:Port |       LSN | Reachable |       Current State |      Assigned State",
            "-------+-------+-----------------+-----------+-----------+---------------------+--------------------",
            "node_1 |     1 | co7-node01:5432 | 0/4000060 |       yes |        wait_primary |        wait_primary",
            "node_2 |     2 | co7-node03:5432 | 0/4000000 |        no |          catchingup |          catchingup",
            "node_3 |     3 | co7-node02:5432 | 0/3000000 |        no |          catchingup |          catchingup"
        ]
    }
}
2022-03-22 04:18:50,015 p=17297 u=moonja n=ansible | PLAY RECAP ***********************************************************************************************************************************
2022-03-22 04:18:50,015 p=17297 u=moonja n=ansible | co7-master                 : ok=27   changed=15   unreachable=0    failed=0    skipped=19   rescued=0    ignored=0   
2022-03-22 04:18:50,015 p=17297 u=moonja n=ansible | co7-node01                 : ok=21   changed=12   unreachable=0    failed=0    skipped=25   rescued=0    ignored=0   
2022-03-22 04:18:50,015 p=17297 u=moonja n=ansible | co7-node02                 : ok=21   changed=12   unreachable=0    failed=0    skipped=25   rescued=0    ignored=0   
2022-03-22 04:18:50,015 p=17297 u=moonja n=ansible | co7-node03                 : ok=21   changed=12   unreachable=0    failed=0    skipped=25   rescued=0    ignored=0   
2022-03-31 22:07:48,458 p=9407 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This 
feature will be removed from ansible-core in version 2.14. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2022-03-31 22:07:48,788 p=9407 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will
 be removed in version 2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False 
in ansible.cfg.
2022-03-31 22:07:48,794 p=9407 u=moonja n=ansible | [WARNING]: While constructing a mapping from /Users/moonja/postgres-cluster/roles/pgfailover-
postgres/tasks/install.yml, line 307, column 3, found a duplicate dict key (when). Using last defined
value only.

2022-03-31 22:07:48,856 p=9407 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgfailover-postgres/tasks/upgrade.yml is empty and
had no tasks to include

2022-03-31 22:07:48,875 p=9407 u=moonja n=ansible | PLAY [all] ***********************************************************************************************
2022-03-31 22:07:48,908 p=9407 u=moonja n=ansible | TASK [Gathering Facts] ***********************************************************************************
2022-03-31 22:08:04,315 p=9407 u=moonja n=ansible | ok: [co7-master]
2022-03-31 22:08:04,362 p=9407 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 22:08:04,553 p=9407 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 22:08:06,001 p=9407 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:08:06,020 p=9407 u=moonja n=ansible | TASK [pgfailover-postgres : Disable port from public zone] ***********************************************
2022-03-31 22:08:09,237 p=9407 u=moonja n=ansible | changed: [co7-node03] => (item=5432)
2022-03-31 22:08:09,374 p=9407 u=moonja n=ansible | changed: [co7-node01] => (item=5432)
2022-03-31 22:08:09,476 p=9407 u=moonja n=ansible | changed: [co7-master] => (item=5432)
2022-03-31 22:08:09,688 p=9407 u=moonja n=ansible | changed: [co7-node02] => (item=5432)
2022-03-31 22:08:09,699 p=9407 u=moonja n=ansible | TASK [pgfailover-postgres : Disable IP Addresses in whitelist] *******************************************
2022-03-31 22:08:10,358 p=9407 u=moonja n=ansible | changed: [co7-master] => (item=co7-master)
2022-03-31 22:08:10,384 p=9407 u=moonja n=ansible | changed: [co7-node01] => (item=co7-master)
2022-03-31 22:08:10,398 p=9407 u=moonja n=ansible | changed: [co7-node03] => (item=co7-master)
2022-03-31 22:08:10,408 p=9407 u=moonja n=ansible | changed: [co7-node02] => (item=co7-master)
2022-03-31 22:08:11,016 p=9407 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node01)
2022-03-31 22:08:11,030 p=9407 u=moonja n=ansible | changed: [co7-master] => (item=co7-node01)
2022-03-31 22:08:11,033 p=9407 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node01)
2022-03-31 22:08:11,042 p=9407 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node01)
2022-03-31 22:08:11,635 p=9407 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node02)
2022-03-31 22:08:11,638 p=9407 u=moonja n=ansible | changed: [co7-master] => (item=co7-node02)
2022-03-31 22:08:11,672 p=9407 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node02)
2022-03-31 22:08:11,673 p=9407 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node02)
2022-03-31 22:08:12,361 p=9407 u=moonja n=ansible | changed: [co7-node01] => (item=co7-node03)
2022-03-31 22:08:12,366 p=9407 u=moonja n=ansible | changed: [co7-node02] => (item=co7-node03)
2022-03-31 22:08:12,368 p=9407 u=moonja n=ansible | changed: [co7-node03] => (item=co7-node03)
2022-03-31 22:08:12,369 p=9407 u=moonja n=ansible | changed: [co7-master] => (item=co7-node03)
2022-03-31 22:08:12,381 p=9407 u=moonja n=ansible | TASK [pgfailover-postgres : Bounce firewalld] ************************************************************
2022-03-31 22:08:16,074 p=9407 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:08:16,087 p=9407 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:08:16,427 p=9407 u=moonja n=ansible | changed: [co7-master]
2022-03-31 22:08:16,612 p=9407 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:08:16,623 p=9407 u=moonja n=ansible | TASK [pgfailover-postgres : Stop and disable firewalld.] *************************************************
2022-03-31 22:08:18,301 p=9407 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:08:18,306 p=9407 u=moonja n=ansible | changed: [co7-master]
2022-03-31 22:08:18,331 p=9407 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:08:18,606 p=9407 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:08:18,618 p=9407 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ****************
2022-03-31 22:08:18,653 p=9407 u=moonja n=ansible | skipping: [co7-node01]
2022-03-31 22:08:18,667 p=9407 u=moonja n=ansible | skipping: [co7-node02]
2022-03-31 22:08:18,680 p=9407 u=moonja n=ansible | skipping: [co7-node03]
2022-03-31 22:08:19,436 p=9407 u=moonja n=ansible | changed: [co7-master]
2022-03-31 22:08:19,445 p=9407 u=moonja n=ansible | TASK [pgfailover-postgres : Verify that pg_auto_failover/postgres was installed properly] ****************
2022-03-31 22:08:19,494 p=9407 u=moonja n=ansible | skipping: [co7-node01]
2022-03-31 22:08:19,494 p=9407 u=moonja n=ansible | skipping: [co7-node02]
2022-03-31 22:08:19,506 p=9407 u=moonja n=ansible | skipping: [co7-node03]
2022-03-31 22:08:20,738 p=9407 u=moonja n=ansible | changed: [co7-master]
2022-03-31 22:08:20,748 p=9407 u=moonja n=ansible | TASK [pgfailover-postgres : Getting process IDs of the pg_autoctl process] *******************************
2022-03-31 22:08:22,008 p=9407 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 22:08:22,012 p=9407 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 22:08:22,017 p=9407 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:08:22,084 p=9407 u=moonja n=ansible | ok: [co7-master]
2022-03-31 22:08:22,095 p=9407 u=moonja n=ansible | TASK [pgfailover-postgres : Stop pgautofailover service of systemd] **************************************
2022-03-31 22:08:25,293 p=9407 u=moonja n=ansible | changed: [co7-master]
2022-03-31 22:08:25,524 p=9407 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:08:25,550 p=9407 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:08:25,578 p=9407 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:08:25,589 p=9407 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] **********************************************
2022-03-31 22:08:25,611 p=9407 u=moonja n=ansible | skipping: [co7-master]
2022-03-31 22:08:25,628 p=9407 u=moonja n=ansible | skipping: [co7-node01]
2022-03-31 22:08:26,445 p=9407 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:08:26,459 p=9407 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:08:26,470 p=9407 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start secondary systemd service of secondary instance] ************
2022-03-31 22:08:26,490 p=9407 u=moonja n=ansible | skipping: [co7-master]
2022-03-31 22:08:26,508 p=9407 u=moonja n=ansible | skipping: [co7-node01]
2022-03-31 22:08:27,295 p=9407 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:08:27,296 p=9407 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:08:27,306 p=9407 u=moonja n=ansible | TASK [pgfailover-postgres : Delete secondary systemd service file of secondary instance] *****************
2022-03-31 22:08:27,330 p=9407 u=moonja n=ansible | skipping: [co7-master] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-31 22:08:27,331 p=9407 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-31 22:08:27,334 p=9407 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-31 22:08:27,337 p=9407 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.config) 
2022-03-31 22:08:27,340 p=9407 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.ansible) 
2022-03-31 22:08:27,343 p=9407 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql) 
2022-03-31 22:08:27,349 p=9407 u=moonja n=ansible | skipping: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-31 22:08:27,349 p=9407 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-31 22:08:27,352 p=9407 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-31 22:08:27,354 p=9407 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.config) 
2022-03-31 22:08:27,357 p=9407 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.ansible) 
2022-03-31 22:08:27,357 p=9407 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql) 
2022-03-31 22:08:28,094 p=9407 u=moonja n=ansible | changed: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-31 22:08:28,106 p=9407 u=moonja n=ansible | changed: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-31 22:08:28,533 p=9407 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-31 22:08:28,534 p=9407 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-31 22:08:28,991 p=9407 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.bash_profile)
2022-03-31 22:08:29,009 p=9407 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.bash_profile)
2022-03-31 22:08:29,385 p=9407 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.config)
2022-03-31 22:08:29,407 p=9407 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.config)
2022-03-31 22:08:29,782 p=9407 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/.ansible)
2022-03-31 22:08:29,810 p=9407 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/.ansible)
2022-03-31 22:08:30,364 p=9407 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql)
2022-03-31 22:08:31,309 p=9407 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql)
2022-03-31 22:08:31,323 p=9407 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] **********************************************
2022-03-31 22:08:31,345 p=9407 u=moonja n=ansible | skipping: [co7-master]
2022-03-31 22:08:31,377 p=9407 u=moonja n=ansible | skipping: [co7-node02]
2022-03-31 22:08:31,390 p=9407 u=moonja n=ansible | skipping: [co7-node03]
2022-03-31 22:08:31,864 p=9407 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:08:31,873 p=9407 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start primary systemd service of primary instance] ****************
2022-03-31 22:08:31,894 p=9407 u=moonja n=ansible | skipping: [co7-master]
2022-03-31 22:08:31,926 p=9407 u=moonja n=ansible | skipping: [co7-node02]
2022-03-31 22:08:31,938 p=9407 u=moonja n=ansible | skipping: [co7-node03]
2022-03-31 22:08:32,663 p=9407 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:08:32,675 p=9407 u=moonja n=ansible | TASK [pgfailover-postgres : Delete primary systemd service file of secondary instance] *******************
2022-03-31 22:08:32,699 p=9407 u=moonja n=ansible | skipping: [co7-master] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-31 22:08:32,700 p=9407 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-31 22:08:32,704 p=9407 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-31 22:08:32,705 p=9407 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.config) 
2022-03-31 22:08:32,709 p=9407 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql/.ansible) 
2022-03-31 22:08:32,710 p=9407 u=moonja n=ansible | skipping: [co7-master] => (item=/var/lib/pgsql) 
2022-03-31 22:08:32,736 p=9407 u=moonja n=ansible | skipping: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-31 22:08:32,739 p=9407 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-31 22:08:32,739 p=9407 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-31 22:08:32,740 p=9407 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.config) 
2022-03-31 22:08:32,744 p=9407 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.ansible) 
2022-03-31 22:08:32,744 p=9407 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql) 
2022-03-31 22:08:32,749 p=9407 u=moonja n=ansible | skipping: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-31 22:08:32,755 p=9407 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-31 22:08:32,756 p=9407 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-31 22:08:32,756 p=9407 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.config) 
2022-03-31 22:08:32,759 p=9407 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.ansible) 
2022-03-31 22:08:32,760 p=9407 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql) 
2022-03-31 22:08:33,185 p=9407 u=moonja n=ansible | changed: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-31 22:08:33,657 p=9407 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-31 22:08:34,141 p=9407 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.bash_profile)
2022-03-31 22:08:34,593 p=9407 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.config)
2022-03-31 22:08:35,035 p=9407 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/.ansible)
2022-03-31 22:08:36,170 p=9407 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql)
2022-03-31 22:08:36,196 p=9407 u=moonja n=ansible | TASK [pgfailover-postgres : Delete line in a .bash_profile] **********************************************
2022-03-31 22:08:36,241 p=9407 u=moonja n=ansible | skipping: [co7-node01]
2022-03-31 22:08:36,263 p=9407 u=moonja n=ansible | skipping: [co7-node02]
2022-03-31 22:08:36,276 p=9407 u=moonja n=ansible | skipping: [co7-node03]
2022-03-31 22:08:36,685 p=9407 u=moonja n=ansible | changed: [co7-master]
2022-03-31 22:08:36,696 p=9407 u=moonja n=ansible | TASK [pgfailover-postgres : Reload and start systemd service of monitor instance] ************************
2022-03-31 22:08:36,747 p=9407 u=moonja n=ansible | skipping: [co7-node01]
2022-03-31 22:08:36,748 p=9407 u=moonja n=ansible | skipping: [co7-node02]
2022-03-31 22:08:36,760 p=9407 u=moonja n=ansible | skipping: [co7-node03]
2022-03-31 22:08:37,385 p=9407 u=moonja n=ansible | changed: [co7-master]
2022-03-31 22:08:37,395 p=9407 u=moonja n=ansible | TASK [pgfailover-postgres : Delete primary systemd service file of secondary instance] *******************
2022-03-31 22:08:37,437 p=9407 u=moonja n=ansible | skipping: [co7-node01] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-31 22:08:37,439 p=9407 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-31 22:08:37,443 p=9407 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-31 22:08:37,449 p=9407 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.config) 
2022-03-31 22:08:37,453 p=9407 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql/.ansible) 
2022-03-31 22:08:37,453 p=9407 u=moonja n=ansible | skipping: [co7-node01] => (item=/var/lib/pgsql) 
2022-03-31 22:08:37,454 p=9407 u=moonja n=ansible | skipping: [co7-node02] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-31 22:08:37,454 p=9407 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-31 22:08:37,459 p=9407 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-31 22:08:37,462 p=9407 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.config) 
2022-03-31 22:08:37,463 p=9407 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql/.ansible) 
2022-03-31 22:08:37,464 p=9407 u=moonja n=ansible | skipping: [co7-node02] => (item=/var/lib/pgsql) 
2022-03-31 22:08:37,471 p=9407 u=moonja n=ansible | skipping: [co7-node03] => (item=/etc/systemd/system/pgautofailover.service) 
2022-03-31 22:08:37,474 p=9407 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/pgautofailover.service) 
2022-03-31 22:08:37,480 p=9407 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.bash_profile) 
2022-03-31 22:08:37,480 p=9407 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.config) 
2022-03-31 22:08:37,483 p=9407 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql/.ansible) 
2022-03-31 22:08:37,483 p=9407 u=moonja n=ansible | skipping: [co7-node03] => (item=/var/lib/pgsql) 
2022-03-31 22:08:37,828 p=9407 u=moonja n=ansible | changed: [co7-master] => (item=/etc/systemd/system/pgautofailover.service)
2022-03-31 22:08:38,265 p=9407 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/pgautofailover.service)
2022-03-31 22:08:38,848 p=9407 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/.bash_profile)
2022-03-31 22:08:39,380 p=9407 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/.config)
2022-03-31 22:08:39,873 p=9407 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql/.ansible)
2022-03-31 22:08:41,255 p=9407 u=moonja n=ansible | changed: [co7-master] => (item=/var/lib/pgsql)
2022-03-31 22:08:41,269 p=9407 u=moonja n=ansible | TASK [pgfailover-postgres : Uninstall VMware Postgres on all hosts as root] ******************************
2022-03-31 22:10:58,752 p=9407 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:11:02,796 p=9407 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:11:08,079 p=9407 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:11:12,241 p=9407 u=moonja n=ansible | changed: [co7-master]
2022-03-31 22:11:12,253 p=9407 u=moonja n=ansible | TASK [pgfailover-postgres : Copy the vmwawre-postgres rpm file to all hosts in cluster] ******************
2022-03-31 22:11:12,730 p=9407 u=moonja n=ansible | changed: [co7-master]
2022-03-31 22:11:12,735 p=9407 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:11:12,740 p=9407 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:11:12,770 p=9407 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:11:12,815 p=9407 u=moonja n=ansible | PLAY RECAP ***********************************************************************************************
2022-03-31 22:11:12,816 p=9407 u=moonja n=ansible | co7-master                 : ok=14   changed=12   unreachable=0    failed=0    skipped=6    rescued=0    ignored=0   
2022-03-31 22:11:12,816 p=9407 u=moonja n=ansible | co7-node01                 : ok=12   changed=10   unreachable=0    failed=0    skipped=8    rescued=0    ignored=0   
2022-03-31 22:11:12,816 p=9407 u=moonja n=ansible | co7-node02                 : ok=12   changed=10   unreachable=0    failed=0    skipped=8    rescued=0    ignored=0   
2022-03-31 22:11:12,816 p=9407 u=moonja n=ansible | co7-node03                 : ok=12   changed=10   unreachable=0    failed=0    skipped=8    rescued=0    ignored=0   
2022-03-31 22:12:28,730 p=12927 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This 
feature will be removed from ansible-core in version 2.14. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2022-03-31 22:12:28,740 p=12927 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-03-31 22:12:28,996 p=12927 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will
 be removed in version 2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False 
in ansible.cfg.
2022-03-31 22:12:29,058 p=12927 u=moonja n=ansible | PLAY [all] ***********************************************************************************************
2022-03-31 22:12:29,090 p=12927 u=moonja n=ansible | TASK [Gathering Facts] ***********************************************************************************
2022-03-31 22:12:31,276 p=12927 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 22:12:31,297 p=12927 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:12:31,343 p=12927 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 22:12:31,361 p=12927 u=moonja n=ansible | TASK [patroni-postgres : Stop services for patroni and etcd] *********************************************
2022-03-31 22:12:32,289 p=12927 u=moonja n=ansible | failed: [co7-node01] (item=patroni) => {"ansible_loop_var": "item", "changed": false, "item": "patroni", "msg": "Could not find the requested service patroni: host"}
2022-03-31 22:12:32,305 p=12927 u=moonja n=ansible | failed: [co7-node02] (item=patroni) => {"ansible_loop_var": "item", "changed": false, "item": "patroni", "msg": "Could not find the requested service patroni: host"}
2022-03-31 22:12:32,311 p=12927 u=moonja n=ansible | failed: [co7-node03] (item=patroni) => {"ansible_loop_var": "item", "changed": false, "item": "patroni", "msg": "Could not find the requested service patroni: host"}
2022-03-31 22:12:32,804 p=12927 u=moonja n=ansible | failed: [co7-node01] (item=etcd) => {"ansible_loop_var": "item", "changed": false, "item": "etcd", "msg": "Could not find the requested service patroni: host"}
2022-03-31 22:12:32,804 p=12927 u=moonja n=ansible | ...ignoring
2022-03-31 22:12:32,807 p=12927 u=moonja n=ansible | failed: [co7-node03] (item=etcd) => {"ansible_loop_var": "item", "changed": false, "item": "etcd", "msg": "Could not find the requested service patroni: host"}
2022-03-31 22:12:32,808 p=12927 u=moonja n=ansible | ...ignoring
2022-03-31 22:12:32,820 p=12927 u=moonja n=ansible | failed: [co7-node02] (item=etcd) => {"ansible_loop_var": "item", "changed": false, "item": "etcd", "msg": "Could not find the requested service patroni: host"}
2022-03-31 22:12:32,821 p=12927 u=moonja n=ansible | ...ignoring
2022-03-31 22:12:32,833 p=12927 u=moonja n=ansible | TASK [patroni-postgres : Kill etcd process] **************************************************************
2022-03-31 22:12:33,635 p=12927 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 22:12:33,636 p=12927 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 22:12:33,636 p=12927 u=moonja n=ansible | ...ignoring
2022-03-31 22:12:33,636 p=12927 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 22:12:33,636 p=12927 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 22:12:33,637 p=12927 u=moonja n=ansible | ...ignoring
2022-03-31 22:12:33,637 p=12927 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 22:12:33,637 p=12927 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 22:12:33,637 p=12927 u=moonja n=ansible | ...ignoring
2022-03-31 22:12:33,648 p=12927 u=moonja n=ansible | TASK [patroni-postgres : Delete configuration file for patroni and systemd] ******************************
2022-03-31 22:12:34,300 p=12927 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/patroni.yml)
2022-03-31 22:12:34,315 p=12927 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/patroni.yml)
2022-03-31 22:12:34,316 p=12927 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/patroni.yml)
2022-03-31 22:12:34,712 p=12927 u=moonja n=ansible | ok: [co7-node03] => (item=/etc/systemd/system/patroni.service)
2022-03-31 22:12:34,777 p=12927 u=moonja n=ansible | ok: [co7-node02] => (item=/etc/systemd/system/patroni.service)
2022-03-31 22:12:34,778 p=12927 u=moonja n=ansible | ok: [co7-node01] => (item=/etc/systemd/system/patroni.service)
2022-03-31 22:12:35,152 p=12927 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/postgresql0.yml)
2022-03-31 22:12:35,188 p=12927 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/postgresql0.yml)
2022-03-31 22:12:35,204 p=12927 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/postgresql0.yml)
2022-03-31 22:12:35,555 p=12927 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/patroni_member.log)
2022-03-31 22:12:35,596 p=12927 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/patroni_member.log)
2022-03-31 22:12:35,611 p=12927 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/patroni_member.log)
2022-03-31 22:12:35,990 p=12927 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/etcd.yml)
2022-03-31 22:12:35,994 p=12927 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/etcd.yml)
2022-03-31 22:12:36,047 p=12927 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/etcd.yml)
2022-03-31 22:12:36,442 p=12927 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/etcd_logfile)
2022-03-31 22:12:36,456 p=12927 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/etcd_logfile)
2022-03-31 22:12:36,482 p=12927 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/etcd_logfile)
2022-03-31 22:12:36,499 p=12927 u=moonja n=ansible | TASK [patroni-postgres : Delete data directory for patroni cluster] **************************************
2022-03-31 22:12:36,939 p=12927 u=moonja n=ansible | ok: [co7-node01] => (item=backups)
2022-03-31 22:12:36,954 p=12927 u=moonja n=ansible | ok: [co7-node02] => (item=backups)
2022-03-31 22:12:36,982 p=12927 u=moonja n=ansible | ok: [co7-node03] => (item=backups)
2022-03-31 22:12:37,369 p=12927 u=moonja n=ansible | ok: [co7-node01] => (item=data)
2022-03-31 22:12:37,372 p=12927 u=moonja n=ansible | ok: [co7-node02] => (item=data)
2022-03-31 22:12:37,438 p=12927 u=moonja n=ansible | ok: [co7-node03] => (item=data)
2022-03-31 22:12:37,788 p=12927 u=moonja n=ansible | ok: [co7-node02] => (item=patroni_data)
2022-03-31 22:12:37,791 p=12927 u=moonja n=ansible | ok: [co7-node01] => (item=patroni_data)
2022-03-31 22:12:37,859 p=12927 u=moonja n=ansible | ok: [co7-node03] => (item=patroni_data)
2022-03-31 22:12:37,873 p=12927 u=moonja n=ansible | TASK [patroni-postgres : Change the permissions on the /tmp directory] ***********************************
2022-03-31 22:12:38,413 p=12927 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:12:38,414 p=12927 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:12:38,415 p=12927 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:12:38,424 p=12927 u=moonja n=ansible | TASK [patroni-postgres : Uninstall pip modules of Patroni prerequisites on all three nodes] **************
2022-03-31 22:12:55,821 p=12927 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"ansible_job_id": "904265824285.9695", "changed": true, "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 uninstall -r /var/lib/pgsql/requirements.txt -y )", "delta": "0:00:14.518098", "end": "2022-03-31 22:12:53.676345", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/root/.ansible_async/904265824285.9695", "start": "2022-03-31 22:12:39.158247", "started": 1, "stderr": "ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'", "stderr_lines": ["ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'"], "stdout": "", "stdout_lines": []}
2022-03-31 22:12:55,822 p=12927 u=moonja n=ansible | ...ignoring
2022-03-31 22:12:55,973 p=12927 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"ansible_job_id": "122562198146.9611", "changed": true, "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 uninstall -r /var/lib/pgsql/requirements.txt -y )", "delta": "0:00:14.771669", "end": "2022-03-31 22:12:53.927760", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/root/.ansible_async/122562198146.9611", "start": "2022-03-31 22:12:39.156091", "started": 1, "stderr": "ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'", "stderr_lines": ["ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'"], "stdout": "", "stdout_lines": []}
2022-03-31 22:12:55,973 p=12927 u=moonja n=ansible | ...ignoring
2022-03-31 22:12:56,302 p=12927 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"ansible_job_id": "56882797584.9474", "changed": true, "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 uninstall -r /var/lib/pgsql/requirements.txt -y )", "delta": "0:00:14.045002", "end": "2022-03-31 22:12:54.294457", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/root/.ansible_async/56882797584.9474", "start": "2022-03-31 22:12:40.249455", "started": 1, "stderr": "ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'", "stderr_lines": ["ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'"], "stdout": "", "stdout_lines": []}
2022-03-31 22:12:56,302 p=12927 u=moonja n=ansible | ...ignoring
2022-03-31 22:12:56,312 p=12927 u=moonja n=ansible | TASK [patroni-postgres : UnInstall wheel pip module on all three nodes] **********************************
2022-03-31 22:12:56,758 p=12927 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 22:12:56,759 p=12927 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 22:12:56,759 p=12927 u=moonja n=ansible | ...ignoring
2022-03-31 22:12:56,764 p=12927 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 22:12:56,764 p=12927 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 22:12:56,764 p=12927 u=moonja n=ansible | ...ignoring
2022-03-31 22:12:56,765 p=12927 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 22:12:56,765 p=12927 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 22:12:56,765 p=12927 u=moonja n=ansible | ...ignoring
2022-03-31 22:12:56,778 p=12927 u=moonja n=ansible | TASK [patroni-postgres : Uninstall typing pip module on all three nodes] *********************************
2022-03-31 22:12:57,308 p=12927 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 22:12:57,308 p=12927 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 22:12:57,309 p=12927 u=moonja n=ansible | ...ignoring
2022-03-31 22:12:57,324 p=12927 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 22:12:57,325 p=12927 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 22:12:57,325 p=12927 u=moonja n=ansible | ...ignoring
2022-03-31 22:12:57,325 p=12927 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 22:12:57,325 p=12927 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 22:12:57,325 p=12927 u=moonja n=ansible | ...ignoring
2022-03-31 22:12:57,339 p=12927 u=moonja n=ansible | TASK [patroni-postgres : Uninstall setuptools rust on all three nodes] ***********************************
2022-03-31 22:13:03,564 p=12927 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:13:03,604 p=12927 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:13:04,998 p=12927 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:13:05,010 p=12927 u=moonja n=ansible | TASK [patroni-postgres : Uninstall patroni module on all three nodes] ************************************
2022-03-31 22:13:11,433 p=12927 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:13:11,434 p=12927 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:13:11,538 p=12927 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:13:11,547 p=12927 u=moonja n=ansible | TASK [patroni-postgres : Uninstall wheel module on all three nodes] **************************************
2022-03-31 22:13:17,959 p=12927 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:13:18,032 p=12927 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:13:18,032 p=12927 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:13:18,043 p=12927 u=moonja n=ansible | TASK [patroni-postgres : Uninstall psycopg2-binary module on all three nodes] ****************************
2022-03-31 22:13:24,289 p=12927 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:13:24,339 p=12927 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:13:25,866 p=12927 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:13:25,875 p=12927 u=moonja n=ansible | TASK [patroni-postgres : Delete the dependencies file of etcd  on all three nodes] ***********************
2022-03-31 22:13:26,345 p=12927 u=moonja n=ansible | [WARNING]: Unable to use /var/lib/pgsql/.ansible/tmp as temporary directory, failing back to system:
[Errno 13] Permission denied: '/var/lib/pgsql'

2022-03-31 22:13:26,346 p=12927 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 22:13:26,350 p=12927 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:13:26,354 p=12927 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 22:13:26,367 p=12927 u=moonja n=ansible | TASK [patroni-postgres : Uninstall VMware Postgres RPM package on all hosts as root] *********************
2022-03-31 22:13:33,710 p=12927 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 22:13:33,769 p=12927 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 22:13:35,779 p=12927 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:13:35,788 p=12927 u=moonja n=ansible | TASK [patroni-postgres : Delete the vmwawre-postgres rpm file to all hosts in cluster] *******************
2022-03-31 22:13:36,255 p=12927 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:13:36,278 p=12927 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 22:13:36,286 p=12927 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 22:13:36,299 p=12927 u=moonja n=ansible | TASK [patroni-postgres : List iptables rules] ************************************************************
2022-03-31 22:13:36,784 p=12927 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:13:36,846 p=12927 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:13:36,846 p=12927 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:13:36,858 p=12927 u=moonja n=ansible | TASK [patroni-postgres : Flush iptables rules] ***********************************************************
2022-03-31 22:13:37,334 p=12927 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:13:37,339 p=12927 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:13:38,132 p=12927 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:13:38,147 p=12927 u=moonja n=ansible | TASK [patroni-postgres : Stop and disable firewalld] *****************************************************
2022-03-31 22:13:39,123 p=12927 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:13:39,139 p=12927 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 22:13:39,140 p=12927 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 22:13:39,180 p=12927 u=moonja n=ansible | PLAY RECAP ***********************************************************************************************
2022-03-31 22:13:39,180 p=12927 u=moonja n=ansible | co7-node01                 : ok=19   changed=11   unreachable=0    failed=0    skipped=0    rescued=0    ignored=5   
2022-03-31 22:13:39,180 p=12927 u=moonja n=ansible | co7-node02                 : ok=19   changed=11   unreachable=0    failed=0    skipped=0    rescued=0    ignored=5   
2022-03-31 22:13:39,180 p=12927 u=moonja n=ansible | co7-node03                 : ok=19   changed=11   unreachable=0    failed=0    skipped=0    rescued=0    ignored=5   
2022-03-31 22:14:31,024 p=14887 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This 
feature will be removed from ansible-core in version 2.14. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2022-03-31 22:14:31,036 p=14887 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-03-31 22:14:31,276 p=14887 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will
 be removed in version 2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False 
in ansible.cfg.
2022-03-31 22:14:31,337 p=14887 u=moonja n=ansible | PLAY [all] ***********************************************************************************************
2022-03-31 22:14:31,369 p=14887 u=moonja n=ansible | TASK [Gathering Facts] ***********************************************************************************
2022-03-31 22:14:33,415 p=14887 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 22:14:33,417 p=14887 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:14:33,419 p=14887 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 22:14:33,437 p=14887 u=moonja n=ansible | TASK [patroni-postgres : Stop and disable firewalld] *****************************************************
2022-03-31 22:14:34,374 p=14887 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 22:14:34,377 p=14887 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:14:34,378 p=14887 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 22:14:34,389 p=14887 u=moonja n=ansible | TASK [patroni-postgres : Flush iptables rules] ***********************************************************
2022-03-31 22:14:35,106 p=14887 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:14:35,136 p=14887 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:14:35,138 p=14887 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:14:35,149 p=14887 u=moonja n=ansible | TASK [patroni-postgres : List iptables rules] ************************************************************
2022-03-31 22:14:35,658 p=14887 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:14:35,660 p=14887 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:14:36,343 p=14887 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:14:36,356 p=14887 u=moonja n=ansible | TASK [patroni-postgres : debug] **************************************************************************
2022-03-31 22:14:36,394 p=14887 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": "Chain INPUT (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain FORWARD (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain OUTPUT (policy ACCEPT)\ntarget     prot opt source               destination         "
}
2022-03-31 22:14:36,395 p=14887 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": "Chain INPUT (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain FORWARD (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain OUTPUT (policy ACCEPT)\ntarget     prot opt source               destination         "
}
2022-03-31 22:14:36,406 p=14887 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": "Chain INPUT (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain FORWARD (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain OUTPUT (policy ACCEPT)\ntarget     prot opt source               destination         "
}
2022-03-31 22:14:36,418 p=14887 u=moonja n=ansible | TASK [patroni-postgres : Install the 'Development tools' package group for VMware Postgres Dependencies] ***
2022-03-31 22:14:54,573 p=14887 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:15:04,915 p=14887 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"ansible_job_id": "892500766585.13600", "changed": false, "changes": {"installed": ["@Development tools"]}, "finished": 1, "msg": "There are unfinished transactions remaining. You might consider running yum-complete-transaction, or \"yum-complete-transaction --cleanup-only\" and \"yum history redo last\", first to finish them. If those don't work you'll have to try removing/installing packages by hand (maybe package-cleanup can help).\nError: Package: glibc-headers-2.17-325.el7_9.x86_64 (updates)\n           Requires: kernel-headers\nError: Package: systemtap-devel-4.0-13.el7.x86_64 (base)\n           Requires: kernel-devel-uname-r\nError: Package: glibc-headers-2.17-325.el7_9.x86_64 (updates)\n           Requires: kernel-headers >= 2.2.1\n", "rc": 1, "results": ["Loaded plugins: fastestmirror, product-id, search-disabled-repos, subscription-\n              : manager, versionlock\n\nThis system is not registered with an entitlement server. You can use subscription-manager to register.\n\nLoading mirror speeds from cached hostfile\n * base: ftp.kaist.ac.kr\n * centos-sclo-rh: ftp.kaist.ac.kr\n * epel: ftp.jaist.ac.jp\n * extras: ftp.kaist.ac.kr\n * updates: ftp.tsukuba.wide.ad.jp\nResolving Dependencies\n--> Running transaction check\n---> Package byacc.x86_64 0:1.9.20130304-3.el7 will be installed\n---> Package cscope.x86_64 0:15.8-10.el7 will be installed\n---> Package ctags.x86_64 0:5.8-13.el7 will be installed\n---> Package diffstat.x86_64 0:1.57-4.el7 will be installed\n---> Package doxygen.x86_64 1:1.8.5-4.el7 will be installed\n---> Package elfutils.x86_64 0:0.176-5.el7 will be installed\n---> Package gcc.x86_64 0:4.8.5-44.el7 will be installed\n--> Processing Dependency: glibc-devel >= 2.2.90-12 for package: gcc-4.8.5-44.el7.x86_64\n---> Package gcc-c++.x86_64 0:4.8.5-44.el7 will be installed\n---> Package gcc-gfortran.x86_64 0:4.8.5-44.el7 will be installed\n--> Processing Dependency: libquadmath-devel = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libquadmath = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libgfortran = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libgfortran.so.3()(64bit) for package: gcc-gfortran-4.8.5-44.el7.x86_64\n---> Package indent.x86_64 0:2.2.11-13.el7 will be installed\n---> Package intltool.noarch 0:0.50.2-7.el7 will be installed\n--> Processing Dependency: perl(XML::Parser) for package: intltool-0.50.2-7.el7.noarch\n---> Package libtool.x86_64 0:2.4.2-22.el7_3 will be installed\n---> Package patchutils.x86_64 0:0.3.3-5.el7_9 will be installed\n---> Package rcs.x86_64 0:5.9.0-7.el7 will be installed\n---> Package rpm-build.x86_64 0:4.11.3-48.el7_9 will be installed\n--> Processing Dependency: /usr/bin/gdb-add-index for package: rpm-build-4.11.3-48.el7_9.x86_64\n---> Package rpm-sign.x86_64 0:4.11.3-48.el7_9 will be installed\n---> Package swig.x86_64 0:2.0.10-5.el7 will be installed\n---> Package systemtap.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: systemtap-devel = 4.0-13.el7 for package: systemtap-4.0-13.el7.x86_64\n--> Processing Dependency: systemtap-client = 4.0-13.el7 for package: systemtap-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package gdb.x86_64 0:7.6.1-120.el7 will be installed\n---> Package glibc-devel.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: glibc-headers = 2.17-325.el7_9 for package: glibc-devel-2.17-325.el7_9.x86_64\n--> Processing Dependency: glibc-headers for package: glibc-devel-2.17-325.el7_9.x86_64\n---> Package libgfortran.x86_64 0:4.8.5-44.el7 will be installed\n---> Package libquadmath.x86_64 0:4.8.5-44.el7 will be installed\n---> Package libquadmath-devel.x86_64 0:4.8.5-44.el7 will be installed\n---> Package perl-XML-Parser.x86_64 0:2.41-10.el7 will be installed\n---> Package systemtap-client.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: systemtap-runtime = 4.0-13.el7 for package: systemtap-client-4.0-13.el7.x86_64\n--> Processing Dependency: mokutil for package: systemtap-client-4.0-13.el7.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package mokutil.x86_64 0:15-8.el7 will be installed\n--> Processing Dependency: libefivar.so.1(libefivar.so.0)(64bit) for package: mokutil-15-8.el7.x86_64\n--> Processing Dependency: libefivar.so.1(LIBEFIVAR_0.24)(64bit) for package: mokutil-15-8.el7.x86_64\n--> Processing Dependency: libefivar.so.1()(64bit) for package: mokutil-15-8.el7.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n---> Package systemtap-runtime.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: libsymtabAPI.so.9.3()(64bit) for package: systemtap-runtime-4.0-13.el7.x86_64\n--> Processing Dependency: libdyninstAPI.so.9.3()(64bit) for package: systemtap-runtime-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package dyninst.x86_64 0:9.3.1-3.el7 will be installed\n--> Processing Dependency: libdwarf.so.0()(64bit) for package: dyninst-9.3.1-3.el7.x86_64\n--> Processing Dependency: libboost_date_time-mt.so.1.53.0()(64bit) for package: dyninst-9.3.1-3.el7.x86_64\n---> Package efivar-libs.x86_64 0:36-12.el7 will be installed\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package boost-date-time.x86_64 0:1.53.0-28.el7 will be installed\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package libdwarf.x86_64 0:20130207-4.el7 will be installed\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Finished Dependency Resolution\n You could try using --skip-broken to work around the problem\n You could try running: rpm -Va --nofiles --nodigest\n"], "results_file": "/root/.ansible_async/892500766585.13600", "started": 1, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2022-03-31 22:15:04,916 p=14887 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"ansible_job_id": "97749999044.13685", "changed": false, "changes": {"installed": ["@Development tools"]}, "finished": 1, "msg": "There are unfinished transactions remaining. You might consider running yum-complete-transaction, or \"yum-complete-transaction --cleanup-only\" and \"yum history redo last\", first to finish them. If those don't work you'll have to try removing/installing packages by hand (maybe package-cleanup can help).\nError: Package: glibc-headers-2.17-325.el7_9.x86_64 (updates)\n           Requires: kernel-headers\nError: Package: systemtap-devel-4.0-13.el7.x86_64 (base)\n           Requires: kernel-devel-uname-r\nError: Package: glibc-headers-2.17-325.el7_9.x86_64 (updates)\n           Requires: kernel-headers >= 2.2.1\n", "rc": 1, "results": ["Loaded plugins: fastestmirror, product-id, search-disabled-repos, subscription-\n              : manager, versionlock\n\nThis system is not registered with an entitlement server. You can use subscription-manager to register.\n\nLoading mirror speeds from cached hostfile\n * base: mirror.anigil.com\n * centos-sclo-rh: mirror.kakao.com\n * epel: ftp.iij.ad.jp\n * extras: mirror.anigil.com\n * updates: mirror.kakao.com\nResolving Dependencies\n--> Running transaction check\n---> Package byacc.x86_64 0:1.9.20130304-3.el7 will be installed\n---> Package cscope.x86_64 0:15.8-10.el7 will be installed\n---> Package ctags.x86_64 0:5.8-13.el7 will be installed\n---> Package diffstat.x86_64 0:1.57-4.el7 will be installed\n---> Package doxygen.x86_64 1:1.8.5-4.el7 will be installed\n---> Package elfutils.x86_64 0:0.176-5.el7 will be installed\n---> Package gcc.x86_64 0:4.8.5-44.el7 will be installed\n--> Processing Dependency: glibc-devel >= 2.2.90-12 for package: gcc-4.8.5-44.el7.x86_64\n---> Package gcc-c++.x86_64 0:4.8.5-44.el7 will be installed\n---> Package gcc-gfortran.x86_64 0:4.8.5-44.el7 will be installed\n--> Processing Dependency: libquadmath-devel = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libquadmath = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libgfortran = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libgfortran.so.3()(64bit) for package: gcc-gfortran-4.8.5-44.el7.x86_64\n---> Package indent.x86_64 0:2.2.11-13.el7 will be installed\n---> Package intltool.noarch 0:0.50.2-7.el7 will be installed\n--> Processing Dependency: perl(XML::Parser) for package: intltool-0.50.2-7.el7.noarch\n---> Package libtool.x86_64 0:2.4.2-22.el7_3 will be installed\n---> Package patchutils.x86_64 0:0.3.3-5.el7_9 will be installed\n---> Package rcs.x86_64 0:5.9.0-7.el7 will be installed\n---> Package rpm-build.x86_64 0:4.11.3-48.el7_9 will be installed\n--> Processing Dependency: /usr/bin/gdb-add-index for package: rpm-build-4.11.3-48.el7_9.x86_64\n---> Package rpm-sign.x86_64 0:4.11.3-48.el7_9 will be installed\n---> Package swig.x86_64 0:2.0.10-5.el7 will be installed\n---> Package systemtap.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: systemtap-devel = 4.0-13.el7 for package: systemtap-4.0-13.el7.x86_64\n--> Processing Dependency: systemtap-client = 4.0-13.el7 for package: systemtap-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package gdb.x86_64 0:7.6.1-120.el7 will be installed\n---> Package glibc-devel.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: glibc-headers = 2.17-325.el7_9 for package: glibc-devel-2.17-325.el7_9.x86_64\n--> Processing Dependency: glibc-headers for package: glibc-devel-2.17-325.el7_9.x86_64\n---> Package libgfortran.x86_64 0:4.8.5-44.el7 will be installed\n---> Package libquadmath.x86_64 0:4.8.5-44.el7 will be installed\n---> Package libquadmath-devel.x86_64 0:4.8.5-44.el7 will be installed\n---> Package perl-XML-Parser.x86_64 0:2.41-10.el7 will be installed\n---> Package systemtap-client.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: systemtap-runtime = 4.0-13.el7 for package: systemtap-client-4.0-13.el7.x86_64\n--> Processing Dependency: mokutil for package: systemtap-client-4.0-13.el7.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package mokutil.x86_64 0:15-8.el7 will be installed\n--> Processing Dependency: libefivar.so.1(libefivar.so.0)(64bit) for package: mokutil-15-8.el7.x86_64\n--> Processing Dependency: libefivar.so.1(LIBEFIVAR_0.24)(64bit) for package: mokutil-15-8.el7.x86_64\n--> Processing Dependency: libefivar.so.1()(64bit) for package: mokutil-15-8.el7.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n---> Package systemtap-runtime.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: libsymtabAPI.so.9.3()(64bit) for package: systemtap-runtime-4.0-13.el7.x86_64\n--> Processing Dependency: libdyninstAPI.so.9.3()(64bit) for package: systemtap-runtime-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package dyninst.x86_64 0:9.3.1-3.el7 will be installed\n--> Processing Dependency: libdwarf.so.0()(64bit) for package: dyninst-9.3.1-3.el7.x86_64\n---> Package efivar-libs.x86_64 0:36-12.el7 will be installed\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package libdwarf.x86_64 0:20130207-4.el7 will be installed\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Finished Dependency Resolution\n You could try using --skip-broken to work around the problem\n You could try running: rpm -Va --nofiles --nodigest\n"], "results_file": "/root/.ansible_async/97749999044.13685", "started": 1, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2022-03-31 22:15:04,925 p=14887 u=moonja n=ansible | TASK [patroni-postgres : Install the perl package for VMware Postgres Dependencies] **********************
2022-03-31 22:15:13,327 p=14887 u=moonja n=ansible | ok: [co7-node01] => (item=perl)
2022-03-31 22:15:19,737 p=14887 u=moonja n=ansible | ok: [co7-node01] => (item=readline-devel)
2022-03-31 22:15:26,954 p=14887 u=moonja n=ansible | ok: [co7-node01] => (item=libicu-devel)
2022-03-31 22:15:34,221 p=14887 u=moonja n=ansible | ok: [co7-node01] => (item=perl-libs)
2022-03-31 22:15:34,234 p=14887 u=moonja n=ansible | TASK [patroni-postgres : Copy the vmwawre-postgres rpm file to all hosts in cluster] *********************
2022-03-31 22:15:35,739 p=14887 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:15:35,750 p=14887 u=moonja n=ansible | TASK [patroni-postgres : Install VMware Postgres on all hosts as root] ***********************************
2022-03-31 22:15:58,479 p=14887 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:15:58,488 p=14887 u=moonja n=ansible | TASK [patroni-postgres : Install the etcd and Patroni prerequisites on all three nodes] ******************
2022-03-31 22:16:05,880 p=14887 u=moonja n=ansible | ok: [co7-node01] => (item=python3)
2022-03-31 22:16:13,351 p=14887 u=moonja n=ansible | ok: [co7-node01] => (item=python3-devel)
2022-03-31 22:16:28,523 p=14887 u=moonja n=ansible | changed: [co7-node01] => (item=gcc)
2022-03-31 22:16:46,569 p=14887 u=moonja n=ansible | changed: [co7-node01] => (item=etcd)
2022-03-31 22:17:04,990 p=14887 u=moonja n=ansible | changed: [co7-node01] => (item=python-psycopg2)
2022-03-31 22:17:11,316 p=14887 u=moonja n=ansible | ok: [co7-node01] => (item=python3-pip)
2022-03-31 22:17:17,741 p=14887 u=moonja n=ansible | ok: [co7-node01] => (item=python34-setuptools)
2022-03-31 22:17:24,193 p=14887 u=moonja n=ansible | ok: [co7-node01] => (item=yamllint)
2022-03-31 22:17:30,657 p=14887 u=moonja n=ansible | ok: [co7-node01] => (item=daemonize)
2022-03-31 22:17:30,669 p=14887 u=moonja n=ansible | TASK [patroni-postgres : Install the dependencies of etcd  on all three nodes] ***************************
2022-03-31 22:17:31,714 p=14887 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:17:31,723 p=14887 u=moonja n=ansible | TASK [patroni-postgres : Install setuptools rust on all three nodes] *************************************
2022-03-31 22:17:38,933 p=14887 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:17:38,942 p=14887 u=moonja n=ansible | TASK [patroni-postgres : Install typing pip module on all three nodes] ***********************************
2022-03-31 22:17:45,726 p=14887 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:17:45,736 p=14887 u=moonja n=ansible | TASK [patroni-postgres : Upgrade pip3 version] ***********************************************************
2022-03-31 22:17:53,106 p=14887 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:17:53,115 p=14887 u=moonja n=ansible | TASK [patroni-postgres : Install wheel module on all three nodes] ****************************************
2022-03-31 22:18:00,397 p=14887 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:18:00,405 p=14887 u=moonja n=ansible | TASK [patroni-postgres : debug] **************************************************************************
2022-03-31 22:18:00,432 p=14887 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "14787423772.21784",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; export PATH=$PATH:/usr/local/bin && pip3 install wheel )",
        "delta": "0:00:01.410473",
        "end": "2022-03-31 22:17:55.265677",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/14787423772.21784",
        "start": "2022-03-31 22:17:53.855204",
        "started": 1,
        "stderr": "  WARNING: The script wheel is installed in '/var/lib/pgsql/.local/bin' which is not on PATH.\n  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.",
        "stderr_lines": [
            "  WARNING: The script wheel is installed in '/var/lib/pgsql/.local/bin' which is not on PATH.",
            "  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location."
        ],
        "stdout": "Defaulting to user installation because normal site-packages is not writeable\nCollecting wheel\n  Downloading wheel-0.37.1-py2.py3-none-any.whl (35 kB)\nInstalling collected packages: wheel\nSuccessfully installed wheel-0.37.1",
        "stdout_lines": [
            "Defaulting to user installation because normal site-packages is not writeable",
            "Collecting wheel",
            "  Downloading wheel-0.37.1-py2.py3-none-any.whl (35 kB)",
            "Installing collected packages: wheel",
            "Successfully installed wheel-0.37.1"
        ]
    }
}
2022-03-31 22:18:00,441 p=14887 u=moonja n=ansible | TASK [patroni-postgres : Install pip modules of Patroni prerequisites on all three nodes] ****************
2022-03-31 22:18:23,944 p=14887 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:18:23,957 p=14887 u=moonja n=ansible | TASK [patroni-postgres : debug] **************************************************************************
2022-03-31 22:18:23,988 p=14887 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "985234960120.22162",
        "changed": true,
        "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 install -r /var/lib/pgsql/requirements.txt )",
        "delta": "0:00:16.185112",
        "end": "2022-03-31 22:18:17.316168",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/985234960120.22162",
        "start": "2022-03-31 22:18:01.131056",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "Defaulting to user installation because normal site-packages is not writeable\nCollecting urllib3!=1.21,>=1.19.1\n  Downloading urllib3-1.26.9-py2.py3-none-any.whl (138 kB)\nCollecting boto\n  Downloading boto-2.49.0-py2.py3-none-any.whl (1.4 MB)\nRequirement already satisfied: PyYAML in /usr/lib64/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 3)) (3.13)\nCollecting requests\n  Downloading requests-2.27.1-py2.py3-none-any.whl (63 kB)\nRequirement already satisfied: six>=1.7 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 5)) (1.16.0)\nCollecting kazoo>=1.3.1\n  Downloading kazoo-2.8.0-py2.py3-none-any.whl (142 kB)\nRequirement already satisfied: python-etcd<0.5,>=0.4.3 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 7)) (0.4.5)\nCollecting python-consul>=0.7.0\n  Downloading python_consul-1.1.0-py2.py3-none-any.whl (24 kB)\nRequirement already satisfied: click>=4.1 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 9)) (8.0.1)\nRequirement already satisfied: prettytable>=0.7 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 10)) (2.2.0)\nCollecting tzlocal\n  Downloading tzlocal-4.1-py3-none-any.whl (19 kB)\nRequirement already satisfied: python-dateutil in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 12)) (2.8.2)\nRequirement already satisfied: psutil>=2.0.0 in /usr/local/lib64/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 13)) (5.8.0)\nCollecting cdiff\n  Downloading cdiff-1.0.tar.gz (33 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0\n  Downloading kubernetes-7.0.0-py2.py3-none-any.whl (1.3 MB)\nRequirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.6/site-packages (from requests->-r /var/lib/pgsql/requirements.txt (line 4)) (2021.5.30)\nRequirement already satisfied: charset-normalizer~=2.0.0 in /usr/local/lib/python3.6/site-packages (from requests->-r /var/lib/pgsql/requirements.txt (line 4)) (2.0.4)\nRequirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.6/site-packages (from requests->-r /var/lib/pgsql/requirements.txt (line 4)) (3.2)\nRequirement already satisfied: dnspython>=1.13.0 in /usr/local/lib/python3.6/site-packages (from python-etcd<0.5,>=0.4.3->-r /var/lib/pgsql/requirements.txt (line 7)) (2.1.0)\nRequirement already satisfied: importlib-metadata in /usr/local/lib/python3.6/site-packages (from click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (4.8.1)\nRequirement already satisfied: wcwidth in /usr/local/lib/python3.6/site-packages (from prettytable>=0.7->-r /var/lib/pgsql/requirements.txt (line 10)) (0.2.5)\nCollecting pytz-deprecation-shim\n  Downloading pytz_deprecation_shim-0.1.0.post0-py2.py3-none-any.whl (15 kB)\nRequirement already satisfied: backports.zoneinfo in /usr/local/lib64/python3.6/site-packages (from tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (0.2.1)\nRequirement already satisfied: setuptools>=21.0.0 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (57.1.0)\nRequirement already satisfied: adal>=1.0.2 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.2.7)\nRequirement already satisfied: websocket-client!=0.40.0,!=0.41.*,!=0.42.*,>=0.32.0 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.2.1)\nRequirement already satisfied: requests-oauthlib in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.3.0)\nRequirement already satisfied: google-auth>=1.0.1 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (2.0.2)\nRequirement already satisfied: cryptography>=1.1.0 in /usr/local/lib64/python3.6/site-packages (from adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (3.4.8)\nRequirement already satisfied: PyJWT<3,>=1.0.0 in /usr/local/lib/python3.6/site-packages (from adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (2.1.0)\nRequirement already satisfied: pyasn1-modules>=0.2.1 in /usr/local/lib/python3.6/site-packages (from google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (0.2.8)\nRequirement already satisfied: rsa<5,>=3.1.4 in /usr/local/lib/python3.6/site-packages (from google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (4.7.2)\nRequirement already satisfied: cachetools<5.0,>=2.0.0 in /usr/local/lib/python3.6/site-packages (from google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (4.2.2)\nRequirement already satisfied: importlib-resources in /usr/local/lib/python3.6/site-packages (from backports.zoneinfo->tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (5.2.2)\nRequirement already satisfied: zipp>=0.5 in /usr/local/lib/python3.6/site-packages (from importlib-metadata->click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (3.5.0)\nRequirement already satisfied: typing-extensions>=3.6.4 in /usr/local/lib/python3.6/site-packages (from importlib-metadata->click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (3.10.0.2)\nCollecting tzdata\n  Downloading tzdata-2022.1-py2.py3-none-any.whl (339 kB)\nRequirement already satisfied: oauthlib>=3.0.0 in /usr/local/lib/python3.6/site-packages (from requests-oauthlib->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (3.1.1)\nRequirement already satisfied: cffi>=1.12 in /usr/local/lib64/python3.6/site-packages (from cryptography>=1.1.0->adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.14.6)\nRequirement already satisfied: pyasn1<0.5.0,>=0.4.6 in /usr/local/lib/python3.6/site-packages (from pyasn1-modules>=0.2.1->google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (0.4.8)\nRequirement already satisfied: pycparser in /usr/local/lib/python3.6/site-packages (from cffi>=1.12->cryptography>=1.1.0->adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (2.20)\nBuilding wheels for collected packages: cdiff\n  Building wheel for cdiff (setup.py): started\n  Building wheel for cdiff (setup.py): finished with status 'done'\n  Created wheel for cdiff: filename=cdiff-1.0-py3-none-any.whl size=14474 sha256=3312366ded4f996b8437a31d24c170a2c3f221af75f432912c8b14dde7e3a4f6\n  Stored in directory: /var/lib/pgsql/.cache/pip/wheels/99/6b/43/6423499f3ab670266f34d2e5e6a9ff37a37b61404be8c91789\nSuccessfully built cdiff\nInstalling collected packages: urllib3, tzdata, requests, pytz-deprecation-shim, tzlocal, python-consul, kubernetes, kazoo, cdiff, boto\nSuccessfully installed boto-2.49.0 cdiff-1.0 kazoo-2.8.0 kubernetes-7.0.0 python-consul-1.1.0 pytz-deprecation-shim-0.1.0.post0 requests-2.27.1 tzdata-2022.1 tzlocal-4.1 urllib3-1.26.9",
        "stdout_lines": [
            "Defaulting to user installation because normal site-packages is not writeable",
            "Collecting urllib3!=1.21,>=1.19.1",
            "  Downloading urllib3-1.26.9-py2.py3-none-any.whl (138 kB)",
            "Collecting boto",
            "  Downloading boto-2.49.0-py2.py3-none-any.whl (1.4 MB)",
            "Requirement already satisfied: PyYAML in /usr/lib64/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 3)) (3.13)",
            "Collecting requests",
            "  Downloading requests-2.27.1-py2.py3-none-any.whl (63 kB)",
            "Requirement already satisfied: six>=1.7 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 5)) (1.16.0)",
            "Collecting kazoo>=1.3.1",
            "  Downloading kazoo-2.8.0-py2.py3-none-any.whl (142 kB)",
            "Requirement already satisfied: python-etcd<0.5,>=0.4.3 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 7)) (0.4.5)",
            "Collecting python-consul>=0.7.0",
            "  Downloading python_consul-1.1.0-py2.py3-none-any.whl (24 kB)",
            "Requirement already satisfied: click>=4.1 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 9)) (8.0.1)",
            "Requirement already satisfied: prettytable>=0.7 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 10)) (2.2.0)",
            "Collecting tzlocal",
            "  Downloading tzlocal-4.1-py3-none-any.whl (19 kB)",
            "Requirement already satisfied: python-dateutil in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 12)) (2.8.2)",
            "Requirement already satisfied: psutil>=2.0.0 in /usr/local/lib64/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 13)) (5.8.0)",
            "Collecting cdiff",
            "  Downloading cdiff-1.0.tar.gz (33 kB)",
            "  Preparing metadata (setup.py): started",
            "  Preparing metadata (setup.py): finished with status 'done'",
            "Collecting kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0",
            "  Downloading kubernetes-7.0.0-py2.py3-none-any.whl (1.3 MB)",
            "Requirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.6/site-packages (from requests->-r /var/lib/pgsql/requirements.txt (line 4)) (2021.5.30)",
            "Requirement already satisfied: charset-normalizer~=2.0.0 in /usr/local/lib/python3.6/site-packages (from requests->-r /var/lib/pgsql/requirements.txt (line 4)) (2.0.4)",
            "Requirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.6/site-packages (from requests->-r /var/lib/pgsql/requirements.txt (line 4)) (3.2)",
            "Requirement already satisfied: dnspython>=1.13.0 in /usr/local/lib/python3.6/site-packages (from python-etcd<0.5,>=0.4.3->-r /var/lib/pgsql/requirements.txt (line 7)) (2.1.0)",
            "Requirement already satisfied: importlib-metadata in /usr/local/lib/python3.6/site-packages (from click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (4.8.1)",
            "Requirement already satisfied: wcwidth in /usr/local/lib/python3.6/site-packages (from prettytable>=0.7->-r /var/lib/pgsql/requirements.txt (line 10)) (0.2.5)",
            "Collecting pytz-deprecation-shim",
            "  Downloading pytz_deprecation_shim-0.1.0.post0-py2.py3-none-any.whl (15 kB)",
            "Requirement already satisfied: backports.zoneinfo in /usr/local/lib64/python3.6/site-packages (from tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (0.2.1)",
            "Requirement already satisfied: setuptools>=21.0.0 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (57.1.0)",
            "Requirement already satisfied: adal>=1.0.2 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.2.7)",
            "Requirement already satisfied: websocket-client!=0.40.0,!=0.41.*,!=0.42.*,>=0.32.0 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.2.1)",
            "Requirement already satisfied: requests-oauthlib in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.3.0)",
            "Requirement already satisfied: google-auth>=1.0.1 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (2.0.2)",
            "Requirement already satisfied: cryptography>=1.1.0 in /usr/local/lib64/python3.6/site-packages (from adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (3.4.8)",
            "Requirement already satisfied: PyJWT<3,>=1.0.0 in /usr/local/lib/python3.6/site-packages (from adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (2.1.0)",
            "Requirement already satisfied: pyasn1-modules>=0.2.1 in /usr/local/lib/python3.6/site-packages (from google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (0.2.8)",
            "Requirement already satisfied: rsa<5,>=3.1.4 in /usr/local/lib/python3.6/site-packages (from google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (4.7.2)",
            "Requirement already satisfied: cachetools<5.0,>=2.0.0 in /usr/local/lib/python3.6/site-packages (from google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (4.2.2)",
            "Requirement already satisfied: importlib-resources in /usr/local/lib/python3.6/site-packages (from backports.zoneinfo->tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (5.2.2)",
            "Requirement already satisfied: zipp>=0.5 in /usr/local/lib/python3.6/site-packages (from importlib-metadata->click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (3.5.0)",
            "Requirement already satisfied: typing-extensions>=3.6.4 in /usr/local/lib/python3.6/site-packages (from importlib-metadata->click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (3.10.0.2)",
            "Collecting tzdata",
            "  Downloading tzdata-2022.1-py2.py3-none-any.whl (339 kB)",
            "Requirement already satisfied: oauthlib>=3.0.0 in /usr/local/lib/python3.6/site-packages (from requests-oauthlib->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (3.1.1)",
            "Requirement already satisfied: cffi>=1.12 in /usr/local/lib64/python3.6/site-packages (from cryptography>=1.1.0->adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.14.6)",
            "Requirement already satisfied: pyasn1<0.5.0,>=0.4.6 in /usr/local/lib/python3.6/site-packages (from pyasn1-modules>=0.2.1->google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (0.4.8)",
            "Requirement already satisfied: pycparser in /usr/local/lib/python3.6/site-packages (from cffi>=1.12->cryptography>=1.1.0->adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (2.20)",
            "Building wheels for collected packages: cdiff",
            "  Building wheel for cdiff (setup.py): started",
            "  Building wheel for cdiff (setup.py): finished with status 'done'",
            "  Created wheel for cdiff: filename=cdiff-1.0-py3-none-any.whl size=14474 sha256=3312366ded4f996b8437a31d24c170a2c3f221af75f432912c8b14dde7e3a4f6",
            "  Stored in directory: /var/lib/pgsql/.cache/pip/wheels/99/6b/43/6423499f3ab670266f34d2e5e6a9ff37a37b61404be8c91789",
            "Successfully built cdiff",
            "Installing collected packages: urllib3, tzdata, requests, pytz-deprecation-shim, tzlocal, python-consul, kubernetes, kazoo, cdiff, boto",
            "Successfully installed boto-2.49.0 cdiff-1.0 kazoo-2.8.0 kubernetes-7.0.0 python-consul-1.1.0 pytz-deprecation-shim-0.1.0.post0 requests-2.27.1 tzdata-2022.1 tzlocal-4.1 urllib3-1.26.9"
        ]
    }
}
2022-03-31 22:18:23,998 p=14887 u=moonja n=ansible | TASK [patroni-postgres : Iinstall wheel module on all three nodes] ***************************************
2022-03-31 22:18:30,324 p=14887 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:18:30,332 p=14887 u=moonja n=ansible | TASK [patroni-postgres : debug] **************************************************************************
2022-03-31 22:18:30,382 p=14887 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "647619377766.22812",
        "changed": true,
        "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 install wheel )",
        "delta": "0:00:01.354001",
        "end": "2022-03-31 22:18:26.020721",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/root/.ansible_async/647619377766.22812",
        "start": "2022-03-31 22:18:24.666720",
        "started": 1,
        "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv",
        "stderr_lines": [
            "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"
        ],
        "stdout": "Collecting wheel\n  Using cached wheel-0.37.1-py2.py3-none-any.whl (35 kB)\nInstalling collected packages: wheel\nSuccessfully installed wheel-0.37.1",
        "stdout_lines": [
            "Collecting wheel",
            "  Using cached wheel-0.37.1-py2.py3-none-any.whl (35 kB)",
            "Installing collected packages: wheel",
            "Successfully installed wheel-0.37.1"
        ]
    }
}
2022-03-31 22:18:30,394 p=14887 u=moonja n=ansible | TASK [patroni-postgres : Install psycopg2-binary module on all three nodes] ******************************
2022-03-31 22:18:36,870 p=14887 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:18:36,880 p=14887 u=moonja n=ansible | TASK [patroni-postgres : debug] **************************************************************************
2022-03-31 22:18:36,932 p=14887 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "254846581219.23190",
        "changed": true,
        "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 install psycopg2-binary )",
        "delta": "0:00:02.545453",
        "end": "2022-03-31 22:18:33.694642",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/root/.ansible_async/254846581219.23190",
        "start": "2022-03-31 22:18:31.149189",
        "started": 1,
        "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv",
        "stderr_lines": [
            "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"
        ],
        "stdout": "Collecting psycopg2-binary\n  Using cached psycopg2_binary-2.9.3-cp36-cp36m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.0 MB)\nInstalling collected packages: psycopg2-binary\nSuccessfully installed psycopg2-binary-2.9.3",
        "stdout_lines": [
            "Collecting psycopg2-binary",
            "  Using cached psycopg2_binary-2.9.3-cp36-cp36m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.0 MB)",
            "Installing collected packages: psycopg2-binary",
            "Successfully installed psycopg2-binary-2.9.3"
        ]
    }
}
2022-03-31 22:18:36,945 p=14887 u=moonja n=ansible | TASK [patroni-postgres : Install patroni modules on all three nodes for vmware-postgres 13.x version] ****
2022-03-31 22:18:44,445 p=14887 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:18:44,453 p=14887 u=moonja n=ansible | TASK [patroni-postgres : Change the permissions on the /tmp directory] ***********************************
2022-03-31 22:18:45,223 p=14887 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:18:45,233 p=14887 u=moonja n=ansible | TASK [patroni-postgres : Create the etcd.yml configuration file for all nodes] ***************************
2022-03-31 22:18:45,549 p=14887 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: ansible.errors.AnsibleUndefinedVariable: 'ansible.vars.hostvars.HostVarsVars object' has no attribute 'ansible_eth2'
2022-03-31 22:18:45,550 p=14887 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'ansible.vars.hostvars.HostVarsVars object' has no attribute 'ansible_eth2'"}
2022-03-31 22:18:45,552 p=14887 u=moonja n=ansible | PLAY RECAP ***********************************************************************************************
2022-03-31 22:18:45,552 p=14887 u=moonja n=ansible | co7-node01                 : ok=24   changed=14   unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2022-03-31 22:18:45,553 p=14887 u=moonja n=ansible | co7-node02                 : ok=5    changed=2    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2022-03-31 22:18:45,553 p=14887 u=moonja n=ansible | co7-node03                 : ok=5    changed=2    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2022-03-31 22:30:03,536 p=18726 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This 
feature will be removed from ansible-core in version 2.14. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2022-03-31 22:30:03,547 p=18726 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-03-31 22:30:03,851 p=18726 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will
 be removed in version 2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False 
in ansible.cfg.
2022-03-31 22:30:03,916 p=18726 u=moonja n=ansible | PLAY [all] ***********************************************************************************************
2022-03-31 22:30:03,952 p=18726 u=moonja n=ansible | TASK [Gathering Facts] ***********************************************************************************
2022-03-31 22:30:06,153 p=18726 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 22:30:06,222 p=18726 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 22:30:06,225 p=18726 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:30:06,242 p=18726 u=moonja n=ansible | TASK [patroni-postgres : Stop services for patroni and etcd] *********************************************
2022-03-31 22:30:07,138 p=18726 u=moonja n=ansible | failed: [co7-node03] (item=patroni) => {"ansible_loop_var": "item", "changed": false, "item": "patroni", "msg": "Could not find the requested service patroni: host"}
2022-03-31 22:30:07,139 p=18726 u=moonja n=ansible | failed: [co7-node01] (item=patroni) => {"ansible_loop_var": "item", "changed": false, "item": "patroni", "msg": "Could not find the requested service patroni: host"}
2022-03-31 22:30:07,139 p=18726 u=moonja n=ansible | failed: [co7-node02] (item=patroni) => {"ansible_loop_var": "item", "changed": false, "item": "patroni", "msg": "Could not find the requested service patroni: host"}
2022-03-31 22:30:07,717 p=18726 u=moonja n=ansible | failed: [co7-node02] (item=etcd) => {"ansible_loop_var": "item", "changed": false, "item": "etcd", "msg": "Could not find the requested service patroni: host"}
2022-03-31 22:30:07,718 p=18726 u=moonja n=ansible | ...ignoring
2022-03-31 22:30:07,744 p=18726 u=moonja n=ansible | failed: [co7-node03] (item=etcd) => {"ansible_loop_var": "item", "changed": false, "item": "etcd", "msg": "Could not find the requested service patroni: host"}
2022-03-31 22:30:07,745 p=18726 u=moonja n=ansible | failed: [co7-node01] (item=etcd) => {"ansible_loop_var": "item", "changed": false, "item": "etcd", "msg": "Could not find the requested service patroni: host"}
2022-03-31 22:30:07,745 p=18726 u=moonja n=ansible | ...ignoring
2022-03-31 22:30:07,746 p=18726 u=moonja n=ansible | ...ignoring
2022-03-31 22:30:07,759 p=18726 u=moonja n=ansible | TASK [patroni-postgres : Kill etcd process] **************************************************************
2022-03-31 22:30:08,647 p=18726 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 22:30:08,648 p=18726 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 22:30:08,648 p=18726 u=moonja n=ansible | ...ignoring
2022-03-31 22:30:08,650 p=18726 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 22:30:08,650 p=18726 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 22:30:08,651 p=18726 u=moonja n=ansible | ...ignoring
2022-03-31 22:30:16,143 p=18726 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"ansible_job_id": "195206225114.24725", "changed": true, "cmd": "( killall etcd )", "delta": "0:00:00.617217", "end": "2022-03-31 22:30:09.485296", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/var/lib/pgsql/.ansible_async/195206225114.24725", "start": "2022-03-31 22:30:08.868079", "started": 1, "stderr": "etcd: no process found", "stderr_lines": ["etcd: no process found"], "stdout": "", "stdout_lines": []}
2022-03-31 22:30:16,144 p=18726 u=moonja n=ansible | ...ignoring
2022-03-31 22:30:16,152 p=18726 u=moonja n=ansible | TASK [patroni-postgres : Delete configuration file for patroni and systemd] ******************************
2022-03-31 22:30:16,829 p=18726 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/patroni.yml)
2022-03-31 22:30:16,830 p=18726 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/patroni.yml)
2022-03-31 22:30:16,842 p=18726 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/patroni.yml)
2022-03-31 22:30:17,248 p=18726 u=moonja n=ansible | ok: [co7-node02] => (item=/etc/systemd/system/patroni.service)
2022-03-31 22:30:17,260 p=18726 u=moonja n=ansible | ok: [co7-node03] => (item=/etc/systemd/system/patroni.service)
2022-03-31 22:30:17,274 p=18726 u=moonja n=ansible | ok: [co7-node01] => (item=/etc/systemd/system/patroni.service)
2022-03-31 22:30:17,659 p=18726 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/postgresql0.yml)
2022-03-31 22:30:17,661 p=18726 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/postgresql0.yml)
2022-03-31 22:30:17,736 p=18726 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/postgresql0.yml)
2022-03-31 22:30:18,159 p=18726 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/patroni_member.log)
2022-03-31 22:30:18,160 p=18726 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/patroni_member.log)
2022-03-31 22:30:18,186 p=18726 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/patroni_member.log)
2022-03-31 22:30:18,566 p=18726 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/etcd.yml)
2022-03-31 22:30:18,567 p=18726 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/etcd.yml)
2022-03-31 22:30:18,591 p=18726 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/etcd.yml)
2022-03-31 22:30:18,968 p=18726 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/etcd_logfile)
2022-03-31 22:30:18,984 p=18726 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/etcd_logfile)
2022-03-31 22:30:19,000 p=18726 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/etcd_logfile)
2022-03-31 22:30:19,012 p=18726 u=moonja n=ansible | TASK [patroni-postgres : Delete data directory for patroni cluster] **************************************
2022-03-31 22:30:19,497 p=18726 u=moonja n=ansible | ok: [co7-node02] => (item=backups)
2022-03-31 22:30:19,498 p=18726 u=moonja n=ansible | ok: [co7-node03] => (item=backups)
2022-03-31 22:30:19,499 p=18726 u=moonja n=ansible | changed: [co7-node01] => (item=backups)
2022-03-31 22:30:19,907 p=18726 u=moonja n=ansible | ok: [co7-node03] => (item=data)
2022-03-31 22:30:19,909 p=18726 u=moonja n=ansible | ok: [co7-node02] => (item=data)
2022-03-31 22:30:19,912 p=18726 u=moonja n=ansible | changed: [co7-node01] => (item=data)
2022-03-31 22:30:20,307 p=18726 u=moonja n=ansible | ok: [co7-node03] => (item=patroni_data)
2022-03-31 22:30:20,339 p=18726 u=moonja n=ansible | ok: [co7-node01] => (item=patroni_data)
2022-03-31 22:30:20,340 p=18726 u=moonja n=ansible | ok: [co7-node02] => (item=patroni_data)
2022-03-31 22:30:20,352 p=18726 u=moonja n=ansible | TASK [patroni-postgres : Change the permissions on the /tmp directory] ***********************************
2022-03-31 22:30:20,829 p=18726 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 22:30:20,841 p=18726 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 22:30:20,854 p=18726 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:30:20,866 p=18726 u=moonja n=ansible | TASK [patroni-postgres : Uninstall pip modules of Patroni prerequisites on all three nodes] **************
2022-03-31 22:30:27,519 p=18726 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"ansible_job_id": "671608698130.16511", "changed": true, "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 uninstall -r /var/lib/pgsql/requirements.txt -y )", "delta": "0:00:00.419334", "end": "2022-03-31 22:30:22.004272", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/root/.ansible_async/671608698130.16511", "start": "2022-03-31 22:30:21.584938", "started": 1, "stderr": "ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'", "stderr_lines": ["ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'"], "stdout": "", "stdout_lines": []}
2022-03-31 22:30:27,559 p=18726 u=moonja n=ansible | ...ignoring
2022-03-31 22:30:27,569 p=18726 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"ansible_job_id": "710207219625.26415", "changed": true, "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 uninstall -r /var/lib/pgsql/requirements.txt -y )", "delta": "0:00:00.458585", "end": "2022-03-31 22:30:22.021838", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/root/.ansible_async/710207219625.26415", "start": "2022-03-31 22:30:21.563253", "started": 1, "stderr": "WARNING: Skipping boto as it is not installed.\nERROR: Cannot uninstall 'PyYAML'. It is a distutils installed project and thus we cannot accurately determine which files belong to it which would lead to only a partial uninstall.", "stderr_lines": ["WARNING: Skipping boto as it is not installed.", "ERROR: Cannot uninstall 'PyYAML'. It is a distutils installed project and thus we cannot accurately determine which files belong to it which would lead to only a partial uninstall."], "stdout": "Found existing installation: urllib3 1.26.9\nUninstalling urllib3-1.26.9:\n  Successfully uninstalled urllib3-1.26.9\nFound existing installation: PyYAML 3.13", "stdout_lines": ["Found existing installation: urllib3 1.26.9", "Uninstalling urllib3-1.26.9:", "  Successfully uninstalled urllib3-1.26.9", "Found existing installation: PyYAML 3.13"]}
2022-03-31 22:30:27,570 p=18726 u=moonja n=ansible | ...ignoring
2022-03-31 22:30:27,570 p=18726 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"ansible_job_id": "162863157806.16433", "changed": true, "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 uninstall -r /var/lib/pgsql/requirements.txt -y )", "delta": "0:00:00.388523", "end": "2022-03-31 22:30:21.960907", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/root/.ansible_async/162863157806.16433", "start": "2022-03-31 22:30:21.572384", "started": 1, "stderr": "ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'", "stderr_lines": ["ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'"], "stdout": "", "stdout_lines": []}
2022-03-31 22:30:27,570 p=18726 u=moonja n=ansible | ...ignoring
2022-03-31 22:30:27,581 p=18726 u=moonja n=ansible | TASK [patroni-postgres : UnInstall wheel pip module on all three nodes] **********************************
2022-03-31 22:30:28,009 p=18726 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 22:30:28,009 p=18726 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 22:30:28,010 p=18726 u=moonja n=ansible | ...ignoring
2022-03-31 22:30:28,023 p=18726 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 22:30:28,023 p=18726 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 22:30:28,023 p=18726 u=moonja n=ansible | ...ignoring
2022-03-31 22:30:33,809 p=18726 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:30:33,818 p=18726 u=moonja n=ansible | TASK [patroni-postgres : Uninstall typing pip module on all three nodes] *********************************
2022-03-31 22:30:34,367 p=18726 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 22:30:34,367 p=18726 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 22:30:34,368 p=18726 u=moonja n=ansible | ...ignoring
2022-03-31 22:30:34,368 p=18726 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 22:30:34,368 p=18726 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 22:30:34,368 p=18726 u=moonja n=ansible | ...ignoring
2022-03-31 22:30:41,363 p=18726 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"ansible_job_id": "603763153867.27171", "changed": true, "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 uninstall typing -y )", "delta": "0:00:01.046852", "end": "2022-03-31 22:30:36.736960", "finished": 1, "msg": "non-zero return code", "rc": 2, "results_file": "/var/lib/pgsql/.ansible_async/603763153867.27171", "start": "2022-03-31 22:30:35.690108", "started": 1, "stderr": "ERROR: Exception:\nTraceback (most recent call last):\n  File \"/usr/lib64/python3.6/shutil.py\", line 550, in move\n    os.rename(src, real_dst)\nPermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc' -> '/var/tmp/pip-uninstall-xl43wybi/typing.cpython-36.pyc'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/cli/base_command.py\", line 164, in exc_logging_wrapper\n    status = run_func(*args)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/commands/uninstall.py\", line 99, in run\n    verbose=self.verbosity > 0,\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_install.py\", line 671, in uninstall\n    uninstalled_pathset.remove(auto_confirm, verbose)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 384, in remove\n    moved.stash(path)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 282, in stash\n    renames(path, new_path)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/utils/misc.py\", line 307, in renames\n    shutil.move(old, new)\n  File \"/usr/lib64/python3.6/shutil.py\", line 565, in move\n    os.unlink(src)\nPermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc'", "stderr_lines": ["ERROR: Exception:", "Traceback (most recent call last):", "  File \"/usr/lib64/python3.6/shutil.py\", line 550, in move", "    os.rename(src, real_dst)", "PermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc' -> '/var/tmp/pip-uninstall-xl43wybi/typing.cpython-36.pyc'", "", "During handling of the above exception, another exception occurred:", "", "Traceback (most recent call last):", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/cli/base_command.py\", line 164, in exc_logging_wrapper", "    status = run_func(*args)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/commands/uninstall.py\", line 99, in run", "    verbose=self.verbosity > 0,", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_install.py\", line 671, in uninstall", "    uninstalled_pathset.remove(auto_confirm, verbose)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 384, in remove", "    moved.stash(path)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 282, in stash", "    renames(path, new_path)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/utils/misc.py\", line 307, in renames", "    shutil.move(old, new)", "  File \"/usr/lib64/python3.6/shutil.py\", line 565, in move", "    os.unlink(src)", "PermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc'"], "stdout": "Found existing installation: typing 3.7.4.3\nUninstalling typing-3.7.4.3:", "stdout_lines": ["Found existing installation: typing 3.7.4.3", "Uninstalling typing-3.7.4.3:"]}
2022-03-31 22:30:41,363 p=18726 u=moonja n=ansible | ...ignoring
2022-03-31 22:30:41,371 p=18726 u=moonja n=ansible | TASK [patroni-postgres : Uninstall setuptools rust on all three nodes] ***********************************
2022-03-31 22:30:47,691 p=18726 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:30:47,730 p=18726 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:30:48,427 p=18726 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:30:48,438 p=18726 u=moonja n=ansible | TASK [patroni-postgres : Uninstall patroni module on all three nodes] ************************************
2022-03-31 22:30:54,745 p=18726 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:30:54,907 p=18726 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:30:54,916 p=18726 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:30:54,926 p=18726 u=moonja n=ansible | TASK [patroni-postgres : Uninstall wheel module on all three nodes] **************************************
2022-03-31 22:31:01,331 p=18726 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:31:01,383 p=18726 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:31:01,534 p=18726 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:31:01,544 p=18726 u=moonja n=ansible | TASK [patroni-postgres : Uninstall psycopg2-binary module on all three nodes] ****************************
2022-03-31 22:31:07,854 p=18726 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:31:08,415 p=18726 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:31:08,472 p=18726 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:31:08,481 p=18726 u=moonja n=ansible | TASK [patroni-postgres : Delete the dependencies file of etcd  on all three nodes] ***********************
2022-03-31 22:31:08,922 p=18726 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:31:08,926 p=18726 u=moonja n=ansible | [WARNING]: Unable to use /var/lib/pgsql/.ansible/tmp as temporary directory, failing back to system:
[Errno 13] Permission denied: '/var/lib/pgsql'

2022-03-31 22:31:08,926 p=18726 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 22:31:08,941 p=18726 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 22:31:08,954 p=18726 u=moonja n=ansible | TASK [patroni-postgres : Uninstall VMware Postgres RPM package on all hosts as root] *********************
2022-03-31 22:31:15,502 p=18726 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 22:31:15,512 p=18726 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 22:31:26,713 p=18726 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:31:26,725 p=18726 u=moonja n=ansible | TASK [patroni-postgres : Delete the vmwawre-postgres rpm file to all hosts in cluster] *******************
2022-03-31 22:31:27,197 p=18726 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:31:27,198 p=18726 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 22:31:27,215 p=18726 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 22:31:27,226 p=18726 u=moonja n=ansible | TASK [patroni-postgres : List iptables rules] ************************************************************
2022-03-31 22:31:27,701 p=18726 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:31:27,702 p=18726 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:31:27,732 p=18726 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:31:27,743 p=18726 u=moonja n=ansible | TASK [patroni-postgres : Flush iptables rules] ***********************************************************
2022-03-31 22:31:28,259 p=18726 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:31:28,340 p=18726 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:31:28,340 p=18726 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:31:28,354 p=18726 u=moonja n=ansible | TASK [patroni-postgres : Stop and disable firewalld] *****************************************************
2022-03-31 22:31:29,302 p=18726 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:31:29,321 p=18726 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 22:31:29,321 p=18726 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 22:31:29,364 p=18726 u=moonja n=ansible | PLAY RECAP ***********************************************************************************************
2022-03-31 22:31:29,364 p=18726 u=moonja n=ansible | co7-node01                 : ok=19   changed=14   unreachable=0    failed=0    skipped=0    rescued=0    ignored=4   
2022-03-31 22:31:29,364 p=18726 u=moonja n=ansible | co7-node02                 : ok=19   changed=10   unreachable=0    failed=0    skipped=0    rescued=0    ignored=5   
2022-03-31 22:31:29,364 p=18726 u=moonja n=ansible | co7-node03                 : ok=19   changed=10   unreachable=0    failed=0    skipped=0    rescued=0    ignored=5   
2022-03-31 22:35:37,184 p=22893 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This 
feature will be removed from ansible-core in version 2.14. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2022-03-31 22:35:37,196 p=22893 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-03-31 22:35:37,503 p=22893 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will
 be removed in version 2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False 
in ansible.cfg.
2022-03-31 22:35:37,565 p=22893 u=moonja n=ansible | PLAY [all] ***********************************************************************************************
2022-03-31 22:35:37,603 p=22893 u=moonja n=ansible | TASK [Gathering Facts] ***********************************************************************************
2022-03-31 22:35:39,780 p=22893 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 22:35:39,794 p=22893 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:35:39,798 p=22893 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 22:35:39,815 p=22893 u=moonja n=ansible | TASK [patroni-postgres : Stop and disable firewalld] *****************************************************
2022-03-31 22:35:40,748 p=22893 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 22:35:40,749 p=22893 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:35:40,752 p=22893 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 22:35:40,763 p=22893 u=moonja n=ansible | TASK [patroni-postgres : Flush iptables rules] ***********************************************************
2022-03-31 22:35:41,391 p=22893 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:35:41,392 p=22893 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:35:41,393 p=22893 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:35:41,405 p=22893 u=moonja n=ansible | TASK [patroni-postgres : List iptables rules] ************************************************************
2022-03-31 22:35:41,861 p=22893 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:35:41,869 p=22893 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:35:41,876 p=22893 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:35:41,887 p=22893 u=moonja n=ansible | TASK [patroni-postgres : debug] **************************************************************************
2022-03-31 22:35:41,924 p=22893 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": "Chain INPUT (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain FORWARD (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain OUTPUT (policy ACCEPT)\ntarget     prot opt source               destination         "
}
2022-03-31 22:35:41,926 p=22893 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": "Chain INPUT (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain FORWARD (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain OUTPUT (policy ACCEPT)\ntarget     prot opt source               destination         "
}
2022-03-31 22:35:41,937 p=22893 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": "Chain INPUT (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain FORWARD (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain OUTPUT (policy ACCEPT)\ntarget     prot opt source               destination         "
}
2022-03-31 22:35:41,949 p=22893 u=moonja n=ansible | TASK [patroni-postgres : Install the 'Development tools' package group for VMware Postgres Dependencies] ***
2022-03-31 22:35:48,866 p=22893 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:35:54,134 p=22893 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"ansible_job_id": "725061458995.20285", "changed": false, "changes": {"installed": ["@Development tools"]}, "finished": 1, "msg": "There are unfinished transactions remaining. You might consider running yum-complete-transaction, or \"yum-complete-transaction --cleanup-only\" and \"yum history redo last\", first to finish them. If those don't work you'll have to try removing/installing packages by hand (maybe package-cleanup can help).\nError: Package: glibc-headers-2.17-325.el7_9.x86_64 (updates)\n           Requires: kernel-headers\nError: Package: systemtap-devel-4.0-13.el7.x86_64 (base)\n           Requires: kernel-devel-uname-r\nError: Package: glibc-headers-2.17-325.el7_9.x86_64 (updates)\n           Requires: kernel-headers >= 2.2.1\n", "rc": 1, "results": ["Loaded plugins: fastestmirror, product-id, search-disabled-repos, subscription-\n              : manager, versionlock\n\nThis system is not registered with an entitlement server. You can use subscription-manager to register.\n\nLoading mirror speeds from cached hostfile\n * base: ftp.kaist.ac.kr\n * centos-sclo-rh: ftp.kaist.ac.kr\n * epel: ftp.jaist.ac.jp\n * extras: ftp.kaist.ac.kr\n * updates: ftp.tsukuba.wide.ad.jp\nResolving Dependencies\n--> Running transaction check\n---> Package byacc.x86_64 0:1.9.20130304-3.el7 will be installed\n---> Package cscope.x86_64 0:15.8-10.el7 will be installed\n---> Package ctags.x86_64 0:5.8-13.el7 will be installed\n---> Package diffstat.x86_64 0:1.57-4.el7 will be installed\n---> Package doxygen.x86_64 1:1.8.5-4.el7 will be installed\n---> Package elfutils.x86_64 0:0.176-5.el7 will be installed\n---> Package gcc.x86_64 0:4.8.5-44.el7 will be installed\n--> Processing Dependency: glibc-devel >= 2.2.90-12 for package: gcc-4.8.5-44.el7.x86_64\n---> Package gcc-c++.x86_64 0:4.8.5-44.el7 will be installed\n---> Package gcc-gfortran.x86_64 0:4.8.5-44.el7 will be installed\n--> Processing Dependency: libquadmath-devel = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libquadmath = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libgfortran = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libgfortran.so.3()(64bit) for package: gcc-gfortran-4.8.5-44.el7.x86_64\n---> Package indent.x86_64 0:2.2.11-13.el7 will be installed\n---> Package intltool.noarch 0:0.50.2-7.el7 will be installed\n--> Processing Dependency: perl(XML::Parser) for package: intltool-0.50.2-7.el7.noarch\n---> Package libtool.x86_64 0:2.4.2-22.el7_3 will be installed\n---> Package patchutils.x86_64 0:0.3.3-5.el7_9 will be installed\n---> Package rcs.x86_64 0:5.9.0-7.el7 will be installed\n---> Package rpm-build.x86_64 0:4.11.3-48.el7_9 will be installed\n--> Processing Dependency: /usr/bin/gdb-add-index for package: rpm-build-4.11.3-48.el7_9.x86_64\n---> Package rpm-sign.x86_64 0:4.11.3-48.el7_9 will be installed\n---> Package swig.x86_64 0:2.0.10-5.el7 will be installed\n---> Package systemtap.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: systemtap-devel = 4.0-13.el7 for package: systemtap-4.0-13.el7.x86_64\n--> Processing Dependency: systemtap-client = 4.0-13.el7 for package: systemtap-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package gdb.x86_64 0:7.6.1-120.el7 will be installed\n---> Package glibc-devel.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: glibc-headers = 2.17-325.el7_9 for package: glibc-devel-2.17-325.el7_9.x86_64\n--> Processing Dependency: glibc-headers for package: glibc-devel-2.17-325.el7_9.x86_64\n---> Package libgfortran.x86_64 0:4.8.5-44.el7 will be installed\n---> Package libquadmath.x86_64 0:4.8.5-44.el7 will be installed\n---> Package libquadmath-devel.x86_64 0:4.8.5-44.el7 will be installed\n---> Package perl-XML-Parser.x86_64 0:2.41-10.el7 will be installed\n---> Package systemtap-client.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: systemtap-runtime = 4.0-13.el7 for package: systemtap-client-4.0-13.el7.x86_64\n--> Processing Dependency: mokutil for package: systemtap-client-4.0-13.el7.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package mokutil.x86_64 0:15-8.el7 will be installed\n--> Processing Dependency: libefivar.so.1(libefivar.so.0)(64bit) for package: mokutil-15-8.el7.x86_64\n--> Processing Dependency: libefivar.so.1(LIBEFIVAR_0.24)(64bit) for package: mokutil-15-8.el7.x86_64\n--> Processing Dependency: libefivar.so.1()(64bit) for package: mokutil-15-8.el7.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n---> Package systemtap-runtime.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: libsymtabAPI.so.9.3()(64bit) for package: systemtap-runtime-4.0-13.el7.x86_64\n--> Processing Dependency: libdyninstAPI.so.9.3()(64bit) for package: systemtap-runtime-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package dyninst.x86_64 0:9.3.1-3.el7 will be installed\n--> Processing Dependency: libdwarf.so.0()(64bit) for package: dyninst-9.3.1-3.el7.x86_64\n--> Processing Dependency: libboost_date_time-mt.so.1.53.0()(64bit) for package: dyninst-9.3.1-3.el7.x86_64\n---> Package efivar-libs.x86_64 0:36-12.el7 will be installed\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package boost-date-time.x86_64 0:1.53.0-28.el7 will be installed\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package libdwarf.x86_64 0:20130207-4.el7 will be installed\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Finished Dependency Resolution\n You could try using --skip-broken to work around the problem\n You could try running: rpm -Va --nofiles --nodigest\n"], "results_file": "/root/.ansible_async/725061458995.20285", "started": 1, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2022-03-31 22:35:54,491 p=22893 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"ansible_job_id": "935545086840.20365", "changed": false, "changes": {"installed": ["@Development tools"]}, "finished": 1, "msg": "There are unfinished transactions remaining. You might consider running yum-complete-transaction, or \"yum-complete-transaction --cleanup-only\" and \"yum history redo last\", first to finish them. If those don't work you'll have to try removing/installing packages by hand (maybe package-cleanup can help).\nError: Package: glibc-headers-2.17-325.el7_9.x86_64 (updates)\n           Requires: kernel-headers\nError: Package: systemtap-devel-4.0-13.el7.x86_64 (base)\n           Requires: kernel-devel-uname-r\nError: Package: glibc-headers-2.17-325.el7_9.x86_64 (updates)\n           Requires: kernel-headers >= 2.2.1\n", "rc": 1, "results": ["Loaded plugins: fastestmirror, product-id, search-disabled-repos, subscription-\n              : manager, versionlock\n\nThis system is not registered with an entitlement server. You can use subscription-manager to register.\n\nLoading mirror speeds from cached hostfile\n * base: mirror.anigil.com\n * centos-sclo-rh: mirror.kakao.com\n * epel: ftp.iij.ad.jp\n * extras: mirror.anigil.com\n * updates: mirror.kakao.com\nResolving Dependencies\n--> Running transaction check\n---> Package byacc.x86_64 0:1.9.20130304-3.el7 will be installed\n---> Package cscope.x86_64 0:15.8-10.el7 will be installed\n---> Package ctags.x86_64 0:5.8-13.el7 will be installed\n---> Package diffstat.x86_64 0:1.57-4.el7 will be installed\n---> Package doxygen.x86_64 1:1.8.5-4.el7 will be installed\n---> Package elfutils.x86_64 0:0.176-5.el7 will be installed\n---> Package gcc.x86_64 0:4.8.5-44.el7 will be installed\n--> Processing Dependency: glibc-devel >= 2.2.90-12 for package: gcc-4.8.5-44.el7.x86_64\n---> Package gcc-c++.x86_64 0:4.8.5-44.el7 will be installed\n---> Package gcc-gfortran.x86_64 0:4.8.5-44.el7 will be installed\n--> Processing Dependency: libquadmath-devel = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libquadmath = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libgfortran = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libgfortran.so.3()(64bit) for package: gcc-gfortran-4.8.5-44.el7.x86_64\n---> Package indent.x86_64 0:2.2.11-13.el7 will be installed\n---> Package intltool.noarch 0:0.50.2-7.el7 will be installed\n--> Processing Dependency: perl(XML::Parser) for package: intltool-0.50.2-7.el7.noarch\n---> Package libtool.x86_64 0:2.4.2-22.el7_3 will be installed\n---> Package patchutils.x86_64 0:0.3.3-5.el7_9 will be installed\n---> Package rcs.x86_64 0:5.9.0-7.el7 will be installed\n---> Package rpm-build.x86_64 0:4.11.3-48.el7_9 will be installed\n--> Processing Dependency: /usr/bin/gdb-add-index for package: rpm-build-4.11.3-48.el7_9.x86_64\n---> Package rpm-sign.x86_64 0:4.11.3-48.el7_9 will be installed\n---> Package swig.x86_64 0:2.0.10-5.el7 will be installed\n---> Package systemtap.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: systemtap-devel = 4.0-13.el7 for package: systemtap-4.0-13.el7.x86_64\n--> Processing Dependency: systemtap-client = 4.0-13.el7 for package: systemtap-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package gdb.x86_64 0:7.6.1-120.el7 will be installed\n---> Package glibc-devel.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: glibc-headers = 2.17-325.el7_9 for package: glibc-devel-2.17-325.el7_9.x86_64\n--> Processing Dependency: glibc-headers for package: glibc-devel-2.17-325.el7_9.x86_64\n---> Package libgfortran.x86_64 0:4.8.5-44.el7 will be installed\n---> Package libquadmath.x86_64 0:4.8.5-44.el7 will be installed\n---> Package libquadmath-devel.x86_64 0:4.8.5-44.el7 will be installed\n---> Package perl-XML-Parser.x86_64 0:2.41-10.el7 will be installed\n---> Package systemtap-client.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: systemtap-runtime = 4.0-13.el7 for package: systemtap-client-4.0-13.el7.x86_64\n--> Processing Dependency: mokutil for package: systemtap-client-4.0-13.el7.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package mokutil.x86_64 0:15-8.el7 will be installed\n--> Processing Dependency: libefivar.so.1(libefivar.so.0)(64bit) for package: mokutil-15-8.el7.x86_64\n--> Processing Dependency: libefivar.so.1(LIBEFIVAR_0.24)(64bit) for package: mokutil-15-8.el7.x86_64\n--> Processing Dependency: libefivar.so.1()(64bit) for package: mokutil-15-8.el7.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n---> Package systemtap-runtime.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: libsymtabAPI.so.9.3()(64bit) for package: systemtap-runtime-4.0-13.el7.x86_64\n--> Processing Dependency: libdyninstAPI.so.9.3()(64bit) for package: systemtap-runtime-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package dyninst.x86_64 0:9.3.1-3.el7 will be installed\n--> Processing Dependency: libdwarf.so.0()(64bit) for package: dyninst-9.3.1-3.el7.x86_64\n---> Package efivar-libs.x86_64 0:36-12.el7 will be installed\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package libdwarf.x86_64 0:20130207-4.el7 will be installed\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Finished Dependency Resolution\n You could try using --skip-broken to work around the problem\n You could try running: rpm -Va --nofiles --nodigest\n"], "results_file": "/root/.ansible_async/935545086840.20365", "started": 1, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2022-03-31 22:35:54,502 p=22893 u=moonja n=ansible | TASK [patroni-postgres : Install the perl package for VMware Postgres Dependencies] **********************
2022-03-31 22:36:00,838 p=22893 u=moonja n=ansible | ok: [co7-node01] => (item=perl)
2022-03-31 22:36:07,013 p=22893 u=moonja n=ansible | ok: [co7-node01] => (item=readline-devel)
2022-03-31 22:36:13,310 p=22893 u=moonja n=ansible | ok: [co7-node01] => (item=libicu-devel)
2022-03-31 22:36:19,604 p=22893 u=moonja n=ansible | ok: [co7-node01] => (item=perl-libs)
2022-03-31 22:36:19,620 p=22893 u=moonja n=ansible | TASK [patroni-postgres : Copy the vmwawre-postgres rpm file to all hosts in cluster] *********************
2022-03-31 22:36:21,162 p=22893 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:36:21,174 p=22893 u=moonja n=ansible | TASK [patroni-postgres : Install VMware Postgres on all hosts as root] ***********************************
2022-03-31 22:36:43,467 p=22893 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:36:43,476 p=22893 u=moonja n=ansible | TASK [patroni-postgres : Install the etcd and Patroni prerequisites on all three nodes] ******************
2022-03-31 22:36:50,032 p=22893 u=moonja n=ansible | ok: [co7-node01] => (item=python3)
2022-03-31 22:36:56,321 p=22893 u=moonja n=ansible | ok: [co7-node01] => (item=python3-devel)
2022-03-31 22:37:02,750 p=22893 u=moonja n=ansible | changed: [co7-node01] => (item=gcc)
2022-03-31 22:37:08,991 p=22893 u=moonja n=ansible | ok: [co7-node01] => (item=etcd)
2022-03-31 22:37:20,649 p=22893 u=moonja n=ansible | changed: [co7-node01] => (item=python-psycopg2)
2022-03-31 22:37:26,962 p=22893 u=moonja n=ansible | ok: [co7-node01] => (item=python3-pip)
2022-03-31 22:37:33,424 p=22893 u=moonja n=ansible | ok: [co7-node01] => (item=python34-setuptools)
2022-03-31 22:37:39,708 p=22893 u=moonja n=ansible | ok: [co7-node01] => (item=yamllint)
2022-03-31 22:37:46,053 p=22893 u=moonja n=ansible | ok: [co7-node01] => (item=daemonize)
2022-03-31 22:37:46,068 p=22893 u=moonja n=ansible | TASK [patroni-postgres : Install the dependencies of etcd  on all three nodes] ***************************
2022-03-31 22:37:47,044 p=22893 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:37:47,056 p=22893 u=moonja n=ansible | TASK [patroni-postgres : Install setuptools rust on all three nodes] *************************************
2022-03-31 22:37:53,419 p=22893 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:37:53,427 p=22893 u=moonja n=ansible | TASK [patroni-postgres : Install typing pip module on all three nodes] ***********************************
2022-03-31 22:37:59,882 p=22893 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:37:59,891 p=22893 u=moonja n=ansible | TASK [patroni-postgres : Upgrade pip3 version] ***********************************************************
2022-03-31 22:38:06,360 p=22893 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:38:06,370 p=22893 u=moonja n=ansible | TASK [patroni-postgres : Install wheel module on all three nodes] ****************************************
2022-03-31 22:38:13,516 p=22893 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:38:13,526 p=22893 u=moonja n=ansible | TASK [patroni-postgres : debug] **************************************************************************
2022-03-31 22:38:13,585 p=22893 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "503590829696.6294",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; export PATH=$PATH:/usr/local/bin && pip3 install wheel )",
        "delta": "0:00:02.886788",
        "end": "2022-03-31 22:38:10.081968",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/503590829696.6294",
        "start": "2022-03-31 22:38:07.195180",
        "started": 1,
        "stderr": "  WARNING: The script wheel is installed in '/var/lib/pgsql/.local/bin' which is not on PATH.\n  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.",
        "stderr_lines": [
            "  WARNING: The script wheel is installed in '/var/lib/pgsql/.local/bin' which is not on PATH.",
            "  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location."
        ],
        "stdout": "Defaulting to user installation because normal site-packages is not writeable\nCollecting wheel\n  Using cached wheel-0.37.1-py2.py3-none-any.whl (35 kB)\nInstalling collected packages: wheel\nSuccessfully installed wheel-0.37.1",
        "stdout_lines": [
            "Defaulting to user installation because normal site-packages is not writeable",
            "Collecting wheel",
            "  Using cached wheel-0.37.1-py2.py3-none-any.whl (35 kB)",
            "Installing collected packages: wheel",
            "Successfully installed wheel-0.37.1"
        ]
    }
}
2022-03-31 22:38:13,599 p=22893 u=moonja n=ansible | TASK [patroni-postgres : Install pip modules of Patroni prerequisites on all three nodes] ****************
2022-03-31 22:38:20,078 p=22893 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:38:20,089 p=22893 u=moonja n=ansible | TASK [patroni-postgres : debug] **************************************************************************
2022-03-31 22:38:20,138 p=22893 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "33575863783.6672",
        "changed": true,
        "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 install -r /var/lib/pgsql/requirements.txt )",
        "delta": "0:00:00.702883",
        "end": "2022-03-31 22:38:15.039181",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/33575863783.6672",
        "start": "2022-03-31 22:38:14.336298",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "Defaulting to user installation because normal site-packages is not writeable\nRequirement already satisfied: urllib3!=1.21,>=1.19.1 in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 1)) (1.26.9)\nRequirement already satisfied: boto in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 2)) (2.49.0)\nRequirement already satisfied: PyYAML in /usr/lib64/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 3)) (3.13)\nRequirement already satisfied: requests in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 4)) (2.27.1)\nRequirement already satisfied: six>=1.7 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 5)) (1.16.0)\nRequirement already satisfied: kazoo>=1.3.1 in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 6)) (2.8.0)\nRequirement already satisfied: python-etcd<0.5,>=0.4.3 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 7)) (0.4.5)\nRequirement already satisfied: python-consul>=0.7.0 in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 8)) (1.1.0)\nRequirement already satisfied: click>=4.1 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 9)) (8.0.1)\nRequirement already satisfied: prettytable>=0.7 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 10)) (2.2.0)\nRequirement already satisfied: tzlocal in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 11)) (4.1)\nRequirement already satisfied: python-dateutil in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 12)) (2.8.2)\nRequirement already satisfied: psutil>=2.0.0 in /usr/local/lib64/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 13)) (5.8.0)\nRequirement already satisfied: cdiff in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 14)) (1.0)\nRequirement already satisfied: kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0 in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 15)) (7.0.0)\nRequirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.6/site-packages (from requests->-r /var/lib/pgsql/requirements.txt (line 4)) (3.2)\nRequirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.6/site-packages (from requests->-r /var/lib/pgsql/requirements.txt (line 4)) (2021.5.30)\nRequirement already satisfied: charset-normalizer~=2.0.0 in /usr/local/lib/python3.6/site-packages (from requests->-r /var/lib/pgsql/requirements.txt (line 4)) (2.0.4)\nRequirement already satisfied: dnspython>=1.13.0 in /usr/local/lib/python3.6/site-packages (from python-etcd<0.5,>=0.4.3->-r /var/lib/pgsql/requirements.txt (line 7)) (2.1.0)\nRequirement already satisfied: importlib-metadata in /usr/local/lib/python3.6/site-packages (from click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (4.8.1)\nRequirement already satisfied: wcwidth in /usr/local/lib/python3.6/site-packages (from prettytable>=0.7->-r /var/lib/pgsql/requirements.txt (line 10)) (0.2.5)\nRequirement already satisfied: pytz-deprecation-shim in /var/lib/pgsql/.local/lib/python3.6/site-packages (from tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (0.1.0.post0)\nRequirement already satisfied: backports.zoneinfo in /usr/local/lib64/python3.6/site-packages (from tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (0.2.1)\nRequirement already satisfied: setuptools>=21.0.0 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (57.1.0)\nRequirement already satisfied: requests-oauthlib in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.3.0)\nRequirement already satisfied: google-auth>=1.0.1 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (2.0.2)\nRequirement already satisfied: adal>=1.0.2 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.2.7)\nRequirement already satisfied: websocket-client!=0.40.0,!=0.41.*,!=0.42.*,>=0.32.0 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.2.1)\nRequirement already satisfied: cryptography>=1.1.0 in /usr/local/lib64/python3.6/site-packages (from adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (3.4.8)\nRequirement already satisfied: PyJWT<3,>=1.0.0 in /usr/local/lib/python3.6/site-packages (from adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (2.1.0)\nRequirement already satisfied: rsa<5,>=3.1.4 in /usr/local/lib/python3.6/site-packages (from google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (4.7.2)\nRequirement already satisfied: cachetools<5.0,>=2.0.0 in /usr/local/lib/python3.6/site-packages (from google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (4.2.2)\nRequirement already satisfied: pyasn1-modules>=0.2.1 in /usr/local/lib/python3.6/site-packages (from google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (0.2.8)\nRequirement already satisfied: importlib-resources in /usr/local/lib/python3.6/site-packages (from backports.zoneinfo->tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (5.2.2)\nRequirement already satisfied: typing-extensions>=3.6.4 in /usr/local/lib/python3.6/site-packages (from importlib-metadata->click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (3.10.0.2)\nRequirement already satisfied: zipp>=0.5 in /usr/local/lib/python3.6/site-packages (from importlib-metadata->click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (3.5.0)\nRequirement already satisfied: tzdata in /var/lib/pgsql/.local/lib/python3.6/site-packages (from pytz-deprecation-shim->tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (2022.1)\nRequirement already satisfied: oauthlib>=3.0.0 in /usr/local/lib/python3.6/site-packages (from requests-oauthlib->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (3.1.1)\nRequirement already satisfied: cffi>=1.12 in /usr/local/lib64/python3.6/site-packages (from cryptography>=1.1.0->adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.14.6)\nRequirement already satisfied: pyasn1<0.5.0,>=0.4.6 in /usr/local/lib/python3.6/site-packages (from pyasn1-modules>=0.2.1->google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (0.4.8)\nRequirement already satisfied: pycparser in /usr/local/lib/python3.6/site-packages (from cffi>=1.12->cryptography>=1.1.0->adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (2.20)",
        "stdout_lines": [
            "Defaulting to user installation because normal site-packages is not writeable",
            "Requirement already satisfied: urllib3!=1.21,>=1.19.1 in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 1)) (1.26.9)",
            "Requirement already satisfied: boto in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 2)) (2.49.0)",
            "Requirement already satisfied: PyYAML in /usr/lib64/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 3)) (3.13)",
            "Requirement already satisfied: requests in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 4)) (2.27.1)",
            "Requirement already satisfied: six>=1.7 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 5)) (1.16.0)",
            "Requirement already satisfied: kazoo>=1.3.1 in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 6)) (2.8.0)",
            "Requirement already satisfied: python-etcd<0.5,>=0.4.3 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 7)) (0.4.5)",
            "Requirement already satisfied: python-consul>=0.7.0 in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 8)) (1.1.0)",
            "Requirement already satisfied: click>=4.1 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 9)) (8.0.1)",
            "Requirement already satisfied: prettytable>=0.7 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 10)) (2.2.0)",
            "Requirement already satisfied: tzlocal in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 11)) (4.1)",
            "Requirement already satisfied: python-dateutil in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 12)) (2.8.2)",
            "Requirement already satisfied: psutil>=2.0.0 in /usr/local/lib64/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 13)) (5.8.0)",
            "Requirement already satisfied: cdiff in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 14)) (1.0)",
            "Requirement already satisfied: kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0 in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 15)) (7.0.0)",
            "Requirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.6/site-packages (from requests->-r /var/lib/pgsql/requirements.txt (line 4)) (3.2)",
            "Requirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.6/site-packages (from requests->-r /var/lib/pgsql/requirements.txt (line 4)) (2021.5.30)",
            "Requirement already satisfied: charset-normalizer~=2.0.0 in /usr/local/lib/python3.6/site-packages (from requests->-r /var/lib/pgsql/requirements.txt (line 4)) (2.0.4)",
            "Requirement already satisfied: dnspython>=1.13.0 in /usr/local/lib/python3.6/site-packages (from python-etcd<0.5,>=0.4.3->-r /var/lib/pgsql/requirements.txt (line 7)) (2.1.0)",
            "Requirement already satisfied: importlib-metadata in /usr/local/lib/python3.6/site-packages (from click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (4.8.1)",
            "Requirement already satisfied: wcwidth in /usr/local/lib/python3.6/site-packages (from prettytable>=0.7->-r /var/lib/pgsql/requirements.txt (line 10)) (0.2.5)",
            "Requirement already satisfied: pytz-deprecation-shim in /var/lib/pgsql/.local/lib/python3.6/site-packages (from tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (0.1.0.post0)",
            "Requirement already satisfied: backports.zoneinfo in /usr/local/lib64/python3.6/site-packages (from tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (0.2.1)",
            "Requirement already satisfied: setuptools>=21.0.0 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (57.1.0)",
            "Requirement already satisfied: requests-oauthlib in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.3.0)",
            "Requirement already satisfied: google-auth>=1.0.1 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (2.0.2)",
            "Requirement already satisfied: adal>=1.0.2 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.2.7)",
            "Requirement already satisfied: websocket-client!=0.40.0,!=0.41.*,!=0.42.*,>=0.32.0 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.2.1)",
            "Requirement already satisfied: cryptography>=1.1.0 in /usr/local/lib64/python3.6/site-packages (from adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (3.4.8)",
            "Requirement already satisfied: PyJWT<3,>=1.0.0 in /usr/local/lib/python3.6/site-packages (from adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (2.1.0)",
            "Requirement already satisfied: rsa<5,>=3.1.4 in /usr/local/lib/python3.6/site-packages (from google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (4.7.2)",
            "Requirement already satisfied: cachetools<5.0,>=2.0.0 in /usr/local/lib/python3.6/site-packages (from google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (4.2.2)",
            "Requirement already satisfied: pyasn1-modules>=0.2.1 in /usr/local/lib/python3.6/site-packages (from google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (0.2.8)",
            "Requirement already satisfied: importlib-resources in /usr/local/lib/python3.6/site-packages (from backports.zoneinfo->tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (5.2.2)",
            "Requirement already satisfied: typing-extensions>=3.6.4 in /usr/local/lib/python3.6/site-packages (from importlib-metadata->click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (3.10.0.2)",
            "Requirement already satisfied: zipp>=0.5 in /usr/local/lib/python3.6/site-packages (from importlib-metadata->click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (3.5.0)",
            "Requirement already satisfied: tzdata in /var/lib/pgsql/.local/lib/python3.6/site-packages (from pytz-deprecation-shim->tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (2022.1)",
            "Requirement already satisfied: oauthlib>=3.0.0 in /usr/local/lib/python3.6/site-packages (from requests-oauthlib->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (3.1.1)",
            "Requirement already satisfied: cffi>=1.12 in /usr/local/lib64/python3.6/site-packages (from cryptography>=1.1.0->adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.14.6)",
            "Requirement already satisfied: pyasn1<0.5.0,>=0.4.6 in /usr/local/lib/python3.6/site-packages (from pyasn1-modules>=0.2.1->google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (0.4.8)",
            "Requirement already satisfied: pycparser in /usr/local/lib/python3.6/site-packages (from cffi>=1.12->cryptography>=1.1.0->adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (2.20)"
        ]
    }
}
2022-03-31 22:38:20,151 p=22893 u=moonja n=ansible | TASK [patroni-postgres : Iinstall wheel module on all three nodes] ***************************************
2022-03-31 22:38:26,461 p=22893 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:38:26,470 p=22893 u=moonja n=ansible | TASK [patroni-postgres : debug] **************************************************************************
2022-03-31 22:38:26,493 p=22893 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "313604751463.7058",
        "changed": true,
        "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 install wheel )",
        "delta": "0:00:04.355674",
        "end": "2022-03-31 22:38:25.230113",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/root/.ansible_async/313604751463.7058",
        "start": "2022-03-31 22:38:20.874439",
        "started": 1,
        "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv",
        "stderr_lines": [
            "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"
        ],
        "stdout": "Collecting wheel\n  Using cached wheel-0.37.1-py2.py3-none-any.whl (35 kB)\nInstalling collected packages: wheel\nSuccessfully installed wheel-0.37.1",
        "stdout_lines": [
            "Collecting wheel",
            "  Using cached wheel-0.37.1-py2.py3-none-any.whl (35 kB)",
            "Installing collected packages: wheel",
            "Successfully installed wheel-0.37.1"
        ]
    }
}
2022-03-31 22:38:26,502 p=22893 u=moonja n=ansible | TASK [patroni-postgres : Install psycopg2-binary module on all three nodes] ******************************
2022-03-31 22:38:32,949 p=22893 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:38:32,957 p=22893 u=moonja n=ansible | TASK [patroni-postgres : debug] **************************************************************************
2022-03-31 22:38:32,985 p=22893 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "926151976100.7437",
        "changed": true,
        "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 install psycopg2-binary )",
        "delta": "0:00:04.721145",
        "end": "2022-03-31 22:38:31.958934",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/root/.ansible_async/926151976100.7437",
        "start": "2022-03-31 22:38:27.237789",
        "started": 1,
        "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv",
        "stderr_lines": [
            "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"
        ],
        "stdout": "Collecting psycopg2-binary\n  Using cached psycopg2_binary-2.9.3-cp36-cp36m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.0 MB)\nInstalling collected packages: psycopg2-binary\nSuccessfully installed psycopg2-binary-2.9.3",
        "stdout_lines": [
            "Collecting psycopg2-binary",
            "  Using cached psycopg2_binary-2.9.3-cp36-cp36m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.0 MB)",
            "Installing collected packages: psycopg2-binary",
            "Successfully installed psycopg2-binary-2.9.3"
        ]
    }
}
2022-03-31 22:38:32,994 p=22893 u=moonja n=ansible | TASK [patroni-postgres : Install patroni modules on all three nodes for vmware-postgres 13.x version] ****
2022-03-31 22:38:45,201 p=22893 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:38:45,210 p=22893 u=moonja n=ansible | TASK [patroni-postgres : Change the permissions on the /tmp directory] ***********************************
2022-03-31 22:38:45,847 p=22893 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:38:45,857 p=22893 u=moonja n=ansible | TASK [patroni-postgres : Create the etcd.yml configuration file for all nodes] ***************************
2022-03-31 22:38:46,127 p=22893 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: ansible.errors.AnsibleUndefinedVariable: 'ansible.vars.hostvars.HostVarsVars object' has no attribute 'ansible_eth2'
2022-03-31 22:38:46,128 p=22893 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'ansible.vars.hostvars.HostVarsVars object' has no attribute 'ansible_eth2'"}
2022-03-31 22:38:46,129 p=22893 u=moonja n=ansible | PLAY RECAP ***********************************************************************************************
2022-03-31 22:38:46,130 p=22893 u=moonja n=ansible | co7-node01                 : ok=24   changed=14   unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2022-03-31 22:38:46,130 p=22893 u=moonja n=ansible | co7-node02                 : ok=5    changed=2    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2022-03-31 22:38:46,130 p=22893 u=moonja n=ansible | co7-node03                 : ok=5    changed=2    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2022-03-31 22:45:14,964 p=27217 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This 
feature will be removed from ansible-core in version 2.14. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2022-03-31 22:45:14,992 p=27217 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-03-31 22:45:15,280 p=27217 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will
 be removed in version 2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False 
in ansible.cfg.
2022-03-31 22:45:15,340 p=27217 u=moonja n=ansible | PLAY [all] ***********************************************************************************************
2022-03-31 22:45:15,372 p=27217 u=moonja n=ansible | TASK [Gathering Facts] ***********************************************************************************
2022-03-31 22:45:17,597 p=27217 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 22:45:17,634 p=27217 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:45:17,674 p=27217 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 22:45:17,691 p=27217 u=moonja n=ansible | TASK [patroni-postgres : Stop and disable firewalld] *****************************************************
2022-03-31 22:45:18,582 p=27217 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:45:18,604 p=27217 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 22:45:18,608 p=27217 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 22:45:18,619 p=27217 u=moonja n=ansible | TASK [patroni-postgres : Flush iptables rules] ***********************************************************
2022-03-31 22:45:19,328 p=27217 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:45:19,329 p=27217 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:45:19,329 p=27217 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:45:19,340 p=27217 u=moonja n=ansible | TASK [patroni-postgres : List iptables rules] ************************************************************
2022-03-31 22:45:19,845 p=27217 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:45:19,851 p=27217 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:45:19,860 p=27217 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:45:19,874 p=27217 u=moonja n=ansible | TASK [patroni-postgres : debug] **************************************************************************
2022-03-31 22:45:19,911 p=27217 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": "Chain INPUT (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain FORWARD (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain OUTPUT (policy ACCEPT)\ntarget     prot opt source               destination         "
}
2022-03-31 22:45:19,913 p=27217 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": "Chain INPUT (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain FORWARD (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain OUTPUT (policy ACCEPT)\ntarget     prot opt source               destination         "
}
2022-03-31 22:45:19,924 p=27217 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": "Chain INPUT (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain FORWARD (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain OUTPUT (policy ACCEPT)\ntarget     prot opt source               destination         "
}
2022-03-31 22:45:19,936 p=27217 u=moonja n=ansible | TASK [patroni-postgres : Install the 'Development tools' package group for VMware Postgres Dependencies] ***
2022-03-31 22:45:26,835 p=27217 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:45:32,207 p=27217 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"ansible_job_id": "70237778175.21557", "changed": false, "changes": {"installed": ["@Development tools"]}, "finished": 1, "msg": "There are unfinished transactions remaining. You might consider running yum-complete-transaction, or \"yum-complete-transaction --cleanup-only\" and \"yum history redo last\", first to finish them. If those don't work you'll have to try removing/installing packages by hand (maybe package-cleanup can help).\nError: Package: glibc-headers-2.17-325.el7_9.x86_64 (updates)\n           Requires: kernel-headers\nError: Package: systemtap-devel-4.0-13.el7.x86_64 (base)\n           Requires: kernel-devel-uname-r\nError: Package: glibc-headers-2.17-325.el7_9.x86_64 (updates)\n           Requires: kernel-headers >= 2.2.1\n", "rc": 1, "results": ["Loaded plugins: fastestmirror, product-id, search-disabled-repos, subscription-\n              : manager, versionlock\n\nThis system is not registered with an entitlement server. You can use subscription-manager to register.\n\nLoading mirror speeds from cached hostfile\n * base: mirror.anigil.com\n * centos-sclo-rh: mirror.kakao.com\n * epel: ftp.iij.ad.jp\n * extras: mirror.anigil.com\n * updates: mirror.kakao.com\nResolving Dependencies\n--> Running transaction check\n---> Package byacc.x86_64 0:1.9.20130304-3.el7 will be installed\n---> Package cscope.x86_64 0:15.8-10.el7 will be installed\n---> Package ctags.x86_64 0:5.8-13.el7 will be installed\n---> Package diffstat.x86_64 0:1.57-4.el7 will be installed\n---> Package doxygen.x86_64 1:1.8.5-4.el7 will be installed\n---> Package elfutils.x86_64 0:0.176-5.el7 will be installed\n---> Package gcc.x86_64 0:4.8.5-44.el7 will be installed\n--> Processing Dependency: glibc-devel >= 2.2.90-12 for package: gcc-4.8.5-44.el7.x86_64\n---> Package gcc-c++.x86_64 0:4.8.5-44.el7 will be installed\n---> Package gcc-gfortran.x86_64 0:4.8.5-44.el7 will be installed\n--> Processing Dependency: libquadmath-devel = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libquadmath = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libgfortran = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libgfortran.so.3()(64bit) for package: gcc-gfortran-4.8.5-44.el7.x86_64\n---> Package indent.x86_64 0:2.2.11-13.el7 will be installed\n---> Package intltool.noarch 0:0.50.2-7.el7 will be installed\n--> Processing Dependency: perl(XML::Parser) for package: intltool-0.50.2-7.el7.noarch\n---> Package libtool.x86_64 0:2.4.2-22.el7_3 will be installed\n---> Package patchutils.x86_64 0:0.3.3-5.el7_9 will be installed\n---> Package rcs.x86_64 0:5.9.0-7.el7 will be installed\n---> Package rpm-build.x86_64 0:4.11.3-48.el7_9 will be installed\n--> Processing Dependency: /usr/bin/gdb-add-index for package: rpm-build-4.11.3-48.el7_9.x86_64\n---> Package rpm-sign.x86_64 0:4.11.3-48.el7_9 will be installed\n---> Package swig.x86_64 0:2.0.10-5.el7 will be installed\n---> Package systemtap.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: systemtap-devel = 4.0-13.el7 for package: systemtap-4.0-13.el7.x86_64\n--> Processing Dependency: systemtap-client = 4.0-13.el7 for package: systemtap-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package gdb.x86_64 0:7.6.1-120.el7 will be installed\n---> Package glibc-devel.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: glibc-headers = 2.17-325.el7_9 for package: glibc-devel-2.17-325.el7_9.x86_64\n--> Processing Dependency: glibc-headers for package: glibc-devel-2.17-325.el7_9.x86_64\n---> Package libgfortran.x86_64 0:4.8.5-44.el7 will be installed\n---> Package libquadmath.x86_64 0:4.8.5-44.el7 will be installed\n---> Package libquadmath-devel.x86_64 0:4.8.5-44.el7 will be installed\n---> Package perl-XML-Parser.x86_64 0:2.41-10.el7 will be installed\n---> Package systemtap-client.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: systemtap-runtime = 4.0-13.el7 for package: systemtap-client-4.0-13.el7.x86_64\n--> Processing Dependency: mokutil for package: systemtap-client-4.0-13.el7.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package mokutil.x86_64 0:15-8.el7 will be installed\n--> Processing Dependency: libefivar.so.1(libefivar.so.0)(64bit) for package: mokutil-15-8.el7.x86_64\n--> Processing Dependency: libefivar.so.1(LIBEFIVAR_0.24)(64bit) for package: mokutil-15-8.el7.x86_64\n--> Processing Dependency: libefivar.so.1()(64bit) for package: mokutil-15-8.el7.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n---> Package systemtap-runtime.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: libsymtabAPI.so.9.3()(64bit) for package: systemtap-runtime-4.0-13.el7.x86_64\n--> Processing Dependency: libdyninstAPI.so.9.3()(64bit) for package: systemtap-runtime-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package dyninst.x86_64 0:9.3.1-3.el7 will be installed\n--> Processing Dependency: libdwarf.so.0()(64bit) for package: dyninst-9.3.1-3.el7.x86_64\n---> Package efivar-libs.x86_64 0:36-12.el7 will be installed\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package libdwarf.x86_64 0:20130207-4.el7 will be installed\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Finished Dependency Resolution\n You could try using --skip-broken to work around the problem\n You could try running: rpm -Va --nofiles --nodigest\n"], "results_file": "/root/.ansible_async/70237778175.21557", "started": 1, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2022-03-31 22:45:32,209 p=27217 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"ansible_job_id": "599714944193.21483", "changed": false, "changes": {"installed": ["@Development tools"]}, "finished": 1, "msg": "There are unfinished transactions remaining. You might consider running yum-complete-transaction, or \"yum-complete-transaction --cleanup-only\" and \"yum history redo last\", first to finish them. If those don't work you'll have to try removing/installing packages by hand (maybe package-cleanup can help).\nError: Package: glibc-headers-2.17-325.el7_9.x86_64 (updates)\n           Requires: kernel-headers\nError: Package: systemtap-devel-4.0-13.el7.x86_64 (base)\n           Requires: kernel-devel-uname-r\nError: Package: glibc-headers-2.17-325.el7_9.x86_64 (updates)\n           Requires: kernel-headers >= 2.2.1\n", "rc": 1, "results": ["Loaded plugins: fastestmirror, product-id, search-disabled-repos, subscription-\n              : manager, versionlock\n\nThis system is not registered with an entitlement server. You can use subscription-manager to register.\n\nLoading mirror speeds from cached hostfile\n * base: ftp.kaist.ac.kr\n * centos-sclo-rh: ftp.kaist.ac.kr\n * epel: ftp.jaist.ac.jp\n * extras: ftp.kaist.ac.kr\n * updates: ftp.tsukuba.wide.ad.jp\nResolving Dependencies\n--> Running transaction check\n---> Package byacc.x86_64 0:1.9.20130304-3.el7 will be installed\n---> Package cscope.x86_64 0:15.8-10.el7 will be installed\n---> Package ctags.x86_64 0:5.8-13.el7 will be installed\n---> Package diffstat.x86_64 0:1.57-4.el7 will be installed\n---> Package doxygen.x86_64 1:1.8.5-4.el7 will be installed\n---> Package elfutils.x86_64 0:0.176-5.el7 will be installed\n---> Package gcc.x86_64 0:4.8.5-44.el7 will be installed\n--> Processing Dependency: glibc-devel >= 2.2.90-12 for package: gcc-4.8.5-44.el7.x86_64\n---> Package gcc-c++.x86_64 0:4.8.5-44.el7 will be installed\n---> Package gcc-gfortran.x86_64 0:4.8.5-44.el7 will be installed\n--> Processing Dependency: libquadmath-devel = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libquadmath = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libgfortran = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libgfortran.so.3()(64bit) for package: gcc-gfortran-4.8.5-44.el7.x86_64\n---> Package indent.x86_64 0:2.2.11-13.el7 will be installed\n---> Package intltool.noarch 0:0.50.2-7.el7 will be installed\n--> Processing Dependency: perl(XML::Parser) for package: intltool-0.50.2-7.el7.noarch\n---> Package libtool.x86_64 0:2.4.2-22.el7_3 will be installed\n---> Package patchutils.x86_64 0:0.3.3-5.el7_9 will be installed\n---> Package rcs.x86_64 0:5.9.0-7.el7 will be installed\n---> Package rpm-build.x86_64 0:4.11.3-48.el7_9 will be installed\n--> Processing Dependency: /usr/bin/gdb-add-index for package: rpm-build-4.11.3-48.el7_9.x86_64\n---> Package rpm-sign.x86_64 0:4.11.3-48.el7_9 will be installed\n---> Package swig.x86_64 0:2.0.10-5.el7 will be installed\n---> Package systemtap.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: systemtap-devel = 4.0-13.el7 for package: systemtap-4.0-13.el7.x86_64\n--> Processing Dependency: systemtap-client = 4.0-13.el7 for package: systemtap-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package gdb.x86_64 0:7.6.1-120.el7 will be installed\n---> Package glibc-devel.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: glibc-headers = 2.17-325.el7_9 for package: glibc-devel-2.17-325.el7_9.x86_64\n--> Processing Dependency: glibc-headers for package: glibc-devel-2.17-325.el7_9.x86_64\n---> Package libgfortran.x86_64 0:4.8.5-44.el7 will be installed\n---> Package libquadmath.x86_64 0:4.8.5-44.el7 will be installed\n---> Package libquadmath-devel.x86_64 0:4.8.5-44.el7 will be installed\n---> Package perl-XML-Parser.x86_64 0:2.41-10.el7 will be installed\n---> Package systemtap-client.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: systemtap-runtime = 4.0-13.el7 for package: systemtap-client-4.0-13.el7.x86_64\n--> Processing Dependency: mokutil for package: systemtap-client-4.0-13.el7.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package mokutil.x86_64 0:15-8.el7 will be installed\n--> Processing Dependency: libefivar.so.1(libefivar.so.0)(64bit) for package: mokutil-15-8.el7.x86_64\n--> Processing Dependency: libefivar.so.1(LIBEFIVAR_0.24)(64bit) for package: mokutil-15-8.el7.x86_64\n--> Processing Dependency: libefivar.so.1()(64bit) for package: mokutil-15-8.el7.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n---> Package systemtap-runtime.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: libsymtabAPI.so.9.3()(64bit) for package: systemtap-runtime-4.0-13.el7.x86_64\n--> Processing Dependency: libdyninstAPI.so.9.3()(64bit) for package: systemtap-runtime-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package dyninst.x86_64 0:9.3.1-3.el7 will be installed\n--> Processing Dependency: libdwarf.so.0()(64bit) for package: dyninst-9.3.1-3.el7.x86_64\n--> Processing Dependency: libboost_date_time-mt.so.1.53.0()(64bit) for package: dyninst-9.3.1-3.el7.x86_64\n---> Package efivar-libs.x86_64 0:36-12.el7 will be installed\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package boost-date-time.x86_64 0:1.53.0-28.el7 will be installed\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package libdwarf.x86_64 0:20130207-4.el7 will be installed\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Finished Dependency Resolution\n You could try using --skip-broken to work around the problem\n You could try running: rpm -Va --nofiles --nodigest\n"], "results_file": "/root/.ansible_async/599714944193.21483", "started": 1, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2022-03-31 22:45:32,218 p=27217 u=moonja n=ansible | TASK [patroni-postgres : Install the perl package for VMware Postgres Dependencies] **********************
2022-03-31 22:45:38,753 p=27217 u=moonja n=ansible | ok: [co7-node01] => (item=perl)
2022-03-31 22:45:45,247 p=27217 u=moonja n=ansible | ok: [co7-node01] => (item=readline-devel)
2022-03-31 22:45:51,723 p=27217 u=moonja n=ansible | ok: [co7-node01] => (item=libicu-devel)
2022-03-31 22:45:58,312 p=27217 u=moonja n=ansible | ok: [co7-node01] => (item=perl-libs)
2022-03-31 22:45:58,327 p=27217 u=moonja n=ansible | TASK [patroni-postgres : Copy the vmwawre-postgres rpm file to all hosts in cluster] *********************
2022-03-31 22:45:59,882 p=27217 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:45:59,894 p=27217 u=moonja n=ansible | TASK [patroni-postgres : Install VMware Postgres on all hosts as root] ***********************************
2022-03-31 22:46:06,374 p=27217 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:46:06,383 p=27217 u=moonja n=ansible | TASK [patroni-postgres : Install the etcd and Patroni prerequisites on all three nodes] ******************
2022-03-31 22:46:12,924 p=27217 u=moonja n=ansible | ok: [co7-node01] => (item=python3)
2022-03-31 22:46:19,312 p=27217 u=moonja n=ansible | ok: [co7-node01] => (item=python3-devel)
2022-03-31 22:46:25,648 p=27217 u=moonja n=ansible | changed: [co7-node01] => (item=gcc)
2022-03-31 22:46:31,970 p=27217 u=moonja n=ansible | ok: [co7-node01] => (item=etcd)
2022-03-31 22:46:38,581 p=27217 u=moonja n=ansible | ok: [co7-node01] => (item=python-psycopg2)
2022-03-31 22:46:44,690 p=27217 u=moonja n=ansible | ok: [co7-node01] => (item=python3-pip)
2022-03-31 22:46:50,930 p=27217 u=moonja n=ansible | ok: [co7-node01] => (item=python34-setuptools)
2022-03-31 22:46:57,215 p=27217 u=moonja n=ansible | ok: [co7-node01] => (item=yamllint)
2022-03-31 22:47:03,530 p=27217 u=moonja n=ansible | ok: [co7-node01] => (item=daemonize)
2022-03-31 22:47:03,545 p=27217 u=moonja n=ansible | TASK [patroni-postgres : Install the dependencies of etcd  on all three nodes] ***************************
2022-03-31 22:47:04,392 p=27217 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:47:04,403 p=27217 u=moonja n=ansible | TASK [patroni-postgres : Install setuptools rust on all three nodes] *************************************
2022-03-31 22:47:10,683 p=27217 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:47:10,691 p=27217 u=moonja n=ansible | TASK [patroni-postgres : Install typing pip module on all three nodes] ***********************************
2022-03-31 22:47:17,051 p=27217 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:47:17,059 p=27217 u=moonja n=ansible | TASK [patroni-postgres : Upgrade pip3 version] ***********************************************************
2022-03-31 22:47:24,633 p=27217 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:47:24,643 p=27217 u=moonja n=ansible | TASK [patroni-postgres : Install wheel module on all three nodes] ****************************************
2022-03-31 22:47:31,030 p=27217 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:47:31,038 p=27217 u=moonja n=ansible | TASK [patroni-postgres : debug] **************************************************************************
2022-03-31 22:47:31,098 p=27217 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "225876974877.16429",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; export PATH=$PATH:/usr/local/bin && pip3 install wheel )",
        "delta": "0:00:00.581689",
        "end": "2022-03-31 22:47:26.098796",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/225876974877.16429",
        "start": "2022-03-31 22:47:25.517107",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "Defaulting to user installation because normal site-packages is not writeable\nRequirement already satisfied: wheel in ./.local/lib/python3.6/site-packages (0.37.1)",
        "stdout_lines": [
            "Defaulting to user installation because normal site-packages is not writeable",
            "Requirement already satisfied: wheel in ./.local/lib/python3.6/site-packages (0.37.1)"
        ]
    }
}
2022-03-31 22:47:31,109 p=27217 u=moonja n=ansible | TASK [patroni-postgres : Install pip modules of Patroni prerequisites on all three nodes] ****************
2022-03-31 22:47:37,421 p=27217 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:47:37,430 p=27217 u=moonja n=ansible | TASK [patroni-postgres : debug] **************************************************************************
2022-03-31 22:47:37,457 p=27217 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "175288886265.16807",
        "changed": true,
        "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 install -r /var/lib/pgsql/requirements.txt )",
        "delta": "0:00:00.692658",
        "end": "2022-03-31 22:47:32.682971",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/175288886265.16807",
        "start": "2022-03-31 22:47:31.990313",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "Defaulting to user installation because normal site-packages is not writeable\nRequirement already satisfied: urllib3!=1.21,>=1.19.1 in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 1)) (1.26.9)\nRequirement already satisfied: boto in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 2)) (2.49.0)\nRequirement already satisfied: PyYAML in /usr/lib64/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 3)) (3.13)\nRequirement already satisfied: requests in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 4)) (2.27.1)\nRequirement already satisfied: six>=1.7 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 5)) (1.16.0)\nRequirement already satisfied: kazoo>=1.3.1 in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 6)) (2.8.0)\nRequirement already satisfied: python-etcd<0.5,>=0.4.3 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 7)) (0.4.5)\nRequirement already satisfied: python-consul>=0.7.0 in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 8)) (1.1.0)\nRequirement already satisfied: click>=4.1 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 9)) (8.0.1)\nRequirement already satisfied: prettytable>=0.7 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 10)) (2.2.0)\nRequirement already satisfied: tzlocal in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 11)) (4.1)\nRequirement already satisfied: python-dateutil in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 12)) (2.8.2)\nRequirement already satisfied: psutil>=2.0.0 in /usr/local/lib64/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 13)) (5.8.0)\nRequirement already satisfied: cdiff in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 14)) (1.0)\nRequirement already satisfied: kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0 in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 15)) (7.0.0)\nRequirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.6/site-packages (from requests->-r /var/lib/pgsql/requirements.txt (line 4)) (3.2)\nRequirement already satisfied: charset-normalizer~=2.0.0 in /usr/local/lib/python3.6/site-packages (from requests->-r /var/lib/pgsql/requirements.txt (line 4)) (2.0.4)\nRequirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.6/site-packages (from requests->-r /var/lib/pgsql/requirements.txt (line 4)) (2021.5.30)\nRequirement already satisfied: dnspython>=1.13.0 in /usr/local/lib/python3.6/site-packages (from python-etcd<0.5,>=0.4.3->-r /var/lib/pgsql/requirements.txt (line 7)) (2.1.0)\nRequirement already satisfied: importlib-metadata in /usr/local/lib/python3.6/site-packages (from click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (4.8.1)\nRequirement already satisfied: wcwidth in /usr/local/lib/python3.6/site-packages (from prettytable>=0.7->-r /var/lib/pgsql/requirements.txt (line 10)) (0.2.5)\nRequirement already satisfied: backports.zoneinfo in /usr/local/lib64/python3.6/site-packages (from tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (0.2.1)\nRequirement already satisfied: pytz-deprecation-shim in /var/lib/pgsql/.local/lib/python3.6/site-packages (from tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (0.1.0.post0)\nRequirement already satisfied: adal>=1.0.2 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.2.7)\nRequirement already satisfied: google-auth>=1.0.1 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (2.0.2)\nRequirement already satisfied: websocket-client!=0.40.0,!=0.41.*,!=0.42.*,>=0.32.0 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.2.1)\nRequirement already satisfied: requests-oauthlib in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.3.0)\nRequirement already satisfied: setuptools>=21.0.0 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (57.1.0)\nRequirement already satisfied: PyJWT<3,>=1.0.0 in /usr/local/lib/python3.6/site-packages (from adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (2.1.0)\nRequirement already satisfied: cryptography>=1.1.0 in /usr/local/lib64/python3.6/site-packages (from adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (3.4.8)\nRequirement already satisfied: pyasn1-modules>=0.2.1 in /usr/local/lib/python3.6/site-packages (from google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (0.2.8)\nRequirement already satisfied: cachetools<5.0,>=2.0.0 in /usr/local/lib/python3.6/site-packages (from google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (4.2.2)\nRequirement already satisfied: rsa<5,>=3.1.4 in /usr/local/lib/python3.6/site-packages (from google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (4.7.2)\nRequirement already satisfied: importlib-resources in /usr/local/lib/python3.6/site-packages (from backports.zoneinfo->tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (5.2.2)\nRequirement already satisfied: typing-extensions>=3.6.4 in /usr/local/lib/python3.6/site-packages (from importlib-metadata->click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (3.10.0.2)\nRequirement already satisfied: zipp>=0.5 in /usr/local/lib/python3.6/site-packages (from importlib-metadata->click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (3.5.0)\nRequirement already satisfied: tzdata in /var/lib/pgsql/.local/lib/python3.6/site-packages (from pytz-deprecation-shim->tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (2022.1)\nRequirement already satisfied: oauthlib>=3.0.0 in /usr/local/lib/python3.6/site-packages (from requests-oauthlib->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (3.1.1)\nRequirement already satisfied: cffi>=1.12 in /usr/local/lib64/python3.6/site-packages (from cryptography>=1.1.0->adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.14.6)\nRequirement already satisfied: pyasn1<0.5.0,>=0.4.6 in /usr/local/lib/python3.6/site-packages (from pyasn1-modules>=0.2.1->google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (0.4.8)\nRequirement already satisfied: pycparser in /usr/local/lib/python3.6/site-packages (from cffi>=1.12->cryptography>=1.1.0->adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (2.20)",
        "stdout_lines": [
            "Defaulting to user installation because normal site-packages is not writeable",
            "Requirement already satisfied: urllib3!=1.21,>=1.19.1 in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 1)) (1.26.9)",
            "Requirement already satisfied: boto in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 2)) (2.49.0)",
            "Requirement already satisfied: PyYAML in /usr/lib64/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 3)) (3.13)",
            "Requirement already satisfied: requests in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 4)) (2.27.1)",
            "Requirement already satisfied: six>=1.7 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 5)) (1.16.0)",
            "Requirement already satisfied: kazoo>=1.3.1 in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 6)) (2.8.0)",
            "Requirement already satisfied: python-etcd<0.5,>=0.4.3 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 7)) (0.4.5)",
            "Requirement already satisfied: python-consul>=0.7.0 in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 8)) (1.1.0)",
            "Requirement already satisfied: click>=4.1 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 9)) (8.0.1)",
            "Requirement already satisfied: prettytable>=0.7 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 10)) (2.2.0)",
            "Requirement already satisfied: tzlocal in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 11)) (4.1)",
            "Requirement already satisfied: python-dateutil in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 12)) (2.8.2)",
            "Requirement already satisfied: psutil>=2.0.0 in /usr/local/lib64/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 13)) (5.8.0)",
            "Requirement already satisfied: cdiff in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 14)) (1.0)",
            "Requirement already satisfied: kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0 in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 15)) (7.0.0)",
            "Requirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.6/site-packages (from requests->-r /var/lib/pgsql/requirements.txt (line 4)) (3.2)",
            "Requirement already satisfied: charset-normalizer~=2.0.0 in /usr/local/lib/python3.6/site-packages (from requests->-r /var/lib/pgsql/requirements.txt (line 4)) (2.0.4)",
            "Requirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.6/site-packages (from requests->-r /var/lib/pgsql/requirements.txt (line 4)) (2021.5.30)",
            "Requirement already satisfied: dnspython>=1.13.0 in /usr/local/lib/python3.6/site-packages (from python-etcd<0.5,>=0.4.3->-r /var/lib/pgsql/requirements.txt (line 7)) (2.1.0)",
            "Requirement already satisfied: importlib-metadata in /usr/local/lib/python3.6/site-packages (from click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (4.8.1)",
            "Requirement already satisfied: wcwidth in /usr/local/lib/python3.6/site-packages (from prettytable>=0.7->-r /var/lib/pgsql/requirements.txt (line 10)) (0.2.5)",
            "Requirement already satisfied: backports.zoneinfo in /usr/local/lib64/python3.6/site-packages (from tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (0.2.1)",
            "Requirement already satisfied: pytz-deprecation-shim in /var/lib/pgsql/.local/lib/python3.6/site-packages (from tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (0.1.0.post0)",
            "Requirement already satisfied: adal>=1.0.2 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.2.7)",
            "Requirement already satisfied: google-auth>=1.0.1 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (2.0.2)",
            "Requirement already satisfied: websocket-client!=0.40.0,!=0.41.*,!=0.42.*,>=0.32.0 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.2.1)",
            "Requirement already satisfied: requests-oauthlib in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.3.0)",
            "Requirement already satisfied: setuptools>=21.0.0 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (57.1.0)",
            "Requirement already satisfied: PyJWT<3,>=1.0.0 in /usr/local/lib/python3.6/site-packages (from adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (2.1.0)",
            "Requirement already satisfied: cryptography>=1.1.0 in /usr/local/lib64/python3.6/site-packages (from adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (3.4.8)",
            "Requirement already satisfied: pyasn1-modules>=0.2.1 in /usr/local/lib/python3.6/site-packages (from google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (0.2.8)",
            "Requirement already satisfied: cachetools<5.0,>=2.0.0 in /usr/local/lib/python3.6/site-packages (from google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (4.2.2)",
            "Requirement already satisfied: rsa<5,>=3.1.4 in /usr/local/lib/python3.6/site-packages (from google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (4.7.2)",
            "Requirement already satisfied: importlib-resources in /usr/local/lib/python3.6/site-packages (from backports.zoneinfo->tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (5.2.2)",
            "Requirement already satisfied: typing-extensions>=3.6.4 in /usr/local/lib/python3.6/site-packages (from importlib-metadata->click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (3.10.0.2)",
            "Requirement already satisfied: zipp>=0.5 in /usr/local/lib/python3.6/site-packages (from importlib-metadata->click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (3.5.0)",
            "Requirement already satisfied: tzdata in /var/lib/pgsql/.local/lib/python3.6/site-packages (from pytz-deprecation-shim->tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (2022.1)",
            "Requirement already satisfied: oauthlib>=3.0.0 in /usr/local/lib/python3.6/site-packages (from requests-oauthlib->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (3.1.1)",
            "Requirement already satisfied: cffi>=1.12 in /usr/local/lib64/python3.6/site-packages (from cryptography>=1.1.0->adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.14.6)",
            "Requirement already satisfied: pyasn1<0.5.0,>=0.4.6 in /usr/local/lib/python3.6/site-packages (from pyasn1-modules>=0.2.1->google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (0.4.8)",
            "Requirement already satisfied: pycparser in /usr/local/lib/python3.6/site-packages (from cffi>=1.12->cryptography>=1.1.0->adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (2.20)"
        ]
    }
}
2022-03-31 22:47:37,466 p=27217 u=moonja n=ansible | TASK [patroni-postgres : Iinstall wheel module on all three nodes] ***************************************
2022-03-31 22:47:43,796 p=27217 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:47:43,805 p=27217 u=moonja n=ansible | TASK [patroni-postgres : debug] **************************************************************************
2022-03-31 22:47:43,848 p=27217 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "830453777540.17185",
        "changed": true,
        "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 install wheel )",
        "delta": "0:00:00.555597",
        "end": "2022-03-31 22:47:38.892367",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/root/.ansible_async/830453777540.17185",
        "start": "2022-03-31 22:47:38.336770",
        "started": 1,
        "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv",
        "stderr_lines": [
            "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"
        ],
        "stdout": "Requirement already satisfied: wheel in /usr/local/lib/python3.6/site-packages (0.37.1)",
        "stdout_lines": [
            "Requirement already satisfied: wheel in /usr/local/lib/python3.6/site-packages (0.37.1)"
        ]
    }
}
2022-03-31 22:47:43,860 p=27217 u=moonja n=ansible | TASK [patroni-postgres : Install psycopg2-binary module on all three nodes] ******************************
2022-03-31 22:47:50,265 p=27217 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:47:50,275 p=27217 u=moonja n=ansible | TASK [patroni-postgres : debug] **************************************************************************
2022-03-31 22:47:50,299 p=27217 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "18540704655.17563",
        "changed": true,
        "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 install psycopg2-binary )",
        "delta": "0:00:00.543548",
        "end": "2022-03-31 22:47:45.259542",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/root/.ansible_async/18540704655.17563",
        "start": "2022-03-31 22:47:44.715994",
        "started": 1,
        "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv",
        "stderr_lines": [
            "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"
        ],
        "stdout": "Requirement already satisfied: psycopg2-binary in /usr/local/lib64/python3.6/site-packages (2.9.3)",
        "stdout_lines": [
            "Requirement already satisfied: psycopg2-binary in /usr/local/lib64/python3.6/site-packages (2.9.3)"
        ]
    }
}
2022-03-31 22:47:50,309 p=27217 u=moonja n=ansible | TASK [patroni-postgres : Install patroni modules on all three nodes for vmware-postgres 13.x version] ****
2022-03-31 22:47:56,628 p=27217 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:47:56,637 p=27217 u=moonja n=ansible | TASK [patroni-postgres : Change the permissions on the /tmp directory] ***********************************
2022-03-31 22:47:57,365 p=27217 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:47:57,377 p=27217 u=moonja n=ansible | TASK [patroni-postgres : Create the etcd.yml configuration file for all nodes] ***************************
2022-03-31 22:47:58,568 p=27217 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:47:58,578 p=27217 u=moonja n=ansible | TASK [patroni-postgres : debug] **************************************************************************
2022-03-31 22:47:58,600 p=27217 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "changed": true,
        "checksum": "58bceddeab742a1f1f8a005c010a81a7f8ce62ae",
        "dest": "/var/lib/pgsql/etcd.yml",
        "diff": [],
        "failed": false,
        "gid": 26,
        "group": "postgres",
        "md5sum": "6402cbf0dd381f0e0ff13cf94a0f8c85",
        "mode": "0644",
        "owner": "postgres",
        "size": 490,
        "src": "/var/tmp/ansible-tmp-1648734477.474218-28770-41002217593475/source",
        "state": "file",
        "uid": 26
    }
}
2022-03-31 22:47:58,609 p=27217 u=moonja n=ansible | TASK [patroni-postgres : Copy systemd configuration of etcd into /etc/systemd/system] ********************
2022-03-31 22:47:59,428 p=27217 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:47:59,440 p=27217 u=moonja n=ansible | TASK [patroni-postgres : Reload and start etcd through systemd] ******************************************
2022-03-31 22:48:32,262 p=27217 u=moonja n=ansible |  [ERROR]: User interrupted execution

2022-03-31 22:51:37,611 p=29246 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This 
feature will be removed from ansible-core in version 2.14. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2022-03-31 22:51:37,626 p=29246 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-03-31 22:51:37,941 p=29246 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will
 be removed in version 2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False 
in ansible.cfg.
2022-03-31 22:51:38,002 p=29246 u=moonja n=ansible | PLAY [all] ***********************************************************************************************
2022-03-31 22:51:38,037 p=29246 u=moonja n=ansible | TASK [Gathering Facts] ***********************************************************************************
2022-03-31 22:51:41,912 p=29246 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 22:51:41,924 p=29246 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:51:41,926 p=29246 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 22:51:41,946 p=29246 u=moonja n=ansible | TASK [patroni-postgres : Stop services for patroni and etcd] *********************************************
2022-03-31 22:51:42,936 p=29246 u=moonja n=ansible | failed: [co7-node03] (item=patroni) => {"ansible_loop_var": "item", "changed": false, "item": "patroni", "msg": "Could not find the requested service patroni: host"}
2022-03-31 22:51:42,937 p=29246 u=moonja n=ansible | failed: [co7-node02] (item=patroni) => {"ansible_loop_var": "item", "changed": false, "item": "patroni", "msg": "Could not find the requested service patroni: host"}
2022-03-31 22:51:42,953 p=29246 u=moonja n=ansible | failed: [co7-node01] (item=patroni) => {"ansible_loop_var": "item", "changed": false, "item": "patroni", "msg": "Could not find the requested service patroni: host"}
2022-03-31 22:51:43,419 p=29246 u=moonja n=ansible | failed: [co7-node03] (item=etcd) => {"ansible_loop_var": "item", "changed": false, "item": "etcd", "msg": "Could not find the requested service patroni: host"}
2022-03-31 22:51:43,420 p=29246 u=moonja n=ansible | ...ignoring
2022-03-31 22:51:43,438 p=29246 u=moonja n=ansible | failed: [co7-node02] (item=etcd) => {"ansible_loop_var": "item", "changed": false, "item": "etcd", "msg": "Could not find the requested service patroni: host"}
2022-03-31 22:51:43,439 p=29246 u=moonja n=ansible | ...ignoring
2022-03-31 22:51:43,448 p=29246 u=moonja n=ansible | failed: [co7-node01] (item=etcd) => {"ansible_loop_var": "item", "changed": false, "item": "etcd", "msg": "Could not find the requested service patroni: host"}
2022-03-31 22:51:43,448 p=29246 u=moonja n=ansible | ...ignoring
2022-03-31 22:51:43,460 p=29246 u=moonja n=ansible | TASK [patroni-postgres : Kill etcd process] **************************************************************
2022-03-31 22:51:44,347 p=29246 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 22:51:44,348 p=29246 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 22:51:44,348 p=29246 u=moonja n=ansible | ...ignoring
2022-03-31 22:51:44,366 p=29246 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 22:51:44,367 p=29246 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 22:51:44,367 p=29246 u=moonja n=ansible | ...ignoring
2022-03-31 22:51:50,397 p=29246 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:51:50,405 p=29246 u=moonja n=ansible | TASK [patroni-postgres : Delete configuration file for patroni and systemd] ******************************
2022-03-31 22:51:51,082 p=29246 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/patroni.yml)
2022-03-31 22:51:51,086 p=29246 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/patroni.yml)
2022-03-31 22:51:51,086 p=29246 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/patroni.yml)
2022-03-31 22:51:51,497 p=29246 u=moonja n=ansible | ok: [co7-node03] => (item=/etc/systemd/system/patroni.service)
2022-03-31 22:51:51,511 p=29246 u=moonja n=ansible | ok: [co7-node02] => (item=/etc/systemd/system/patroni.service)
2022-03-31 22:51:51,513 p=29246 u=moonja n=ansible | ok: [co7-node01] => (item=/etc/systemd/system/patroni.service)
2022-03-31 22:51:51,916 p=29246 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/postgresql0.yml)
2022-03-31 22:51:51,917 p=29246 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/postgresql0.yml)
2022-03-31 22:51:51,923 p=29246 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/postgresql0.yml)
2022-03-31 22:51:52,372 p=29246 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/patroni_member.log)
2022-03-31 22:51:52,395 p=29246 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/patroni_member.log)
2022-03-31 22:51:52,396 p=29246 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/patroni_member.log)
2022-03-31 22:51:52,770 p=29246 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/etcd.yml)
2022-03-31 22:51:52,791 p=29246 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/etcd.yml)
2022-03-31 22:51:52,796 p=29246 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/etcd.yml)
2022-03-31 22:51:53,171 p=29246 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/etcd_logfile)
2022-03-31 22:51:53,196 p=29246 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/etcd_logfile)
2022-03-31 22:51:53,198 p=29246 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/etcd_logfile)
2022-03-31 22:51:53,210 p=29246 u=moonja n=ansible | TASK [patroni-postgres : Delete data directory for patroni cluster] **************************************
2022-03-31 22:51:53,915 p=29246 u=moonja n=ansible | ok: [co7-node02] => (item=backups)
2022-03-31 22:51:53,916 p=29246 u=moonja n=ansible | ok: [co7-node03] => (item=backups)
2022-03-31 22:51:54,395 p=29246 u=moonja n=ansible | changed: [co7-node01] => (item=backups)
2022-03-31 22:51:54,542 p=29246 u=moonja n=ansible | ok: [co7-node03] => (item=data)
2022-03-31 22:51:54,545 p=29246 u=moonja n=ansible | ok: [co7-node02] => (item=data)
2022-03-31 22:51:54,837 p=29246 u=moonja n=ansible | changed: [co7-node01] => (item=data)
2022-03-31 22:51:55,006 p=29246 u=moonja n=ansible | ok: [co7-node02] => (item=patroni_data)
2022-03-31 22:51:55,007 p=29246 u=moonja n=ansible | ok: [co7-node03] => (item=patroni_data)
2022-03-31 22:51:55,352 p=29246 u=moonja n=ansible | ok: [co7-node01] => (item=patroni_data)
2022-03-31 22:51:55,365 p=29246 u=moonja n=ansible | TASK [patroni-postgres : Change the permissions on the /tmp directory] ***********************************
2022-03-31 22:51:55,837 p=29246 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:51:55,860 p=29246 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:51:55,865 p=29246 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:51:55,876 p=29246 u=moonja n=ansible | TASK [patroni-postgres : Uninstall pip modules of Patroni prerequisites on all three nodes] **************
2022-03-31 22:52:02,313 p=29246 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"ansible_job_id": "767062314706.3592", "changed": true, "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 uninstall -r /var/lib/pgsql/requirements.txt -y )", "delta": "0:00:00.481340", "end": "2022-03-31 22:51:57.270900", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/root/.ansible_async/767062314706.3592", "start": "2022-03-31 22:51:56.789560", "started": 1, "stderr": "ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'", "stderr_lines": ["ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'"], "stdout": "", "stdout_lines": []}
2022-03-31 22:52:02,353 p=29246 u=moonja n=ansible | ...ignoring
2022-03-31 22:52:02,355 p=29246 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"ansible_job_id": "314717528113.3573", "changed": true, "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 uninstall -r /var/lib/pgsql/requirements.txt -y )", "delta": "0:00:01.487565", "end": "2022-03-31 22:51:58.269241", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/root/.ansible_async/314717528113.3573", "start": "2022-03-31 22:51:56.781676", "started": 1, "stderr": "ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'", "stderr_lines": ["ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'"], "stdout": "", "stdout_lines": []}
2022-03-31 22:52:02,355 p=29246 u=moonja n=ansible | ...ignoring
2022-03-31 22:52:03,450 p=29246 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"ansible_job_id": "467777530308.3867", "changed": true, "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 uninstall -r /var/lib/pgsql/requirements.txt -y )", "delta": "0:00:00.543565", "end": "2022-03-31 22:51:58.550104", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/root/.ansible_async/467777530308.3867", "start": "2022-03-31 22:51:58.006539", "started": 1, "stderr": "WARNING: Skipping boto as it is not installed.\nERROR: Cannot uninstall 'PyYAML'. It is a distutils installed project and thus we cannot accurately determine which files belong to it which would lead to only a partial uninstall.", "stderr_lines": ["WARNING: Skipping boto as it is not installed.", "ERROR: Cannot uninstall 'PyYAML'. It is a distutils installed project and thus we cannot accurately determine which files belong to it which would lead to only a partial uninstall."], "stdout": "Found existing installation: urllib3 1.26.9\nUninstalling urllib3-1.26.9:\n  Successfully uninstalled urllib3-1.26.9\nFound existing installation: PyYAML 3.13", "stdout_lines": ["Found existing installation: urllib3 1.26.9", "Uninstalling urllib3-1.26.9:", "  Successfully uninstalled urllib3-1.26.9", "Found existing installation: PyYAML 3.13"]}
2022-03-31 22:52:03,450 p=29246 u=moonja n=ansible | ...ignoring
2022-03-31 22:52:03,459 p=29246 u=moonja n=ansible | TASK [patroni-postgres : UnInstall wheel pip module on all three nodes] **********************************
2022-03-31 22:52:03,944 p=29246 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 22:52:03,945 p=29246 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 22:52:03,945 p=29246 u=moonja n=ansible | ...ignoring
2022-03-31 22:52:03,945 p=29246 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 22:52:03,945 p=29246 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 22:52:03,945 p=29246 u=moonja n=ansible | ...ignoring
2022-03-31 22:52:09,886 p=29246 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:52:09,895 p=29246 u=moonja n=ansible | TASK [patroni-postgres : Uninstall typing pip module on all three nodes] *********************************
2022-03-31 22:52:10,341 p=29246 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 22:52:10,341 p=29246 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 22:52:10,341 p=29246 u=moonja n=ansible | ...ignoring
2022-03-31 22:52:10,379 p=29246 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 22:52:10,379 p=29246 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 22:52:10,379 p=29246 u=moonja n=ansible | ...ignoring
2022-03-31 22:52:16,291 p=29246 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"ansible_job_id": "223688343456.4623", "changed": true, "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 uninstall typing -y )", "delta": "0:00:00.389729", "end": "2022-03-31 22:52:11.188668", "finished": 1, "msg": "non-zero return code", "rc": 2, "results_file": "/var/lib/pgsql/.ansible_async/223688343456.4623", "start": "2022-03-31 22:52:10.798939", "started": 1, "stderr": "ERROR: Exception:\nTraceback (most recent call last):\n  File \"/usr/lib64/python3.6/shutil.py\", line 550, in move\n    os.rename(src, real_dst)\nPermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc' -> '/var/tmp/pip-uninstall-yaqueqlw/typing.cpython-36.pyc'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/cli/base_command.py\", line 164, in exc_logging_wrapper\n    status = run_func(*args)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/commands/uninstall.py\", line 99, in run\n    verbose=self.verbosity > 0,\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_install.py\", line 671, in uninstall\n    uninstalled_pathset.remove(auto_confirm, verbose)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 384, in remove\n    moved.stash(path)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 282, in stash\n    renames(path, new_path)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/utils/misc.py\", line 307, in renames\n    shutil.move(old, new)\n  File \"/usr/lib64/python3.6/shutil.py\", line 565, in move\n    os.unlink(src)\nPermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc'", "stderr_lines": ["ERROR: Exception:", "Traceback (most recent call last):", "  File \"/usr/lib64/python3.6/shutil.py\", line 550, in move", "    os.rename(src, real_dst)", "PermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc' -> '/var/tmp/pip-uninstall-yaqueqlw/typing.cpython-36.pyc'", "", "During handling of the above exception, another exception occurred:", "", "Traceback (most recent call last):", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/cli/base_command.py\", line 164, in exc_logging_wrapper", "    status = run_func(*args)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/commands/uninstall.py\", line 99, in run", "    verbose=self.verbosity > 0,", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_install.py\", line 671, in uninstall", "    uninstalled_pathset.remove(auto_confirm, verbose)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 384, in remove", "    moved.stash(path)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 282, in stash", "    renames(path, new_path)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/utils/misc.py\", line 307, in renames", "    shutil.move(old, new)", "  File \"/usr/lib64/python3.6/shutil.py\", line 565, in move", "    os.unlink(src)", "PermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc'"], "stdout": "Found existing installation: typing 3.7.4.3\nUninstalling typing-3.7.4.3:", "stdout_lines": ["Found existing installation: typing 3.7.4.3", "Uninstalling typing-3.7.4.3:"]}
2022-03-31 22:52:16,291 p=29246 u=moonja n=ansible | ...ignoring
2022-03-31 22:52:16,301 p=29246 u=moonja n=ansible | TASK [patroni-postgres : Uninstall setuptools rust on all three nodes] ***********************************
2022-03-31 22:52:22,709 p=29246 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:52:22,776 p=29246 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:52:22,786 p=29246 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:52:22,802 p=29246 u=moonja n=ansible | TASK [patroni-postgres : Uninstall patroni module on all three nodes] ************************************
2022-03-31 22:52:29,885 p=29246 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:52:29,899 p=29246 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:52:29,900 p=29246 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:52:29,911 p=29246 u=moonja n=ansible | TASK [patroni-postgres : Uninstall wheel module on all three nodes] **************************************
2022-03-31 22:52:36,181 p=29246 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:52:36,199 p=29246 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:52:36,199 p=29246 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:52:36,211 p=29246 u=moonja n=ansible | TASK [patroni-postgres : Uninstall psycopg2-binary module on all three nodes] ****************************
2022-03-31 22:52:42,538 p=29246 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:52:42,555 p=29246 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:52:42,617 p=29246 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:52:42,630 p=29246 u=moonja n=ansible | TASK [patroni-postgres : Delete the dependencies file of etcd  on all three nodes] ***********************
2022-03-31 22:52:43,136 p=29246 u=moonja n=ansible | [WARNING]: Unable to use /var/lib/pgsql/.ansible/tmp as temporary directory, failing back to system:
[Errno 13] Permission denied: '/var/lib/pgsql'

2022-03-31 22:52:43,137 p=29246 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 22:52:43,137 p=29246 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 22:52:43,138 p=29246 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:52:43,150 p=29246 u=moonja n=ansible | TASK [patroni-postgres : Uninstall VMware Postgres RPM package on all hosts as root] *********************
2022-03-31 22:52:50,473 p=29246 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 22:52:50,634 p=29246 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 22:53:06,179 p=29246 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:53:06,189 p=29246 u=moonja n=ansible | TASK [patroni-postgres : Delete the vmwawre-postgres rpm file to all hosts in cluster] *******************
2022-03-31 22:53:06,643 p=29246 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 22:53:06,644 p=29246 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:53:06,728 p=29246 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 22:53:06,740 p=29246 u=moonja n=ansible | TASK [patroni-postgres : List iptables rules] ************************************************************
2022-03-31 22:53:07,339 p=29246 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:53:07,349 p=29246 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:53:07,353 p=29246 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:53:07,364 p=29246 u=moonja n=ansible | TASK [patroni-postgres : Flush iptables rules] ***********************************************************
2022-03-31 22:53:07,952 p=29246 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:53:07,965 p=29246 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:53:07,969 p=29246 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:53:07,982 p=29246 u=moonja n=ansible | TASK [patroni-postgres : Stop and disable firewalld] *****************************************************
2022-03-31 22:53:09,005 p=29246 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:53:09,012 p=29246 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 22:53:09,023 p=29246 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 22:53:09,064 p=29246 u=moonja n=ansible | PLAY RECAP ***********************************************************************************************
2022-03-31 22:53:09,064 p=29246 u=moonja n=ansible | co7-node01                 : ok=19   changed=16   unreachable=0    failed=0    skipped=0    rescued=0    ignored=3   
2022-03-31 22:53:09,064 p=29246 u=moonja n=ansible | co7-node02                 : ok=19   changed=11   unreachable=0    failed=0    skipped=0    rescued=0    ignored=5   
2022-03-31 22:53:09,064 p=29246 u=moonja n=ansible | co7-node03                 : ok=19   changed=11   unreachable=0    failed=0    skipped=0    rescued=0    ignored=5   
2022-03-31 22:53:44,826 p=32059 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This 
feature will be removed from ansible-core in version 2.14. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2022-03-31 22:53:44,837 p=32059 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-03-31 22:53:45,129 p=32059 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will
 be removed in version 2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False 
in ansible.cfg.
2022-03-31 22:53:45,189 p=32059 u=moonja n=ansible | PLAY [all] ***********************************************************************************************
2022-03-31 22:53:45,222 p=32059 u=moonja n=ansible | TASK [Gathering Facts] ***********************************************************************************
2022-03-31 22:53:47,464 p=32059 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:53:47,466 p=32059 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 22:53:47,491 p=32059 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 22:53:47,508 p=32059 u=moonja n=ansible | TASK [patroni-postgres : Stop and disable firewalld] *****************************************************
2022-03-31 22:53:48,491 p=32059 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 22:53:48,492 p=32059 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:53:48,492 p=32059 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 22:53:48,503 p=32059 u=moonja n=ansible | TASK [patroni-postgres : Flush iptables rules] ***********************************************************
2022-03-31 22:53:49,195 p=32059 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:53:49,210 p=32059 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:53:49,210 p=32059 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:53:49,223 p=32059 u=moonja n=ansible | TASK [patroni-postgres : List iptables rules] ************************************************************
2022-03-31 22:53:49,705 p=32059 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:53:49,722 p=32059 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:53:49,729 p=32059 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:53:49,740 p=32059 u=moonja n=ansible | TASK [patroni-postgres : debug] **************************************************************************
2022-03-31 22:53:49,775 p=32059 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": "Chain INPUT (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain FORWARD (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain OUTPUT (policy ACCEPT)\ntarget     prot opt source               destination         "
}
2022-03-31 22:53:49,777 p=32059 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": "Chain INPUT (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain FORWARD (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain OUTPUT (policy ACCEPT)\ntarget     prot opt source               destination         "
}
2022-03-31 22:53:49,789 p=32059 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": "Chain INPUT (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain FORWARD (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain OUTPUT (policy ACCEPT)\ntarget     prot opt source               destination         "
}
2022-03-31 22:53:49,801 p=32059 u=moonja n=ansible | TASK [patroni-postgres : Install the 'Development tools' package group for VMware Postgres Dependencies] ***
2022-03-31 22:53:56,809 p=32059 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:54:02,064 p=32059 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"ansible_job_id": "342631223361.7381", "changed": false, "changes": {"installed": ["@Development tools"]}, "finished": 1, "msg": "There are unfinished transactions remaining. You might consider running yum-complete-transaction, or \"yum-complete-transaction --cleanup-only\" and \"yum history redo last\", first to finish them. If those don't work you'll have to try removing/installing packages by hand (maybe package-cleanup can help).\nError: Package: glibc-headers-2.17-325.el7_9.x86_64 (updates)\n           Requires: kernel-headers\nError: Package: systemtap-devel-4.0-13.el7.x86_64 (base)\n           Requires: kernel-devel-uname-r\nError: Package: glibc-headers-2.17-325.el7_9.x86_64 (updates)\n           Requires: kernel-headers >= 2.2.1\n", "rc": 1, "results": ["Loaded plugins: fastestmirror, product-id, search-disabled-repos, subscription-\n              : manager, versionlock\n\nThis system is not registered with an entitlement server. You can use subscription-manager to register.\n\nLoading mirror speeds from cached hostfile\n * base: ftp.kaist.ac.kr\n * centos-sclo-rh: ftp.kaist.ac.kr\n * epel: ftp.jaist.ac.jp\n * extras: ftp.kaist.ac.kr\n * updates: ftp.tsukuba.wide.ad.jp\nResolving Dependencies\n--> Running transaction check\n---> Package byacc.x86_64 0:1.9.20130304-3.el7 will be installed\n---> Package cscope.x86_64 0:15.8-10.el7 will be installed\n---> Package ctags.x86_64 0:5.8-13.el7 will be installed\n---> Package diffstat.x86_64 0:1.57-4.el7 will be installed\n---> Package doxygen.x86_64 1:1.8.5-4.el7 will be installed\n---> Package elfutils.x86_64 0:0.176-5.el7 will be installed\n---> Package gcc.x86_64 0:4.8.5-44.el7 will be installed\n--> Processing Dependency: glibc-devel >= 2.2.90-12 for package: gcc-4.8.5-44.el7.x86_64\n---> Package gcc-c++.x86_64 0:4.8.5-44.el7 will be installed\n---> Package gcc-gfortran.x86_64 0:4.8.5-44.el7 will be installed\n--> Processing Dependency: libquadmath-devel = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libquadmath = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libgfortran = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libgfortran.so.3()(64bit) for package: gcc-gfortran-4.8.5-44.el7.x86_64\n---> Package indent.x86_64 0:2.2.11-13.el7 will be installed\n---> Package intltool.noarch 0:0.50.2-7.el7 will be installed\n--> Processing Dependency: perl(XML::Parser) for package: intltool-0.50.2-7.el7.noarch\n---> Package libtool.x86_64 0:2.4.2-22.el7_3 will be installed\n---> Package patchutils.x86_64 0:0.3.3-5.el7_9 will be installed\n---> Package rcs.x86_64 0:5.9.0-7.el7 will be installed\n---> Package rpm-build.x86_64 0:4.11.3-48.el7_9 will be installed\n--> Processing Dependency: /usr/bin/gdb-add-index for package: rpm-build-4.11.3-48.el7_9.x86_64\n---> Package rpm-sign.x86_64 0:4.11.3-48.el7_9 will be installed\n---> Package swig.x86_64 0:2.0.10-5.el7 will be installed\n---> Package systemtap.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: systemtap-devel = 4.0-13.el7 for package: systemtap-4.0-13.el7.x86_64\n--> Processing Dependency: systemtap-client = 4.0-13.el7 for package: systemtap-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package gdb.x86_64 0:7.6.1-120.el7 will be installed\n---> Package glibc-devel.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: glibc-headers = 2.17-325.el7_9 for package: glibc-devel-2.17-325.el7_9.x86_64\n--> Processing Dependency: glibc-headers for package: glibc-devel-2.17-325.el7_9.x86_64\n---> Package libgfortran.x86_64 0:4.8.5-44.el7 will be installed\n---> Package libquadmath.x86_64 0:4.8.5-44.el7 will be installed\n---> Package libquadmath-devel.x86_64 0:4.8.5-44.el7 will be installed\n---> Package perl-XML-Parser.x86_64 0:2.41-10.el7 will be installed\n---> Package systemtap-client.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: systemtap-runtime = 4.0-13.el7 for package: systemtap-client-4.0-13.el7.x86_64\n--> Processing Dependency: mokutil for package: systemtap-client-4.0-13.el7.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package mokutil.x86_64 0:15-8.el7 will be installed\n--> Processing Dependency: libefivar.so.1(libefivar.so.0)(64bit) for package: mokutil-15-8.el7.x86_64\n--> Processing Dependency: libefivar.so.1(LIBEFIVAR_0.24)(64bit) for package: mokutil-15-8.el7.x86_64\n--> Processing Dependency: libefivar.so.1()(64bit) for package: mokutil-15-8.el7.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n---> Package systemtap-runtime.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: libsymtabAPI.so.9.3()(64bit) for package: systemtap-runtime-4.0-13.el7.x86_64\n--> Processing Dependency: libdyninstAPI.so.9.3()(64bit) for package: systemtap-runtime-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package dyninst.x86_64 0:9.3.1-3.el7 will be installed\n--> Processing Dependency: libdwarf.so.0()(64bit) for package: dyninst-9.3.1-3.el7.x86_64\n--> Processing Dependency: libboost_date_time-mt.so.1.53.0()(64bit) for package: dyninst-9.3.1-3.el7.x86_64\n---> Package efivar-libs.x86_64 0:36-12.el7 will be installed\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package boost-date-time.x86_64 0:1.53.0-28.el7 will be installed\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package libdwarf.x86_64 0:20130207-4.el7 will be installed\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Finished Dependency Resolution\n You could try using --skip-broken to work around the problem\n You could try running: rpm -Va --nofiles --nodigest\n"], "results_file": "/root/.ansible_async/342631223361.7381", "started": 1, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2022-03-31 22:54:07,580 p=32059 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"ansible_job_id": "986902367188.7401", "changed": false, "changes": {"installed": ["@Development tools"]}, "finished": 1, "msg": "There are unfinished transactions remaining. You might consider running yum-complete-transaction, or \"yum-complete-transaction --cleanup-only\" and \"yum history redo last\", first to finish them. If those don't work you'll have to try removing/installing packages by hand (maybe package-cleanup can help).\nError: Package: glibc-headers-2.17-325.el7_9.x86_64 (updates)\n           Requires: kernel-headers\nError: Package: systemtap-devel-4.0-13.el7.x86_64 (base)\n           Requires: kernel-devel-uname-r\nError: Package: glibc-headers-2.17-325.el7_9.x86_64 (updates)\n           Requires: kernel-headers >= 2.2.1\n", "rc": 1, "results": ["Loaded plugins: fastestmirror, product-id, search-disabled-repos, subscription-\n              : manager, versionlock\n\nThis system is not registered with an entitlement server. You can use subscription-manager to register.\n\nLoading mirror speeds from cached hostfile\n * base: mirror.anigil.com\n * centos-sclo-rh: mirror.kakao.com\n * epel: ftp.iij.ad.jp\n * extras: mirror.anigil.com\n * updates: mirror.kakao.com\nResolving Dependencies\n--> Running transaction check\n---> Package byacc.x86_64 0:1.9.20130304-3.el7 will be installed\n---> Package cscope.x86_64 0:15.8-10.el7 will be installed\n---> Package ctags.x86_64 0:5.8-13.el7 will be installed\n---> Package diffstat.x86_64 0:1.57-4.el7 will be installed\n---> Package doxygen.x86_64 1:1.8.5-4.el7 will be installed\n---> Package elfutils.x86_64 0:0.176-5.el7 will be installed\n---> Package gcc.x86_64 0:4.8.5-44.el7 will be installed\n--> Processing Dependency: glibc-devel >= 2.2.90-12 for package: gcc-4.8.5-44.el7.x86_64\n---> Package gcc-c++.x86_64 0:4.8.5-44.el7 will be installed\n---> Package gcc-gfortran.x86_64 0:4.8.5-44.el7 will be installed\n--> Processing Dependency: libquadmath-devel = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libquadmath = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libgfortran = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libgfortran.so.3()(64bit) for package: gcc-gfortran-4.8.5-44.el7.x86_64\n---> Package indent.x86_64 0:2.2.11-13.el7 will be installed\n---> Package intltool.noarch 0:0.50.2-7.el7 will be installed\n--> Processing Dependency: perl(XML::Parser) for package: intltool-0.50.2-7.el7.noarch\n---> Package libtool.x86_64 0:2.4.2-22.el7_3 will be installed\n---> Package patchutils.x86_64 0:0.3.3-5.el7_9 will be installed\n---> Package rcs.x86_64 0:5.9.0-7.el7 will be installed\n---> Package rpm-build.x86_64 0:4.11.3-48.el7_9 will be installed\n--> Processing Dependency: /usr/bin/gdb-add-index for package: rpm-build-4.11.3-48.el7_9.x86_64\n---> Package rpm-sign.x86_64 0:4.11.3-48.el7_9 will be installed\n---> Package swig.x86_64 0:2.0.10-5.el7 will be installed\n---> Package systemtap.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: systemtap-devel = 4.0-13.el7 for package: systemtap-4.0-13.el7.x86_64\n--> Processing Dependency: systemtap-client = 4.0-13.el7 for package: systemtap-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package gdb.x86_64 0:7.6.1-120.el7 will be installed\n---> Package glibc-devel.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: glibc-headers = 2.17-325.el7_9 for package: glibc-devel-2.17-325.el7_9.x86_64\n--> Processing Dependency: glibc-headers for package: glibc-devel-2.17-325.el7_9.x86_64\n---> Package libgfortran.x86_64 0:4.8.5-44.el7 will be installed\n---> Package libquadmath.x86_64 0:4.8.5-44.el7 will be installed\n---> Package libquadmath-devel.x86_64 0:4.8.5-44.el7 will be installed\n---> Package perl-XML-Parser.x86_64 0:2.41-10.el7 will be installed\n---> Package systemtap-client.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: systemtap-runtime = 4.0-13.el7 for package: systemtap-client-4.0-13.el7.x86_64\n--> Processing Dependency: mokutil for package: systemtap-client-4.0-13.el7.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package mokutil.x86_64 0:15-8.el7 will be installed\n--> Processing Dependency: libefivar.so.1(libefivar.so.0)(64bit) for package: mokutil-15-8.el7.x86_64\n--> Processing Dependency: libefivar.so.1(LIBEFIVAR_0.24)(64bit) for package: mokutil-15-8.el7.x86_64\n--> Processing Dependency: libefivar.so.1()(64bit) for package: mokutil-15-8.el7.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n---> Package systemtap-runtime.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: libsymtabAPI.so.9.3()(64bit) for package: systemtap-runtime-4.0-13.el7.x86_64\n--> Processing Dependency: libdyninstAPI.so.9.3()(64bit) for package: systemtap-runtime-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package dyninst.x86_64 0:9.3.1-3.el7 will be installed\n--> Processing Dependency: libdwarf.so.0()(64bit) for package: dyninst-9.3.1-3.el7.x86_64\n---> Package efivar-libs.x86_64 0:36-12.el7 will be installed\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package libdwarf.x86_64 0:20130207-4.el7 will be installed\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Finished Dependency Resolution\n You could try using --skip-broken to work around the problem\n You could try running: rpm -Va --nofiles --nodigest\n"], "results_file": "/root/.ansible_async/986902367188.7401", "started": 1, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2022-03-31 22:54:07,590 p=32059 u=moonja n=ansible | TASK [patroni-postgres : Install the perl package for VMware Postgres Dependencies] **********************
2022-03-31 22:54:13,946 p=32059 u=moonja n=ansible | ok: [co7-node01] => (item=perl)
2022-03-31 22:54:20,260 p=32059 u=moonja n=ansible | ok: [co7-node01] => (item=readline-devel)
2022-03-31 22:54:26,638 p=32059 u=moonja n=ansible | ok: [co7-node01] => (item=libicu-devel)
2022-03-31 22:54:33,159 p=32059 u=moonja n=ansible | ok: [co7-node01] => (item=perl-libs)
2022-03-31 22:54:33,174 p=32059 u=moonja n=ansible | TASK [patroni-postgres : Copy the vmwawre-postgres rpm file to all hosts in cluster] *********************
2022-03-31 22:54:34,723 p=32059 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:54:34,735 p=32059 u=moonja n=ansible | TASK [patroni-postgres : Install VMware Postgres on all hosts as root] ***********************************
2022-03-31 22:54:51,660 p=32059 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:54:51,668 p=32059 u=moonja n=ansible | TASK [patroni-postgres : Install the etcd and Patroni prerequisites on all three nodes] ******************
2022-03-31 22:54:58,141 p=32059 u=moonja n=ansible | ok: [co7-node01] => (item=python3)
2022-03-31 22:55:03,645 p=32059 u=moonja n=ansible |  [ERROR]: User interrupted execution

2022-03-31 22:55:07,334 p=32887 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This 
feature will be removed from ansible-core in version 2.14. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2022-03-31 22:55:07,345 p=32887 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-03-31 22:55:07,587 p=32887 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will
 be removed in version 2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False 
in ansible.cfg.
2022-03-31 22:55:07,645 p=32887 u=moonja n=ansible | PLAY [all] ***********************************************************************************************
2022-03-31 22:55:07,675 p=32887 u=moonja n=ansible | TASK [Gathering Facts] ***********************************************************************************
2022-03-31 22:55:09,772 p=32887 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 22:55:09,809 p=32887 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 22:55:09,834 p=32887 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:55:09,853 p=32887 u=moonja n=ansible | TASK [patroni-postgres : Stop services for patroni and etcd] *********************************************
2022-03-31 22:55:10,742 p=32887 u=moonja n=ansible | failed: [co7-node01] (item=patroni) => {"ansible_loop_var": "item", "changed": false, "item": "patroni", "msg": "Could not find the requested service patroni: host"}
2022-03-31 22:55:10,743 p=32887 u=moonja n=ansible | failed: [co7-node03] (item=patroni) => {"ansible_loop_var": "item", "changed": false, "item": "patroni", "msg": "Could not find the requested service patroni: host"}
2022-03-31 22:55:10,749 p=32887 u=moonja n=ansible | failed: [co7-node02] (item=patroni) => {"ansible_loop_var": "item", "changed": false, "item": "patroni", "msg": "Could not find the requested service patroni: host"}
2022-03-31 22:55:11,484 p=32887 u=moonja n=ansible | failed: [co7-node03] (item=etcd) => {"ansible_loop_var": "item", "changed": false, "item": "etcd", "msg": "Could not find the requested service patroni: host"}
2022-03-31 22:55:11,485 p=32887 u=moonja n=ansible | failed: [co7-node01] (item=etcd) => {"ansible_loop_var": "item", "changed": false, "item": "etcd", "msg": "Could not find the requested service patroni: host"}
2022-03-31 22:55:11,487 p=32887 u=moonja n=ansible | ...ignoring
2022-03-31 22:55:11,488 p=32887 u=moonja n=ansible | failed: [co7-node02] (item=etcd) => {"ansible_loop_var": "item", "changed": false, "item": "etcd", "msg": "Could not find the requested service patroni: host"}
2022-03-31 22:55:11,488 p=32887 u=moonja n=ansible | ...ignoring
2022-03-31 22:55:11,489 p=32887 u=moonja n=ansible | ...ignoring
2022-03-31 22:55:11,500 p=32887 u=moonja n=ansible | TASK [patroni-postgres : Kill etcd process] **************************************************************
2022-03-31 22:55:12,599 p=32887 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 22:55:12,600 p=32887 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 22:55:12,600 p=32887 u=moonja n=ansible | ...ignoring
2022-03-31 22:55:12,600 p=32887 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 22:55:12,600 p=32887 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 22:55:12,600 p=32887 u=moonja n=ansible | ...ignoring
2022-03-31 22:55:18,610 p=32887 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"ansible_job_id": "465569181658.12214", "changed": true, "cmd": "( killall etcd )", "delta": "0:00:00.030733", "end": "2022-03-31 22:55:12.999356", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/var/lib/pgsql/.ansible_async/465569181658.12214", "start": "2022-03-31 22:55:12.968623", "started": 1, "stderr": "etcd: no process found", "stderr_lines": ["etcd: no process found"], "stdout": "", "stdout_lines": []}
2022-03-31 22:55:18,610 p=32887 u=moonja n=ansible | ...ignoring
2022-03-31 22:55:18,619 p=32887 u=moonja n=ansible | TASK [patroni-postgres : Delete configuration file for patroni and systemd] ******************************
2022-03-31 22:55:19,348 p=32887 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/patroni.yml)
2022-03-31 22:55:19,350 p=32887 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/patroni.yml)
2022-03-31 22:55:19,423 p=32887 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/patroni.yml)
2022-03-31 22:55:19,774 p=32887 u=moonja n=ansible | ok: [co7-node03] => (item=/etc/systemd/system/patroni.service)
2022-03-31 22:55:19,775 p=32887 u=moonja n=ansible | ok: [co7-node02] => (item=/etc/systemd/system/patroni.service)
2022-03-31 22:55:19,843 p=32887 u=moonja n=ansible | ok: [co7-node01] => (item=/etc/systemd/system/patroni.service)
2022-03-31 22:55:20,261 p=32887 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/postgresql0.yml)
2022-03-31 22:55:20,266 p=32887 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/postgresql0.yml)
2022-03-31 22:55:20,345 p=32887 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/postgresql0.yml)
2022-03-31 22:55:20,751 p=32887 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/patroni_member.log)
2022-03-31 22:55:20,754 p=32887 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/patroni_member.log)
2022-03-31 22:55:20,842 p=32887 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/patroni_member.log)
2022-03-31 22:55:21,318 p=32887 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/etcd.yml)
2022-03-31 22:55:21,319 p=32887 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/etcd.yml)
2022-03-31 22:55:21,393 p=32887 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/etcd.yml)
2022-03-31 22:55:21,777 p=32887 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/etcd_logfile)
2022-03-31 22:55:21,777 p=32887 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/etcd_logfile)
2022-03-31 22:55:21,877 p=32887 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/etcd_logfile)
2022-03-31 22:55:21,892 p=32887 u=moonja n=ansible | TASK [patroni-postgres : Delete data directory for patroni cluster] **************************************
2022-03-31 22:55:22,461 p=32887 u=moonja n=ansible | changed: [co7-node01] => (item=backups)
2022-03-31 22:55:22,462 p=32887 u=moonja n=ansible | ok: [co7-node03] => (item=backups)
2022-03-31 22:55:22,462 p=32887 u=moonja n=ansible | ok: [co7-node02] => (item=backups)
2022-03-31 22:55:22,973 p=32887 u=moonja n=ansible | changed: [co7-node01] => (item=data)
2022-03-31 22:55:22,974 p=32887 u=moonja n=ansible | ok: [co7-node02] => (item=data)
2022-03-31 22:55:22,975 p=32887 u=moonja n=ansible | ok: [co7-node03] => (item=data)
2022-03-31 22:55:23,447 p=32887 u=moonja n=ansible | ok: [co7-node02] => (item=patroni_data)
2022-03-31 22:55:23,448 p=32887 u=moonja n=ansible | ok: [co7-node01] => (item=patroni_data)
2022-03-31 22:55:23,450 p=32887 u=moonja n=ansible | ok: [co7-node03] => (item=patroni_data)
2022-03-31 22:55:23,462 p=32887 u=moonja n=ansible | TASK [patroni-postgres : Change the permissions on the /tmp directory] ***********************************
2022-03-31 22:55:24,008 p=32887 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:55:24,009 p=32887 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 22:55:24,009 p=32887 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 22:55:24,018 p=32887 u=moonja n=ansible | TASK [patroni-postgres : Uninstall pip modules of Patroni prerequisites on all three nodes] **************
2022-03-31 22:55:31,003 p=32887 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"ansible_job_id": "86373830343.9808", "changed": true, "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 uninstall -r /var/lib/pgsql/requirements.txt -y )", "delta": "0:00:00.396948", "end": "2022-03-31 22:55:25.287555", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/root/.ansible_async/86373830343.9808", "start": "2022-03-31 22:55:24.890607", "started": 1, "stderr": "ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'", "stderr_lines": ["ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'"], "stdout": "", "stdout_lines": []}
2022-03-31 22:55:31,003 p=32887 u=moonja n=ansible | ...ignoring
2022-03-31 22:55:31,063 p=32887 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"ansible_job_id": "367177172952.13896", "changed": true, "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 uninstall -r /var/lib/pgsql/requirements.txt -y )", "delta": "0:00:00.389907", "end": "2022-03-31 22:55:25.275589", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/root/.ansible_async/367177172952.13896", "start": "2022-03-31 22:55:24.885682", "started": 1, "stderr": "ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'", "stderr_lines": ["ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'"], "stdout": "", "stdout_lines": []}
2022-03-31 22:55:31,063 p=32887 u=moonja n=ansible | ...ignoring
2022-03-31 22:55:31,064 p=32887 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"ansible_job_id": "737147699463.9916", "changed": true, "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 uninstall -r /var/lib/pgsql/requirements.txt -y )", "delta": "0:00:00.400979", "end": "2022-03-31 22:55:25.284515", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/root/.ansible_async/737147699463.9916", "start": "2022-03-31 22:55:24.883536", "started": 1, "stderr": "ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'", "stderr_lines": ["ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'"], "stdout": "", "stdout_lines": []}
2022-03-31 22:55:31,064 p=32887 u=moonja n=ansible | ...ignoring
2022-03-31 22:55:31,075 p=32887 u=moonja n=ansible | TASK [patroni-postgres : UnInstall wheel pip module on all three nodes] **********************************
2022-03-31 22:55:31,598 p=32887 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 22:55:31,599 p=32887 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 22:55:31,599 p=32887 u=moonja n=ansible | ...ignoring
2022-03-31 22:55:31,619 p=32887 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 22:55:31,619 p=32887 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 22:55:31,619 p=32887 u=moonja n=ansible | ...ignoring
2022-03-31 22:55:37,458 p=32887 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:55:37,466 p=32887 u=moonja n=ansible | TASK [patroni-postgres : Uninstall typing pip module on all three nodes] *********************************
2022-03-31 22:55:37,995 p=32887 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 22:55:37,995 p=32887 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 22:55:37,995 p=32887 u=moonja n=ansible | ...ignoring
2022-03-31 22:55:38,016 p=32887 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 22:55:38,016 p=32887 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 22:55:38,017 p=32887 u=moonja n=ansible | ...ignoring
2022-03-31 22:55:45,236 p=32887 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"ansible_job_id": "529313576380.14652", "changed": true, "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 uninstall typing -y )", "delta": "0:00:00.374680", "end": "2022-03-31 22:55:38.800389", "finished": 1, "msg": "non-zero return code", "rc": 2, "results_file": "/var/lib/pgsql/.ansible_async/529313576380.14652", "start": "2022-03-31 22:55:38.425709", "started": 1, "stderr": "ERROR: Exception:\nTraceback (most recent call last):\n  File \"/usr/lib64/python3.6/shutil.py\", line 550, in move\n    os.rename(src, real_dst)\nPermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc' -> '/var/tmp/pip-uninstall-3ynknq89/typing.cpython-36.pyc'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/cli/base_command.py\", line 164, in exc_logging_wrapper\n    status = run_func(*args)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/commands/uninstall.py\", line 99, in run\n    verbose=self.verbosity > 0,\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_install.py\", line 671, in uninstall\n    uninstalled_pathset.remove(auto_confirm, verbose)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 384, in remove\n    moved.stash(path)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 282, in stash\n    renames(path, new_path)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/utils/misc.py\", line 307, in renames\n    shutil.move(old, new)\n  File \"/usr/lib64/python3.6/shutil.py\", line 565, in move\n    os.unlink(src)\nPermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc'", "stderr_lines": ["ERROR: Exception:", "Traceback (most recent call last):", "  File \"/usr/lib64/python3.6/shutil.py\", line 550, in move", "    os.rename(src, real_dst)", "PermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc' -> '/var/tmp/pip-uninstall-3ynknq89/typing.cpython-36.pyc'", "", "During handling of the above exception, another exception occurred:", "", "Traceback (most recent call last):", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/cli/base_command.py\", line 164, in exc_logging_wrapper", "    status = run_func(*args)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/commands/uninstall.py\", line 99, in run", "    verbose=self.verbosity > 0,", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_install.py\", line 671, in uninstall", "    uninstalled_pathset.remove(auto_confirm, verbose)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 384, in remove", "    moved.stash(path)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 282, in stash", "    renames(path, new_path)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/utils/misc.py\", line 307, in renames", "    shutil.move(old, new)", "  File \"/usr/lib64/python3.6/shutil.py\", line 565, in move", "    os.unlink(src)", "PermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc'"], "stdout": "Found existing installation: typing 3.7.4.3\nUninstalling typing-3.7.4.3:", "stdout_lines": ["Found existing installation: typing 3.7.4.3", "Uninstalling typing-3.7.4.3:"]}
2022-03-31 22:55:45,236 p=32887 u=moonja n=ansible | ...ignoring
2022-03-31 22:55:45,248 p=32887 u=moonja n=ansible | TASK [patroni-postgres : Uninstall setuptools rust on all three nodes] ***********************************
2022-03-31 22:55:51,675 p=32887 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:55:51,725 p=32887 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:55:52,130 p=32887 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:55:52,140 p=32887 u=moonja n=ansible | TASK [patroni-postgres : Uninstall patroni module on all three nodes] ************************************
2022-03-31 22:55:58,494 p=32887 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:55:58,558 p=32887 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:55:58,558 p=32887 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:55:58,570 p=32887 u=moonja n=ansible | TASK [patroni-postgres : Uninstall wheel module on all three nodes] **************************************
2022-03-31 22:56:05,704 p=32887 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:56:05,769 p=32887 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:56:05,769 p=32887 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:56:05,781 p=32887 u=moonja n=ansible | TASK [patroni-postgres : Uninstall psycopg2-binary module on all three nodes] ****************************
2022-03-31 22:56:12,040 p=32887 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:56:12,098 p=32887 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:56:12,107 p=32887 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:56:12,120 p=32887 u=moonja n=ansible | TASK [patroni-postgres : Delete the dependencies file of etcd  on all three nodes] ***********************
2022-03-31 22:56:12,619 p=32887 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:56:12,627 p=32887 u=moonja n=ansible | [WARNING]: Unable to use /var/lib/pgsql/.ansible/tmp as temporary directory, failing back to system:
[Errno 13] Permission denied: '/var/lib/pgsql'

2022-03-31 22:56:12,627 p=32887 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 22:56:12,628 p=32887 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 22:56:12,640 p=32887 u=moonja n=ansible | TASK [patroni-postgres : Uninstall VMware Postgres RPM package on all hosts as root] *********************
2022-03-31 22:56:19,275 p=32887 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 22:56:19,817 p=32887 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 22:56:30,402 p=32887 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:56:30,413 p=32887 u=moonja n=ansible | TASK [patroni-postgres : Delete the vmwawre-postgres rpm file to all hosts in cluster] *******************
2022-03-31 22:56:30,904 p=32887 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 22:56:30,905 p=32887 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:56:30,905 p=32887 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 22:56:30,916 p=32887 u=moonja n=ansible | TASK [patroni-postgres : List iptables rules] ************************************************************
2022-03-31 22:56:31,420 p=32887 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:56:31,451 p=32887 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:56:31,451 p=32887 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:56:31,461 p=32887 u=moonja n=ansible | TASK [patroni-postgres : Flush iptables rules] ***********************************************************
2022-03-31 22:56:31,948 p=32887 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 22:56:31,949 p=32887 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 22:56:31,954 p=32887 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 22:56:31,969 p=32887 u=moonja n=ansible | TASK [patroni-postgres : Stop and disable firewalld] *****************************************************
2022-03-31 22:56:32,923 p=32887 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:56:32,925 p=32887 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 22:56:32,935 p=32887 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 22:56:32,977 p=32887 u=moonja n=ansible | PLAY RECAP ***********************************************************************************************
2022-03-31 22:56:32,977 p=32887 u=moonja n=ansible | co7-node01                 : ok=19   changed=13   unreachable=0    failed=0    skipped=0    rescued=0    ignored=4   
2022-03-31 22:56:32,978 p=32887 u=moonja n=ansible | co7-node02                 : ok=19   changed=10   unreachable=0    failed=0    skipped=0    rescued=0    ignored=5   
2022-03-31 22:56:32,978 p=32887 u=moonja n=ansible | co7-node03                 : ok=19   changed=10   unreachable=0    failed=0    skipped=0    rescued=0    ignored=5   
2022-03-31 22:59:51,441 p=35134 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This 
feature will be removed from ansible-core in version 2.14. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2022-03-31 22:59:51,453 p=35134 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-03-31 22:59:51,714 p=35134 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will
 be removed in version 2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False 
in ansible.cfg.
2022-03-31 22:59:51,778 p=35134 u=moonja n=ansible | PLAY [all] ***********************************************************************************************
2022-03-31 22:59:51,814 p=35134 u=moonja n=ansible | TASK [Gathering Facts] ***********************************************************************************
2022-03-31 22:59:53,960 p=35134 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 22:59:54,137 p=35134 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 22:59:54,138 p=35134 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 22:59:54,156 p=35134 u=moonja n=ansible | TASK [patroni-postgres : Stop services for patroni and etcd] *********************************************
2022-03-31 22:59:55,053 p=35134 u=moonja n=ansible | failed: [co7-node03] (item=patroni) => {"ansible_loop_var": "item", "changed": false, "item": "patroni", "msg": "Could not find the requested service patroni: host"}
2022-03-31 22:59:55,068 p=35134 u=moonja n=ansible | failed: [co7-node02] (item=patroni) => {"ansible_loop_var": "item", "changed": false, "item": "patroni", "msg": "Could not find the requested service patroni: host"}
2022-03-31 22:59:55,069 p=35134 u=moonja n=ansible | failed: [co7-node01] (item=patroni) => {"ansible_loop_var": "item", "changed": false, "item": "patroni", "msg": "Could not find the requested service patroni: host"}
2022-03-31 22:59:55,573 p=35134 u=moonja n=ansible | failed: [co7-node02] (item=etcd) => {"ansible_loop_var": "item", "changed": false, "item": "etcd", "msg": "Could not find the requested service patroni: host"}
2022-03-31 22:59:55,574 p=35134 u=moonja n=ansible | ...ignoring
2022-03-31 22:59:55,596 p=35134 u=moonja n=ansible | failed: [co7-node03] (item=etcd) => {"ansible_loop_var": "item", "changed": false, "item": "etcd", "msg": "Could not find the requested service patroni: host"}
2022-03-31 22:59:55,598 p=35134 u=moonja n=ansible | ...ignoring
2022-03-31 22:59:55,598 p=35134 u=moonja n=ansible | failed: [co7-node01] (item=etcd) => {"ansible_loop_var": "item", "changed": false, "item": "etcd", "msg": "Could not find the requested service patroni: host"}
2022-03-31 22:59:55,599 p=35134 u=moonja n=ansible | ...ignoring
2022-03-31 22:59:55,611 p=35134 u=moonja n=ansible | TASK [patroni-postgres : Kill etcd process] **************************************************************
2022-03-31 22:59:56,450 p=35134 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 22:59:56,451 p=35134 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 22:59:56,451 p=35134 u=moonja n=ansible | ...ignoring
2022-03-31 22:59:56,456 p=35134 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 22:59:56,456 p=35134 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 22:59:56,457 p=35134 u=moonja n=ansible | ...ignoring
2022-03-31 23:00:02,540 p=35134 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"ansible_job_id": "340847439227.18292", "changed": true, "cmd": "( killall etcd )", "delta": "0:00:00.030026", "end": "2022-03-31 22:59:56.894409", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/var/lib/pgsql/.ansible_async/340847439227.18292", "start": "2022-03-31 22:59:56.864383", "started": 1, "stderr": "etcd: no process found", "stderr_lines": ["etcd: no process found"], "stdout": "", "stdout_lines": []}
2022-03-31 23:00:02,540 p=35134 u=moonja n=ansible | ...ignoring
2022-03-31 23:00:02,549 p=35134 u=moonja n=ansible | TASK [patroni-postgres : Delete configuration file for patroni and systemd] ******************************
2022-03-31 23:00:03,209 p=35134 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/patroni.yml)
2022-03-31 23:00:03,210 p=35134 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/patroni.yml)
2022-03-31 23:00:03,211 p=35134 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/patroni.yml)
2022-03-31 23:00:03,664 p=35134 u=moonja n=ansible | ok: [co7-node03] => (item=/etc/systemd/system/patroni.service)
2022-03-31 23:00:03,665 p=35134 u=moonja n=ansible | ok: [co7-node01] => (item=/etc/systemd/system/patroni.service)
2022-03-31 23:00:03,665 p=35134 u=moonja n=ansible | ok: [co7-node02] => (item=/etc/systemd/system/patroni.service)
2022-03-31 23:00:04,091 p=35134 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/postgresql0.yml)
2022-03-31 23:00:04,092 p=35134 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/postgresql0.yml)
2022-03-31 23:00:04,092 p=35134 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/postgresql0.yml)
2022-03-31 23:00:04,580 p=35134 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/patroni_member.log)
2022-03-31 23:00:04,581 p=35134 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/patroni_member.log)
2022-03-31 23:00:04,581 p=35134 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/patroni_member.log)
2022-03-31 23:00:04,970 p=35134 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/etcd.yml)
2022-03-31 23:00:04,979 p=35134 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/etcd.yml)
2022-03-31 23:00:04,979 p=35134 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/etcd.yml)
2022-03-31 23:00:05,398 p=35134 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/etcd_logfile)
2022-03-31 23:00:05,402 p=35134 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/etcd_logfile)
2022-03-31 23:00:05,402 p=35134 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/etcd_logfile)
2022-03-31 23:00:05,417 p=35134 u=moonja n=ansible | TASK [patroni-postgres : Delete data directory for patroni cluster] **************************************
2022-03-31 23:00:05,980 p=35134 u=moonja n=ansible | ok: [co7-node03] => (item=backups)
2022-03-31 23:00:05,981 p=35134 u=moonja n=ansible | ok: [co7-node02] => (item=backups)
2022-03-31 23:00:05,982 p=35134 u=moonja n=ansible | ok: [co7-node01] => (item=backups)
2022-03-31 23:00:06,404 p=35134 u=moonja n=ansible | ok: [co7-node03] => (item=data)
2022-03-31 23:00:06,404 p=35134 u=moonja n=ansible | ok: [co7-node02] => (item=data)
2022-03-31 23:00:06,411 p=35134 u=moonja n=ansible | ok: [co7-node01] => (item=data)
2022-03-31 23:00:06,917 p=35134 u=moonja n=ansible | ok: [co7-node01] => (item=patroni_data)
2022-03-31 23:00:06,921 p=35134 u=moonja n=ansible | ok: [co7-node02] => (item=patroni_data)
2022-03-31 23:00:06,928 p=35134 u=moonja n=ansible | ok: [co7-node03] => (item=patroni_data)
2022-03-31 23:00:06,942 p=35134 u=moonja n=ansible | TASK [patroni-postgres : Change the permissions on the /tmp directory] ***********************************
2022-03-31 23:00:07,444 p=35134 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 23:00:07,459 p=35134 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 23:00:07,464 p=35134 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 23:00:07,474 p=35134 u=moonja n=ansible | TASK [patroni-postgres : Uninstall pip modules of Patroni prerequisites on all three nodes] **************
2022-03-31 23:00:13,816 p=35134 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"ansible_job_id": "894310232228.19980", "changed": true, "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 uninstall -r /var/lib/pgsql/requirements.txt -y )", "delta": "0:00:00.409754", "end": "2022-03-31 23:00:08.805647", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/root/.ansible_async/894310232228.19980", "start": "2022-03-31 23:00:08.395893", "started": 1, "stderr": "ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'", "stderr_lines": ["ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'"], "stdout": "", "stdout_lines": []}
2022-03-31 23:00:13,816 p=35134 u=moonja n=ansible | ...ignoring
2022-03-31 23:00:13,881 p=35134 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"ansible_job_id": "400822639152.15069", "changed": true, "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 uninstall -r /var/lib/pgsql/requirements.txt -y )", "delta": "0:00:00.398890", "end": "2022-03-31 23:00:08.789024", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/root/.ansible_async/400822639152.15069", "start": "2022-03-31 23:00:08.390134", "started": 1, "stderr": "ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'", "stderr_lines": ["ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'"], "stdout": "", "stdout_lines": []}
2022-03-31 23:00:13,881 p=35134 u=moonja n=ansible | ...ignoring
2022-03-31 23:00:13,881 p=35134 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"ansible_job_id": "457266238897.14961", "changed": true, "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 uninstall -r /var/lib/pgsql/requirements.txt -y )", "delta": "0:00:00.407285", "end": "2022-03-31 23:00:08.799147", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/root/.ansible_async/457266238897.14961", "start": "2022-03-31 23:00:08.391862", "started": 1, "stderr": "ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'", "stderr_lines": ["ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'"], "stdout": "", "stdout_lines": []}
2022-03-31 23:00:13,881 p=35134 u=moonja n=ansible | ...ignoring
2022-03-31 23:00:13,891 p=35134 u=moonja n=ansible | TASK [patroni-postgres : UnInstall wheel pip module on all three nodes] **********************************
2022-03-31 23:00:14,362 p=35134 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 23:00:14,363 p=35134 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 23:00:14,363 p=35134 u=moonja n=ansible | ...ignoring
2022-03-31 23:00:14,363 p=35134 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 23:00:14,363 p=35134 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 23:00:14,363 p=35134 u=moonja n=ansible | ...ignoring
2022-03-31 23:00:20,268 p=35134 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:00:20,276 p=35134 u=moonja n=ansible | TASK [patroni-postgres : Uninstall typing pip module on all three nodes] *********************************
2022-03-31 23:00:20,747 p=35134 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 23:00:20,748 p=35134 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 23:00:20,748 p=35134 u=moonja n=ansible | ...ignoring
2022-03-31 23:00:20,756 p=35134 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 23:00:20,756 p=35134 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 23:00:20,756 p=35134 u=moonja n=ansible | ...ignoring
2022-03-31 23:00:26,687 p=35134 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"ansible_job_id": "419362245264.20736", "changed": true, "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 uninstall typing -y )", "delta": "0:00:00.371441", "end": "2022-03-31 23:00:21.546943", "finished": 1, "msg": "non-zero return code", "rc": 2, "results_file": "/var/lib/pgsql/.ansible_async/419362245264.20736", "start": "2022-03-31 23:00:21.175502", "started": 1, "stderr": "ERROR: Exception:\nTraceback (most recent call last):\n  File \"/usr/lib64/python3.6/shutil.py\", line 550, in move\n    os.rename(src, real_dst)\nPermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc' -> '/var/tmp/pip-uninstall-uluug6rg/typing.cpython-36.pyc'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/cli/base_command.py\", line 164, in exc_logging_wrapper\n    status = run_func(*args)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/commands/uninstall.py\", line 99, in run\n    verbose=self.verbosity > 0,\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_install.py\", line 671, in uninstall\n    uninstalled_pathset.remove(auto_confirm, verbose)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 384, in remove\n    moved.stash(path)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 282, in stash\n    renames(path, new_path)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/utils/misc.py\", line 307, in renames\n    shutil.move(old, new)\n  File \"/usr/lib64/python3.6/shutil.py\", line 565, in move\n    os.unlink(src)\nPermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc'", "stderr_lines": ["ERROR: Exception:", "Traceback (most recent call last):", "  File \"/usr/lib64/python3.6/shutil.py\", line 550, in move", "    os.rename(src, real_dst)", "PermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc' -> '/var/tmp/pip-uninstall-uluug6rg/typing.cpython-36.pyc'", "", "During handling of the above exception, another exception occurred:", "", "Traceback (most recent call last):", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/cli/base_command.py\", line 164, in exc_logging_wrapper", "    status = run_func(*args)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/commands/uninstall.py\", line 99, in run", "    verbose=self.verbosity > 0,", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_install.py\", line 671, in uninstall", "    uninstalled_pathset.remove(auto_confirm, verbose)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 384, in remove", "    moved.stash(path)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 282, in stash", "    renames(path, new_path)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/utils/misc.py\", line 307, in renames", "    shutil.move(old, new)", "  File \"/usr/lib64/python3.6/shutil.py\", line 565, in move", "    os.unlink(src)", "PermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc'"], "stdout": "Found existing installation: typing 3.7.4.3\nUninstalling typing-3.7.4.3:", "stdout_lines": ["Found existing installation: typing 3.7.4.3", "Uninstalling typing-3.7.4.3:"]}
2022-03-31 23:00:26,687 p=35134 u=moonja n=ansible | ...ignoring
2022-03-31 23:00:26,696 p=35134 u=moonja n=ansible | TASK [patroni-postgres : Uninstall setuptools rust on all three nodes] ***********************************
2022-03-31 23:00:33,018 p=35134 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:00:33,097 p=35134 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 23:00:33,105 p=35134 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 23:00:33,115 p=35134 u=moonja n=ansible | TASK [patroni-postgres : Uninstall patroni module on all three nodes] ************************************
2022-03-31 23:00:39,403 p=35134 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:00:39,420 p=35134 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 23:00:39,421 p=35134 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 23:00:39,432 p=35134 u=moonja n=ansible | TASK [patroni-postgres : Uninstall wheel module on all three nodes] **************************************
2022-03-31 23:00:45,813 p=35134 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:00:45,831 p=35134 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 23:00:45,832 p=35134 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 23:00:45,843 p=35134 u=moonja n=ansible | TASK [patroni-postgres : Uninstall psycopg2-binary module on all three nodes] ****************************
2022-03-31 23:00:52,091 p=35134 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 23:00:52,163 p=35134 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:00:52,163 p=35134 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 23:00:52,174 p=35134 u=moonja n=ansible | TASK [patroni-postgres : Delete the dependencies file of etcd  on all three nodes] ***********************
2022-03-31 23:00:52,691 p=35134 u=moonja n=ansible | [WARNING]: Unable to use /var/lib/pgsql/.ansible/tmp as temporary directory, failing back to system:
[Errno 13] Permission denied: '/var/lib/pgsql'

2022-03-31 23:00:52,691 p=35134 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 23:00:52,701 p=35134 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 23:00:52,702 p=35134 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 23:00:52,714 p=35134 u=moonja n=ansible | TASK [patroni-postgres : Uninstall VMware Postgres RPM package on all hosts as root] *********************
2022-03-31 23:00:59,305 p=35134 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 23:00:59,365 p=35134 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 23:00:59,366 p=35134 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 23:00:59,378 p=35134 u=moonja n=ansible | TASK [patroni-postgres : Delete the vmwawre-postgres rpm file to all hosts in cluster] *******************
2022-03-31 23:00:59,881 p=35134 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 23:00:59,898 p=35134 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 23:00:59,898 p=35134 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 23:00:59,911 p=35134 u=moonja n=ansible | TASK [patroni-postgres : List iptables rules] ************************************************************
2022-03-31 23:01:00,390 p=35134 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 23:01:00,407 p=35134 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:01:00,434 p=35134 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 23:01:00,445 p=35134 u=moonja n=ansible | TASK [patroni-postgres : Flush iptables rules] ***********************************************************
2022-03-31 23:01:00,948 p=35134 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 23:01:00,953 p=35134 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 23:01:00,953 p=35134 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:01:00,967 p=35134 u=moonja n=ansible | TASK [patroni-postgres : Stop and disable firewalld] *****************************************************
2022-03-31 23:01:01,947 p=35134 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 23:01:01,957 p=35134 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 23:01:01,984 p=35134 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 23:01:02,032 p=35134 u=moonja n=ansible | PLAY RECAP ***********************************************************************************************
2022-03-31 23:01:02,033 p=35134 u=moonja n=ansible | co7-node01                 : ok=19   changed=10   unreachable=0    failed=0    skipped=0    rescued=0    ignored=4   
2022-03-31 23:01:02,052 p=35134 u=moonja n=ansible | co7-node02                 : ok=19   changed=10   unreachable=0    failed=0    skipped=0    rescued=0    ignored=5   
2022-03-31 23:01:02,053 p=35134 u=moonja n=ansible | co7-node03                 : ok=19   changed=10   unreachable=0    failed=0    skipped=0    rescued=0    ignored=5   
2022-03-31 23:02:02,964 p=39053 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This 
feature will be removed from ansible-core in version 2.14. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2022-03-31 23:02:02,977 p=39053 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-03-31 23:02:03,271 p=39053 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will
 be removed in version 2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False 
in ansible.cfg.
2022-03-31 23:02:03,336 p=39053 u=moonja n=ansible | PLAY [all] ***********************************************************************************************
2022-03-31 23:02:03,372 p=39053 u=moonja n=ansible | TASK [Gathering Facts] ***********************************************************************************
2022-03-31 23:02:05,611 p=39053 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 23:02:05,620 p=39053 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 23:02:05,673 p=39053 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 23:02:05,692 p=39053 u=moonja n=ansible | TASK [patroni-postgres : Stop and disable firewalld] *****************************************************
2022-03-31 23:02:06,629 p=39053 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 23:02:06,652 p=39053 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 23:02:06,655 p=39053 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 23:02:06,669 p=39053 u=moonja n=ansible | TASK [patroni-postgres : Flush iptables rules] ***********************************************************
2022-03-31 23:02:07,405 p=39053 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 23:02:07,416 p=39053 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 23:02:07,420 p=39053 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:02:07,430 p=39053 u=moonja n=ansible | TASK [patroni-postgres : List iptables rules] ************************************************************
2022-03-31 23:02:07,927 p=39053 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 23:02:07,951 p=39053 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:02:07,959 p=39053 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 23:02:07,971 p=39053 u=moonja n=ansible | TASK [patroni-postgres : debug] **************************************************************************
2022-03-31 23:02:08,006 p=39053 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": "Chain INPUT (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain FORWARD (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain OUTPUT (policy ACCEPT)\ntarget     prot opt source               destination         "
}
2022-03-31 23:02:08,008 p=39053 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": "Chain INPUT (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain FORWARD (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain OUTPUT (policy ACCEPT)\ntarget     prot opt source               destination         "
}
2022-03-31 23:02:08,019 p=39053 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": "Chain INPUT (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain FORWARD (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain OUTPUT (policy ACCEPT)\ntarget     prot opt source               destination         "
}
2022-03-31 23:02:08,031 p=39053 u=moonja n=ansible | TASK [patroni-postgres : Install the 'Development tools' package group for VMware Postgres Dependencies] ***
2022-03-31 23:02:20,354 p=39053 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 23:02:20,423 p=39053 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"ansible_job_id": "454835364323.18904", "changed": false, "changes": {"installed": ["@Development tools"]}, "finished": 1, "msg": "There are unfinished transactions remaining. You might consider running yum-complete-transaction, or \"yum-complete-transaction --cleanup-only\" and \"yum history redo last\", first to finish them. If those don't work you'll have to try removing/installing packages by hand (maybe package-cleanup can help).\nError: Package: glibc-headers-2.17-325.el7_9.x86_64 (updates)\n           Requires: kernel-headers\nError: Package: systemtap-devel-4.0-13.el7.x86_64 (base)\n           Requires: kernel-devel-uname-r\nError: Package: glibc-headers-2.17-325.el7_9.x86_64 (updates)\n           Requires: kernel-headers >= 2.2.1\n", "rc": 1, "results": ["Loaded plugins: fastestmirror, product-id, search-disabled-repos, subscription-\n              : manager, versionlock\n\nThis system is not registered with an entitlement server. You can use subscription-manager to register.\n\nLoading mirror speeds from cached hostfile\n * base: mirror.anigil.com\n * centos-sclo-rh: mirror.kakao.com\n * epel: ftp.iij.ad.jp\n * extras: mirror.anigil.com\n * updates: mirror.kakao.com\nResolving Dependencies\n--> Running transaction check\n---> Package byacc.x86_64 0:1.9.20130304-3.el7 will be installed\n---> Package cscope.x86_64 0:15.8-10.el7 will be installed\n---> Package ctags.x86_64 0:5.8-13.el7 will be installed\n---> Package diffstat.x86_64 0:1.57-4.el7 will be installed\n---> Package doxygen.x86_64 1:1.8.5-4.el7 will be installed\n---> Package elfutils.x86_64 0:0.176-5.el7 will be installed\n---> Package gcc.x86_64 0:4.8.5-44.el7 will be installed\n--> Processing Dependency: glibc-devel >= 2.2.90-12 for package: gcc-4.8.5-44.el7.x86_64\n---> Package gcc-c++.x86_64 0:4.8.5-44.el7 will be installed\n---> Package gcc-gfortran.x86_64 0:4.8.5-44.el7 will be installed\n--> Processing Dependency: libquadmath-devel = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libquadmath = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libgfortran = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libgfortran.so.3()(64bit) for package: gcc-gfortran-4.8.5-44.el7.x86_64\n---> Package indent.x86_64 0:2.2.11-13.el7 will be installed\n---> Package intltool.noarch 0:0.50.2-7.el7 will be installed\n--> Processing Dependency: perl(XML::Parser) for package: intltool-0.50.2-7.el7.noarch\n---> Package libtool.x86_64 0:2.4.2-22.el7_3 will be installed\n---> Package patchutils.x86_64 0:0.3.3-5.el7_9 will be installed\n---> Package rcs.x86_64 0:5.9.0-7.el7 will be installed\n---> Package rpm-build.x86_64 0:4.11.3-48.el7_9 will be installed\n--> Processing Dependency: /usr/bin/gdb-add-index for package: rpm-build-4.11.3-48.el7_9.x86_64\n---> Package rpm-sign.x86_64 0:4.11.3-48.el7_9 will be installed\n---> Package swig.x86_64 0:2.0.10-5.el7 will be installed\n---> Package systemtap.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: systemtap-devel = 4.0-13.el7 for package: systemtap-4.0-13.el7.x86_64\n--> Processing Dependency: systemtap-client = 4.0-13.el7 for package: systemtap-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package gdb.x86_64 0:7.6.1-120.el7 will be installed\n---> Package glibc-devel.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: glibc-headers = 2.17-325.el7_9 for package: glibc-devel-2.17-325.el7_9.x86_64\n--> Processing Dependency: glibc-headers for package: glibc-devel-2.17-325.el7_9.x86_64\n---> Package libgfortran.x86_64 0:4.8.5-44.el7 will be installed\n---> Package libquadmath.x86_64 0:4.8.5-44.el7 will be installed\n---> Package libquadmath-devel.x86_64 0:4.8.5-44.el7 will be installed\n---> Package perl-XML-Parser.x86_64 0:2.41-10.el7 will be installed\n---> Package systemtap-client.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: systemtap-runtime = 4.0-13.el7 for package: systemtap-client-4.0-13.el7.x86_64\n--> Processing Dependency: mokutil for package: systemtap-client-4.0-13.el7.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package mokutil.x86_64 0:15-8.el7 will be installed\n--> Processing Dependency: libefivar.so.1(libefivar.so.0)(64bit) for package: mokutil-15-8.el7.x86_64\n--> Processing Dependency: libefivar.so.1(LIBEFIVAR_0.24)(64bit) for package: mokutil-15-8.el7.x86_64\n--> Processing Dependency: libefivar.so.1()(64bit) for package: mokutil-15-8.el7.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n---> Package systemtap-runtime.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: libsymtabAPI.so.9.3()(64bit) for package: systemtap-runtime-4.0-13.el7.x86_64\n--> Processing Dependency: libdyninstAPI.so.9.3()(64bit) for package: systemtap-runtime-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package dyninst.x86_64 0:9.3.1-3.el7 will be installed\n--> Processing Dependency: libdwarf.so.0()(64bit) for package: dyninst-9.3.1-3.el7.x86_64\n---> Package efivar-libs.x86_64 0:36-12.el7 will be installed\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package libdwarf.x86_64 0:20130207-4.el7 will be installed\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Finished Dependency Resolution\n You could try using --skip-broken to work around the problem\n You could try running: rpm -Va --nofiles --nodigest\n"], "results_file": "/root/.ansible_async/454835364323.18904", "started": 1, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2022-03-31 23:02:25,844 p=39053 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"ansible_job_id": "205892150156.18795", "changed": false, "changes": {"installed": ["@Development tools"]}, "finished": 1, "msg": "There are unfinished transactions remaining. You might consider running yum-complete-transaction, or \"yum-complete-transaction --cleanup-only\" and \"yum history redo last\", first to finish them. If those don't work you'll have to try removing/installing packages by hand (maybe package-cleanup can help).\nError: Package: glibc-headers-2.17-325.el7_9.x86_64 (updates)\n           Requires: kernel-headers\nError: Package: systemtap-devel-4.0-13.el7.x86_64 (base)\n           Requires: kernel-devel-uname-r\nError: Package: glibc-headers-2.17-325.el7_9.x86_64 (updates)\n           Requires: kernel-headers >= 2.2.1\n", "rc": 1, "results": ["Loaded plugins: fastestmirror, product-id, search-disabled-repos, subscription-\n              : manager, versionlock\n\nThis system is not registered with an entitlement server. You can use subscription-manager to register.\n\nLoading mirror speeds from cached hostfile\n * base: ftp.kaist.ac.kr\n * centos-sclo-rh: ftp.kaist.ac.kr\n * epel: ftp.jaist.ac.jp\n * extras: ftp.kaist.ac.kr\n * updates: ftp.tsukuba.wide.ad.jp\nResolving Dependencies\n--> Running transaction check\n---> Package byacc.x86_64 0:1.9.20130304-3.el7 will be installed\n---> Package cscope.x86_64 0:15.8-10.el7 will be installed\n---> Package ctags.x86_64 0:5.8-13.el7 will be installed\n---> Package diffstat.x86_64 0:1.57-4.el7 will be installed\n---> Package doxygen.x86_64 1:1.8.5-4.el7 will be installed\n---> Package elfutils.x86_64 0:0.176-5.el7 will be installed\n---> Package gcc.x86_64 0:4.8.5-44.el7 will be installed\n--> Processing Dependency: glibc-devel >= 2.2.90-12 for package: gcc-4.8.5-44.el7.x86_64\n---> Package gcc-c++.x86_64 0:4.8.5-44.el7 will be installed\n---> Package gcc-gfortran.x86_64 0:4.8.5-44.el7 will be installed\n--> Processing Dependency: libquadmath-devel = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libquadmath = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libgfortran = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libgfortran.so.3()(64bit) for package: gcc-gfortran-4.8.5-44.el7.x86_64\n---> Package indent.x86_64 0:2.2.11-13.el7 will be installed\n---> Package intltool.noarch 0:0.50.2-7.el7 will be installed\n--> Processing Dependency: perl(XML::Parser) for package: intltool-0.50.2-7.el7.noarch\n---> Package libtool.x86_64 0:2.4.2-22.el7_3 will be installed\n---> Package patchutils.x86_64 0:0.3.3-5.el7_9 will be installed\n---> Package rcs.x86_64 0:5.9.0-7.el7 will be installed\n---> Package rpm-build.x86_64 0:4.11.3-48.el7_9 will be installed\n--> Processing Dependency: /usr/bin/gdb-add-index for package: rpm-build-4.11.3-48.el7_9.x86_64\n---> Package rpm-sign.x86_64 0:4.11.3-48.el7_9 will be installed\n---> Package swig.x86_64 0:2.0.10-5.el7 will be installed\n---> Package systemtap.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: systemtap-devel = 4.0-13.el7 for package: systemtap-4.0-13.el7.x86_64\n--> Processing Dependency: systemtap-client = 4.0-13.el7 for package: systemtap-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package gdb.x86_64 0:7.6.1-120.el7 will be installed\n---> Package glibc-devel.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: glibc-headers = 2.17-325.el7_9 for package: glibc-devel-2.17-325.el7_9.x86_64\n--> Processing Dependency: glibc-headers for package: glibc-devel-2.17-325.el7_9.x86_64\n---> Package libgfortran.x86_64 0:4.8.5-44.el7 will be installed\n---> Package libquadmath.x86_64 0:4.8.5-44.el7 will be installed\n---> Package libquadmath-devel.x86_64 0:4.8.5-44.el7 will be installed\n---> Package perl-XML-Parser.x86_64 0:2.41-10.el7 will be installed\n---> Package systemtap-client.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: systemtap-runtime = 4.0-13.el7 for package: systemtap-client-4.0-13.el7.x86_64\n--> Processing Dependency: mokutil for package: systemtap-client-4.0-13.el7.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package mokutil.x86_64 0:15-8.el7 will be installed\n--> Processing Dependency: libefivar.so.1(libefivar.so.0)(64bit) for package: mokutil-15-8.el7.x86_64\n--> Processing Dependency: libefivar.so.1(LIBEFIVAR_0.24)(64bit) for package: mokutil-15-8.el7.x86_64\n--> Processing Dependency: libefivar.so.1()(64bit) for package: mokutil-15-8.el7.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n---> Package systemtap-runtime.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: libsymtabAPI.so.9.3()(64bit) for package: systemtap-runtime-4.0-13.el7.x86_64\n--> Processing Dependency: libdyninstAPI.so.9.3()(64bit) for package: systemtap-runtime-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package dyninst.x86_64 0:9.3.1-3.el7 will be installed\n--> Processing Dependency: libdwarf.so.0()(64bit) for package: dyninst-9.3.1-3.el7.x86_64\n--> Processing Dependency: libboost_date_time-mt.so.1.53.0()(64bit) for package: dyninst-9.3.1-3.el7.x86_64\n---> Package efivar-libs.x86_64 0:36-12.el7 will be installed\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package boost-date-time.x86_64 0:1.53.0-28.el7 will be installed\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package libdwarf.x86_64 0:20130207-4.el7 will be installed\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Finished Dependency Resolution\n You could try using --skip-broken to work around the problem\n You could try running: rpm -Va --nofiles --nodigest\n"], "results_file": "/root/.ansible_async/205892150156.18795", "started": 1, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2022-03-31 23:02:25,853 p=39053 u=moonja n=ansible | TASK [patroni-postgres : Install the perl package for VMware Postgres Dependencies] **********************
2022-03-31 23:02:32,299 p=39053 u=moonja n=ansible | ok: [co7-node01] => (item=perl)
2022-03-31 23:02:38,617 p=39053 u=moonja n=ansible | ok: [co7-node01] => (item=readline-devel)
2022-03-31 23:02:44,986 p=39053 u=moonja n=ansible | ok: [co7-node01] => (item=libicu-devel)
2022-03-31 23:02:51,558 p=39053 u=moonja n=ansible | ok: [co7-node01] => (item=perl-libs)
2022-03-31 23:02:51,571 p=39053 u=moonja n=ansible | TASK [patroni-postgres : Copy the vmwawre-postgres rpm file to all hosts in cluster] *********************
2022-03-31 23:02:53,076 p=39053 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:02:53,086 p=39053 u=moonja n=ansible | TASK [patroni-postgres : Install VMware Postgres on all hosts as root] ***********************************
2022-03-31 23:03:10,180 p=39053 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:03:10,192 p=39053 u=moonja n=ansible | TASK [patroni-postgres : Install the etcd and Patroni prerequisites on all three nodes] ******************
2022-03-31 23:03:16,589 p=39053 u=moonja n=ansible | ok: [co7-node01] => (item=python3)
2022-03-31 23:03:22,954 p=39053 u=moonja n=ansible | ok: [co7-node01] => (item=python3-devel)
2022-03-31 23:03:29,379 p=39053 u=moonja n=ansible | changed: [co7-node01] => (item=gcc)
2022-03-31 23:03:35,930 p=39053 u=moonja n=ansible | ok: [co7-node01] => (item=etcd)
2022-03-31 23:03:47,827 p=39053 u=moonja n=ansible | changed: [co7-node01] => (item=python-psycopg2)
2022-03-31 23:03:54,159 p=39053 u=moonja n=ansible | ok: [co7-node01] => (item=python3-pip)
2022-03-31 23:04:00,514 p=39053 u=moonja n=ansible | ok: [co7-node01] => (item=python34-setuptools)
2022-03-31 23:04:06,813 p=39053 u=moonja n=ansible | ok: [co7-node01] => (item=yamllint)
2022-03-31 23:04:13,186 p=39053 u=moonja n=ansible | ok: [co7-node01] => (item=daemonize)
2022-03-31 23:04:13,203 p=39053 u=moonja n=ansible | TASK [patroni-postgres : Install the dependencies of etcd  on all three nodes] ***************************
2022-03-31 23:04:14,147 p=39053 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:04:14,156 p=39053 u=moonja n=ansible | TASK [patroni-postgres : Install setuptools rust on all three nodes] *************************************
2022-03-31 23:04:20,556 p=39053 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:04:20,564 p=39053 u=moonja n=ansible | TASK [patroni-postgres : Install typing pip module on all three nodes] ***********************************
2022-03-31 23:04:26,977 p=39053 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:04:26,985 p=39053 u=moonja n=ansible | TASK [patroni-postgres : Upgrade pip3 version] ***********************************************************
2022-03-31 23:04:33,317 p=39053 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:04:33,328 p=39053 u=moonja n=ansible | TASK [patroni-postgres : Install wheel module on all three nodes] ****************************************
2022-03-31 23:04:39,658 p=39053 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:04:39,667 p=39053 u=moonja n=ansible | TASK [patroni-postgres : debug] **************************************************************************
2022-03-31 23:04:39,721 p=39053 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "144592395387.32040",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; export PATH=$PATH:/usr/local/bin && pip3 install wheel )",
        "delta": "0:00:01.225418",
        "end": "2022-03-31 23:04:35.463665",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/144592395387.32040",
        "start": "2022-03-31 23:04:34.238247",
        "started": 1,
        "stderr": "  WARNING: The script wheel is installed in '/var/lib/pgsql/.local/bin' which is not on PATH.\n  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.",
        "stderr_lines": [
            "  WARNING: The script wheel is installed in '/var/lib/pgsql/.local/bin' which is not on PATH.",
            "  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location."
        ],
        "stdout": "Defaulting to user installation because normal site-packages is not writeable\nCollecting wheel\n  Using cached wheel-0.37.1-py2.py3-none-any.whl (35 kB)\nInstalling collected packages: wheel\nSuccessfully installed wheel-0.37.1",
        "stdout_lines": [
            "Defaulting to user installation because normal site-packages is not writeable",
            "Collecting wheel",
            "  Using cached wheel-0.37.1-py2.py3-none-any.whl (35 kB)",
            "Installing collected packages: wheel",
            "Successfully installed wheel-0.37.1"
        ]
    }
}
2022-03-31 23:04:39,734 p=39053 u=moonja n=ansible | TASK [patroni-postgres : Install pip modules of Patroni prerequisites on all three nodes] ****************
2022-03-31 23:04:46,199 p=39053 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:04:46,209 p=39053 u=moonja n=ansible | TASK [patroni-postgres : debug] **************************************************************************
2022-03-31 23:04:46,272 p=39053 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "909524417867.32418",
        "changed": true,
        "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 install -r /var/lib/pgsql/requirements.txt )",
        "delta": "0:00:00.678991",
        "end": "2022-03-31 23:04:41.350857",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/909524417867.32418",
        "start": "2022-03-31 23:04:40.671866",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "Defaulting to user installation because normal site-packages is not writeable\nRequirement already satisfied: urllib3!=1.21,>=1.19.1 in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 1)) (1.26.9)\nRequirement already satisfied: boto in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 2)) (2.49.0)\nRequirement already satisfied: PyYAML in /usr/lib64/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 3)) (3.13)\nRequirement already satisfied: requests in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 4)) (2.27.1)\nRequirement already satisfied: six>=1.7 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 5)) (1.16.0)\nRequirement already satisfied: kazoo>=1.3.1 in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 6)) (2.8.0)\nRequirement already satisfied: python-etcd<0.5,>=0.4.3 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 7)) (0.4.5)\nRequirement already satisfied: python-consul>=0.7.0 in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 8)) (1.1.0)\nRequirement already satisfied: click>=4.1 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 9)) (8.0.1)\nRequirement already satisfied: prettytable>=0.7 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 10)) (2.2.0)\nRequirement already satisfied: tzlocal in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 11)) (4.1)\nRequirement already satisfied: python-dateutil in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 12)) (2.8.2)\nRequirement already satisfied: psutil>=2.0.0 in /usr/local/lib64/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 13)) (5.8.0)\nRequirement already satisfied: cdiff in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 14)) (1.0)\nRequirement already satisfied: kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0 in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 15)) (7.0.0)\nRequirement already satisfied: charset-normalizer~=2.0.0 in /usr/local/lib/python3.6/site-packages (from requests->-r /var/lib/pgsql/requirements.txt (line 4)) (2.0.4)\nRequirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.6/site-packages (from requests->-r /var/lib/pgsql/requirements.txt (line 4)) (3.2)\nRequirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.6/site-packages (from requests->-r /var/lib/pgsql/requirements.txt (line 4)) (2021.5.30)\nRequirement already satisfied: dnspython>=1.13.0 in /usr/local/lib/python3.6/site-packages (from python-etcd<0.5,>=0.4.3->-r /var/lib/pgsql/requirements.txt (line 7)) (2.1.0)\nRequirement already satisfied: importlib-metadata in /usr/local/lib/python3.6/site-packages (from click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (4.8.1)\nRequirement already satisfied: wcwidth in /usr/local/lib/python3.6/site-packages (from prettytable>=0.7->-r /var/lib/pgsql/requirements.txt (line 10)) (0.2.5)\nRequirement already satisfied: pytz-deprecation-shim in /var/lib/pgsql/.local/lib/python3.6/site-packages (from tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (0.1.0.post0)\nRequirement already satisfied: backports.zoneinfo in /usr/local/lib64/python3.6/site-packages (from tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (0.2.1)\nRequirement already satisfied: google-auth>=1.0.1 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (2.0.2)\nRequirement already satisfied: setuptools>=21.0.0 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (57.1.0)\nRequirement already satisfied: websocket-client!=0.40.0,!=0.41.*,!=0.42.*,>=0.32.0 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.2.1)\nRequirement already satisfied: requests-oauthlib in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.3.0)\nRequirement already satisfied: adal>=1.0.2 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.2.7)\nRequirement already satisfied: cryptography>=1.1.0 in /usr/local/lib64/python3.6/site-packages (from adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (3.4.8)\nRequirement already satisfied: PyJWT<3,>=1.0.0 in /usr/local/lib/python3.6/site-packages (from adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (2.1.0)\nRequirement already satisfied: cachetools<5.0,>=2.0.0 in /usr/local/lib/python3.6/site-packages (from google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (4.2.2)\nRequirement already satisfied: rsa<5,>=3.1.4 in /usr/local/lib/python3.6/site-packages (from google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (4.7.2)\nRequirement already satisfied: pyasn1-modules>=0.2.1 in /usr/local/lib/python3.6/site-packages (from google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (0.2.8)\nRequirement already satisfied: importlib-resources in /usr/local/lib/python3.6/site-packages (from backports.zoneinfo->tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (5.2.2)\nRequirement already satisfied: typing-extensions>=3.6.4 in /usr/local/lib/python3.6/site-packages (from importlib-metadata->click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (3.10.0.2)\nRequirement already satisfied: zipp>=0.5 in /usr/local/lib/python3.6/site-packages (from importlib-metadata->click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (3.5.0)\nRequirement already satisfied: tzdata in /var/lib/pgsql/.local/lib/python3.6/site-packages (from pytz-deprecation-shim->tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (2022.1)\nRequirement already satisfied: oauthlib>=3.0.0 in /usr/local/lib/python3.6/site-packages (from requests-oauthlib->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (3.1.1)\nRequirement already satisfied: cffi>=1.12 in /usr/local/lib64/python3.6/site-packages (from cryptography>=1.1.0->adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.14.6)\nRequirement already satisfied: pyasn1<0.5.0,>=0.4.6 in /usr/local/lib/python3.6/site-packages (from pyasn1-modules>=0.2.1->google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (0.4.8)\nRequirement already satisfied: pycparser in /usr/local/lib/python3.6/site-packages (from cffi>=1.12->cryptography>=1.1.0->adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (2.20)",
        "stdout_lines": [
            "Defaulting to user installation because normal site-packages is not writeable",
            "Requirement already satisfied: urllib3!=1.21,>=1.19.1 in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 1)) (1.26.9)",
            "Requirement already satisfied: boto in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 2)) (2.49.0)",
            "Requirement already satisfied: PyYAML in /usr/lib64/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 3)) (3.13)",
            "Requirement already satisfied: requests in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 4)) (2.27.1)",
            "Requirement already satisfied: six>=1.7 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 5)) (1.16.0)",
            "Requirement already satisfied: kazoo>=1.3.1 in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 6)) (2.8.0)",
            "Requirement already satisfied: python-etcd<0.5,>=0.4.3 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 7)) (0.4.5)",
            "Requirement already satisfied: python-consul>=0.7.0 in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 8)) (1.1.0)",
            "Requirement already satisfied: click>=4.1 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 9)) (8.0.1)",
            "Requirement already satisfied: prettytable>=0.7 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 10)) (2.2.0)",
            "Requirement already satisfied: tzlocal in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 11)) (4.1)",
            "Requirement already satisfied: python-dateutil in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 12)) (2.8.2)",
            "Requirement already satisfied: psutil>=2.0.0 in /usr/local/lib64/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 13)) (5.8.0)",
            "Requirement already satisfied: cdiff in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 14)) (1.0)",
            "Requirement already satisfied: kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0 in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 15)) (7.0.0)",
            "Requirement already satisfied: charset-normalizer~=2.0.0 in /usr/local/lib/python3.6/site-packages (from requests->-r /var/lib/pgsql/requirements.txt (line 4)) (2.0.4)",
            "Requirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.6/site-packages (from requests->-r /var/lib/pgsql/requirements.txt (line 4)) (3.2)",
            "Requirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.6/site-packages (from requests->-r /var/lib/pgsql/requirements.txt (line 4)) (2021.5.30)",
            "Requirement already satisfied: dnspython>=1.13.0 in /usr/local/lib/python3.6/site-packages (from python-etcd<0.5,>=0.4.3->-r /var/lib/pgsql/requirements.txt (line 7)) (2.1.0)",
            "Requirement already satisfied: importlib-metadata in /usr/local/lib/python3.6/site-packages (from click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (4.8.1)",
            "Requirement already satisfied: wcwidth in /usr/local/lib/python3.6/site-packages (from prettytable>=0.7->-r /var/lib/pgsql/requirements.txt (line 10)) (0.2.5)",
            "Requirement already satisfied: pytz-deprecation-shim in /var/lib/pgsql/.local/lib/python3.6/site-packages (from tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (0.1.0.post0)",
            "Requirement already satisfied: backports.zoneinfo in /usr/local/lib64/python3.6/site-packages (from tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (0.2.1)",
            "Requirement already satisfied: google-auth>=1.0.1 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (2.0.2)",
            "Requirement already satisfied: setuptools>=21.0.0 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (57.1.0)",
            "Requirement already satisfied: websocket-client!=0.40.0,!=0.41.*,!=0.42.*,>=0.32.0 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.2.1)",
            "Requirement already satisfied: requests-oauthlib in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.3.0)",
            "Requirement already satisfied: adal>=1.0.2 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.2.7)",
            "Requirement already satisfied: cryptography>=1.1.0 in /usr/local/lib64/python3.6/site-packages (from adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (3.4.8)",
            "Requirement already satisfied: PyJWT<3,>=1.0.0 in /usr/local/lib/python3.6/site-packages (from adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (2.1.0)",
            "Requirement already satisfied: cachetools<5.0,>=2.0.0 in /usr/local/lib/python3.6/site-packages (from google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (4.2.2)",
            "Requirement already satisfied: rsa<5,>=3.1.4 in /usr/local/lib/python3.6/site-packages (from google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (4.7.2)",
            "Requirement already satisfied: pyasn1-modules>=0.2.1 in /usr/local/lib/python3.6/site-packages (from google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (0.2.8)",
            "Requirement already satisfied: importlib-resources in /usr/local/lib/python3.6/site-packages (from backports.zoneinfo->tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (5.2.2)",
            "Requirement already satisfied: typing-extensions>=3.6.4 in /usr/local/lib/python3.6/site-packages (from importlib-metadata->click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (3.10.0.2)",
            "Requirement already satisfied: zipp>=0.5 in /usr/local/lib/python3.6/site-packages (from importlib-metadata->click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (3.5.0)",
            "Requirement already satisfied: tzdata in /var/lib/pgsql/.local/lib/python3.6/site-packages (from pytz-deprecation-shim->tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (2022.1)",
            "Requirement already satisfied: oauthlib>=3.0.0 in /usr/local/lib/python3.6/site-packages (from requests-oauthlib->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (3.1.1)",
            "Requirement already satisfied: cffi>=1.12 in /usr/local/lib64/python3.6/site-packages (from cryptography>=1.1.0->adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.14.6)",
            "Requirement already satisfied: pyasn1<0.5.0,>=0.4.6 in /usr/local/lib/python3.6/site-packages (from pyasn1-modules>=0.2.1->google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (0.4.8)",
            "Requirement already satisfied: pycparser in /usr/local/lib/python3.6/site-packages (from cffi>=1.12->cryptography>=1.1.0->adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (2.20)"
        ]
    }
}
2022-03-31 23:04:46,284 p=39053 u=moonja n=ansible | TASK [patroni-postgres : Iinstall wheel module on all three nodes] ***************************************
2022-03-31 23:04:52,672 p=39053 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:04:52,681 p=39053 u=moonja n=ansible | TASK [patroni-postgres : debug] **************************************************************************
2022-03-31 23:04:52,721 p=39053 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "20398882063.332",
        "changed": true,
        "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 install wheel )",
        "delta": "0:00:01.055268",
        "end": "2022-03-31 23:04:48.240030",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/root/.ansible_async/20398882063.332",
        "start": "2022-03-31 23:04:47.184762",
        "started": 1,
        "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv",
        "stderr_lines": [
            "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"
        ],
        "stdout": "Collecting wheel\n  Using cached wheel-0.37.1-py2.py3-none-any.whl (35 kB)\nInstalling collected packages: wheel\nSuccessfully installed wheel-0.37.1",
        "stdout_lines": [
            "Collecting wheel",
            "  Using cached wheel-0.37.1-py2.py3-none-any.whl (35 kB)",
            "Installing collected packages: wheel",
            "Successfully installed wheel-0.37.1"
        ]
    }
}
2022-03-31 23:04:52,735 p=39053 u=moonja n=ansible | TASK [patroni-postgres : Install psycopg2-binary module on all three nodes] ******************************
2022-03-31 23:04:59,143 p=39053 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:04:59,153 p=39053 u=moonja n=ansible | TASK [patroni-postgres : debug] **************************************************************************
2022-03-31 23:04:59,176 p=39053 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "51820633875.768",
        "changed": true,
        "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 install psycopg2-binary )",
        "delta": "0:00:01.516928",
        "end": "2022-03-31 23:04:55.118868",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/root/.ansible_async/51820633875.768",
        "start": "2022-03-31 23:04:53.601940",
        "started": 1,
        "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv",
        "stderr_lines": [
            "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"
        ],
        "stdout": "Collecting psycopg2-binary\n  Using cached psycopg2_binary-2.9.3-cp36-cp36m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.0 MB)\nInstalling collected packages: psycopg2-binary\nSuccessfully installed psycopg2-binary-2.9.3",
        "stdout_lines": [
            "Collecting psycopg2-binary",
            "  Using cached psycopg2_binary-2.9.3-cp36-cp36m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.0 MB)",
            "Installing collected packages: psycopg2-binary",
            "Successfully installed psycopg2-binary-2.9.3"
        ]
    }
}
2022-03-31 23:04:59,185 p=39053 u=moonja n=ansible | TASK [patroni-postgres : Install patroni modules on all three nodes for vmware-postgres 13.x version] ****
2022-03-31 23:05:05,524 p=39053 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:05:05,532 p=39053 u=moonja n=ansible | TASK [patroni-postgres : Change the permissions on the /tmp directory] ***********************************
2022-03-31 23:05:06,246 p=39053 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 23:05:06,255 p=39053 u=moonja n=ansible | TASK [patroni-postgres : Create the etcd.yml configuration file for all nodes] ***************************
2022-03-31 23:05:07,296 p=39053 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:05:07,305 p=39053 u=moonja n=ansible | TASK [patroni-postgres : debug] **************************************************************************
2022-03-31 23:05:07,327 p=39053 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "changed": true,
        "checksum": "58bceddeab742a1f1f8a005c010a81a7f8ce62ae",
        "dest": "/var/lib/pgsql/etcd.yml",
        "diff": [],
        "failed": false,
        "gid": 26,
        "group": "postgres",
        "md5sum": "6402cbf0dd381f0e0ff13cf94a0f8c85",
        "mode": "0644",
        "owner": "postgres",
        "size": 490,
        "src": "/var/tmp/ansible-tmp-1648735506.3559198-41501-265384039398403/source",
        "state": "file",
        "uid": 26
    }
}
2022-03-31 23:05:07,336 p=39053 u=moonja n=ansible | TASK [patroni-postgres : Copy systemd configuration of etcd into /etc/systemd/system] ********************
2022-03-31 23:05:09,067 p=39053 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 23:05:09,078 p=39053 u=moonja n=ansible | TASK [patroni-postgres : Reload and start etcd through systemd] ******************************************
2022-03-31 23:06:39,846 p=39053 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": false, "msg": "Unable to start service etcd: Job for etcd.service failed because a timeout was exceeded. See \"systemctl status etcd.service\" and \"journalctl -xe\" for details.\n"}
2022-03-31 23:06:39,848 p=39053 u=moonja n=ansible | PLAY RECAP ***********************************************************************************************
2022-03-31 23:06:39,848 p=39053 u=moonja n=ansible | co7-node01                 : ok=27   changed=15   unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2022-03-31 23:06:39,848 p=39053 u=moonja n=ansible | co7-node02                 : ok=5    changed=2    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2022-03-31 23:06:39,848 p=39053 u=moonja n=ansible | co7-node03                 : ok=5    changed=2    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2022-03-31 23:08:09,877 p=41905 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This 
feature will be removed from ansible-core in version 2.14. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2022-03-31 23:08:09,889 p=41905 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-03-31 23:08:10,173 p=41905 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will
 be removed in version 2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False 
in ansible.cfg.
2022-03-31 23:08:10,233 p=41905 u=moonja n=ansible | PLAY [all] ***********************************************************************************************
2022-03-31 23:08:10,267 p=41905 u=moonja n=ansible | TASK [Gathering Facts] ***********************************************************************************
2022-03-31 23:08:12,447 p=41905 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 23:08:12,449 p=41905 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 23:08:12,474 p=41905 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 23:08:12,492 p=41905 u=moonja n=ansible | TASK [patroni-postgres : Stop services for patroni and etcd] *********************************************
2022-03-31 23:08:13,403 p=41905 u=moonja n=ansible | failed: [co7-node02] (item=patroni) => {"ansible_loop_var": "item", "changed": false, "item": "patroni", "msg": "Could not find the requested service patroni: host"}
2022-03-31 23:08:13,413 p=41905 u=moonja n=ansible | failed: [co7-node01] (item=patroni) => {"ansible_loop_var": "item", "changed": false, "item": "patroni", "msg": "Could not find the requested service patroni: host"}
2022-03-31 23:08:13,416 p=41905 u=moonja n=ansible | failed: [co7-node03] (item=patroni) => {"ansible_loop_var": "item", "changed": false, "item": "patroni", "msg": "Could not find the requested service patroni: host"}
2022-03-31 23:08:13,901 p=41905 u=moonja n=ansible | failed: [co7-node02] (item=etcd) => {"ansible_loop_var": "item", "changed": false, "item": "etcd", "msg": "Could not find the requested service patroni: host"}
2022-03-31 23:08:13,901 p=41905 u=moonja n=ansible | ...ignoring
2022-03-31 23:08:13,907 p=41905 u=moonja n=ansible | failed: [co7-node01] (item=etcd) => {"ansible_loop_var": "item", "changed": false, "item": "etcd", "msg": "Could not find the requested service patroni: host"}
2022-03-31 23:08:13,908 p=41905 u=moonja n=ansible | failed: [co7-node03] (item=etcd) => {"ansible_loop_var": "item", "changed": false, "item": "etcd", "msg": "Could not find the requested service patroni: host"}
2022-03-31 23:08:13,908 p=41905 u=moonja n=ansible | ...ignoring
2022-03-31 23:08:13,908 p=41905 u=moonja n=ansible | ...ignoring
2022-03-31 23:08:13,921 p=41905 u=moonja n=ansible | TASK [patroni-postgres : Kill etcd process] **************************************************************
2022-03-31 23:08:14,848 p=41905 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 23:08:14,848 p=41905 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 23:08:14,848 p=41905 u=moonja n=ansible | ...ignoring
2022-03-31 23:08:14,849 p=41905 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 23:08:14,849 p=41905 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 23:08:14,849 p=41905 u=moonja n=ansible | ...ignoring
2022-03-31 23:08:20,864 p=41905 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:08:20,873 p=41905 u=moonja n=ansible | TASK [patroni-postgres : Delete configuration file for patroni and systemd] ******************************
2022-03-31 23:08:21,573 p=41905 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/patroni.yml)
2022-03-31 23:08:21,584 p=41905 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/patroni.yml)
2022-03-31 23:08:21,587 p=41905 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/patroni.yml)
2022-03-31 23:08:21,981 p=41905 u=moonja n=ansible | ok: [co7-node01] => (item=/etc/systemd/system/patroni.service)
2022-03-31 23:08:22,005 p=41905 u=moonja n=ansible | ok: [co7-node03] => (item=/etc/systemd/system/patroni.service)
2022-03-31 23:08:22,007 p=41905 u=moonja n=ansible | ok: [co7-node02] => (item=/etc/systemd/system/patroni.service)
2022-03-31 23:08:22,386 p=41905 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/postgresql0.yml)
2022-03-31 23:08:22,457 p=41905 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/postgresql0.yml)
2022-03-31 23:08:22,459 p=41905 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/postgresql0.yml)
2022-03-31 23:08:22,799 p=41905 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/patroni_member.log)
2022-03-31 23:08:22,868 p=41905 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/patroni_member.log)
2022-03-31 23:08:22,871 p=41905 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/patroni_member.log)
2022-03-31 23:08:23,204 p=41905 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/etcd.yml)
2022-03-31 23:08:23,296 p=41905 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/etcd.yml)
2022-03-31 23:08:23,297 p=41905 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/etcd.yml)
2022-03-31 23:08:23,609 p=41905 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/etcd_logfile)
2022-03-31 23:08:23,695 p=41905 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/etcd_logfile)
2022-03-31 23:08:23,696 p=41905 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/etcd_logfile)
2022-03-31 23:08:23,708 p=41905 u=moonja n=ansible | TASK [patroni-postgres : Delete data directory for patroni cluster] **************************************
2022-03-31 23:08:24,187 p=41905 u=moonja n=ansible | ok: [co7-node02] => (item=backups)
2022-03-31 23:08:24,188 p=41905 u=moonja n=ansible | ok: [co7-node03] => (item=backups)
2022-03-31 23:08:24,189 p=41905 u=moonja n=ansible | changed: [co7-node01] => (item=backups)
2022-03-31 23:08:24,601 p=41905 u=moonja n=ansible | ok: [co7-node02] => (item=data)
2022-03-31 23:08:24,602 p=41905 u=moonja n=ansible | ok: [co7-node03] => (item=data)
2022-03-31 23:08:24,604 p=41905 u=moonja n=ansible | changed: [co7-node01] => (item=data)
2022-03-31 23:08:25,015 p=41905 u=moonja n=ansible | ok: [co7-node03] => (item=patroni_data)
2022-03-31 23:08:25,025 p=41905 u=moonja n=ansible | ok: [co7-node01] => (item=patroni_data)
2022-03-31 23:08:25,026 p=41905 u=moonja n=ansible | ok: [co7-node02] => (item=patroni_data)
2022-03-31 23:08:25,038 p=41905 u=moonja n=ansible | TASK [patroni-postgres : Change the permissions on the /tmp directory] ***********************************
2022-03-31 23:08:25,517 p=41905 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 23:08:25,538 p=41905 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 23:08:25,543 p=41905 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 23:08:25,552 p=41905 u=moonja n=ansible | TASK [patroni-postgres : Uninstall pip modules of Patroni prerequisites on all three nodes] **************
2022-03-31 23:08:31,910 p=41905 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"ansible_job_id": "523438430920.21366", "changed": true, "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 uninstall -r /var/lib/pgsql/requirements.txt -y )", "delta": "0:00:00.352927", "end": "2022-03-31 23:08:26.788981", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/root/.ansible_async/523438430920.21366", "start": "2022-03-31 23:08:26.436054", "started": 1, "stderr": "ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'", "stderr_lines": ["ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'"], "stdout": "", "stdout_lines": []}
2022-03-31 23:08:31,910 p=41905 u=moonja n=ansible | ...ignoring
2022-03-31 23:08:33,096 p=41905 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"ansible_job_id": "394990067796.4508", "changed": true, "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 uninstall -r /var/lib/pgsql/requirements.txt -y )", "delta": "0:00:00.416586", "end": "2022-03-31 23:08:28.098701", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/root/.ansible_async/394990067796.4508", "start": "2022-03-31 23:08:27.682115", "started": 1, "stderr": "WARNING: Skipping boto as it is not installed.\nERROR: Cannot uninstall 'PyYAML'. It is a distutils installed project and thus we cannot accurately determine which files belong to it which would lead to only a partial uninstall.", "stderr_lines": ["WARNING: Skipping boto as it is not installed.", "ERROR: Cannot uninstall 'PyYAML'. It is a distutils installed project and thus we cannot accurately determine which files belong to it which would lead to only a partial uninstall."], "stdout": "Found existing installation: urllib3 1.26.9\nUninstalling urllib3-1.26.9:\n  Successfully uninstalled urllib3-1.26.9\nFound existing installation: PyYAML 3.13", "stdout_lines": ["Found existing installation: urllib3 1.26.9", "Uninstalling urllib3-1.26.9:", "  Successfully uninstalled urllib3-1.26.9", "Found existing installation: PyYAML 3.13"]}
2022-03-31 23:08:33,096 p=41905 u=moonja n=ansible | ...ignoring
2022-03-31 23:08:33,096 p=41905 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"ansible_job_id": "721468535488.21343", "changed": true, "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 uninstall -r /var/lib/pgsql/requirements.txt -y )", "delta": "0:00:00.374990", "end": "2022-03-31 23:08:28.046098", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/root/.ansible_async/721468535488.21343", "start": "2022-03-31 23:08:27.671108", "started": 1, "stderr": "ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'", "stderr_lines": ["ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'"], "stdout": "", "stdout_lines": []}
2022-03-31 23:08:33,096 p=41905 u=moonja n=ansible | ...ignoring
2022-03-31 23:08:33,108 p=41905 u=moonja n=ansible | TASK [patroni-postgres : UnInstall wheel pip module on all three nodes] **********************************
2022-03-31 23:08:33,549 p=41905 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 23:08:33,550 p=41905 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 23:08:33,550 p=41905 u=moonja n=ansible | ...ignoring
2022-03-31 23:08:33,572 p=41905 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 23:08:33,573 p=41905 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 23:08:33,573 p=41905 u=moonja n=ansible | ...ignoring
2022-03-31 23:08:39,376 p=41905 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:08:39,384 p=41905 u=moonja n=ansible | TASK [patroni-postgres : Uninstall typing pip module on all three nodes] *********************************
2022-03-31 23:08:39,826 p=41905 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 23:08:39,827 p=41905 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 23:08:39,827 p=41905 u=moonja n=ansible | ...ignoring
2022-03-31 23:08:39,846 p=41905 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-03-31 23:08:39,847 p=41905 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-03-31 23:08:39,847 p=41905 u=moonja n=ansible | ...ignoring
2022-03-31 23:08:45,732 p=41905 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"ansible_job_id": "179748111849.5264", "changed": true, "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 uninstall typing -y )", "delta": "0:00:00.378004", "end": "2022-03-31 23:08:40.654163", "finished": 1, "msg": "non-zero return code", "rc": 2, "results_file": "/var/lib/pgsql/.ansible_async/179748111849.5264", "start": "2022-03-31 23:08:40.276159", "started": 1, "stderr": "ERROR: Exception:\nTraceback (most recent call last):\n  File \"/usr/lib64/python3.6/shutil.py\", line 550, in move\n    os.rename(src, real_dst)\nPermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc' -> '/var/tmp/pip-uninstall-5zfnspi5/typing.cpython-36.pyc'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/cli/base_command.py\", line 164, in exc_logging_wrapper\n    status = run_func(*args)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/commands/uninstall.py\", line 99, in run\n    verbose=self.verbosity > 0,\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_install.py\", line 671, in uninstall\n    uninstalled_pathset.remove(auto_confirm, verbose)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 384, in remove\n    moved.stash(path)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 282, in stash\n    renames(path, new_path)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/utils/misc.py\", line 307, in renames\n    shutil.move(old, new)\n  File \"/usr/lib64/python3.6/shutil.py\", line 565, in move\n    os.unlink(src)\nPermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc'", "stderr_lines": ["ERROR: Exception:", "Traceback (most recent call last):", "  File \"/usr/lib64/python3.6/shutil.py\", line 550, in move", "    os.rename(src, real_dst)", "PermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc' -> '/var/tmp/pip-uninstall-5zfnspi5/typing.cpython-36.pyc'", "", "During handling of the above exception, another exception occurred:", "", "Traceback (most recent call last):", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/cli/base_command.py\", line 164, in exc_logging_wrapper", "    status = run_func(*args)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/commands/uninstall.py\", line 99, in run", "    verbose=self.verbosity > 0,", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_install.py\", line 671, in uninstall", "    uninstalled_pathset.remove(auto_confirm, verbose)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 384, in remove", "    moved.stash(path)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 282, in stash", "    renames(path, new_path)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/utils/misc.py\", line 307, in renames", "    shutil.move(old, new)", "  File \"/usr/lib64/python3.6/shutil.py\", line 565, in move", "    os.unlink(src)", "PermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc'"], "stdout": "Found existing installation: typing 3.7.4.3\nUninstalling typing-3.7.4.3:", "stdout_lines": ["Found existing installation: typing 3.7.4.3", "Uninstalling typing-3.7.4.3:"]}
2022-03-31 23:08:45,732 p=41905 u=moonja n=ansible | ...ignoring
2022-03-31 23:08:45,742 p=41905 u=moonja n=ansible | TASK [patroni-postgres : Uninstall setuptools rust on all three nodes] ***********************************
2022-03-31 23:08:51,983 p=41905 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 23:08:52,055 p=41905 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:08:52,056 p=41905 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 23:08:52,069 p=41905 u=moonja n=ansible | TASK [patroni-postgres : Uninstall patroni module on all three nodes] ************************************
2022-03-31 23:08:58,364 p=41905 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 23:08:58,491 p=41905 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 23:08:58,896 p=41905 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:08:58,904 p=41905 u=moonja n=ansible | TASK [patroni-postgres : Uninstall wheel module on all three nodes] **************************************
2022-03-31 23:09:05,163 p=41905 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 23:09:05,219 p=41905 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:09:05,229 p=41905 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 23:09:05,238 p=41905 u=moonja n=ansible | TASK [patroni-postgres : Uninstall psycopg2-binary module on all three nodes] ****************************
2022-03-31 23:09:11,539 p=41905 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 23:09:11,548 p=41905 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:09:11,548 p=41905 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 23:09:11,558 p=41905 u=moonja n=ansible | TASK [patroni-postgres : Delete the dependencies file of etcd  on all three nodes] ***********************
2022-03-31 23:09:11,999 p=41905 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:09:12,013 p=41905 u=moonja n=ansible | [WARNING]: Unable to use /var/lib/pgsql/.ansible/tmp as temporary directory, failing back to system:
[Errno 13] Permission denied: '/var/lib/pgsql'

2022-03-31 23:09:12,013 p=41905 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 23:09:12,018 p=41905 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 23:09:12,031 p=41905 u=moonja n=ansible | TASK [patroni-postgres : Uninstall VMware Postgres RPM package on all hosts as root] *********************
2022-03-31 23:09:18,671 p=41905 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 23:09:18,775 p=41905 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 23:09:29,443 p=41905 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:09:29,453 p=41905 u=moonja n=ansible | TASK [patroni-postgres : Delete the vmwawre-postgres rpm file to all hosts in cluster] *******************
2022-03-31 23:09:29,985 p=41905 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 23:09:29,989 p=41905 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:09:30,019 p=41905 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 23:09:30,040 p=41905 u=moonja n=ansible | TASK [patroni-postgres : List iptables rules] ************************************************************
2022-03-31 23:09:30,569 p=41905 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:09:30,581 p=41905 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 23:09:30,596 p=41905 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 23:09:30,607 p=41905 u=moonja n=ansible | TASK [patroni-postgres : Flush iptables rules] ***********************************************************
2022-03-31 23:09:31,217 p=41905 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:09:31,239 p=41905 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 23:09:31,239 p=41905 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 23:09:31,252 p=41905 u=moonja n=ansible | TASK [patroni-postgres : Stop and disable firewalld] *****************************************************
2022-03-31 23:09:32,284 p=41905 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 23:09:32,327 p=41905 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 23:09:32,337 p=41905 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 23:09:32,378 p=41905 u=moonja n=ansible | PLAY RECAP ***********************************************************************************************
2022-03-31 23:09:32,379 p=41905 u=moonja n=ansible | co7-node01                 : ok=19   changed=15   unreachable=0    failed=0    skipped=0    rescued=0    ignored=3   
2022-03-31 23:09:32,379 p=41905 u=moonja n=ansible | co7-node02                 : ok=19   changed=10   unreachable=0    failed=0    skipped=0    rescued=0    ignored=5   
2022-03-31 23:09:32,379 p=41905 u=moonja n=ansible | co7-node03                 : ok=19   changed=10   unreachable=0    failed=0    skipped=0    rescued=0    ignored=5   
2022-03-31 23:11:58,456 p=44074 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from 
ansible-core in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-31 23:11:58,466 p=44074 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-03-31 23:11:58,692 p=44074 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 
2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-31 23:11:58,749 p=44074 u=moonja n=ansible | PLAY [all] **************************************************************************************************************************
2022-03-31 23:11:58,794 p=44074 u=moonja n=ansible | TASK [Gathering Facts] **************************************************************************************************************
2022-03-31 23:12:00,975 p=44074 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 23:12:01,013 p=44074 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 23:12:01,015 p=44074 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 23:12:01,033 p=44074 u=moonja n=ansible | TASK [patroni-postgres : Stop and disable firewalld] ********************************************************************************
2022-03-31 23:12:01,995 p=44074 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 23:12:01,996 p=44074 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 23:12:01,996 p=44074 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 23:12:02,007 p=44074 u=moonja n=ansible | TASK [patroni-postgres : Flush iptables rules] **************************************************************************************
2022-03-31 23:12:02,839 p=44074 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 23:12:02,840 p=44074 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 23:12:02,840 p=44074 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:12:02,851 p=44074 u=moonja n=ansible | TASK [patroni-postgres : List iptables rules] ***************************************************************************************
2022-03-31 23:12:03,529 p=44074 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 23:12:03,534 p=44074 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 23:12:03,535 p=44074 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:12:03,546 p=44074 u=moonja n=ansible | TASK [patroni-postgres : debug] *****************************************************************************************************
2022-03-31 23:12:03,579 p=44074 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": "Chain INPUT (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain FORWARD (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain OUTPUT (policy ACCEPT)\ntarget     prot opt source               destination         "
}
2022-03-31 23:12:03,581 p=44074 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": "Chain INPUT (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain FORWARD (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain OUTPUT (policy ACCEPT)\ntarget     prot opt source               destination         "
}
2022-03-31 23:12:03,593 p=44074 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": "Chain INPUT (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain FORWARD (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain OUTPUT (policy ACCEPT)\ntarget     prot opt source               destination         "
}
2022-03-31 23:12:03,604 p=44074 u=moonja n=ansible | TASK [patroni-postgres : Install the 'Development tools' package group for VMware Postgres Dependencies] ****************************
2022-03-31 23:12:11,725 p=44074 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 23:12:15,845 p=44074 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"ansible_job_id": "621929948336.25244", "changed": false, "changes": {"installed": ["@Development tools"]}, "finished": 1, "msg": "There are unfinished transactions remaining. You might consider running yum-complete-transaction, or \"yum-complete-transaction --cleanup-only\" and \"yum history redo last\", first to finish them. If those don't work you'll have to try removing/installing packages by hand (maybe package-cleanup can help).\nError: Package: glibc-headers-2.17-325.el7_9.x86_64 (updates)\n           Requires: kernel-headers\nError: Package: systemtap-devel-4.0-13.el7.x86_64 (base)\n           Requires: kernel-devel-uname-r\nError: Package: glibc-headers-2.17-325.el7_9.x86_64 (updates)\n           Requires: kernel-headers >= 2.2.1\n", "rc": 1, "results": ["Loaded plugins: fastestmirror, product-id, search-disabled-repos, subscription-\n              : manager, versionlock\n\nThis system is not registered with an entitlement server. You can use subscription-manager to register.\n\nLoading mirror speeds from cached hostfile\n * base: ftp.kaist.ac.kr\n * centos-sclo-rh: ftp.kaist.ac.kr\n * epel: ftp.jaist.ac.jp\n * extras: ftp.kaist.ac.kr\n * updates: ftp.tsukuba.wide.ad.jp\nResolving Dependencies\n--> Running transaction check\n---> Package byacc.x86_64 0:1.9.20130304-3.el7 will be installed\n---> Package cscope.x86_64 0:15.8-10.el7 will be installed\n---> Package ctags.x86_64 0:5.8-13.el7 will be installed\n---> Package diffstat.x86_64 0:1.57-4.el7 will be installed\n---> Package doxygen.x86_64 1:1.8.5-4.el7 will be installed\n---> Package elfutils.x86_64 0:0.176-5.el7 will be installed\n---> Package gcc.x86_64 0:4.8.5-44.el7 will be installed\n--> Processing Dependency: glibc-devel >= 2.2.90-12 for package: gcc-4.8.5-44.el7.x86_64\n---> Package gcc-c++.x86_64 0:4.8.5-44.el7 will be installed\n---> Package gcc-gfortran.x86_64 0:4.8.5-44.el7 will be installed\n--> Processing Dependency: libquadmath-devel = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libquadmath = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libgfortran = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libgfortran.so.3()(64bit) for package: gcc-gfortran-4.8.5-44.el7.x86_64\n---> Package indent.x86_64 0:2.2.11-13.el7 will be installed\n---> Package intltool.noarch 0:0.50.2-7.el7 will be installed\n--> Processing Dependency: perl(XML::Parser) for package: intltool-0.50.2-7.el7.noarch\n---> Package libtool.x86_64 0:2.4.2-22.el7_3 will be installed\n---> Package patchutils.x86_64 0:0.3.3-5.el7_9 will be installed\n---> Package rcs.x86_64 0:5.9.0-7.el7 will be installed\n---> Package rpm-build.x86_64 0:4.11.3-48.el7_9 will be installed\n--> Processing Dependency: /usr/bin/gdb-add-index for package: rpm-build-4.11.3-48.el7_9.x86_64\n---> Package rpm-sign.x86_64 0:4.11.3-48.el7_9 will be installed\n---> Package swig.x86_64 0:2.0.10-5.el7 will be installed\n---> Package systemtap.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: systemtap-devel = 4.0-13.el7 for package: systemtap-4.0-13.el7.x86_64\n--> Processing Dependency: systemtap-client = 4.0-13.el7 for package: systemtap-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package gdb.x86_64 0:7.6.1-120.el7 will be installed\n---> Package glibc-devel.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: glibc-headers = 2.17-325.el7_9 for package: glibc-devel-2.17-325.el7_9.x86_64\n--> Processing Dependency: glibc-headers for package: glibc-devel-2.17-325.el7_9.x86_64\n---> Package libgfortran.x86_64 0:4.8.5-44.el7 will be installed\n---> Package libquadmath.x86_64 0:4.8.5-44.el7 will be installed\n---> Package libquadmath-devel.x86_64 0:4.8.5-44.el7 will be installed\n---> Package perl-XML-Parser.x86_64 0:2.41-10.el7 will be installed\n---> Package systemtap-client.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: systemtap-runtime = 4.0-13.el7 for package: systemtap-client-4.0-13.el7.x86_64\n--> Processing Dependency: mokutil for package: systemtap-client-4.0-13.el7.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package mokutil.x86_64 0:15-8.el7 will be installed\n--> Processing Dependency: libefivar.so.1(libefivar.so.0)(64bit) for package: mokutil-15-8.el7.x86_64\n--> Processing Dependency: libefivar.so.1(LIBEFIVAR_0.24)(64bit) for package: mokutil-15-8.el7.x86_64\n--> Processing Dependency: libefivar.so.1()(64bit) for package: mokutil-15-8.el7.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n---> Package systemtap-runtime.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: libsymtabAPI.so.9.3()(64bit) for package: systemtap-runtime-4.0-13.el7.x86_64\n--> Processing Dependency: libdyninstAPI.so.9.3()(64bit) for package: systemtap-runtime-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package dyninst.x86_64 0:9.3.1-3.el7 will be installed\n--> Processing Dependency: libdwarf.so.0()(64bit) for package: dyninst-9.3.1-3.el7.x86_64\n--> Processing Dependency: libboost_date_time-mt.so.1.53.0()(64bit) for package: dyninst-9.3.1-3.el7.x86_64\n---> Package efivar-libs.x86_64 0:36-12.el7 will be installed\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package boost-date-time.x86_64 0:1.53.0-28.el7 will be installed\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package libdwarf.x86_64 0:20130207-4.el7 will be installed\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Finished Dependency Resolution\n You could try using --skip-broken to work around the problem\n You could try running: rpm -Va --nofiles --nodigest\n"], "results_file": "/root/.ansible_async/621929948336.25244", "started": 1, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2022-03-31 23:12:15,846 p=44074 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"ansible_job_id": "709829605194.25281", "changed": false, "changes": {"installed": ["@Development tools"]}, "finished": 1, "msg": "There are unfinished transactions remaining. You might consider running yum-complete-transaction, or \"yum-complete-transaction --cleanup-only\" and \"yum history redo last\", first to finish them. If those don't work you'll have to try removing/installing packages by hand (maybe package-cleanup can help).\nError: Package: glibc-headers-2.17-325.el7_9.x86_64 (updates)\n           Requires: kernel-headers\nError: Package: systemtap-devel-4.0-13.el7.x86_64 (base)\n           Requires: kernel-devel-uname-r\nError: Package: glibc-headers-2.17-325.el7_9.x86_64 (updates)\n           Requires: kernel-headers >= 2.2.1\n", "rc": 1, "results": ["Loaded plugins: fastestmirror, product-id, search-disabled-repos, subscription-\n              : manager, versionlock\n\nThis system is not registered with an entitlement server. You can use subscription-manager to register.\n\nLoading mirror speeds from cached hostfile\n * base: mirror.anigil.com\n * centos-sclo-rh: mirror.kakao.com\n * epel: ftp.iij.ad.jp\n * extras: mirror.anigil.com\n * updates: mirror.kakao.com\nResolving Dependencies\n--> Running transaction check\n---> Package byacc.x86_64 0:1.9.20130304-3.el7 will be installed\n---> Package cscope.x86_64 0:15.8-10.el7 will be installed\n---> Package ctags.x86_64 0:5.8-13.el7 will be installed\n---> Package diffstat.x86_64 0:1.57-4.el7 will be installed\n---> Package doxygen.x86_64 1:1.8.5-4.el7 will be installed\n---> Package elfutils.x86_64 0:0.176-5.el7 will be installed\n---> Package gcc.x86_64 0:4.8.5-44.el7 will be installed\n--> Processing Dependency: glibc-devel >= 2.2.90-12 for package: gcc-4.8.5-44.el7.x86_64\n---> Package gcc-c++.x86_64 0:4.8.5-44.el7 will be installed\n---> Package gcc-gfortran.x86_64 0:4.8.5-44.el7 will be installed\n--> Processing Dependency: libquadmath-devel = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libquadmath = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libgfortran = 4.8.5-44.el7 for package: gcc-gfortran-4.8.5-44.el7.x86_64\n--> Processing Dependency: libgfortran.so.3()(64bit) for package: gcc-gfortran-4.8.5-44.el7.x86_64\n---> Package indent.x86_64 0:2.2.11-13.el7 will be installed\n---> Package intltool.noarch 0:0.50.2-7.el7 will be installed\n--> Processing Dependency: perl(XML::Parser) for package: intltool-0.50.2-7.el7.noarch\n---> Package libtool.x86_64 0:2.4.2-22.el7_3 will be installed\n---> Package patchutils.x86_64 0:0.3.3-5.el7_9 will be installed\n---> Package rcs.x86_64 0:5.9.0-7.el7 will be installed\n---> Package rpm-build.x86_64 0:4.11.3-48.el7_9 will be installed\n--> Processing Dependency: /usr/bin/gdb-add-index for package: rpm-build-4.11.3-48.el7_9.x86_64\n---> Package rpm-sign.x86_64 0:4.11.3-48.el7_9 will be installed\n---> Package swig.x86_64 0:2.0.10-5.el7 will be installed\n---> Package systemtap.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: systemtap-devel = 4.0-13.el7 for package: systemtap-4.0-13.el7.x86_64\n--> Processing Dependency: systemtap-client = 4.0-13.el7 for package: systemtap-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package gdb.x86_64 0:7.6.1-120.el7 will be installed\n---> Package glibc-devel.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: glibc-headers = 2.17-325.el7_9 for package: glibc-devel-2.17-325.el7_9.x86_64\n--> Processing Dependency: glibc-headers for package: glibc-devel-2.17-325.el7_9.x86_64\n---> Package libgfortran.x86_64 0:4.8.5-44.el7 will be installed\n---> Package libquadmath.x86_64 0:4.8.5-44.el7 will be installed\n---> Package libquadmath-devel.x86_64 0:4.8.5-44.el7 will be installed\n---> Package perl-XML-Parser.x86_64 0:2.41-10.el7 will be installed\n---> Package systemtap-client.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: systemtap-runtime = 4.0-13.el7 for package: systemtap-client-4.0-13.el7.x86_64\n--> Processing Dependency: mokutil for package: systemtap-client-4.0-13.el7.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package mokutil.x86_64 0:15-8.el7 will be installed\n--> Processing Dependency: libefivar.so.1(libefivar.so.0)(64bit) for package: mokutil-15-8.el7.x86_64\n--> Processing Dependency: libefivar.so.1(LIBEFIVAR_0.24)(64bit) for package: mokutil-15-8.el7.x86_64\n--> Processing Dependency: libefivar.so.1()(64bit) for package: mokutil-15-8.el7.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n---> Package systemtap-runtime.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: libsymtabAPI.so.9.3()(64bit) for package: systemtap-runtime-4.0-13.el7.x86_64\n--> Processing Dependency: libdyninstAPI.so.9.3()(64bit) for package: systemtap-runtime-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package dyninst.x86_64 0:9.3.1-3.el7 will be installed\n--> Processing Dependency: libdwarf.so.0()(64bit) for package: dyninst-9.3.1-3.el7.x86_64\n---> Package efivar-libs.x86_64 0:36-12.el7 will be installed\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Running transaction check\n---> Package glibc-headers.x86_64 0:2.17-325.el7_9 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-325.el7_9.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-325.el7_9.x86_64\n---> Package libdwarf.x86_64 0:20130207-4.el7 will be installed\n---> Package systemtap-devel.x86_64 0:4.0-13.el7 will be installed\n--> Processing Dependency: kernel-devel-uname-r for package: systemtap-devel-4.0-13.el7.x86_64\n--> Finished Dependency Resolution\n You could try using --skip-broken to work around the problem\n You could try running: rpm -Va --nofiles --nodigest\n"], "results_file": "/root/.ansible_async/709829605194.25281", "started": 1, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2022-03-31 23:12:15,856 p=44074 u=moonja n=ansible | TASK [patroni-postgres : Install the perl package for VMware Postgres Dependencies] *************************************************
2022-03-31 23:12:19,538 p=44074 u=moonja n=ansible |  [ERROR]: User interrupted execution

2022-03-31 23:18:03,003 p=46958 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from 
ansible-core in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-31 23:18:03,016 p=46958 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-03-31 23:18:03,244 p=46958 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 
2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-03-31 23:18:03,303 p=46958 u=moonja n=ansible | PLAY [all] **************************************************************************************************************************
2022-03-31 23:18:03,335 p=46958 u=moonja n=ansible | TASK [Gathering Facts] **************************************************************************************************************
2022-03-31 23:18:05,610 p=46958 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 23:18:05,656 p=46958 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 23:18:05,659 p=46958 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 23:18:05,676 p=46958 u=moonja n=ansible | TASK [patroni-postgres : Stop and disable firewalld] ********************************************************************************
2022-03-31 23:18:06,608 p=46958 u=moonja n=ansible | ok: [co7-node03]
2022-03-31 23:18:06,632 p=46958 u=moonja n=ansible | ok: [co7-node02]
2022-03-31 23:18:06,634 p=46958 u=moonja n=ansible | ok: [co7-node01]
2022-03-31 23:18:06,644 p=46958 u=moonja n=ansible | TASK [patroni-postgres : Flush iptables rules] **************************************************************************************
2022-03-31 23:18:07,431 p=46958 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 23:18:07,432 p=46958 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 23:18:07,433 p=46958 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:18:07,441 p=46958 u=moonja n=ansible | TASK [patroni-postgres : List iptables rules] ***************************************************************************************
2022-03-31 23:18:08,057 p=46958 u=moonja n=ansible | changed: [co7-node01]
2022-03-31 23:18:08,062 p=46958 u=moonja n=ansible | changed: [co7-node03]
2022-03-31 23:18:08,070 p=46958 u=moonja n=ansible | changed: [co7-node02]
2022-03-31 23:18:08,081 p=46958 u=moonja n=ansible | TASK [patroni-postgres : debug] *****************************************************************************************************
2022-03-31 23:18:08,116 p=46958 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": "Chain INPUT (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain FORWARD (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain OUTPUT (policy ACCEPT)\ntarget     prot opt source               destination         "
}
2022-03-31 23:18:08,118 p=46958 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": "Chain INPUT (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain FORWARD (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain OUTPUT (policy ACCEPT)\ntarget     prot opt source               destination         "
}
2022-03-31 23:18:08,123 p=46958 u=moonja n=ansible |  [ERROR]: User interrupted execution

2022-04-01 00:37:59,911 p=59511 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from 
ansible-core in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-04-01 00:37:59,922 p=59511 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-04-01 00:38:00,171 p=59511 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 
2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-04-01 00:38:00,231 p=59511 u=moonja n=ansible | PLAY [all] **************************************************************************************************************************
2022-04-01 00:38:00,265 p=59511 u=moonja n=ansible | TASK [Gathering Facts] **************************************************************************************************************
2022-04-01 00:38:13,547 p=59511 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 00:38:13,651 p=59511 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 00:38:13,779 p=59511 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 00:38:13,796 p=59511 u=moonja n=ansible | TASK [patroni-postgres : Stop services for patroni and etcd] ************************************************************************
2022-04-01 00:38:15,914 p=59511 u=moonja n=ansible | failed: [co7-node02] (item=patroni) => {"ansible_loop_var": "item", "changed": false, "item": "patroni", "msg": "Could not find the requested service patroni: host"}
2022-04-01 00:38:15,992 p=59511 u=moonja n=ansible | failed: [co7-node03] (item=patroni) => {"ansible_loop_var": "item", "changed": false, "item": "patroni", "msg": "Could not find the requested service patroni: host"}
2022-04-01 00:38:16,028 p=59511 u=moonja n=ansible | failed: [co7-node01] (item=patroni) => {"ansible_loop_var": "item", "changed": false, "item": "patroni", "msg": "Could not find the requested service patroni: host"}
2022-04-01 00:38:16,438 p=59511 u=moonja n=ansible | failed: [co7-node02] (item=etcd) => {"ansible_loop_var": "item", "changed": false, "item": "etcd", "msg": "Could not find the requested service patroni: host"}
2022-04-01 00:38:16,440 p=59511 u=moonja n=ansible | ...ignoring
2022-04-01 00:38:16,480 p=59511 u=moonja n=ansible | failed: [co7-node03] (item=etcd) => {"ansible_loop_var": "item", "changed": false, "item": "etcd", "msg": "Could not find the requested service patroni: host"}
2022-04-01 00:38:16,482 p=59511 u=moonja n=ansible | ...ignoring
2022-04-01 00:38:16,551 p=59511 u=moonja n=ansible | failed: [co7-node01] (item=etcd) => {"ansible_loop_var": "item", "changed": false, "item": "etcd", "msg": "Could not find the requested service patroni: host"}
2022-04-01 00:38:16,551 p=59511 u=moonja n=ansible | ...ignoring
2022-04-01 00:38:16,563 p=59511 u=moonja n=ansible | TASK [patroni-postgres : Kill etcd process] *****************************************************************************************
2022-04-01 00:38:17,731 p=59511 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-04-01 00:38:17,732 p=59511 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-04-01 00:38:17,732 p=59511 u=moonja n=ansible | ...ignoring
2022-04-01 00:38:17,991 p=59511 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-04-01 00:38:17,991 p=59511 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-04-01 00:38:17,992 p=59511 u=moonja n=ansible | ...ignoring
2022-04-01 00:38:24,790 p=59511 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"ansible_job_id": "703218362419.2220", "changed": true, "cmd": "( killall etcd )", "delta": "0:00:00.071478", "end": "2022-04-01 00:38:19.121100", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/var/lib/pgsql/.ansible_async/703218362419.2220", "start": "2022-04-01 00:38:19.049622", "started": 1, "stderr": "etcd: no process found", "stderr_lines": ["etcd: no process found"], "stdout": "", "stdout_lines": []}
2022-04-01 00:38:24,790 p=59511 u=moonja n=ansible | ...ignoring
2022-04-01 00:38:24,799 p=59511 u=moonja n=ansible | TASK [patroni-postgres : Delete configuration file for patroni and systemd] *********************************************************
2022-04-01 00:38:25,560 p=59511 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/patroni.yml)
2022-04-01 00:38:25,561 p=59511 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/patroni.yml)
2022-04-01 00:38:25,562 p=59511 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/patroni.yml)
2022-04-01 00:38:26,004 p=59511 u=moonja n=ansible | ok: [co7-node03] => (item=/etc/systemd/system/patroni.service)
2022-04-01 00:38:26,005 p=59511 u=moonja n=ansible | ok: [co7-node02] => (item=/etc/systemd/system/patroni.service)
2022-04-01 00:38:26,006 p=59511 u=moonja n=ansible | ok: [co7-node01] => (item=/etc/systemd/system/patroni.service)
2022-04-01 00:38:26,427 p=59511 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/postgresql0.yml)
2022-04-01 00:38:26,428 p=59511 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/postgresql0.yml)
2022-04-01 00:38:26,429 p=59511 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/postgresql0.yml)
2022-04-01 00:38:26,865 p=59511 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/patroni_member.log)
2022-04-01 00:38:26,866 p=59511 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/patroni_member.log)
2022-04-01 00:38:26,889 p=59511 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/patroni_member.log)
2022-04-01 00:38:27,337 p=59511 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/etcd.yml)
2022-04-01 00:38:27,338 p=59511 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/etcd.yml)
2022-04-01 00:38:27,338 p=59511 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/etcd.yml)
2022-04-01 00:38:27,785 p=59511 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/etcd_logfile)
2022-04-01 00:38:27,790 p=59511 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/etcd_logfile)
2022-04-01 00:38:27,791 p=59511 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/etcd_logfile)
2022-04-01 00:38:27,803 p=59511 u=moonja n=ansible | TASK [patroni-postgres : Delete data directory for patroni cluster] *****************************************************************
2022-04-01 00:38:28,296 p=59511 u=moonja n=ansible | ok: [co7-node01] => (item=backups)
2022-04-01 00:38:28,297 p=59511 u=moonja n=ansible | ok: [co7-node02] => (item=backups)
2022-04-01 00:38:28,297 p=59511 u=moonja n=ansible | ok: [co7-node03] => (item=backups)
2022-04-01 00:38:28,704 p=59511 u=moonja n=ansible | ok: [co7-node02] => (item=data)
2022-04-01 00:38:28,707 p=59511 u=moonja n=ansible | ok: [co7-node03] => (item=data)
2022-04-01 00:38:28,708 p=59511 u=moonja n=ansible | ok: [co7-node01] => (item=data)
2022-04-01 00:38:29,155 p=59511 u=moonja n=ansible | ok: [co7-node02] => (item=patroni_data)
2022-04-01 00:38:29,155 p=59511 u=moonja n=ansible | ok: [co7-node03] => (item=patroni_data)
2022-04-01 00:38:29,157 p=59511 u=moonja n=ansible | ok: [co7-node01] => (item=patroni_data)
2022-04-01 00:38:29,168 p=59511 u=moonja n=ansible | TASK [patroni-postgres : Change the permissions on the /tmp directory] **************************************************************
2022-04-01 00:38:29,677 p=59511 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 00:38:29,678 p=59511 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 00:38:29,678 p=59511 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 00:38:29,688 p=59511 u=moonja n=ansible | TASK [patroni-postgres : Uninstall pip modules of Patroni prerequisites on all three nodes] *****************************************
2022-04-01 00:38:47,256 p=59511 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"ansible_job_id": "171629916687.3605", "changed": true, "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 uninstall -r /var/lib/pgsql/requirements.txt -y )", "delta": "0:00:16.019449", "end": "2022-04-01 00:38:46.573051", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/root/.ansible_async/171629916687.3605", "start": "2022-04-01 00:38:30.553602", "started": 1, "stderr": "ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'", "stderr_lines": ["ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'"], "stdout": "", "stdout_lines": []}
2022-04-01 00:38:47,257 p=59511 u=moonja n=ansible | ...ignoring
2022-04-01 00:38:53,110 p=59511 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"ansible_job_id": "80135779450.3578", "changed": true, "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 uninstall -r /var/lib/pgsql/requirements.txt -y )", "delta": "0:00:17.055241", "end": "2022-04-01 00:38:47.639233", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/root/.ansible_async/80135779450.3578", "start": "2022-04-01 00:38:30.583992", "started": 1, "stderr": "ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'", "stderr_lines": ["ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'"], "stdout": "", "stdout_lines": []}
2022-04-01 00:38:53,110 p=59511 u=moonja n=ansible | ...ignoring
2022-04-01 00:38:53,111 p=59511 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"ansible_job_id": "115022990590.3902", "changed": true, "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 uninstall -r /var/lib/pgsql/requirements.txt -y )", "delta": "0:00:17.166257", "end": "2022-04-01 00:38:47.825726", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/root/.ansible_async/115022990590.3902", "start": "2022-04-01 00:38:30.659469", "started": 1, "stderr": "ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'", "stderr_lines": ["ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/var/lib/pgsql/requirements.txt'"], "stdout": "", "stdout_lines": []}
2022-04-01 00:38:53,111 p=59511 u=moonja n=ansible | ...ignoring
2022-04-01 00:38:53,122 p=59511 u=moonja n=ansible | TASK [patroni-postgres : UnInstall wheel pip module on all three nodes] *************************************************************
2022-04-01 00:38:53,594 p=59511 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-04-01 00:38:53,595 p=59511 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-04-01 00:38:53,595 p=59511 u=moonja n=ansible | ...ignoring
2022-04-01 00:38:53,595 p=59511 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-04-01 00:38:53,595 p=59511 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-04-01 00:38:53,595 p=59511 u=moonja n=ansible | ...ignoring
2022-04-01 00:39:00,168 p=59511 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 00:39:00,177 p=59511 u=moonja n=ansible | TASK [patroni-postgres : Uninstall typing pip module on all three nodes] ************************************************************
2022-04-01 00:39:00,601 p=59511 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-04-01 00:39:00,602 p=59511 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-04-01 00:39:00,602 p=59511 u=moonja n=ansible | ...ignoring
2022-04-01 00:39:00,619 p=59511 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 13] Permission denied: '/var/lib/pgsql'
2022-04-01 00:39:00,620 p=59511 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "msg": "could not create directory: /var/lib/pgsql/.ansible_async - [Errno 13] Permission denied: '/var/lib/pgsql'"}
2022-04-01 00:39:00,620 p=59511 u=moonja n=ansible | ...ignoring
2022-04-01 00:39:06,580 p=59511 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"ansible_job_id": "357724180513.4924", "changed": true, "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 uninstall typing -y )", "delta": "0:00:02.083583", "end": "2022-04-01 00:39:02.840584", "finished": 1, "msg": "non-zero return code", "rc": 2, "results_file": "/var/lib/pgsql/.ansible_async/357724180513.4924", "start": "2022-04-01 00:39:00.757001", "started": 1, "stderr": "ERROR: Exception:\nTraceback (most recent call last):\n  File \"/usr/lib64/python3.6/shutil.py\", line 550, in move\n    os.rename(src, real_dst)\nPermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc' -> '/var/tmp/pip-uninstall-87_n9hqi/typing.cpython-36.pyc'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/cli/base_command.py\", line 164, in exc_logging_wrapper\n    status = run_func(*args)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/commands/uninstall.py\", line 99, in run\n    verbose=self.verbosity > 0,\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_install.py\", line 671, in uninstall\n    uninstalled_pathset.remove(auto_confirm, verbose)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 384, in remove\n    moved.stash(path)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 282, in stash\n    renames(path, new_path)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/utils/misc.py\", line 307, in renames\n    shutil.move(old, new)\n  File \"/usr/lib64/python3.6/shutil.py\", line 565, in move\n    os.unlink(src)\nPermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc'", "stderr_lines": ["ERROR: Exception:", "Traceback (most recent call last):", "  File \"/usr/lib64/python3.6/shutil.py\", line 550, in move", "    os.rename(src, real_dst)", "PermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc' -> '/var/tmp/pip-uninstall-87_n9hqi/typing.cpython-36.pyc'", "", "During handling of the above exception, another exception occurred:", "", "Traceback (most recent call last):", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/cli/base_command.py\", line 164, in exc_logging_wrapper", "    status = run_func(*args)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/commands/uninstall.py\", line 99, in run", "    verbose=self.verbosity > 0,", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_install.py\", line 671, in uninstall", "    uninstalled_pathset.remove(auto_confirm, verbose)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 384, in remove", "    moved.stash(path)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 282, in stash", "    renames(path, new_path)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/utils/misc.py\", line 307, in renames", "    shutil.move(old, new)", "  File \"/usr/lib64/python3.6/shutil.py\", line 565, in move", "    os.unlink(src)", "PermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc'"], "stdout": "Found existing installation: typing 3.7.4.3\nUninstalling typing-3.7.4.3:", "stdout_lines": ["Found existing installation: typing 3.7.4.3", "Uninstalling typing-3.7.4.3:"]}
2022-04-01 00:39:06,590 p=59511 u=moonja n=ansible | ...ignoring
2022-04-01 00:39:06,600 p=59511 u=moonja n=ansible | TASK [patroni-postgres : Uninstall setuptools rust on all three nodes] **************************************************************
2022-04-01 00:39:13,362 p=59511 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 00:39:13,661 p=59511 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 00:39:13,742 p=59511 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 00:39:13,750 p=59511 u=moonja n=ansible | TASK [patroni-postgres : Uninstall patroni module on all three nodes] ***************************************************************
2022-04-01 00:39:20,288 p=59511 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 00:39:20,507 p=59511 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 00:39:20,698 p=59511 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 00:39:20,707 p=59511 u=moonja n=ansible | TASK [patroni-postgres : Uninstall wheel module on all three nodes] *****************************************************************
2022-04-01 00:39:27,156 p=59511 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 00:39:27,166 p=59511 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 00:39:27,166 p=59511 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 00:39:27,177 p=59511 u=moonja n=ansible | TASK [patroni-postgres : Uninstall psycopg2-binary module on all three nodes] *******************************************************
2022-04-01 00:39:34,963 p=59511 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 00:39:35,139 p=59511 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 00:39:35,200 p=59511 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 00:39:35,210 p=59511 u=moonja n=ansible | TASK [patroni-postgres : Delete the dependencies file of etcd  on all three nodes] **************************************************
2022-04-01 00:39:35,714 p=59511 u=moonja n=ansible | [WARNING]: Unable to use /var/lib/pgsql/.ansible/tmp as temporary directory, failing back to system: [Errno 13] Permission denied:
'/var/lib/pgsql'

2022-04-01 00:39:35,715 p=59511 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 00:39:35,740 p=59511 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 00:39:35,740 p=59511 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 00:39:35,754 p=59511 u=moonja n=ansible | TASK [patroni-postgres : Uninstall VMware Postgres RPM package on all hosts as root] ************************************************
2022-04-01 00:40:33,970 p=59511 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 00:40:34,514 p=59511 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 00:40:34,947 p=59511 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 00:40:34,956 p=59511 u=moonja n=ansible | TASK [patroni-postgres : Delete the vmwawre-postgres rpm file to all hosts in cluster] **********************************************
2022-04-01 00:40:35,428 p=59511 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 00:40:35,433 p=59511 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 00:40:35,437 p=59511 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 00:40:35,449 p=59511 u=moonja n=ansible | TASK [patroni-postgres : List iptables rules] ***************************************************************************************
2022-04-01 00:40:36,975 p=59511 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 00:40:37,005 p=59511 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 00:40:37,223 p=59511 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 00:40:37,234 p=59511 u=moonja n=ansible | TASK [patroni-postgres : Flush iptables rules] **************************************************************************************
2022-04-01 00:40:37,852 p=59511 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 00:40:37,853 p=59511 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 00:40:37,853 p=59511 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 00:40:37,863 p=59511 u=moonja n=ansible | TASK [patroni-postgres : Stop and disable firewalld] ********************************************************************************
2022-04-01 00:40:39,385 p=59511 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 00:40:39,394 p=59511 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 00:40:39,437 p=59511 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 00:40:39,477 p=59511 u=moonja n=ansible | PLAY RECAP **************************************************************************************************************************
2022-04-01 00:40:39,477 p=59511 u=moonja n=ansible | co7-node01                 : ok=19   changed=11   unreachable=0    failed=0    skipped=0    rescued=0    ignored=4   
2022-04-01 00:40:39,477 p=59511 u=moonja n=ansible | co7-node02                 : ok=19   changed=11   unreachable=0    failed=0    skipped=0    rescued=0    ignored=5   
2022-04-01 00:40:39,477 p=59511 u=moonja n=ansible | co7-node03                 : ok=19   changed=11   unreachable=0    failed=0    skipped=0    rescued=0    ignored=5   
2022-04-01 00:57:29,732 p=66337 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This 
feature will be removed from ansible-core in version 2.14. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2022-04-01 00:57:29,743 p=66337 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-04-01 00:57:29,979 p=66337 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature 
will be removed in version 2.16. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2022-04-01 00:57:30,035 p=66337 u=moonja n=ansible | PLAY [all] *******************************************************************************************
2022-04-01 00:57:30,065 p=66337 u=moonja n=ansible | TASK [Gathering Facts] *******************************************************************************
2022-04-01 00:57:32,223 p=66337 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 00:57:32,235 p=66337 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 00:57:32,259 p=66337 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 00:57:32,278 p=66337 u=moonja n=ansible | TASK [patroni-postgres : Stop and disable firewalld] *************************************************
2022-04-01 00:57:33,160 p=66337 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 00:57:33,182 p=66337 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 00:57:33,183 p=66337 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 00:57:33,195 p=66337 u=moonja n=ansible | TASK [patroni-postgres : Flush iptables rules] *******************************************************
2022-04-01 00:57:33,931 p=66337 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 00:57:33,932 p=66337 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 00:57:33,932 p=66337 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 00:57:33,941 p=66337 u=moonja n=ansible | TASK [patroni-postgres : List iptables rules] ********************************************************
2022-04-01 00:57:34,418 p=66337 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 00:57:34,446 p=66337 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 00:57:34,449 p=66337 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 00:57:34,460 p=66337 u=moonja n=ansible | TASK [patroni-postgres : debug] **********************************************************************
2022-04-01 00:57:34,497 p=66337 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": "Chain INPUT (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain FORWARD (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain OUTPUT (policy ACCEPT)\ntarget     prot opt source               destination         "
}
2022-04-01 00:57:34,499 p=66337 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": "Chain INPUT (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain FORWARD (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain OUTPUT (policy ACCEPT)\ntarget     prot opt source               destination         "
}
2022-04-01 00:57:34,511 p=66337 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": "Chain INPUT (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain FORWARD (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain OUTPUT (policy ACCEPT)\ntarget     prot opt source               destination         "
}
2022-04-01 00:57:34,523 p=66337 u=moonja n=ansible | TASK [patroni-postgres : Install the 'Development tools' package group for VMware Postgres Dependencies] ***
2022-04-01 01:00:51,601 p=66337 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:03:36,745 p=66337 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:03:36,806 p=66337 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:03:36,820 p=66337 u=moonja n=ansible | TASK [patroni-postgres : Install the perl package for VMware Postgres Dependencies] ******************
2022-04-01 01:03:43,376 p=66337 u=moonja n=ansible | ok: [co7-node01] => (item=perl)
2022-04-01 01:03:46,064 p=66337 u=moonja n=ansible | ok: [co7-node03] => (item=perl)
2022-04-01 01:03:46,073 p=66337 u=moonja n=ansible | ok: [co7-node02] => (item=perl)
2022-04-01 01:03:51,243 p=66337 u=moonja n=ansible | ok: [co7-node01] => (item=readline-devel)
2022-04-01 01:03:53,341 p=66337 u=moonja n=ansible | ok: [co7-node02] => (item=readline-devel)
2022-04-01 01:03:53,446 p=66337 u=moonja n=ansible | ok: [co7-node03] => (item=readline-devel)
2022-04-01 01:03:57,575 p=66337 u=moonja n=ansible | ok: [co7-node01] => (item=libicu-devel)
2022-04-01 01:04:00,300 p=66337 u=moonja n=ansible | ok: [co7-node02] => (item=libicu-devel)
2022-04-01 01:04:00,327 p=66337 u=moonja n=ansible | ok: [co7-node03] => (item=libicu-devel)
2022-04-01 01:04:04,101 p=66337 u=moonja n=ansible | ok: [co7-node01] => (item=perl-libs)
2022-04-01 01:04:06,558 p=66337 u=moonja n=ansible | ok: [co7-node02] => (item=perl-libs)
2022-04-01 01:04:06,567 p=66337 u=moonja n=ansible | ok: [co7-node03] => (item=perl-libs)
2022-04-01 01:04:06,582 p=66337 u=moonja n=ansible | TASK [patroni-postgres : Copy the vmwawre-postgres rpm file to all hosts in cluster] *****************
2022-04-01 01:04:08,071 p=66337 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:04:08,072 p=66337 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:04:08,073 p=66337 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:04:08,085 p=66337 u=moonja n=ansible | TASK [patroni-postgres : Install VMware Postgres on all hosts as root] *******************************
2022-04-01 01:04:35,791 p=66337 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:04:42,171 p=66337 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:04:42,201 p=66337 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:04:42,213 p=66337 u=moonja n=ansible | TASK [patroni-postgres : Install the etcd and Patroni prerequisites on all three nodes] **************
2022-04-01 01:04:49,388 p=66337 u=moonja n=ansible | ok: [co7-node03] => (item=python3)
2022-04-01 01:04:50,104 p=66337 u=moonja n=ansible | ok: [co7-node02] => (item=python3)
2022-04-01 01:04:50,168 p=66337 u=moonja n=ansible | ok: [co7-node01] => (item=python3)
2022-04-01 01:04:57,675 p=66337 u=moonja n=ansible | ok: [co7-node03] => (item=python3-devel)
2022-04-01 01:04:58,023 p=66337 u=moonja n=ansible | ok: [co7-node01] => (item=python3-devel)
2022-04-01 01:04:58,164 p=66337 u=moonja n=ansible | ok: [co7-node02] => (item=python3-devel)
2022-04-01 01:05:03,934 p=66337 u=moonja n=ansible | ok: [co7-node03] => (item=gcc)
2022-04-01 01:05:04,285 p=66337 u=moonja n=ansible | ok: [co7-node01] => (item=gcc)
2022-04-01 01:05:04,432 p=66337 u=moonja n=ansible | ok: [co7-node02] => (item=gcc)
2022-04-01 01:05:10,785 p=66337 u=moonja n=ansible | ok: [co7-node01] => (item=etcd)
2022-04-01 01:05:21,022 p=66337 u=moonja n=ansible | changed: [co7-node03] => (item=etcd)
2022-04-01 01:05:21,259 p=66337 u=moonja n=ansible | changed: [co7-node02] => (item=etcd)
2022-04-01 01:05:22,618 p=66337 u=moonja n=ansible | changed: [co7-node01] => (item=python-psycopg2)
2022-04-01 01:05:28,941 p=66337 u=moonja n=ansible | ok: [co7-node01] => (item=python3-pip)
2022-04-01 01:05:35,093 p=66337 u=moonja n=ansible | changed: [co7-node02] => (item=python-psycopg2)
2022-04-01 01:05:35,205 p=66337 u=moonja n=ansible | ok: [co7-node01] => (item=python34-setuptools)
2022-04-01 01:05:38,721 p=66337 u=moonja n=ansible | changed: [co7-node03] => (item=python-psycopg2)
2022-04-01 01:05:42,922 p=66337 u=moonja n=ansible | ok: [co7-node02] => (item=python3-pip)
2022-04-01 01:05:42,922 p=66337 u=moonja n=ansible | ok: [co7-node01] => (item=yamllint)
2022-04-01 01:05:46,055 p=66337 u=moonja n=ansible | ok: [co7-node03] => (item=python3-pip)
2022-04-01 01:05:50,186 p=66337 u=moonja n=ansible | ok: [co7-node01] => (item=daemonize)
2022-04-01 01:05:50,571 p=66337 u=moonja n=ansible | ok: [co7-node02] => (item=python34-setuptools)
2022-04-01 01:05:53,747 p=66337 u=moonja n=ansible | ok: [co7-node03] => (item=python34-setuptools)
2022-04-01 01:05:59,046 p=66337 u=moonja n=ansible | ok: [co7-node02] => (item=yamllint)
2022-04-01 01:06:02,005 p=66337 u=moonja n=ansible | ok: [co7-node03] => (item=yamllint)
2022-04-01 01:06:05,403 p=66337 u=moonja n=ansible | ok: [co7-node02] => (item=daemonize)
2022-04-01 01:06:10,439 p=66337 u=moonja n=ansible | ok: [co7-node03] => (item=daemonize)
2022-04-01 01:06:10,453 p=66337 u=moonja n=ansible | TASK [patroni-postgres : Install the dependencies of etcd  on all three nodes] ***********************
2022-04-01 01:06:11,364 p=66337 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:06:11,365 p=66337 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:06:11,366 p=66337 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:06:11,378 p=66337 u=moonja n=ansible | TASK [patroni-postgres : Install setuptools rust on all three nodes] *********************************
2022-04-01 01:06:18,713 p=66337 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:06:23,562 p=66337 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:06:23,591 p=66337 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:06:23,603 p=66337 u=moonja n=ansible | TASK [patroni-postgres : Install typing pip module on all three nodes] *******************************
2022-04-01 01:06:29,912 p=66337 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:06:30,211 p=66337 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:06:30,256 p=66337 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:06:30,267 p=66337 u=moonja n=ansible | TASK [patroni-postgres : Upgrade pip3 version] *******************************************************
2022-04-01 01:06:37,836 p=66337 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:06:38,305 p=66337 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:06:38,504 p=66337 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:06:38,516 p=66337 u=moonja n=ansible | TASK [patroni-postgres : Install wheel module on all three nodes] ************************************
2022-04-01 01:06:44,739 p=66337 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:06:44,800 p=66337 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:06:45,461 p=66337 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:06:45,471 p=66337 u=moonja n=ansible | TASK [patroni-postgres : debug] **********************************************************************
2022-04-01 01:06:45,515 p=66337 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "495933710577.13909",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; export PATH=$PATH:/usr/local/bin && pip3 install wheel )",
        "delta": "0:00:01.644561",
        "end": "2022-04-01 01:06:40.813054",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/495933710577.13909",
        "start": "2022-04-01 01:06:39.168493",
        "started": 1,
        "stderr": "  WARNING: The script wheel is installed in '/var/lib/pgsql/.local/bin' which is not on PATH.\n  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.",
        "stderr_lines": [
            "  WARNING: The script wheel is installed in '/var/lib/pgsql/.local/bin' which is not on PATH.",
            "  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location."
        ],
        "stdout": "Defaulting to user installation because normal site-packages is not writeable\nCollecting wheel\n  Using cached wheel-0.37.1-py2.py3-none-any.whl (35 kB)\nInstalling collected packages: wheel\nSuccessfully installed wheel-0.37.1",
        "stdout_lines": [
            "Defaulting to user installation because normal site-packages is not writeable",
            "Collecting wheel",
            "  Using cached wheel-0.37.1-py2.py3-none-any.whl (35 kB)",
            "Installing collected packages: wheel",
            "Successfully installed wheel-0.37.1"
        ]
    }
}
2022-04-01 01:06:45,516 p=66337 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "ansible_job_id": "195945331374.1953",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; export PATH=$PATH:/usr/local/bin && pip3 install wheel )",
        "delta": "0:00:01.843204",
        "end": "2022-04-01 01:06:41.015255",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/195945331374.1953",
        "start": "2022-04-01 01:06:39.172051",
        "started": 1,
        "stderr": "  WARNING: The script wheel is installed in '/var/lib/pgsql/.local/bin' which is not on PATH.\n  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.",
        "stderr_lines": [
            "  WARNING: The script wheel is installed in '/var/lib/pgsql/.local/bin' which is not on PATH.",
            "  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location."
        ],
        "stdout": "Defaulting to user installation because normal site-packages is not writeable\nCollecting wheel\n  Downloading wheel-0.37.1-py2.py3-none-any.whl (35 kB)\nInstalling collected packages: wheel\nSuccessfully installed wheel-0.37.1",
        "stdout_lines": [
            "Defaulting to user installation because normal site-packages is not writeable",
            "Collecting wheel",
            "  Downloading wheel-0.37.1-py2.py3-none-any.whl (35 kB)",
            "Installing collected packages: wheel",
            "Successfully installed wheel-0.37.1"
        ]
    }
}
2022-04-01 01:06:45,532 p=66337 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "ansible_job_id": "976913079346.2196",
        "changed": true,
        "cmd": "( cd /var/lib/pgsql ; export PATH=$PATH:/usr/local/bin && pip3 install wheel )",
        "delta": "0:00:01.743651",
        "end": "2022-04-01 01:06:40.930802",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/976913079346.2196",
        "start": "2022-04-01 01:06:39.187151",
        "started": 1,
        "stderr": "  WARNING: The script wheel is installed in '/var/lib/pgsql/.local/bin' which is not on PATH.\n  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.",
        "stderr_lines": [
            "  WARNING: The script wheel is installed in '/var/lib/pgsql/.local/bin' which is not on PATH.",
            "  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location."
        ],
        "stdout": "Defaulting to user installation because normal site-packages is not writeable\nCollecting wheel\n  Downloading wheel-0.37.1-py2.py3-none-any.whl (35 kB)\nInstalling collected packages: wheel\nSuccessfully installed wheel-0.37.1",
        "stdout_lines": [
            "Defaulting to user installation because normal site-packages is not writeable",
            "Collecting wheel",
            "  Downloading wheel-0.37.1-py2.py3-none-any.whl (35 kB)",
            "Installing collected packages: wheel",
            "Successfully installed wheel-0.37.1"
        ]
    }
}
2022-04-01 01:06:45,544 p=66337 u=moonja n=ansible | TASK [patroni-postgres : Install pip modules of Patroni prerequisites on all three nodes] ************
2022-04-01 01:06:51,896 p=66337 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:07:18,633 p=66337 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:07:18,776 p=66337 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:07:18,792 p=66337 u=moonja n=ansible | TASK [patroni-postgres : debug] **********************************************************************
2022-04-01 01:07:18,894 p=66337 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "852163370129.14287",
        "changed": true,
        "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 install -r /var/lib/pgsql/requirements.txt )",
        "delta": "0:00:00.720866",
        "end": "2022-04-01 01:06:46.960028",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/852163370129.14287",
        "start": "2022-04-01 01:06:46.239162",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "Defaulting to user installation because normal site-packages is not writeable\nRequirement already satisfied: urllib3!=1.21,>=1.19.1 in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 1)) (1.26.9)\nRequirement already satisfied: boto in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 2)) (2.49.0)\nRequirement already satisfied: PyYAML in /usr/lib64/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 3)) (3.13)\nRequirement already satisfied: requests in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 4)) (2.27.1)\nRequirement already satisfied: six>=1.7 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 5)) (1.16.0)\nRequirement already satisfied: kazoo>=1.3.1 in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 6)) (2.8.0)\nRequirement already satisfied: python-etcd<0.5,>=0.4.3 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 7)) (0.4.5)\nRequirement already satisfied: python-consul>=0.7.0 in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 8)) (1.1.0)\nRequirement already satisfied: click>=4.1 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 9)) (8.0.1)\nRequirement already satisfied: prettytable>=0.7 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 10)) (2.2.0)\nRequirement already satisfied: tzlocal in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 11)) (4.1)\nRequirement already satisfied: python-dateutil in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 12)) (2.8.2)\nRequirement already satisfied: psutil>=2.0.0 in /usr/local/lib64/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 13)) (5.8.0)\nRequirement already satisfied: cdiff in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 14)) (1.0)\nRequirement already satisfied: kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0 in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 15)) (7.0.0)\nRequirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.6/site-packages (from requests->-r /var/lib/pgsql/requirements.txt (line 4)) (3.2)\nRequirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.6/site-packages (from requests->-r /var/lib/pgsql/requirements.txt (line 4)) (2021.5.30)\nRequirement already satisfied: charset-normalizer~=2.0.0 in /usr/local/lib/python3.6/site-packages (from requests->-r /var/lib/pgsql/requirements.txt (line 4)) (2.0.4)\nRequirement already satisfied: dnspython>=1.13.0 in /usr/local/lib/python3.6/site-packages (from python-etcd<0.5,>=0.4.3->-r /var/lib/pgsql/requirements.txt (line 7)) (2.1.0)\nRequirement already satisfied: importlib-metadata in /usr/local/lib/python3.6/site-packages (from click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (4.8.1)\nRequirement already satisfied: wcwidth in /usr/local/lib/python3.6/site-packages (from prettytable>=0.7->-r /var/lib/pgsql/requirements.txt (line 10)) (0.2.5)\nRequirement already satisfied: pytz-deprecation-shim in /var/lib/pgsql/.local/lib/python3.6/site-packages (from tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (0.1.0.post0)\nRequirement already satisfied: backports.zoneinfo in /usr/local/lib64/python3.6/site-packages (from tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (0.2.1)\nRequirement already satisfied: google-auth>=1.0.1 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (2.0.2)\nRequirement already satisfied: setuptools>=21.0.0 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (57.1.0)\nRequirement already satisfied: adal>=1.0.2 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.2.7)\nRequirement already satisfied: requests-oauthlib in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.3.0)\nRequirement already satisfied: websocket-client!=0.40.0,!=0.41.*,!=0.42.*,>=0.32.0 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.2.1)\nRequirement already satisfied: cryptography>=1.1.0 in /usr/local/lib64/python3.6/site-packages (from adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (3.4.8)\nRequirement already satisfied: PyJWT<3,>=1.0.0 in /usr/local/lib/python3.6/site-packages (from adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (2.1.0)\nRequirement already satisfied: pyasn1-modules>=0.2.1 in /usr/local/lib/python3.6/site-packages (from google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (0.2.8)\nRequirement already satisfied: cachetools<5.0,>=2.0.0 in /usr/local/lib/python3.6/site-packages (from google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (4.2.2)\nRequirement already satisfied: rsa<5,>=3.1.4 in /usr/local/lib/python3.6/site-packages (from google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (4.7.2)\nRequirement already satisfied: importlib-resources in /usr/local/lib/python3.6/site-packages (from backports.zoneinfo->tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (5.2.2)\nRequirement already satisfied: typing-extensions>=3.6.4 in /usr/local/lib/python3.6/site-packages (from importlib-metadata->click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (3.10.0.2)\nRequirement already satisfied: zipp>=0.5 in /usr/local/lib/python3.6/site-packages (from importlib-metadata->click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (3.5.0)\nRequirement already satisfied: tzdata in /var/lib/pgsql/.local/lib/python3.6/site-packages (from pytz-deprecation-shim->tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (2022.1)\nRequirement already satisfied: oauthlib>=3.0.0 in /usr/local/lib/python3.6/site-packages (from requests-oauthlib->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (3.1.1)\nRequirement already satisfied: cffi>=1.12 in /usr/local/lib64/python3.6/site-packages (from cryptography>=1.1.0->adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.14.6)\nRequirement already satisfied: pyasn1<0.5.0,>=0.4.6 in /usr/local/lib/python3.6/site-packages (from pyasn1-modules>=0.2.1->google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (0.4.8)\nRequirement already satisfied: pycparser in /usr/local/lib/python3.6/site-packages (from cffi>=1.12->cryptography>=1.1.0->adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (2.20)",
        "stdout_lines": [
            "Defaulting to user installation because normal site-packages is not writeable",
            "Requirement already satisfied: urllib3!=1.21,>=1.19.1 in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 1)) (1.26.9)",
            "Requirement already satisfied: boto in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 2)) (2.49.0)",
            "Requirement already satisfied: PyYAML in /usr/lib64/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 3)) (3.13)",
            "Requirement already satisfied: requests in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 4)) (2.27.1)",
            "Requirement already satisfied: six>=1.7 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 5)) (1.16.0)",
            "Requirement already satisfied: kazoo>=1.3.1 in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 6)) (2.8.0)",
            "Requirement already satisfied: python-etcd<0.5,>=0.4.3 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 7)) (0.4.5)",
            "Requirement already satisfied: python-consul>=0.7.0 in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 8)) (1.1.0)",
            "Requirement already satisfied: click>=4.1 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 9)) (8.0.1)",
            "Requirement already satisfied: prettytable>=0.7 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 10)) (2.2.0)",
            "Requirement already satisfied: tzlocal in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 11)) (4.1)",
            "Requirement already satisfied: python-dateutil in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 12)) (2.8.2)",
            "Requirement already satisfied: psutil>=2.0.0 in /usr/local/lib64/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 13)) (5.8.0)",
            "Requirement already satisfied: cdiff in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 14)) (1.0)",
            "Requirement already satisfied: kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0 in /var/lib/pgsql/.local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 15)) (7.0.0)",
            "Requirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.6/site-packages (from requests->-r /var/lib/pgsql/requirements.txt (line 4)) (3.2)",
            "Requirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.6/site-packages (from requests->-r /var/lib/pgsql/requirements.txt (line 4)) (2021.5.30)",
            "Requirement already satisfied: charset-normalizer~=2.0.0 in /usr/local/lib/python3.6/site-packages (from requests->-r /var/lib/pgsql/requirements.txt (line 4)) (2.0.4)",
            "Requirement already satisfied: dnspython>=1.13.0 in /usr/local/lib/python3.6/site-packages (from python-etcd<0.5,>=0.4.3->-r /var/lib/pgsql/requirements.txt (line 7)) (2.1.0)",
            "Requirement already satisfied: importlib-metadata in /usr/local/lib/python3.6/site-packages (from click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (4.8.1)",
            "Requirement already satisfied: wcwidth in /usr/local/lib/python3.6/site-packages (from prettytable>=0.7->-r /var/lib/pgsql/requirements.txt (line 10)) (0.2.5)",
            "Requirement already satisfied: pytz-deprecation-shim in /var/lib/pgsql/.local/lib/python3.6/site-packages (from tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (0.1.0.post0)",
            "Requirement already satisfied: backports.zoneinfo in /usr/local/lib64/python3.6/site-packages (from tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (0.2.1)",
            "Requirement already satisfied: google-auth>=1.0.1 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (2.0.2)",
            "Requirement already satisfied: setuptools>=21.0.0 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (57.1.0)",
            "Requirement already satisfied: adal>=1.0.2 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.2.7)",
            "Requirement already satisfied: requests-oauthlib in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.3.0)",
            "Requirement already satisfied: websocket-client!=0.40.0,!=0.41.*,!=0.42.*,>=0.32.0 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.2.1)",
            "Requirement already satisfied: cryptography>=1.1.0 in /usr/local/lib64/python3.6/site-packages (from adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (3.4.8)",
            "Requirement already satisfied: PyJWT<3,>=1.0.0 in /usr/local/lib/python3.6/site-packages (from adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (2.1.0)",
            "Requirement already satisfied: pyasn1-modules>=0.2.1 in /usr/local/lib/python3.6/site-packages (from google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (0.2.8)",
            "Requirement already satisfied: cachetools<5.0,>=2.0.0 in /usr/local/lib/python3.6/site-packages (from google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (4.2.2)",
            "Requirement already satisfied: rsa<5,>=3.1.4 in /usr/local/lib/python3.6/site-packages (from google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (4.7.2)",
            "Requirement already satisfied: importlib-resources in /usr/local/lib/python3.6/site-packages (from backports.zoneinfo->tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (5.2.2)",
            "Requirement already satisfied: typing-extensions>=3.6.4 in /usr/local/lib/python3.6/site-packages (from importlib-metadata->click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (3.10.0.2)",
            "Requirement already satisfied: zipp>=0.5 in /usr/local/lib/python3.6/site-packages (from importlib-metadata->click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (3.5.0)",
            "Requirement already satisfied: tzdata in /var/lib/pgsql/.local/lib/python3.6/site-packages (from pytz-deprecation-shim->tzlocal->-r /var/lib/pgsql/requirements.txt (line 11)) (2022.1)",
            "Requirement already satisfied: oauthlib>=3.0.0 in /usr/local/lib/python3.6/site-packages (from requests-oauthlib->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (3.1.1)",
            "Requirement already satisfied: cffi>=1.12 in /usr/local/lib64/python3.6/site-packages (from cryptography>=1.1.0->adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (1.14.6)",
            "Requirement already satisfied: pyasn1<0.5.0,>=0.4.6 in /usr/local/lib/python3.6/site-packages (from pyasn1-modules>=0.2.1->google-auth>=1.0.1->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (0.4.8)",
            "Requirement already satisfied: pycparser in /usr/local/lib/python3.6/site-packages (from cffi>=1.12->cryptography>=1.1.0->adal>=1.0.2->kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (2.20)"
        ]
    }
}
2022-04-01 01:07:18,897 p=66337 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "ansible_job_id": "950751874184.2331",
        "changed": true,
        "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 install -r /var/lib/pgsql/requirements.txt )",
        "delta": "0:00:27.585775",
        "end": "2022-04-01 01:07:13.811171",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/950751874184.2331",
        "start": "2022-04-01 01:06:46.225396",
        "started": 1,
        "stderr": "  WARNING: The script normalizer is installed in '/var/lib/pgsql/.local/bin' which is not on PATH.\n  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.\n  WARNING: The scripts pyrsa-decrypt, pyrsa-encrypt, pyrsa-keygen, pyrsa-priv2pub, pyrsa-sign and pyrsa-verify are installed in '/var/lib/pgsql/.local/bin' which is not on PATH.\n  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.\n  WARNING: The script wsdump is installed in '/var/lib/pgsql/.local/bin' which is not on PATH.\n  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.",
        "stderr_lines": [
            "  WARNING: The script normalizer is installed in '/var/lib/pgsql/.local/bin' which is not on PATH.",
            "  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.",
            "  WARNING: The scripts pyrsa-decrypt, pyrsa-encrypt, pyrsa-keygen, pyrsa-priv2pub, pyrsa-sign and pyrsa-verify are installed in '/var/lib/pgsql/.local/bin' which is not on PATH.",
            "  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.",
            "  WARNING: The script wsdump is installed in '/var/lib/pgsql/.local/bin' which is not on PATH.",
            "  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location."
        ],
        "stdout": "Defaulting to user installation because normal site-packages is not writeable\nCollecting urllib3!=1.21,>=1.19.1\n  Downloading urllib3-1.26.9-py2.py3-none-any.whl (138 kB)\nCollecting boto\n  Downloading boto-2.49.0-py2.py3-none-any.whl (1.4 MB)\nRequirement already satisfied: PyYAML in /usr/lib64/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 3)) (3.13)\nCollecting requests\n  Downloading requests-2.27.1-py2.py3-none-any.whl (63 kB)\nRequirement already satisfied: six>=1.7 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 5)) (1.16.0)\nCollecting kazoo>=1.3.1\n  Downloading kazoo-2.8.0-py2.py3-none-any.whl (142 kB)\nCollecting python-etcd<0.5,>=0.4.3\n  Downloading python-etcd-0.4.5.tar.gz (37 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting python-consul>=0.7.0\n  Downloading python_consul-1.1.0-py2.py3-none-any.whl (24 kB)\nRequirement already satisfied: click>=4.1 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 9)) (8.0.1)\nRequirement already satisfied: prettytable>=0.7 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 10)) (2.2.0)\nCollecting tzlocal\n  Downloading tzlocal-4.1-py3-none-any.whl (19 kB)\nRequirement already satisfied: python-dateutil in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 12)) (2.8.2)\nRequirement already satisfied: psutil>=2.0.0 in /usr/local/lib64/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 13)) (5.8.0)\nCollecting cdiff\n  Downloading cdiff-1.0.tar.gz (33 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0\n  Downloading kubernetes-7.0.0-py2.py3-none-any.whl (1.3 MB)\nCollecting idna<4,>=2.5\n  Downloading idna-3.3-py3-none-any.whl (61 kB)\nCollecting certifi>=2017.4.17\n  Downloading certifi-2021.10.8-py2.py3-none-any.whl (149 kB)\nCollecting charset-normalizer~=2.0.0\n  Downloading charset_normalizer-2.0.12-py3-none-any.whl (39 kB)\nCollecting dnspython>=1.13.0\n  Downloading dnspython-2.2.1-py3-none-any.whl (269 kB)\nRequirement already satisfied: importlib-metadata in /usr/local/lib/python3.6/site-packages (from click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (4.8.1)\nRequirement already satisfied: wcwidth in /usr/local/lib/python3.6/site-packages (from prettytable>=0.7->-r /var/lib/pgsql/requirements.txt (line 10)) (0.2.5)\nCollecting pytz-deprecation-shim\n  Downloading pytz_deprecation_shim-0.1.0.post0-py2.py3-none-any.whl (15 kB)\nCollecting backports.zoneinfo\n  Downloading backports.zoneinfo-0.2.1-cp36-cp36m-manylinux1_x86_64.whl (70 kB)\nRequirement already satisfied: setuptools>=21.0.0 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (57.1.0)\nCollecting google-auth>=1.0.1\n  Downloading google_auth-2.6.2-py2.py3-none-any.whl (156 kB)\nCollecting adal>=1.0.2\n  Downloading adal-1.2.7-py2.py3-none-any.whl (55 kB)\nCollecting websocket-client!=0.40.0,!=0.41.*,!=0.42.*,>=0.32.0\n  Downloading websocket_client-1.3.1-py3-none-any.whl (54 kB)\nCollecting requests-oauthlib\n  Downloading requests_oauthlib-1.3.1-py2.py3-none-any.whl (23 kB)\nCollecting cryptography>=1.1.0\n  Downloading cryptography-36.0.2-cp36-abi3-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.7 MB)\nCollecting PyJWT<3,>=1.0.0\n  Downloading PyJWT-2.3.0-py3-none-any.whl (16 kB)\nCollecting cachetools<6.0,>=2.0.0\n  Downloading cachetools-4.2.4-py3-none-any.whl (10 kB)\nCollecting rsa<5,>=3.1.4\n  Downloading rsa-4.8-py3-none-any.whl (39 kB)\nCollecting pyasn1-modules>=0.2.1\n  Downloading pyasn1_modules-0.2.8-py2.py3-none-any.whl (155 kB)\nCollecting importlib-resources\n  Downloading importlib_resources-5.4.0-py3-none-any.whl (28 kB)\nRequirement already satisfied: zipp>=0.5 in /usr/local/lib/python3.6/site-packages (from importlib-metadata->click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (3.5.0)\nRequirement already satisfied: typing-extensions>=3.6.4 in /usr/local/lib/python3.6/site-packages (from importlib-metadata->click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (3.10.0.2)\nCollecting tzdata\n  Downloading tzdata-2022.1-py2.py3-none-any.whl (339 kB)\nCollecting oauthlib>=3.0.0\n  Downloading oauthlib-3.2.0-py3-none-any.whl (151 kB)\nCollecting cffi>=1.12\n  Downloading cffi-1.15.0-cp36-cp36m-manylinux_2_5_x86_64.manylinux1_x86_64.whl (405 kB)\nCollecting pyasn1<0.5.0,>=0.4.6\n  Downloading pyasn1-0.4.8-py2.py3-none-any.whl (77 kB)\nCollecting pycparser\n  Downloading pycparser-2.21-py2.py3-none-any.whl (118 kB)\nBuilding wheels for collected packages: python-etcd, cdiff\n  Building wheel for python-etcd (setup.py): started\n  Building wheel for python-etcd (setup.py): finished with status 'done'\n  Created wheel for python-etcd: filename=python_etcd-0.4.5-py3-none-any.whl size=38501 sha256=3ebbbbb3f057254f471e3607e982a65cfa4a90611c32cf90146f11f3b2fcca07\n  Stored in directory: /var/lib/pgsql/.cache/pip/wheels/f5/49/d1/13a8c3febc4438f96a19fdc8075fe72c1981539d86d0ed8bb8\n  Building wheel for cdiff (setup.py): started\n  Building wheel for cdiff (setup.py): finished with status 'done'\n  Created wheel for cdiff: filename=cdiff-1.0-py3-none-any.whl size=14474 sha256=69143b5b9f9c33beb9eae1cbb02aeb7f92cb7fc1ad84e5b6d1a8c10e7743fcfb\n  Stored in directory: /var/lib/pgsql/.cache/pip/wheels/99/6b/43/6423499f3ab670266f34d2e5e6a9ff37a37b61404be8c91789\nSuccessfully built python-etcd cdiff\nInstalling collected packages: pycparser, urllib3, pyasn1, importlib-resources, idna, charset-normalizer, cffi, certifi, tzdata, rsa, requests, PyJWT, pyasn1-modules, oauthlib, cryptography, cachetools, backports.zoneinfo, websocket-client, requests-oauthlib, pytz-deprecation-shim, google-auth, dnspython, adal, tzlocal, python-etcd, python-consul, kubernetes, kazoo, cdiff, boto\nSuccessfully installed PyJWT-2.3.0 adal-1.2.7 backports.zoneinfo-0.2.1 boto-2.49.0 cachetools-4.2.4 cdiff-1.0 certifi-2021.10.8 cffi-1.15.0 charset-normalizer-2.0.12 cryptography-36.0.2 dnspython-2.2.1 google-auth-2.6.2 idna-3.3 importlib-resources-5.4.0 kazoo-2.8.0 kubernetes-7.0.0 oauthlib-3.2.0 pyasn1-0.4.8 pyasn1-modules-0.2.8 pycparser-2.21 python-consul-1.1.0 python-etcd-0.4.5 pytz-deprecation-shim-0.1.0.post0 requests-2.27.1 requests-oauthlib-1.3.1 rsa-4.8 tzdata-2022.1 tzlocal-4.1 urllib3-1.26.9 websocket-client-1.3.1",
        "stdout_lines": [
            "Defaulting to user installation because normal site-packages is not writeable",
            "Collecting urllib3!=1.21,>=1.19.1",
            "  Downloading urllib3-1.26.9-py2.py3-none-any.whl (138 kB)",
            "Collecting boto",
            "  Downloading boto-2.49.0-py2.py3-none-any.whl (1.4 MB)",
            "Requirement already satisfied: PyYAML in /usr/lib64/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 3)) (3.13)",
            "Collecting requests",
            "  Downloading requests-2.27.1-py2.py3-none-any.whl (63 kB)",
            "Requirement already satisfied: six>=1.7 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 5)) (1.16.0)",
            "Collecting kazoo>=1.3.1",
            "  Downloading kazoo-2.8.0-py2.py3-none-any.whl (142 kB)",
            "Collecting python-etcd<0.5,>=0.4.3",
            "  Downloading python-etcd-0.4.5.tar.gz (37 kB)",
            "  Preparing metadata (setup.py): started",
            "  Preparing metadata (setup.py): finished with status 'done'",
            "Collecting python-consul>=0.7.0",
            "  Downloading python_consul-1.1.0-py2.py3-none-any.whl (24 kB)",
            "Requirement already satisfied: click>=4.1 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 9)) (8.0.1)",
            "Requirement already satisfied: prettytable>=0.7 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 10)) (2.2.0)",
            "Collecting tzlocal",
            "  Downloading tzlocal-4.1-py3-none-any.whl (19 kB)",
            "Requirement already satisfied: python-dateutil in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 12)) (2.8.2)",
            "Requirement already satisfied: psutil>=2.0.0 in /usr/local/lib64/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 13)) (5.8.0)",
            "Collecting cdiff",
            "  Downloading cdiff-1.0.tar.gz (33 kB)",
            "  Preparing metadata (setup.py): started",
            "  Preparing metadata (setup.py): finished with status 'done'",
            "Collecting kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0",
            "  Downloading kubernetes-7.0.0-py2.py3-none-any.whl (1.3 MB)",
            "Collecting idna<4,>=2.5",
            "  Downloading idna-3.3-py3-none-any.whl (61 kB)",
            "Collecting certifi>=2017.4.17",
            "  Downloading certifi-2021.10.8-py2.py3-none-any.whl (149 kB)",
            "Collecting charset-normalizer~=2.0.0",
            "  Downloading charset_normalizer-2.0.12-py3-none-any.whl (39 kB)",
            "Collecting dnspython>=1.13.0",
            "  Downloading dnspython-2.2.1-py3-none-any.whl (269 kB)",
            "Requirement already satisfied: importlib-metadata in /usr/local/lib/python3.6/site-packages (from click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (4.8.1)",
            "Requirement already satisfied: wcwidth in /usr/local/lib/python3.6/site-packages (from prettytable>=0.7->-r /var/lib/pgsql/requirements.txt (line 10)) (0.2.5)",
            "Collecting pytz-deprecation-shim",
            "  Downloading pytz_deprecation_shim-0.1.0.post0-py2.py3-none-any.whl (15 kB)",
            "Collecting backports.zoneinfo",
            "  Downloading backports.zoneinfo-0.2.1-cp36-cp36m-manylinux1_x86_64.whl (70 kB)",
            "Requirement already satisfied: setuptools>=21.0.0 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (57.1.0)",
            "Collecting google-auth>=1.0.1",
            "  Downloading google_auth-2.6.2-py2.py3-none-any.whl (156 kB)",
            "Collecting adal>=1.0.2",
            "  Downloading adal-1.2.7-py2.py3-none-any.whl (55 kB)",
            "Collecting websocket-client!=0.40.0,!=0.41.*,!=0.42.*,>=0.32.0",
            "  Downloading websocket_client-1.3.1-py3-none-any.whl (54 kB)",
            "Collecting requests-oauthlib",
            "  Downloading requests_oauthlib-1.3.1-py2.py3-none-any.whl (23 kB)",
            "Collecting cryptography>=1.1.0",
            "  Downloading cryptography-36.0.2-cp36-abi3-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.7 MB)",
            "Collecting PyJWT<3,>=1.0.0",
            "  Downloading PyJWT-2.3.0-py3-none-any.whl (16 kB)",
            "Collecting cachetools<6.0,>=2.0.0",
            "  Downloading cachetools-4.2.4-py3-none-any.whl (10 kB)",
            "Collecting rsa<5,>=3.1.4",
            "  Downloading rsa-4.8-py3-none-any.whl (39 kB)",
            "Collecting pyasn1-modules>=0.2.1",
            "  Downloading pyasn1_modules-0.2.8-py2.py3-none-any.whl (155 kB)",
            "Collecting importlib-resources",
            "  Downloading importlib_resources-5.4.0-py3-none-any.whl (28 kB)",
            "Requirement already satisfied: zipp>=0.5 in /usr/local/lib/python3.6/site-packages (from importlib-metadata->click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (3.5.0)",
            "Requirement already satisfied: typing-extensions>=3.6.4 in /usr/local/lib/python3.6/site-packages (from importlib-metadata->click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (3.10.0.2)",
            "Collecting tzdata",
            "  Downloading tzdata-2022.1-py2.py3-none-any.whl (339 kB)",
            "Collecting oauthlib>=3.0.0",
            "  Downloading oauthlib-3.2.0-py3-none-any.whl (151 kB)",
            "Collecting cffi>=1.12",
            "  Downloading cffi-1.15.0-cp36-cp36m-manylinux_2_5_x86_64.manylinux1_x86_64.whl (405 kB)",
            "Collecting pyasn1<0.5.0,>=0.4.6",
            "  Downloading pyasn1-0.4.8-py2.py3-none-any.whl (77 kB)",
            "Collecting pycparser",
            "  Downloading pycparser-2.21-py2.py3-none-any.whl (118 kB)",
            "Building wheels for collected packages: python-etcd, cdiff",
            "  Building wheel for python-etcd (setup.py): started",
            "  Building wheel for python-etcd (setup.py): finished with status 'done'",
            "  Created wheel for python-etcd: filename=python_etcd-0.4.5-py3-none-any.whl size=38501 sha256=3ebbbbb3f057254f471e3607e982a65cfa4a90611c32cf90146f11f3b2fcca07",
            "  Stored in directory: /var/lib/pgsql/.cache/pip/wheels/f5/49/d1/13a8c3febc4438f96a19fdc8075fe72c1981539d86d0ed8bb8",
            "  Building wheel for cdiff (setup.py): started",
            "  Building wheel for cdiff (setup.py): finished with status 'done'",
            "  Created wheel for cdiff: filename=cdiff-1.0-py3-none-any.whl size=14474 sha256=69143b5b9f9c33beb9eae1cbb02aeb7f92cb7fc1ad84e5b6d1a8c10e7743fcfb",
            "  Stored in directory: /var/lib/pgsql/.cache/pip/wheels/99/6b/43/6423499f3ab670266f34d2e5e6a9ff37a37b61404be8c91789",
            "Successfully built python-etcd cdiff",
            "Installing collected packages: pycparser, urllib3, pyasn1, importlib-resources, idna, charset-normalizer, cffi, certifi, tzdata, rsa, requests, PyJWT, pyasn1-modules, oauthlib, cryptography, cachetools, backports.zoneinfo, websocket-client, requests-oauthlib, pytz-deprecation-shim, google-auth, dnspython, adal, tzlocal, python-etcd, python-consul, kubernetes, kazoo, cdiff, boto",
            "Successfully installed PyJWT-2.3.0 adal-1.2.7 backports.zoneinfo-0.2.1 boto-2.49.0 cachetools-4.2.4 cdiff-1.0 certifi-2021.10.8 cffi-1.15.0 charset-normalizer-2.0.12 cryptography-36.0.2 dnspython-2.2.1 google-auth-2.6.2 idna-3.3 importlib-resources-5.4.0 kazoo-2.8.0 kubernetes-7.0.0 oauthlib-3.2.0 pyasn1-0.4.8 pyasn1-modules-0.2.8 pycparser-2.21 python-consul-1.1.0 python-etcd-0.4.5 pytz-deprecation-shim-0.1.0.post0 requests-2.27.1 requests-oauthlib-1.3.1 rsa-4.8 tzdata-2022.1 tzlocal-4.1 urllib3-1.26.9 websocket-client-1.3.1"
        ]
    }
}
2022-04-01 01:07:18,913 p=66337 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "ansible_job_id": "248889073786.2582",
        "changed": true,
        "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 install -r /var/lib/pgsql/requirements.txt )",
        "delta": "0:00:28.337395",
        "end": "2022-04-01 01:07:14.585041",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/248889073786.2582",
        "start": "2022-04-01 01:06:46.247646",
        "started": 1,
        "stderr": "  WARNING: The script normalizer is installed in '/var/lib/pgsql/.local/bin' which is not on PATH.\n  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.\n  WARNING: The scripts pyrsa-decrypt, pyrsa-encrypt, pyrsa-keygen, pyrsa-priv2pub, pyrsa-sign and pyrsa-verify are installed in '/var/lib/pgsql/.local/bin' which is not on PATH.\n  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.\n  WARNING: The script wsdump is installed in '/var/lib/pgsql/.local/bin' which is not on PATH.\n  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.",
        "stderr_lines": [
            "  WARNING: The script normalizer is installed in '/var/lib/pgsql/.local/bin' which is not on PATH.",
            "  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.",
            "  WARNING: The scripts pyrsa-decrypt, pyrsa-encrypt, pyrsa-keygen, pyrsa-priv2pub, pyrsa-sign and pyrsa-verify are installed in '/var/lib/pgsql/.local/bin' which is not on PATH.",
            "  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.",
            "  WARNING: The script wsdump is installed in '/var/lib/pgsql/.local/bin' which is not on PATH.",
            "  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location."
        ],
        "stdout": "Defaulting to user installation because normal site-packages is not writeable\nCollecting urllib3!=1.21,>=1.19.1\n  Downloading urllib3-1.26.9-py2.py3-none-any.whl (138 kB)\nCollecting boto\n  Downloading boto-2.49.0-py2.py3-none-any.whl (1.4 MB)\nRequirement already satisfied: PyYAML in /usr/lib64/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 3)) (3.13)\nCollecting requests\n  Downloading requests-2.27.1-py2.py3-none-any.whl (63 kB)\nRequirement already satisfied: six>=1.7 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 5)) (1.16.0)\nCollecting kazoo>=1.3.1\n  Downloading kazoo-2.8.0-py2.py3-none-any.whl (142 kB)\nCollecting python-etcd<0.5,>=0.4.3\n  Downloading python-etcd-0.4.5.tar.gz (37 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting python-consul>=0.7.0\n  Downloading python_consul-1.1.0-py2.py3-none-any.whl (24 kB)\nRequirement already satisfied: click>=4.1 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 9)) (8.0.1)\nRequirement already satisfied: prettytable>=0.7 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 10)) (2.2.0)\nCollecting tzlocal\n  Downloading tzlocal-4.1-py3-none-any.whl (19 kB)\nRequirement already satisfied: python-dateutil in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 12)) (2.8.2)\nRequirement already satisfied: psutil>=2.0.0 in /usr/local/lib64/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 13)) (5.8.0)\nCollecting cdiff\n  Downloading cdiff-1.0.tar.gz (33 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0\n  Downloading kubernetes-7.0.0-py2.py3-none-any.whl (1.3 MB)\nCollecting charset-normalizer~=2.0.0\n  Downloading charset_normalizer-2.0.12-py3-none-any.whl (39 kB)\nCollecting certifi>=2017.4.17\n  Downloading certifi-2021.10.8-py2.py3-none-any.whl (149 kB)\nCollecting idna<4,>=2.5\n  Downloading idna-3.3-py3-none-any.whl (61 kB)\nCollecting dnspython>=1.13.0\n  Downloading dnspython-2.2.1-py3-none-any.whl (269 kB)\nRequirement already satisfied: importlib-metadata in /usr/local/lib/python3.6/site-packages (from click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (4.8.1)\nRequirement already satisfied: wcwidth in /usr/local/lib/python3.6/site-packages (from prettytable>=0.7->-r /var/lib/pgsql/requirements.txt (line 10)) (0.2.5)\nCollecting backports.zoneinfo\n  Downloading backports.zoneinfo-0.2.1-cp36-cp36m-manylinux1_x86_64.whl (70 kB)\nCollecting pytz-deprecation-shim\n  Downloading pytz_deprecation_shim-0.1.0.post0-py2.py3-none-any.whl (15 kB)\nCollecting websocket-client!=0.40.0,!=0.41.*,!=0.42.*,>=0.32.0\n  Downloading websocket_client-1.3.1-py3-none-any.whl (54 kB)\nRequirement already satisfied: setuptools>=21.0.0 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (57.1.0)\nCollecting requests-oauthlib\n  Downloading requests_oauthlib-1.3.1-py2.py3-none-any.whl (23 kB)\nCollecting adal>=1.0.2\n  Downloading adal-1.2.7-py2.py3-none-any.whl (55 kB)\nCollecting google-auth>=1.0.1\n  Downloading google_auth-2.6.2-py2.py3-none-any.whl (156 kB)\nCollecting cryptography>=1.1.0\n  Downloading cryptography-36.0.2-cp36-abi3-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.7 MB)\nCollecting PyJWT<3,>=1.0.0\n  Downloading PyJWT-2.3.0-py3-none-any.whl (16 kB)\nCollecting rsa<5,>=3.1.4\n  Downloading rsa-4.8-py3-none-any.whl (39 kB)\nCollecting cachetools<6.0,>=2.0.0\n  Downloading cachetools-4.2.4-py3-none-any.whl (10 kB)\nCollecting pyasn1-modules>=0.2.1\n  Downloading pyasn1_modules-0.2.8-py2.py3-none-any.whl (155 kB)\nCollecting importlib-resources\n  Downloading importlib_resources-5.4.0-py3-none-any.whl (28 kB)\nRequirement already satisfied: zipp>=0.5 in /usr/local/lib/python3.6/site-packages (from importlib-metadata->click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (3.5.0)\nRequirement already satisfied: typing-extensions>=3.6.4 in /usr/local/lib/python3.6/site-packages (from importlib-metadata->click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (3.10.0.2)\nCollecting tzdata\n  Downloading tzdata-2022.1-py2.py3-none-any.whl (339 kB)\nCollecting oauthlib>=3.0.0\n  Downloading oauthlib-3.2.0-py3-none-any.whl (151 kB)\nCollecting cffi>=1.12\n  Downloading cffi-1.15.0-cp36-cp36m-manylinux_2_5_x86_64.manylinux1_x86_64.whl (405 kB)\nCollecting pyasn1<0.5.0,>=0.4.6\n  Downloading pyasn1-0.4.8-py2.py3-none-any.whl (77 kB)\nCollecting pycparser\n  Downloading pycparser-2.21-py2.py3-none-any.whl (118 kB)\nBuilding wheels for collected packages: python-etcd, cdiff\n  Building wheel for python-etcd (setup.py): started\n  Building wheel for python-etcd (setup.py): finished with status 'done'\n  Created wheel for python-etcd: filename=python_etcd-0.4.5-py3-none-any.whl size=38501 sha256=3ebbbbb3f057254f471e3607e982a65cfa4a90611c32cf90146f11f3b2fcca07\n  Stored in directory: /var/lib/pgsql/.cache/pip/wheels/f5/49/d1/13a8c3febc4438f96a19fdc8075fe72c1981539d86d0ed8bb8\n  Building wheel for cdiff (setup.py): started\n  Building wheel for cdiff (setup.py): finished with status 'done'\n  Created wheel for cdiff: filename=cdiff-1.0-py3-none-any.whl size=14474 sha256=69143b5b9f9c33beb9eae1cbb02aeb7f92cb7fc1ad84e5b6d1a8c10e7743fcfb\n  Stored in directory: /var/lib/pgsql/.cache/pip/wheels/99/6b/43/6423499f3ab670266f34d2e5e6a9ff37a37b61404be8c91789\nSuccessfully built python-etcd cdiff\nInstalling collected packages: pycparser, urllib3, pyasn1, importlib-resources, idna, charset-normalizer, cffi, certifi, tzdata, rsa, requests, PyJWT, pyasn1-modules, oauthlib, cryptography, cachetools, backports.zoneinfo, websocket-client, requests-oauthlib, pytz-deprecation-shim, google-auth, dnspython, adal, tzlocal, python-etcd, python-consul, kubernetes, kazoo, cdiff, boto\nSuccessfully installed PyJWT-2.3.0 adal-1.2.7 backports.zoneinfo-0.2.1 boto-2.49.0 cachetools-4.2.4 cdiff-1.0 certifi-2021.10.8 cffi-1.15.0 charset-normalizer-2.0.12 cryptography-36.0.2 dnspython-2.2.1 google-auth-2.6.2 idna-3.3 importlib-resources-5.4.0 kazoo-2.8.0 kubernetes-7.0.0 oauthlib-3.2.0 pyasn1-0.4.8 pyasn1-modules-0.2.8 pycparser-2.21 python-consul-1.1.0 python-etcd-0.4.5 pytz-deprecation-shim-0.1.0.post0 requests-2.27.1 requests-oauthlib-1.3.1 rsa-4.8 tzdata-2022.1 tzlocal-4.1 urllib3-1.26.9 websocket-client-1.3.1",
        "stdout_lines": [
            "Defaulting to user installation because normal site-packages is not writeable",
            "Collecting urllib3!=1.21,>=1.19.1",
            "  Downloading urllib3-1.26.9-py2.py3-none-any.whl (138 kB)",
            "Collecting boto",
            "  Downloading boto-2.49.0-py2.py3-none-any.whl (1.4 MB)",
            "Requirement already satisfied: PyYAML in /usr/lib64/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 3)) (3.13)",
            "Collecting requests",
            "  Downloading requests-2.27.1-py2.py3-none-any.whl (63 kB)",
            "Requirement already satisfied: six>=1.7 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 5)) (1.16.0)",
            "Collecting kazoo>=1.3.1",
            "  Downloading kazoo-2.8.0-py2.py3-none-any.whl (142 kB)",
            "Collecting python-etcd<0.5,>=0.4.3",
            "  Downloading python-etcd-0.4.5.tar.gz (37 kB)",
            "  Preparing metadata (setup.py): started",
            "  Preparing metadata (setup.py): finished with status 'done'",
            "Collecting python-consul>=0.7.0",
            "  Downloading python_consul-1.1.0-py2.py3-none-any.whl (24 kB)",
            "Requirement already satisfied: click>=4.1 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 9)) (8.0.1)",
            "Requirement already satisfied: prettytable>=0.7 in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 10)) (2.2.0)",
            "Collecting tzlocal",
            "  Downloading tzlocal-4.1-py3-none-any.whl (19 kB)",
            "Requirement already satisfied: python-dateutil in /usr/local/lib/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 12)) (2.8.2)",
            "Requirement already satisfied: psutil>=2.0.0 in /usr/local/lib64/python3.6/site-packages (from -r /var/lib/pgsql/requirements.txt (line 13)) (5.8.0)",
            "Collecting cdiff",
            "  Downloading cdiff-1.0.tar.gz (33 kB)",
            "  Preparing metadata (setup.py): started",
            "  Preparing metadata (setup.py): finished with status 'done'",
            "Collecting kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0",
            "  Downloading kubernetes-7.0.0-py2.py3-none-any.whl (1.3 MB)",
            "Collecting charset-normalizer~=2.0.0",
            "  Downloading charset_normalizer-2.0.12-py3-none-any.whl (39 kB)",
            "Collecting certifi>=2017.4.17",
            "  Downloading certifi-2021.10.8-py2.py3-none-any.whl (149 kB)",
            "Collecting idna<4,>=2.5",
            "  Downloading idna-3.3-py3-none-any.whl (61 kB)",
            "Collecting dnspython>=1.13.0",
            "  Downloading dnspython-2.2.1-py3-none-any.whl (269 kB)",
            "Requirement already satisfied: importlib-metadata in /usr/local/lib/python3.6/site-packages (from click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (4.8.1)",
            "Requirement already satisfied: wcwidth in /usr/local/lib/python3.6/site-packages (from prettytable>=0.7->-r /var/lib/pgsql/requirements.txt (line 10)) (0.2.5)",
            "Collecting backports.zoneinfo",
            "  Downloading backports.zoneinfo-0.2.1-cp36-cp36m-manylinux1_x86_64.whl (70 kB)",
            "Collecting pytz-deprecation-shim",
            "  Downloading pytz_deprecation_shim-0.1.0.post0-py2.py3-none-any.whl (15 kB)",
            "Collecting websocket-client!=0.40.0,!=0.41.*,!=0.42.*,>=0.32.0",
            "  Downloading websocket_client-1.3.1-py3-none-any.whl (54 kB)",
            "Requirement already satisfied: setuptools>=21.0.0 in /usr/local/lib/python3.6/site-packages (from kubernetes!=4.0.*,!=5.0.*,<=7.0.0,>=2.0.0->-r /var/lib/pgsql/requirements.txt (line 15)) (57.1.0)",
            "Collecting requests-oauthlib",
            "  Downloading requests_oauthlib-1.3.1-py2.py3-none-any.whl (23 kB)",
            "Collecting adal>=1.0.2",
            "  Downloading adal-1.2.7-py2.py3-none-any.whl (55 kB)",
            "Collecting google-auth>=1.0.1",
            "  Downloading google_auth-2.6.2-py2.py3-none-any.whl (156 kB)",
            "Collecting cryptography>=1.1.0",
            "  Downloading cryptography-36.0.2-cp36-abi3-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.7 MB)",
            "Collecting PyJWT<3,>=1.0.0",
            "  Downloading PyJWT-2.3.0-py3-none-any.whl (16 kB)",
            "Collecting rsa<5,>=3.1.4",
            "  Downloading rsa-4.8-py3-none-any.whl (39 kB)",
            "Collecting cachetools<6.0,>=2.0.0",
            "  Downloading cachetools-4.2.4-py3-none-any.whl (10 kB)",
            "Collecting pyasn1-modules>=0.2.1",
            "  Downloading pyasn1_modules-0.2.8-py2.py3-none-any.whl (155 kB)",
            "Collecting importlib-resources",
            "  Downloading importlib_resources-5.4.0-py3-none-any.whl (28 kB)",
            "Requirement already satisfied: zipp>=0.5 in /usr/local/lib/python3.6/site-packages (from importlib-metadata->click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (3.5.0)",
            "Requirement already satisfied: typing-extensions>=3.6.4 in /usr/local/lib/python3.6/site-packages (from importlib-metadata->click>=4.1->-r /var/lib/pgsql/requirements.txt (line 9)) (3.10.0.2)",
            "Collecting tzdata",
            "  Downloading tzdata-2022.1-py2.py3-none-any.whl (339 kB)",
            "Collecting oauthlib>=3.0.0",
            "  Downloading oauthlib-3.2.0-py3-none-any.whl (151 kB)",
            "Collecting cffi>=1.12",
            "  Downloading cffi-1.15.0-cp36-cp36m-manylinux_2_5_x86_64.manylinux1_x86_64.whl (405 kB)",
            "Collecting pyasn1<0.5.0,>=0.4.6",
            "  Downloading pyasn1-0.4.8-py2.py3-none-any.whl (77 kB)",
            "Collecting pycparser",
            "  Downloading pycparser-2.21-py2.py3-none-any.whl (118 kB)",
            "Building wheels for collected packages: python-etcd, cdiff",
            "  Building wheel for python-etcd (setup.py): started",
            "  Building wheel for python-etcd (setup.py): finished with status 'done'",
            "  Created wheel for python-etcd: filename=python_etcd-0.4.5-py3-none-any.whl size=38501 sha256=3ebbbbb3f057254f471e3607e982a65cfa4a90611c32cf90146f11f3b2fcca07",
            "  Stored in directory: /var/lib/pgsql/.cache/pip/wheels/f5/49/d1/13a8c3febc4438f96a19fdc8075fe72c1981539d86d0ed8bb8",
            "  Building wheel for cdiff (setup.py): started",
            "  Building wheel for cdiff (setup.py): finished with status 'done'",
            "  Created wheel for cdiff: filename=cdiff-1.0-py3-none-any.whl size=14474 sha256=69143b5b9f9c33beb9eae1cbb02aeb7f92cb7fc1ad84e5b6d1a8c10e7743fcfb",
            "  Stored in directory: /var/lib/pgsql/.cache/pip/wheels/99/6b/43/6423499f3ab670266f34d2e5e6a9ff37a37b61404be8c91789",
            "Successfully built python-etcd cdiff",
            "Installing collected packages: pycparser, urllib3, pyasn1, importlib-resources, idna, charset-normalizer, cffi, certifi, tzdata, rsa, requests, PyJWT, pyasn1-modules, oauthlib, cryptography, cachetools, backports.zoneinfo, websocket-client, requests-oauthlib, pytz-deprecation-shim, google-auth, dnspython, adal, tzlocal, python-etcd, python-consul, kubernetes, kazoo, cdiff, boto",
            "Successfully installed PyJWT-2.3.0 adal-1.2.7 backports.zoneinfo-0.2.1 boto-2.49.0 cachetools-4.2.4 cdiff-1.0 certifi-2021.10.8 cffi-1.15.0 charset-normalizer-2.0.12 cryptography-36.0.2 dnspython-2.2.1 google-auth-2.6.2 idna-3.3 importlib-resources-5.4.0 kazoo-2.8.0 kubernetes-7.0.0 oauthlib-3.2.0 pyasn1-0.4.8 pyasn1-modules-0.2.8 pycparser-2.21 python-consul-1.1.0 python-etcd-0.4.5 pytz-deprecation-shim-0.1.0.post0 requests-2.27.1 requests-oauthlib-1.3.1 rsa-4.8 tzdata-2022.1 tzlocal-4.1 urllib3-1.26.9 websocket-client-1.3.1"
        ]
    }
}
2022-04-01 01:07:18,926 p=66337 u=moonja n=ansible | TASK [patroni-postgres : Iinstall wheel module on all three nodes] ***********************************
2022-04-01 01:07:25,209 p=66337 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:07:25,220 p=66337 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:07:25,263 p=66337 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:07:25,272 p=66337 u=moonja n=ansible | TASK [patroni-postgres : debug] **********************************************************************
2022-04-01 01:07:25,315 p=66337 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "514379095392.14673",
        "changed": true,
        "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 install wheel )",
        "delta": "0:00:01.673079",
        "end": "2022-04-01 01:07:22.649351",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/root/.ansible_async/514379095392.14673",
        "start": "2022-04-01 01:07:20.976272",
        "started": 1,
        "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv",
        "stderr_lines": [
            "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"
        ],
        "stdout": "Collecting wheel\n  Using cached wheel-0.37.1-py2.py3-none-any.whl (35 kB)\nInstalling collected packages: wheel\nSuccessfully installed wheel-0.37.1",
        "stdout_lines": [
            "Collecting wheel",
            "  Using cached wheel-0.37.1-py2.py3-none-any.whl (35 kB)",
            "Installing collected packages: wheel",
            "Successfully installed wheel-0.37.1"
        ]
    }
}
2022-04-01 01:07:25,316 p=66337 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "ansible_job_id": "737826033493.3159",
        "changed": true,
        "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 install wheel )",
        "delta": "0:00:01.398930",
        "end": "2022-04-01 01:07:22.801950",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/root/.ansible_async/737826033493.3159",
        "start": "2022-04-01 01:07:21.403020",
        "started": 1,
        "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv",
        "stderr_lines": [
            "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"
        ],
        "stdout": "Collecting wheel\n  Using cached wheel-0.37.1-py2.py3-none-any.whl (35 kB)\nInstalling collected packages: wheel\nSuccessfully installed wheel-0.37.1",
        "stdout_lines": [
            "Collecting wheel",
            "  Using cached wheel-0.37.1-py2.py3-none-any.whl (35 kB)",
            "Installing collected packages: wheel",
            "Successfully installed wheel-0.37.1"
        ]
    }
}
2022-04-01 01:07:25,329 p=66337 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "ansible_job_id": "233931138905.3402",
        "changed": true,
        "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 install wheel )",
        "delta": "0:00:01.897145",
        "end": "2022-04-01 01:07:22.595158",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/root/.ansible_async/233931138905.3402",
        "start": "2022-04-01 01:07:20.698013",
        "started": 1,
        "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv",
        "stderr_lines": [
            "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"
        ],
        "stdout": "Collecting wheel\n  Using cached wheel-0.37.1-py2.py3-none-any.whl (35 kB)\nInstalling collected packages: wheel\nSuccessfully installed wheel-0.37.1",
        "stdout_lines": [
            "Collecting wheel",
            "  Using cached wheel-0.37.1-py2.py3-none-any.whl (35 kB)",
            "Installing collected packages: wheel",
            "Successfully installed wheel-0.37.1"
        ]
    }
}
2022-04-01 01:07:25,341 p=66337 u=moonja n=ansible | TASK [patroni-postgres : Install psycopg2-binary module on all three nodes] **************************
2022-04-01 01:07:31,969 p=66337 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:07:34,275 p=66337 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:07:34,385 p=66337 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:07:34,395 p=66337 u=moonja n=ansible | TASK [patroni-postgres : debug] **********************************************************************
2022-04-01 01:07:34,441 p=66337 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "746729810173.15051",
        "changed": true,
        "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 install psycopg2-binary )",
        "delta": "0:00:01.788058",
        "end": "2022-04-01 01:07:29.208257",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/root/.ansible_async/746729810173.15051",
        "start": "2022-04-01 01:07:27.420199",
        "started": 1,
        "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv",
        "stderr_lines": [
            "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"
        ],
        "stdout": "Collecting psycopg2-binary\n  Using cached psycopg2_binary-2.9.3-cp36-cp36m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.0 MB)\nInstalling collected packages: psycopg2-binary\nSuccessfully installed psycopg2-binary-2.9.3",
        "stdout_lines": [
            "Collecting psycopg2-binary",
            "  Using cached psycopg2_binary-2.9.3-cp36-cp36m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.0 MB)",
            "Installing collected packages: psycopg2-binary",
            "Successfully installed psycopg2-binary-2.9.3"
        ]
    }
}
2022-04-01 01:07:34,442 p=66337 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "ansible_job_id": "718648127064.3537",
        "changed": true,
        "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 install psycopg2-binary )",
        "delta": "0:00:01.795982",
        "end": "2022-04-01 01:07:29.188743",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/root/.ansible_async/718648127064.3537",
        "start": "2022-04-01 01:07:27.392761",
        "started": 1,
        "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv",
        "stderr_lines": [
            "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"
        ],
        "stdout": "Collecting psycopg2-binary\n  Using cached psycopg2_binary-2.9.3-cp36-cp36m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.0 MB)\nInstalling collected packages: psycopg2-binary\nSuccessfully installed psycopg2-binary-2.9.3",
        "stdout_lines": [
            "Collecting psycopg2-binary",
            "  Using cached psycopg2_binary-2.9.3-cp36-cp36m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.0 MB)",
            "Installing collected packages: psycopg2-binary",
            "Successfully installed psycopg2-binary-2.9.3"
        ]
    }
}
2022-04-01 01:07:34,457 p=66337 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "ansible_job_id": "544943527279.3780",
        "changed": true,
        "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 install psycopg2-binary )",
        "delta": "0:00:01.818134",
        "end": "2022-04-01 01:07:29.126551",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/root/.ansible_async/544943527279.3780",
        "start": "2022-04-01 01:07:27.308417",
        "started": 1,
        "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv",
        "stderr_lines": [
            "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"
        ],
        "stdout": "Collecting psycopg2-binary\n  Using cached psycopg2_binary-2.9.3-cp36-cp36m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.0 MB)\nInstalling collected packages: psycopg2-binary\nSuccessfully installed psycopg2-binary-2.9.3",
        "stdout_lines": [
            "Collecting psycopg2-binary",
            "  Using cached psycopg2_binary-2.9.3-cp36-cp36m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.0 MB)",
            "Installing collected packages: psycopg2-binary",
            "Successfully installed psycopg2-binary-2.9.3"
        ]
    }
}
2022-04-01 01:07:34,469 p=66337 u=moonja n=ansible | TASK [patroni-postgres : Install patroni modules on all three nodes for vmware-postgres 13.x version] ***
2022-04-01 01:07:40,882 p=66337 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:07:41,724 p=66337 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:07:42,030 p=66337 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:07:42,040 p=66337 u=moonja n=ansible | TASK [patroni-postgres : Change the permissions on the /tmp directory] *******************************
2022-04-01 01:07:42,768 p=66337 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 01:07:42,772 p=66337 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 01:07:42,775 p=66337 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 01:07:42,787 p=66337 u=moonja n=ansible | TASK [patroni-postgres : Create the etcd.yml configuration file for all nodes] ***********************
2022-04-01 01:07:43,799 p=66337 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:07:43,815 p=66337 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:07:44,364 p=66337 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:07:44,377 p=66337 u=moonja n=ansible | TASK [patroni-postgres : debug] **********************************************************************
2022-04-01 01:07:44,422 p=66337 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "changed": true,
        "checksum": "58bceddeab742a1f1f8a005c010a81a7f8ce62ae",
        "dest": "/var/lib/pgsql/etcd.yml",
        "diff": [],
        "failed": false,
        "gid": 26,
        "group": "postgres",
        "md5sum": "6402cbf0dd381f0e0ff13cf94a0f8c85",
        "mode": "0644",
        "owner": "postgres",
        "size": 490,
        "src": "/var/tmp/ansible-tmp-1648742862.906467-74129-243622664706921/source",
        "state": "file",
        "uid": 26
    }
}
2022-04-01 01:07:44,425 p=66337 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "changed": true,
        "checksum": "54137ea08dfaa64a708e24842d3d48db2b1e1b1a",
        "dest": "/var/lib/pgsql/etcd.yml",
        "diff": [],
        "failed": false,
        "gid": 26,
        "group": "postgres",
        "md5sum": "15825f9b68e93258c67e9b81088b516f",
        "mode": "0644",
        "owner": "postgres",
        "size": 490,
        "src": "/var/tmp/ansible-tmp-1648742862.906749-74130-88648503882711/source",
        "state": "file",
        "uid": 26
    }
}
2022-04-01 01:07:44,437 p=66337 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "changed": true,
        "checksum": "09d973b99ed4e3bcea56635941ed407d67e4a560",
        "dest": "/var/lib/pgsql/etcd.yml",
        "diff": [],
        "failed": false,
        "gid": 26,
        "group": "postgres",
        "md5sum": "f532f557d91584a3f8d086a49afcdada",
        "mode": "0644",
        "owner": "postgres",
        "size": 490,
        "src": "/var/tmp/ansible-tmp-1648742862.9156249-74133-103215315348638/source",
        "state": "file",
        "uid": 26
    }
}
2022-04-01 01:07:44,449 p=66337 u=moonja n=ansible | TASK [patroni-postgres : Copy systemd configuration of etcd into /etc/systemd/system] ****************
2022-04-01 01:07:46,532 p=66337 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 01:07:47,116 p=66337 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 01:07:47,415 p=66337 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 01:07:47,428 p=66337 u=moonja n=ansible | TASK [patroni-postgres : Reload and start etcd through systemd] **************************************
2022-04-01 01:07:55,093 p=66337 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:07:55,094 p=66337 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:07:55,095 p=66337 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:07:55,104 p=66337 u=moonja n=ansible | TASK [patroni-postgres : Lists the members and identifies the current Leader.] ***********************
2022-04-01 01:07:55,625 p=66337 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:07:55,636 p=66337 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:07:56,238 p=66337 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:07:56,250 p=66337 u=moonja n=ansible | TASK [patroni-postgres : debug] **********************************************************************
2022-04-01 01:07:56,290 p=66337 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "changed": true,
        "cmd": "( export ETCDCTL_API=3 && etcdctl member list )",
        "delta": "0:00:00.636912",
        "end": "2022-04-01 01:07:56.298143",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-04-01 01:07:55.661231",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "12d57f88a18bcf4, started, <co7-node01>, http://192.168.100.83:2380, http://192.168.100.83:2379\na8b069cdb6bfb6c1, started, <co7-node02>, http://192.168.100.84:2380, http://192.168.100.84:2379\ndc3c5dec353ef0ba, started, <co7-node03>, http://192.168.100.85:2380, http://192.168.100.85:2379",
        "stdout_lines": [
            "12d57f88a18bcf4, started, <co7-node01>, http://192.168.100.83:2380, http://192.168.100.83:2379",
            "a8b069cdb6bfb6c1, started, <co7-node02>, http://192.168.100.84:2380, http://192.168.100.84:2379",
            "dc3c5dec353ef0ba, started, <co7-node03>, http://192.168.100.85:2380, http://192.168.100.85:2379"
        ]
    }
}
2022-04-01 01:07:56,291 p=66337 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "changed": true,
        "cmd": "( export ETCDCTL_API=3 && etcdctl member list )",
        "delta": "0:00:00.043399",
        "end": "2022-04-01 01:07:55.693236",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-04-01 01:07:55.649837",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "12d57f88a18bcf4, started, <co7-node01>, http://192.168.100.83:2380, http://192.168.100.83:2379\na8b069cdb6bfb6c1, started, <co7-node02>, http://192.168.100.84:2380, http://192.168.100.84:2379\ndc3c5dec353ef0ba, started, <co7-node03>, http://192.168.100.85:2380, http://192.168.100.85:2379",
        "stdout_lines": [
            "12d57f88a18bcf4, started, <co7-node01>, http://192.168.100.83:2380, http://192.168.100.83:2379",
            "a8b069cdb6bfb6c1, started, <co7-node02>, http://192.168.100.84:2380, http://192.168.100.84:2379",
            "dc3c5dec353ef0ba, started, <co7-node03>, http://192.168.100.85:2380, http://192.168.100.85:2379"
        ]
    }
}
2022-04-01 01:07:56,304 p=66337 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "changed": true,
        "cmd": "( export ETCDCTL_API=3 && etcdctl member list )",
        "delta": "0:00:00.044061",
        "end": "2022-04-01 01:07:55.710060",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-04-01 01:07:55.665999",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "12d57f88a18bcf4, started, <co7-node01>, http://192.168.100.83:2380, http://192.168.100.83:2379\na8b069cdb6bfb6c1, started, <co7-node02>, http://192.168.100.84:2380, http://192.168.100.84:2379\ndc3c5dec353ef0ba, started, <co7-node03>, http://192.168.100.85:2380, http://192.168.100.85:2379",
        "stdout_lines": [
            "12d57f88a18bcf4, started, <co7-node01>, http://192.168.100.83:2380, http://192.168.100.83:2379",
            "a8b069cdb6bfb6c1, started, <co7-node02>, http://192.168.100.84:2380, http://192.168.100.84:2379",
            "dc3c5dec353ef0ba, started, <co7-node03>, http://192.168.100.85:2380, http://192.168.100.85:2379"
        ]
    }
}
2022-04-01 01:07:56,316 p=66337 u=moonja n=ansible | TASK [patroni-postgres : Set data directory for patroni cluster] *************************************
2022-04-01 01:07:56,779 p=66337 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:07:56,799 p=66337 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:07:56,803 p=66337 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:07:56,815 p=66337 u=moonja n=ansible | TASK [patroni-postgres : Create the patroni.yml configuration file for all nodes] ********************
2022-04-01 01:07:57,815 p=66337 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:07:57,820 p=66337 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:07:57,827 p=66337 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:07:57,837 p=66337 u=moonja n=ansible | TASK [patroni-postgres : debug] **********************************************************************
2022-04-01 01:07:57,877 p=66337 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "changed": true,
        "checksum": "05adc0ef251a981da1da039e6dfdca7eba447e6d",
        "dest": "/var/lib/pgsql/patroni.yml",
        "diff": [],
        "failed": false,
        "gid": 26,
        "group": "postgres",
        "md5sum": "6939bbafef2de547f03dda70d87777b5",
        "mode": "0644",
        "owner": "postgres",
        "size": 2555,
        "src": "/var/tmp/ansible-tmp-1648742876.907097-74435-241166180325239/source",
        "state": "file",
        "uid": 26
    }
}
2022-04-01 01:07:57,879 p=66337 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "changed": true,
        "checksum": "d25e4c7f3accbe73f8f7794c9cf437d03ec1580f",
        "dest": "/var/lib/pgsql/patroni.yml",
        "diff": [],
        "failed": false,
        "gid": 26,
        "group": "postgres",
        "md5sum": "2c12094c40a26d6366138b86d8eb77d9",
        "mode": "0644",
        "owner": "postgres",
        "size": 2555,
        "src": "/var/tmp/ansible-tmp-1648742876.915988-74436-37251829138565/source",
        "state": "file",
        "uid": 26
    }
}
2022-04-01 01:07:57,892 p=66337 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "changed": true,
        "checksum": "839039143dbb8e7c0de115fbf4d7b1a44eb02a97",
        "dest": "/var/lib/pgsql/patroni.yml",
        "diff": [],
        "failed": false,
        "gid": 26,
        "group": "postgres",
        "md5sum": "bbe5e860f5a9860a1bf8e3b0cc05ffc3",
        "mode": "0644",
        "owner": "postgres",
        "size": 2555,
        "src": "/var/tmp/ansible-tmp-1648742876.925743-74439-78581465470713/source",
        "state": "file",
        "uid": 26
    }
}
2022-04-01 01:07:57,904 p=66337 u=moonja n=ansible | TASK [patroni-postgres : Copy systemd configuration of patroni into /etc/systemd/system] *************
2022-04-01 01:07:59,158 p=66337 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:07:59,165 p=66337 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:07:59,166 p=66337 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:07:59,178 p=66337 u=moonja n=ansible | TASK [patroni-postgres : Reload and start systemd service of patroni] ********************************
2022-04-01 01:07:59,975 p=66337 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:07:59,978 p=66337 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:07:59,984 p=66337 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:07:59,999 p=66337 u=moonja n=ansible | TASK [patroni-postgres : Pause for 1 minutes to wait for compleiting initializaion of patroni cluster] ***
2022-04-01 01:08:00,020 p=74658 u=moonja n=ansible | Pausing for 60 seconds
2022-04-01 01:08:00,021 p=74658 u=moonja n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2022-04-01 01:09:00,025 p=66337 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 01:09:00,036 p=66337 u=moonja n=ansible | TASK [patroni-postgres : Remove clsuter on master] ***************************************************
2022-04-01 01:09:00,072 p=66337 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 01:09:00,083 p=66337 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 01:09:06,666 p=66337 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"ansible_job_id": "5806785197.17542", "changed": true, "cmd": "export LC_ALL=en_US.utf-8 && /usr/local/bin/patronictl -c /var/lib/pgsql/patroni.yml remove vmtz_patroni_cluster <<EOF\nvmtz_patroni_cluster\nYes I am aware\nEOF\n", "delta": "0:00:02.122363", "end": "2022-04-01 01:09:03.049953", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/var/lib/pgsql/.ansible_async/5806785197.17542", "start": "2022-04-01 01:09:00.927590", "started": 1, "stderr": "Aborted!", "stderr_lines": ["Aborted!"], "stdout": "+------------+----------------+---------+--------------+----+-----------+\n| Member     | Host           | Role    | State        | TL | Lag in MB |\n+ Cluster: vmtz_patroni_cluster (7081296768653281253) -+----+-----------+\n| co7-node01 | 192.168.100.83 | Replica | start failed |    |   unknown |\n| co7-node02 | 192.168.100.84 | Replica | start failed |    |   unknown |\n| co7-node03 | 192.168.100.85 | Leader  | running      |  1 |           |\n+------------+----------------+---------+--------------+----+-----------+\nPlease confirm the cluster name to remove: You are about to remove all information in DCS for vmtz_patroni_cluster, please type: \"Yes I am aware\": This cluster currently is healthy. Please specify the master name to continue: ", "stdout_lines": ["+------------+----------------+---------+--------------+----+-----------+", "| Member     | Host           | Role    | State        | TL | Lag in MB |", "+ Cluster: vmtz_patroni_cluster (7081296768653281253) -+----+-----------+", "| co7-node01 | 192.168.100.83 | Replica | start failed |    |   unknown |", "| co7-node02 | 192.168.100.84 | Replica | start failed |    |   unknown |", "| co7-node03 | 192.168.100.85 | Leader  | running      |  1 |           |", "+------------+----------------+---------+--------------+----+-----------+", "Please confirm the cluster name to remove: You are about to remove all information in DCS for vmtz_patroni_cluster, please type: \"Yes I am aware\": This cluster currently is healthy. Please specify the master name to continue: "]}
2022-04-01 01:09:06,666 p=66337 u=moonja n=ansible | ...ignoring
2022-04-01 01:09:06,676 p=66337 u=moonja n=ansible | TASK [patroni-postgres : Pause for 1 minutes to wait for compleiting initializaion of patroni cluster] ***
2022-04-01 01:09:06,697 p=74832 u=moonja n=ansible | Pausing for 60 seconds
2022-04-01 01:09:06,697 p=74832 u=moonja n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2022-04-01 01:10:06,703 p=66337 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 01:10:06,714 p=66337 u=moonja n=ansible | TASK [patroni-postgres : debug] **********************************************************************
2022-04-01 01:10:06,755 p=66337 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "5806785197.17542",
        "changed": true,
        "cmd": "export LC_ALL=en_US.utf-8 && /usr/local/bin/patronictl -c /var/lib/pgsql/patroni.yml remove vmtz_patroni_cluster <<EOF\nvmtz_patroni_cluster\nYes I am aware\nEOF\n",
        "delta": "0:00:02.122363",
        "end": "2022-04-01 01:09:03.049953",
        "failed": true,
        "finished": 1,
        "msg": "non-zero return code",
        "rc": 1,
        "results_file": "/var/lib/pgsql/.ansible_async/5806785197.17542",
        "start": "2022-04-01 01:09:00.927590",
        "started": 1,
        "stderr": "Aborted!",
        "stderr_lines": [
            "Aborted!"
        ],
        "stdout": "+------------+----------------+---------+--------------+----+-----------+\n| Member     | Host           | Role    | State        | TL | Lag in MB |\n+ Cluster: vmtz_patroni_cluster (7081296768653281253) -+----+-----------+\n| co7-node01 | 192.168.100.83 | Replica | start failed |    |   unknown |\n| co7-node02 | 192.168.100.84 | Replica | start failed |    |   unknown |\n| co7-node03 | 192.168.100.85 | Leader  | running      |  1 |           |\n+------------+----------------+---------+--------------+----+-----------+\nPlease confirm the cluster name to remove: You are about to remove all information in DCS for vmtz_patroni_cluster, please type: \"Yes I am aware\": This cluster currently is healthy. Please specify the master name to continue: ",
        "stdout_lines": [
            "+------------+----------------+---------+--------------+----+-----------+",
            "| Member     | Host           | Role    | State        | TL | Lag in MB |",
            "+ Cluster: vmtz_patroni_cluster (7081296768653281253) -+----+-----------+",
            "| co7-node01 | 192.168.100.83 | Replica | start failed |    |   unknown |",
            "| co7-node02 | 192.168.100.84 | Replica | start failed |    |   unknown |",
            "| co7-node03 | 192.168.100.85 | Leader  | running      |  1 |           |",
            "+------------+----------------+---------+--------------+----+-----------+",
            "Please confirm the cluster name to remove: You are about to remove all information in DCS for vmtz_patroni_cluster, please type: \"Yes I am aware\": This cluster currently is healthy. Please specify the master name to continue: "
        ]
    }
}
2022-04-01 01:10:06,756 p=66337 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-04-01 01:10:06,769 p=66337 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "changed": false,
        "skip_reason": "Conditional result was False",
        "skipped": true
    }
}
2022-04-01 01:10:06,781 p=66337 u=moonja n=ansible | TASK [patroni-postgres : Reinitialize patroni clsuter on all node] ***********************************
2022-04-01 01:10:13,225 p=66337 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:10:13,226 p=66337 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:10:13,593 p=66337 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:10:13,603 p=66337 u=moonja n=ansible | TASK [patroni-postgres : debug] **********************************************************************
2022-04-01 01:10:13,645 p=66337 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "737458249392.17986",
        "changed": true,
        "cmd": "export LC_ALL=en_US.utf-8 && /usr/local/bin/patronictl -c /var/lib/pgsql/patroni.yml reinit vmtz_patroni_cluster <<EOF\nco7-node01\ny\ny\nEOF\n",
        "delta": "0:00:02.247105",
        "end": "2022-04-01 01:10:09.869122",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/737458249392.17986",
        "start": "2022-04-01 01:10:07.622017",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "+------------+----------------+---------+--------------+----+-----------+\n| Member     | Host           | Role    | State        | TL | Lag in MB |\n+ Cluster: vmtz_patroni_cluster (7081296768653281253) -+----+-----------+\n| co7-node01 | 192.168.100.83 | Replica | start failed |    |   unknown |\n| co7-node02 | 192.168.100.84 | Replica | start failed |    |   unknown |\n| co7-node03 | 192.168.100.85 | Leader  | running      |  1 |           |\n+------------+----------------+---------+--------------+----+-----------+\nWhich member do you want to reinitialize [co7-node02, co7-node01, co7-node03]? []: Are you sure you want to reinitialize members co7-node01? [y/N]: Failed: reinitialize for member co7-node01, status code=503, (doing crash recovery in a single user mode already in progress)\nDo you want to cancel it and reinitialize anyway? [y/N]: Success: reinitialize for member co7-node01",
        "stdout_lines": [
            "+------------+----------------+---------+--------------+----+-----------+",
            "| Member     | Host           | Role    | State        | TL | Lag in MB |",
            "+ Cluster: vmtz_patroni_cluster (7081296768653281253) -+----+-----------+",
            "| co7-node01 | 192.168.100.83 | Replica | start failed |    |   unknown |",
            "| co7-node02 | 192.168.100.84 | Replica | start failed |    |   unknown |",
            "| co7-node03 | 192.168.100.85 | Leader  | running      |  1 |           |",
            "+------------+----------------+---------+--------------+----+-----------+",
            "Which member do you want to reinitialize [co7-node02, co7-node01, co7-node03]? []: Are you sure you want to reinitialize members co7-node01? [y/N]: Failed: reinitialize for member co7-node01, status code=503, (doing crash recovery in a single user mode already in progress)",
            "Do you want to cancel it and reinitialize anyway? [y/N]: Success: reinitialize for member co7-node01"
        ]
    }
}
2022-04-01 01:10:13,647 p=66337 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "ansible_job_id": "102903655414.6113",
        "changed": true,
        "cmd": "export LC_ALL=en_US.utf-8 && /usr/local/bin/patronictl -c /var/lib/pgsql/patroni.yml reinit vmtz_patroni_cluster <<EOF\nco7-node02\ny\ny\nEOF\n",
        "delta": "0:00:01.847280",
        "end": "2022-04-01 01:10:09.482223",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/102903655414.6113",
        "start": "2022-04-01 01:10:07.634943",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "+------------+----------------+---------+--------------+----+-----------+\n| Member     | Host           | Role    | State        | TL | Lag in MB |\n+ Cluster: vmtz_patroni_cluster (7081296768653281253) -+----+-----------+\n| co7-node01 | 192.168.100.83 | Replica | start failed |    |   unknown |\n| co7-node02 | 192.168.100.84 | Replica | start failed |    |   unknown |\n| co7-node03 | 192.168.100.85 | Leader  | running      |  1 |           |\n+------------+----------------+---------+--------------+----+-----------+\nWhich member do you want to reinitialize [co7-node02, co7-node01, co7-node03]? []: Are you sure you want to reinitialize members co7-node02? [y/N]: Success: reinitialize for member co7-node02",
        "stdout_lines": [
            "+------------+----------------+---------+--------------+----+-----------+",
            "| Member     | Host           | Role    | State        | TL | Lag in MB |",
            "+ Cluster: vmtz_patroni_cluster (7081296768653281253) -+----+-----------+",
            "| co7-node01 | 192.168.100.83 | Replica | start failed |    |   unknown |",
            "| co7-node02 | 192.168.100.84 | Replica | start failed |    |   unknown |",
            "| co7-node03 | 192.168.100.85 | Leader  | running      |  1 |           |",
            "+------------+----------------+---------+--------------+----+-----------+",
            "Which member do you want to reinitialize [co7-node02, co7-node01, co7-node03]? []: Are you sure you want to reinitialize members co7-node02? [y/N]: Success: reinitialize for member co7-node02"
        ]
    }
}
2022-04-01 01:10:13,660 p=66337 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "ansible_job_id": "534399989261.6320",
        "changed": true,
        "cmd": "export LC_ALL=en_US.utf-8 && /usr/local/bin/patronictl -c /var/lib/pgsql/patroni.yml reinit vmtz_patroni_cluster <<EOF\nco7-node03\ny\ny\nEOF\n",
        "delta": "0:00:01.739725",
        "end": "2022-04-01 01:10:09.342065",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/534399989261.6320",
        "start": "2022-04-01 01:10:07.602340",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "+------------+----------------+---------+--------------+----+-----------+\n| Member     | Host           | Role    | State        | TL | Lag in MB |\n+ Cluster: vmtz_patroni_cluster (7081296768653281253) -+----+-----------+\n| co7-node01 | 192.168.100.83 | Replica | start failed |    |   unknown |\n| co7-node02 | 192.168.100.84 | Replica | start failed |    |   unknown |\n| co7-node03 | 192.168.100.85 | Leader  | running      |  1 |           |\n+------------+----------------+---------+--------------+----+-----------+\nWhich member do you want to reinitialize [co7-node03, co7-node02, co7-node01]? []: Are you sure you want to reinitialize members co7-node03? [y/N]: Failed: reinitialize for member co7-node03, status code=503, (I am the leader, can not reinitialize)",
        "stdout_lines": [
            "+------------+----------------+---------+--------------+----+-----------+",
            "| Member     | Host           | Role    | State        | TL | Lag in MB |",
            "+ Cluster: vmtz_patroni_cluster (7081296768653281253) -+----+-----------+",
            "| co7-node01 | 192.168.100.83 | Replica | start failed |    |   unknown |",
            "| co7-node02 | 192.168.100.84 | Replica | start failed |    |   unknown |",
            "| co7-node03 | 192.168.100.85 | Leader  | running      |  1 |           |",
            "+------------+----------------+---------+--------------+----+-----------+",
            "Which member do you want to reinitialize [co7-node03, co7-node02, co7-node01]? []: Are you sure you want to reinitialize members co7-node03? [y/N]: Failed: reinitialize for member co7-node03, status code=503, (I am the leader, can not reinitialize)"
        ]
    }
}
2022-04-01 01:10:13,672 p=66337 u=moonja n=ansible | TASK [patroni-postgres : Pause for 1 minutes to wait for compleiting initializaion of patroni cluster] ***
2022-04-01 01:10:13,691 p=75087 u=moonja n=ansible | Pausing for 60 seconds
2022-04-01 01:10:13,692 p=75087 u=moonja n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2022-04-01 01:11:13,695 p=66337 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 01:11:13,705 p=66337 u=moonja n=ansible | TASK [patroni-postgres : debug] **********************************************************************
2022-04-01 01:11:13,747 p=66337 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "ansible_job_id": "737458249392.17986",
        "changed": true,
        "cmd": "export LC_ALL=en_US.utf-8 && /usr/local/bin/patronictl -c /var/lib/pgsql/patroni.yml reinit vmtz_patroni_cluster <<EOF\nco7-node01\ny\ny\nEOF\n",
        "delta": "0:00:02.247105",
        "end": "2022-04-01 01:10:09.869122",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/737458249392.17986",
        "start": "2022-04-01 01:10:07.622017",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "+------------+----------------+---------+--------------+----+-----------+\n| Member     | Host           | Role    | State        | TL | Lag in MB |\n+ Cluster: vmtz_patroni_cluster (7081296768653281253) -+----+-----------+\n| co7-node01 | 192.168.100.83 | Replica | start failed |    |   unknown |\n| co7-node02 | 192.168.100.84 | Replica | start failed |    |   unknown |\n| co7-node03 | 192.168.100.85 | Leader  | running      |  1 |           |\n+------------+----------------+---------+--------------+----+-----------+\nWhich member do you want to reinitialize [co7-node02, co7-node01, co7-node03]? []: Are you sure you want to reinitialize members co7-node01? [y/N]: Failed: reinitialize for member co7-node01, status code=503, (doing crash recovery in a single user mode already in progress)\nDo you want to cancel it and reinitialize anyway? [y/N]: Success: reinitialize for member co7-node01",
        "stdout_lines": [
            "+------------+----------------+---------+--------------+----+-----------+",
            "| Member     | Host           | Role    | State        | TL | Lag in MB |",
            "+ Cluster: vmtz_patroni_cluster (7081296768653281253) -+----+-----------+",
            "| co7-node01 | 192.168.100.83 | Replica | start failed |    |   unknown |",
            "| co7-node02 | 192.168.100.84 | Replica | start failed |    |   unknown |",
            "| co7-node03 | 192.168.100.85 | Leader  | running      |  1 |           |",
            "+------------+----------------+---------+--------------+----+-----------+",
            "Which member do you want to reinitialize [co7-node02, co7-node01, co7-node03]? []: Are you sure you want to reinitialize members co7-node01? [y/N]: Failed: reinitialize for member co7-node01, status code=503, (doing crash recovery in a single user mode already in progress)",
            "Do you want to cancel it and reinitialize anyway? [y/N]: Success: reinitialize for member co7-node01"
        ]
    }
}
2022-04-01 01:11:13,748 p=66337 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "ansible_job_id": "102903655414.6113",
        "changed": true,
        "cmd": "export LC_ALL=en_US.utf-8 && /usr/local/bin/patronictl -c /var/lib/pgsql/patroni.yml reinit vmtz_patroni_cluster <<EOF\nco7-node02\ny\ny\nEOF\n",
        "delta": "0:00:01.847280",
        "end": "2022-04-01 01:10:09.482223",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/102903655414.6113",
        "start": "2022-04-01 01:10:07.634943",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "+------------+----------------+---------+--------------+----+-----------+\n| Member     | Host           | Role    | State        | TL | Lag in MB |\n+ Cluster: vmtz_patroni_cluster (7081296768653281253) -+----+-----------+\n| co7-node01 | 192.168.100.83 | Replica | start failed |    |   unknown |\n| co7-node02 | 192.168.100.84 | Replica | start failed |    |   unknown |\n| co7-node03 | 192.168.100.85 | Leader  | running      |  1 |           |\n+------------+----------------+---------+--------------+----+-----------+\nWhich member do you want to reinitialize [co7-node02, co7-node01, co7-node03]? []: Are you sure you want to reinitialize members co7-node02? [y/N]: Success: reinitialize for member co7-node02",
        "stdout_lines": [
            "+------------+----------------+---------+--------------+----+-----------+",
            "| Member     | Host           | Role    | State        | TL | Lag in MB |",
            "+ Cluster: vmtz_patroni_cluster (7081296768653281253) -+----+-----------+",
            "| co7-node01 | 192.168.100.83 | Replica | start failed |    |   unknown |",
            "| co7-node02 | 192.168.100.84 | Replica | start failed |    |   unknown |",
            "| co7-node03 | 192.168.100.85 | Leader  | running      |  1 |           |",
            "+------------+----------------+---------+--------------+----+-----------+",
            "Which member do you want to reinitialize [co7-node02, co7-node01, co7-node03]? []: Are you sure you want to reinitialize members co7-node02? [y/N]: Success: reinitialize for member co7-node02"
        ]
    }
}
2022-04-01 01:11:13,760 p=66337 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "ansible_job_id": "534399989261.6320",
        "changed": true,
        "cmd": "export LC_ALL=en_US.utf-8 && /usr/local/bin/patronictl -c /var/lib/pgsql/patroni.yml reinit vmtz_patroni_cluster <<EOF\nco7-node03\ny\ny\nEOF\n",
        "delta": "0:00:01.739725",
        "end": "2022-04-01 01:10:09.342065",
        "failed": false,
        "finished": 1,
        "msg": "",
        "rc": 0,
        "results_file": "/var/lib/pgsql/.ansible_async/534399989261.6320",
        "start": "2022-04-01 01:10:07.602340",
        "started": 1,
        "stderr": "",
        "stderr_lines": [],
        "stdout": "+------------+----------------+---------+--------------+----+-----------+\n| Member     | Host           | Role    | State        | TL | Lag in MB |\n+ Cluster: vmtz_patroni_cluster (7081296768653281253) -+----+-----------+\n| co7-node01 | 192.168.100.83 | Replica | start failed |    |   unknown |\n| co7-node02 | 192.168.100.84 | Replica | start failed |    |   unknown |\n| co7-node03 | 192.168.100.85 | Leader  | running      |  1 |           |\n+------------+----------------+---------+--------------+----+-----------+\nWhich member do you want to reinitialize [co7-node03, co7-node02, co7-node01]? []: Are you sure you want to reinitialize members co7-node03? [y/N]: Failed: reinitialize for member co7-node03, status code=503, (I am the leader, can not reinitialize)",
        "stdout_lines": [
            "+------------+----------------+---------+--------------+----+-----------+",
            "| Member     | Host           | Role    | State        | TL | Lag in MB |",
            "+ Cluster: vmtz_patroni_cluster (7081296768653281253) -+----+-----------+",
            "| co7-node01 | 192.168.100.83 | Replica | start failed |    |   unknown |",
            "| co7-node02 | 192.168.100.84 | Replica | start failed |    |   unknown |",
            "| co7-node03 | 192.168.100.85 | Leader  | running      |  1 |           |",
            "+------------+----------------+---------+--------------+----+-----------+",
            "Which member do you want to reinitialize [co7-node03, co7-node02, co7-node01]? []: Are you sure you want to reinitialize members co7-node03? [y/N]: Failed: reinitialize for member co7-node03, status code=503, (I am the leader, can not reinitialize)"
        ]
    }
}
2022-04-01 01:11:13,772 p=66337 u=moonja n=ansible | TASK [patroni-postgres : Run the patronictl command-line utility to view the cluster state with Patroni started on all three nodes,] ***
2022-04-01 01:11:14,692 p=66337 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:11:14,728 p=66337 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:11:14,731 p=66337 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:11:14,743 p=66337 u=moonja n=ansible | TASK [patroni-postgres : debug] **********************************************************************
2022-04-01 01:11:14,784 p=66337 u=moonja n=ansible | ok: [co7-node01] => {
    "msg": {
        "changed": true,
        "cmd": "( export LC_ALL=en_US.utf-8 && /usr/local/bin/patronictl -c /var/lib/pgsql/patroni.yml list )",
        "delta": "0:00:00.343152",
        "end": "2022-04-01 01:11:14.807746",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-04-01 01:11:14.464594",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "+------------+----------------+--------------+---------+----+-----------+\n| Member     | Host           | Role         | State   | TL | Lag in MB |\n+ Cluster: vmtz_patroni_cluster (7081296768653281253) -+----+-----------+\n| co7-node01 | 192.168.100.83 | Replica      | running |  1 |         0 |\n| co7-node02 | 192.168.100.84 | Sync Standby | running |  1 |         0 |\n| co7-node03 | 192.168.100.85 | Leader       | running |  1 |           |\n+------------+----------------+--------------+---------+----+-----------+",
        "stdout_lines": [
            "+------------+----------------+--------------+---------+----+-----------+",
            "| Member     | Host           | Role         | State   | TL | Lag in MB |",
            "+ Cluster: vmtz_patroni_cluster (7081296768653281253) -+----+-----------+",
            "| co7-node01 | 192.168.100.83 | Replica      | running |  1 |         0 |",
            "| co7-node02 | 192.168.100.84 | Sync Standby | running |  1 |         0 |",
            "| co7-node03 | 192.168.100.85 | Leader       | running |  1 |           |",
            "+------------+----------------+--------------+---------+----+-----------+"
        ]
    }
}
2022-04-01 01:11:14,785 p=66337 u=moonja n=ansible | ok: [co7-node02] => {
    "msg": {
        "changed": true,
        "cmd": "( export LC_ALL=en_US.utf-8 && /usr/local/bin/patronictl -c /var/lib/pgsql/patroni.yml list )",
        "delta": "0:00:00.328920",
        "end": "2022-04-01 01:11:14.765301",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-04-01 01:11:14.436381",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "+------------+----------------+--------------+---------+----+-----------+\n| Member     | Host           | Role         | State   | TL | Lag in MB |\n+ Cluster: vmtz_patroni_cluster (7081296768653281253) -+----+-----------+\n| co7-node01 | 192.168.100.83 | Replica      | running |  1 |         0 |\n| co7-node02 | 192.168.100.84 | Sync Standby | running |  1 |         0 |\n| co7-node03 | 192.168.100.85 | Leader       | running |  1 |           |\n+------------+----------------+--------------+---------+----+-----------+",
        "stdout_lines": [
            "+------------+----------------+--------------+---------+----+-----------+",
            "| Member     | Host           | Role         | State   | TL | Lag in MB |",
            "+ Cluster: vmtz_patroni_cluster (7081296768653281253) -+----+-----------+",
            "| co7-node01 | 192.168.100.83 | Replica      | running |  1 |         0 |",
            "| co7-node02 | 192.168.100.84 | Sync Standby | running |  1 |         0 |",
            "| co7-node03 | 192.168.100.85 | Leader       | running |  1 |           |",
            "+------------+----------------+--------------+---------+----+-----------+"
        ]
    }
}
2022-04-01 01:11:14,797 p=66337 u=moonja n=ansible | ok: [co7-node03] => {
    "msg": {
        "changed": true,
        "cmd": "( export LC_ALL=en_US.utf-8 && /usr/local/bin/patronictl -c /var/lib/pgsql/patroni.yml list )",
        "delta": "0:00:00.352026",
        "end": "2022-04-01 01:11:14.810311",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2022-04-01 01:11:14.458285",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "+------------+----------------+--------------+---------+----+-----------+\n| Member     | Host           | Role         | State   | TL | Lag in MB |\n+ Cluster: vmtz_patroni_cluster (7081296768653281253) -+----+-----------+\n| co7-node01 | 192.168.100.83 | Replica      | running |  1 |         0 |\n| co7-node02 | 192.168.100.84 | Sync Standby | running |  1 |         0 |\n| co7-node03 | 192.168.100.85 | Leader       | running |  1 |           |\n+------------+----------------+--------------+---------+----+-----------+",
        "stdout_lines": [
            "+------------+----------------+--------------+---------+----+-----------+",
            "| Member     | Host           | Role         | State   | TL | Lag in MB |",
            "+ Cluster: vmtz_patroni_cluster (7081296768653281253) -+----+-----------+",
            "| co7-node01 | 192.168.100.83 | Replica      | running |  1 |         0 |",
            "| co7-node02 | 192.168.100.84 | Sync Standby | running |  1 |         0 |",
            "| co7-node03 | 192.168.100.85 | Leader       | running |  1 |           |",
            "+------------+----------------+--------------+---------+----+-----------+"
        ]
    }
}
2022-04-01 01:11:14,838 p=66337 u=moonja n=ansible | PLAY RECAP *******************************************************************************************
2022-04-01 01:11:14,839 p=66337 u=moonja n=ansible | co7-node01                 : ok=45   changed=25   unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   
2022-04-01 01:11:14,839 p=66337 u=moonja n=ansible | co7-node02                 : ok=41   changed=24   unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2022-04-01 01:11:14,839 p=66337 u=moonja n=ansible | co7-node03                 : ok=41   changed=24   unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2022-04-01 01:11:49,009 p=75342 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This 
feature will be removed from ansible-core in version 2.14. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2022-04-01 01:11:49,021 p=75342 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-04-01 01:11:49,288 p=75342 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature 
will be removed in version 2.16. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2022-04-01 01:11:49,351 p=75342 u=moonja n=ansible | PLAY [all] *******************************************************************************************
2022-04-01 01:11:49,385 p=75342 u=moonja n=ansible | TASK [Gathering Facts] *******************************************************************************
2022-04-01 01:11:51,513 p=75342 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 01:11:51,525 p=75342 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 01:11:51,550 p=75342 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 01:11:51,568 p=75342 u=moonja n=ansible | TASK [patroni-postgres : Stop services for patroni and etcd] *****************************************
2022-04-01 01:11:53,631 p=75342 u=moonja n=ansible | changed: [co7-node01] => (item=patroni)
2022-04-01 01:11:54,173 p=75342 u=moonja n=ansible | ok: [co7-node01] => (item=etcd)
2022-04-01 01:11:57,592 p=75342 u=moonja n=ansible | changed: [co7-node03] => (item=patroni)
2022-04-01 01:11:58,142 p=75342 u=moonja n=ansible | ok: [co7-node03] => (item=etcd)
2022-04-01 01:11:59,393 p=75342 u=moonja n=ansible | changed: [co7-node02] => (item=patroni)
2022-04-01 01:12:00,081 p=75342 u=moonja n=ansible | ok: [co7-node02] => (item=etcd)
2022-04-01 01:12:00,092 p=75342 u=moonja n=ansible | TASK [patroni-postgres : Kill etcd process] **********************************************************
2022-04-01 01:12:07,043 p=75342 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:12:07,053 p=75342 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:12:07,156 p=75342 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:12:07,165 p=75342 u=moonja n=ansible | TASK [patroni-postgres : Delete configuration file for patroni and systemd] **************************
2022-04-01 01:12:07,908 p=75342 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/patroni.yml)
2022-04-01 01:12:07,922 p=75342 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/patroni.yml)
2022-04-01 01:12:07,923 p=75342 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/patroni.yml)
2022-04-01 01:12:08,320 p=75342 u=moonja n=ansible | changed: [co7-node02] => (item=/etc/systemd/system/patroni.service)
2022-04-01 01:12:08,332 p=75342 u=moonja n=ansible | changed: [co7-node01] => (item=/etc/systemd/system/patroni.service)
2022-04-01 01:12:08,334 p=75342 u=moonja n=ansible | changed: [co7-node03] => (item=/etc/systemd/system/patroni.service)
2022-04-01 01:12:08,753 p=75342 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/postgresql0.yml)
2022-04-01 01:12:08,779 p=75342 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/postgresql0.yml)
2022-04-01 01:12:08,780 p=75342 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/postgresql0.yml)
2022-04-01 01:12:09,163 p=75342 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/patroni_member.log)
2022-04-01 01:12:09,205 p=75342 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/patroni_member.log)
2022-04-01 01:12:09,206 p=75342 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/patroni_member.log)
2022-04-01 01:12:09,582 p=75342 u=moonja n=ansible | changed: [co7-node02] => (item=/var/lib/pgsql/etcd.yml)
2022-04-01 01:12:09,642 p=75342 u=moonja n=ansible | changed: [co7-node01] => (item=/var/lib/pgsql/etcd.yml)
2022-04-01 01:12:09,642 p=75342 u=moonja n=ansible | changed: [co7-node03] => (item=/var/lib/pgsql/etcd.yml)
2022-04-01 01:12:09,997 p=75342 u=moonja n=ansible | ok: [co7-node02] => (item=/var/lib/pgsql/etcd_logfile)
2022-04-01 01:12:10,070 p=75342 u=moonja n=ansible | ok: [co7-node03] => (item=/var/lib/pgsql/etcd_logfile)
2022-04-01 01:12:10,073 p=75342 u=moonja n=ansible | ok: [co7-node01] => (item=/var/lib/pgsql/etcd_logfile)
2022-04-01 01:12:10,085 p=75342 u=moonja n=ansible | TASK [patroni-postgres : Delete data directory for patroni cluster] **********************************
2022-04-01 01:12:10,569 p=75342 u=moonja n=ansible | changed: [co7-node02] => (item=backups)
2022-04-01 01:12:10,570 p=75342 u=moonja n=ansible | changed: [co7-node01] => (item=backups)
2022-04-01 01:12:10,571 p=75342 u=moonja n=ansible | changed: [co7-node03] => (item=backups)
2022-04-01 01:12:10,996 p=75342 u=moonja n=ansible | changed: [co7-node03] => (item=data)
2022-04-01 01:12:11,009 p=75342 u=moonja n=ansible | changed: [co7-node01] => (item=data)
2022-04-01 01:12:11,009 p=75342 u=moonja n=ansible | changed: [co7-node02] => (item=data)
2022-04-01 01:12:11,469 p=75342 u=moonja n=ansible | changed: [co7-node02] => (item=patroni_data)
2022-04-01 01:12:11,488 p=75342 u=moonja n=ansible | changed: [co7-node03] => (item=patroni_data)
2022-04-01 01:12:11,490 p=75342 u=moonja n=ansible | changed: [co7-node01] => (item=patroni_data)
2022-04-01 01:12:11,503 p=75342 u=moonja n=ansible | TASK [patroni-postgres : Change the permissions on the /tmp directory] *******************************
2022-04-01 01:12:12,029 p=75342 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 01:12:12,030 p=75342 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 01:12:12,031 p=75342 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 01:12:12,044 p=75342 u=moonja n=ansible | TASK [patroni-postgres : Uninstall pip modules of Patroni prerequisites on all three nodes] **********
2022-04-01 01:12:18,380 p=75342 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"ansible_job_id": "663136986769.20747", "changed": true, "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 uninstall -r /var/lib/pgsql/requirements.txt -y )", "delta": "0:00:00.427469", "end": "2022-04-01 01:12:14.368142", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/root/.ansible_async/663136986769.20747", "start": "2022-04-01 01:12:13.940673", "started": 1, "stderr": "WARNING: Skipping boto as it is not installed.\nERROR: Cannot uninstall 'PyYAML'. It is a distutils installed project and thus we cannot accurately determine which files belong to it which would lead to only a partial uninstall.", "stderr_lines": ["WARNING: Skipping boto as it is not installed.", "ERROR: Cannot uninstall 'PyYAML'. It is a distutils installed project and thus we cannot accurately determine which files belong to it which would lead to only a partial uninstall."], "stdout": "Found existing installation: urllib3 1.26.9\nUninstalling urllib3-1.26.9:\n  Successfully uninstalled urllib3-1.26.9\nFound existing installation: PyYAML 3.13", "stdout_lines": ["Found existing installation: urllib3 1.26.9", "Uninstalling urllib3-1.26.9:", "  Successfully uninstalled urllib3-1.26.9", "Found existing installation: PyYAML 3.13"]}
2022-04-01 01:12:18,381 p=75342 u=moonja n=ansible | ...ignoring
2022-04-01 01:12:18,442 p=75342 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"ansible_job_id": "106827578213.8871", "changed": true, "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 uninstall -r /var/lib/pgsql/requirements.txt -y )", "delta": "0:00:00.544591", "end": "2022-04-01 01:12:14.486019", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/root/.ansible_async/106827578213.8871", "start": "2022-04-01 01:12:13.941428", "started": 1, "stderr": "WARNING: Skipping boto as it is not installed.\nERROR: Cannot uninstall 'PyYAML'. It is a distutils installed project and thus we cannot accurately determine which files belong to it which would lead to only a partial uninstall.", "stderr_lines": ["WARNING: Skipping boto as it is not installed.", "ERROR: Cannot uninstall 'PyYAML'. It is a distutils installed project and thus we cannot accurately determine which files belong to it which would lead to only a partial uninstall."], "stdout": "Found existing installation: urllib3 1.26.9\nUninstalling urllib3-1.26.9:\n  Successfully uninstalled urllib3-1.26.9\nFound existing installation: PyYAML 3.13", "stdout_lines": ["Found existing installation: urllib3 1.26.9", "Uninstalling urllib3-1.26.9:", "  Successfully uninstalled urllib3-1.26.9", "Found existing installation: PyYAML 3.13"]}
2022-04-01 01:12:18,442 p=75342 u=moonja n=ansible | ...ignoring
2022-04-01 01:12:21,487 p=75342 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"ansible_job_id": "406659122187.9092", "changed": true, "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 uninstall -r /var/lib/pgsql/requirements.txt -y )", "delta": "0:00:00.471277", "end": "2022-04-01 01:12:14.563500", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/root/.ansible_async/406659122187.9092", "start": "2022-04-01 01:12:14.092223", "started": 1, "stderr": "WARNING: Skipping boto as it is not installed.\nERROR: Cannot uninstall 'PyYAML'. It is a distutils installed project and thus we cannot accurately determine which files belong to it which would lead to only a partial uninstall.", "stderr_lines": ["WARNING: Skipping boto as it is not installed.", "ERROR: Cannot uninstall 'PyYAML'. It is a distutils installed project and thus we cannot accurately determine which files belong to it which would lead to only a partial uninstall."], "stdout": "Found existing installation: urllib3 1.26.9\nUninstalling urllib3-1.26.9:\n  Successfully uninstalled urllib3-1.26.9\nFound existing installation: PyYAML 3.13", "stdout_lines": ["Found existing installation: urllib3 1.26.9", "Uninstalling urllib3-1.26.9:", "  Successfully uninstalled urllib3-1.26.9", "Found existing installation: PyYAML 3.13"]}
2022-04-01 01:12:21,488 p=75342 u=moonja n=ansible | ...ignoring
2022-04-01 01:12:21,497 p=75342 u=moonja n=ansible | TASK [patroni-postgres : UnInstall wheel pip module on all three nodes] ******************************
2022-04-01 01:12:27,776 p=75342 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:12:28,203 p=75342 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:12:28,244 p=75342 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:12:28,254 p=75342 u=moonja n=ansible | TASK [patroni-postgres : Uninstall typing pip module on all three nodes] *****************************
2022-04-01 01:12:34,652 p=75342 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"ansible_job_id": "589528543116.21503", "changed": true, "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 uninstall typing -y )", "delta": "0:00:00.409858", "end": "2022-04-01 01:12:29.378914", "finished": 1, "msg": "non-zero return code", "rc": 2, "results_file": "/var/lib/pgsql/.ansible_async/589528543116.21503", "start": "2022-04-01 01:12:28.969056", "started": 1, "stderr": "ERROR: Exception:\nTraceback (most recent call last):\n  File \"/usr/lib64/python3.6/shutil.py\", line 550, in move\n    os.rename(src, real_dst)\nPermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc' -> '/var/tmp/pip-uninstall-3e5mkz3q/typing.cpython-36.pyc'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/cli/base_command.py\", line 164, in exc_logging_wrapper\n    status = run_func(*args)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/commands/uninstall.py\", line 99, in run\n    verbose=self.verbosity > 0,\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_install.py\", line 671, in uninstall\n    uninstalled_pathset.remove(auto_confirm, verbose)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 384, in remove\n    moved.stash(path)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 282, in stash\n    renames(path, new_path)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/utils/misc.py\", line 307, in renames\n    shutil.move(old, new)\n  File \"/usr/lib64/python3.6/shutil.py\", line 565, in move\n    os.unlink(src)\nPermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc'", "stderr_lines": ["ERROR: Exception:", "Traceback (most recent call last):", "  File \"/usr/lib64/python3.6/shutil.py\", line 550, in move", "    os.rename(src, real_dst)", "PermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc' -> '/var/tmp/pip-uninstall-3e5mkz3q/typing.cpython-36.pyc'", "", "During handling of the above exception, another exception occurred:", "", "Traceback (most recent call last):", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/cli/base_command.py\", line 164, in exc_logging_wrapper", "    status = run_func(*args)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/commands/uninstall.py\", line 99, in run", "    verbose=self.verbosity > 0,", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_install.py\", line 671, in uninstall", "    uninstalled_pathset.remove(auto_confirm, verbose)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 384, in remove", "    moved.stash(path)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 282, in stash", "    renames(path, new_path)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/utils/misc.py\", line 307, in renames", "    shutil.move(old, new)", "  File \"/usr/lib64/python3.6/shutil.py\", line 565, in move", "    os.unlink(src)", "PermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc'"], "stdout": "Found existing installation: typing 3.7.4.3\nUninstalling typing-3.7.4.3:", "stdout_lines": ["Found existing installation: typing 3.7.4.3", "Uninstalling typing-3.7.4.3:"]}
2022-04-01 01:12:34,652 p=75342 u=moonja n=ansible | ...ignoring
2022-04-01 01:12:35,033 p=75342 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"ansible_job_id": "732918539061.9849", "changed": true, "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 uninstall typing -y )", "delta": "0:00:01.102838", "end": "2022-04-01 01:12:30.069640", "finished": 1, "msg": "non-zero return code", "rc": 2, "results_file": "/var/lib/pgsql/.ansible_async/732918539061.9849", "start": "2022-04-01 01:12:28.966802", "started": 1, "stderr": "ERROR: Exception:\nTraceback (most recent call last):\n  File \"/usr/lib64/python3.6/shutil.py\", line 550, in move\n    os.rename(src, real_dst)\nPermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc' -> '/var/tmp/pip-uninstall-3sdnmfvc/typing.cpython-36.pyc'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/cli/base_command.py\", line 164, in exc_logging_wrapper\n    status = run_func(*args)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/commands/uninstall.py\", line 99, in run\n    verbose=self.verbosity > 0,\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_install.py\", line 671, in uninstall\n    uninstalled_pathset.remove(auto_confirm, verbose)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 384, in remove\n    moved.stash(path)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 282, in stash\n    renames(path, new_path)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/utils/misc.py\", line 307, in renames\n    shutil.move(old, new)\n  File \"/usr/lib64/python3.6/shutil.py\", line 565, in move\n    os.unlink(src)\nPermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc'", "stderr_lines": ["ERROR: Exception:", "Traceback (most recent call last):", "  File \"/usr/lib64/python3.6/shutil.py\", line 550, in move", "    os.rename(src, real_dst)", "PermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc' -> '/var/tmp/pip-uninstall-3sdnmfvc/typing.cpython-36.pyc'", "", "During handling of the above exception, another exception occurred:", "", "Traceback (most recent call last):", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/cli/base_command.py\", line 164, in exc_logging_wrapper", "    status = run_func(*args)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/commands/uninstall.py\", line 99, in run", "    verbose=self.verbosity > 0,", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_install.py\", line 671, in uninstall", "    uninstalled_pathset.remove(auto_confirm, verbose)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 384, in remove", "    moved.stash(path)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 282, in stash", "    renames(path, new_path)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/utils/misc.py\", line 307, in renames", "    shutil.move(old, new)", "  File \"/usr/lib64/python3.6/shutil.py\", line 565, in move", "    os.unlink(src)", "PermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc'"], "stdout": "Found existing installation: typing 3.7.4.3\nUninstalling typing-3.7.4.3:", "stdout_lines": ["Found existing installation: typing 3.7.4.3", "Uninstalling typing-3.7.4.3:"]}
2022-04-01 01:12:35,033 p=75342 u=moonja n=ansible | ...ignoring
2022-04-01 01:12:35,136 p=75342 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"ansible_job_id": "401409753957.9627", "changed": true, "cmd": "( export PATH=$PATH:/usr/local/bin && pip3 uninstall typing -y )", "delta": "0:00:01.504993", "end": "2022-04-01 01:12:30.474770", "finished": 1, "msg": "non-zero return code", "rc": 2, "results_file": "/var/lib/pgsql/.ansible_async/401409753957.9627", "start": "2022-04-01 01:12:28.969777", "started": 1, "stderr": "ERROR: Exception:\nTraceback (most recent call last):\n  File \"/usr/lib64/python3.6/shutil.py\", line 550, in move\n    os.rename(src, real_dst)\nPermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc' -> '/var/tmp/pip-uninstall-niwj722n/typing.cpython-36.pyc'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/cli/base_command.py\", line 164, in exc_logging_wrapper\n    status = run_func(*args)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/commands/uninstall.py\", line 99, in run\n    verbose=self.verbosity > 0,\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_install.py\", line 671, in uninstall\n    uninstalled_pathset.remove(auto_confirm, verbose)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 384, in remove\n    moved.stash(path)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 282, in stash\n    renames(path, new_path)\n  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/utils/misc.py\", line 307, in renames\n    shutil.move(old, new)\n  File \"/usr/lib64/python3.6/shutil.py\", line 565, in move\n    os.unlink(src)\nPermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc'", "stderr_lines": ["ERROR: Exception:", "Traceback (most recent call last):", "  File \"/usr/lib64/python3.6/shutil.py\", line 550, in move", "    os.rename(src, real_dst)", "PermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc' -> '/var/tmp/pip-uninstall-niwj722n/typing.cpython-36.pyc'", "", "During handling of the above exception, another exception occurred:", "", "Traceback (most recent call last):", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/cli/base_command.py\", line 164, in exc_logging_wrapper", "    status = run_func(*args)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/commands/uninstall.py\", line 99, in run", "    verbose=self.verbosity > 0,", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_install.py\", line 671, in uninstall", "    uninstalled_pathset.remove(auto_confirm, verbose)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 384, in remove", "    moved.stash(path)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/req/req_uninstall.py\", line 282, in stash", "    renames(path, new_path)", "  File \"/usr/local/lib/python3.6/site-packages/pip/_internal/utils/misc.py\", line 307, in renames", "    shutil.move(old, new)", "  File \"/usr/lib64/python3.6/shutil.py\", line 565, in move", "    os.unlink(src)", "PermissionError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/site-packages/__pycache__/typing.cpython-36.pyc'"], "stdout": "Found existing installation: typing 3.7.4.3\nUninstalling typing-3.7.4.3:", "stdout_lines": ["Found existing installation: typing 3.7.4.3", "Uninstalling typing-3.7.4.3:"]}
2022-04-01 01:12:35,136 p=75342 u=moonja n=ansible | ...ignoring
2022-04-01 01:12:35,146 p=75342 u=moonja n=ansible | TASK [patroni-postgres : Uninstall setuptools rust on all three nodes] *******************************
2022-04-01 01:12:41,447 p=75342 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:12:41,494 p=75342 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:12:41,534 p=75342 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:12:41,546 p=75342 u=moonja n=ansible | TASK [patroni-postgres : Uninstall patroni module on all three nodes] ********************************
2022-04-01 01:12:47,849 p=75342 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:12:47,932 p=75342 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:12:47,933 p=75342 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:12:47,943 p=75342 u=moonja n=ansible | TASK [patroni-postgres : Uninstall wheel module on all three nodes] **********************************
2022-04-01 01:12:55,114 p=75342 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:12:55,206 p=75342 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:12:55,392 p=75342 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:12:55,404 p=75342 u=moonja n=ansible | TASK [patroni-postgres : Uninstall psycopg2-binary module on all three nodes] ************************
2022-04-01 01:13:03,411 p=75342 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:13:03,480 p=75342 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:13:03,697 p=75342 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:13:03,707 p=75342 u=moonja n=ansible | TASK [patroni-postgres : Delete the dependencies file of etcd  on all three nodes] *******************
2022-04-01 01:13:04,194 p=75342 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:13:04,197 p=75342 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:13:04,198 p=75342 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:13:04,209 p=75342 u=moonja n=ansible | TASK [patroni-postgres : Uninstall VMware Postgres RPM package on all hosts as root] *****************
2022-04-01 01:13:32,735 p=75342 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:13:32,815 p=75342 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:13:32,816 p=75342 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:13:32,826 p=75342 u=moonja n=ansible | TASK [patroni-postgres : Delete the vmwawre-postgres rpm file to all hosts in cluster] ***************
2022-04-01 01:13:33,278 p=75342 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:13:33,278 p=75342 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:13:33,281 p=75342 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:13:33,292 p=75342 u=moonja n=ansible | TASK [patroni-postgres : List iptables rules] ********************************************************
2022-04-01 01:13:33,767 p=75342 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:13:33,771 p=75342 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:13:33,792 p=75342 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:13:33,803 p=75342 u=moonja n=ansible | TASK [patroni-postgres : Flush iptables rules] *******************************************************
2022-04-01 01:13:34,302 p=75342 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:13:34,309 p=75342 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:13:34,314 p=75342 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:13:34,327 p=75342 u=moonja n=ansible | TASK [patroni-postgres : Stop and disable firewalld] *************************************************
2022-04-01 01:13:35,358 p=75342 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 01:13:35,361 p=75342 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 01:13:35,364 p=75342 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 01:13:35,405 p=75342 u=moonja n=ansible | PLAY RECAP *******************************************************************************************
2022-04-01 01:13:35,405 p=75342 u=moonja n=ansible | co7-node01                 : ok=19   changed=16   unreachable=0    failed=0    skipped=0    rescued=0    ignored=2   
2022-04-01 01:13:35,405 p=75342 u=moonja n=ansible | co7-node02                 : ok=19   changed=16   unreachable=0    failed=0    skipped=0    rescued=0    ignored=2   
2022-04-01 01:13:35,405 p=75342 u=moonja n=ansible | co7-node03                 : ok=19   changed=16   unreachable=0    failed=0    skipped=0    rescued=0    ignored=2   
2022-04-01 01:20:54,452 p=80090 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This 
feature will be removed from ansible-core in version 2.14. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2022-04-01 01:20:54,465 p=80090 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-04-01 01:20:54,706 p=80090 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature 
will be removed in version 2.16. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2022-04-01 01:20:54,743 p=80090 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgsql94-bdr/tasks/upgrade.yml is empty and had
no tasks to include

2022-04-01 01:20:54,757 p=80090 u=moonja n=ansible | PLAY [all] *******************************************************************************************
2022-04-01 01:20:54,780 p=80090 u=moonja n=ansible | TASK [Gathering Facts] *******************************************************************************
2022-04-01 01:20:56,969 p=80090 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 01:20:57,051 p=80090 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 01:20:57,099 p=80090 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 01:21:02,562 p=80090 u=moonja n=ansible | ok: [co7-master]
2022-04-01 01:21:04,408 p=80090 u=moonja n=ansible | ok: [co7-slave]
2022-04-01 01:21:04,432 p=80090 u=moonja n=ansible | TASK [pgsql94-bdr : Check OS support] ****************************************************************
2022-04-01 01:21:04,469 p=80090 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 01:21:04,486 p=80090 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 01:21:04,502 p=80090 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 01:21:04,504 p=80090 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 01:21:04,515 p=80090 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 01:21:04,525 p=80090 u=moonja n=ansible | TASK [pgsql94-bdr : Check packet manager support] ****************************************************
2022-04-01 01:21:04,546 p=80090 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 01:21:04,562 p=80090 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 01:21:04,593 p=80090 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 01:21:04,595 p=80090 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 01:21:04,610 p=80090 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 01:21:04,620 p=80090 u=moonja n=ansible | TASK [pgsql94-bdr : Install 2ndQuadrant PostgreSQL BDR official repository] **************************
2022-04-01 01:21:04,641 p=80090 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 01:21:04,658 p=80090 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 01:21:15,698 p=80090 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": false, "msg": "Failure downloading http://packages.2ndquadrant.com/postgresql-bdr94-2ndquadrant/yum-repo-rpms/postgresql-bdr94-2ndquadrant-redhat-1.0-2.noarch.rpm, Request failed: <urlopen error timed out>"}
2022-04-01 01:21:15,713 p=80090 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": false, "msg": "Failure downloading http://packages.2ndquadrant.com/postgresql-bdr94-2ndquadrant/yum-repo-rpms/postgresql-bdr94-2ndquadrant-redhat-1.0-2.noarch.rpm, Request failed: <urlopen error timed out>"}
2022-04-01 01:21:15,864 p=80090 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": false, "msg": "Failure downloading http://packages.2ndquadrant.com/postgresql-bdr94-2ndquadrant/yum-repo-rpms/postgresql-bdr94-2ndquadrant-redhat-1.0-2.noarch.rpm, Request failed: <urlopen error timed out>"}
2022-04-01 01:21:15,875 p=80090 u=moonja n=ansible | TASK [pgsql94-bdr : Install PostgreSQL BDR packages] *************************************************
2022-04-01 01:21:15,899 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item=python-psycopg2) 
2022-04-01 01:21:15,900 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item=postgresql-bdr94-bdr) 
2022-04-01 01:21:15,912 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item=python-psycopg2) 
2022-04-01 01:21:15,912 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item=postgresql-bdr94-bdr) 
2022-04-01 01:21:15,924 p=80090 u=moonja n=ansible | TASK [pgsql94-bdr : Stop PostgreSQL if are running] **************************************************
2022-04-01 01:21:15,945 p=80090 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 01:21:15,959 p=80090 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 01:21:15,968 p=80090 u=moonja n=ansible | TASK [pgsql94-bdr : Remove old PostgreSQL data directory if exists] **********************************
2022-04-01 01:21:15,989 p=80090 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 01:21:16,002 p=80090 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 01:21:16,011 p=80090 u=moonja n=ansible | TASK [pgsql94-bdr : Initialize new PostgreSQL BDR cluster on upstream server] ************************
2022-04-01 01:21:16,032 p=80090 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 01:21:16,046 p=80090 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 01:21:16,054 p=80090 u=moonja n=ansible | TASK [pgsql94-bdr : Configure pg_hba.conf for basic authentication] **********************************
2022-04-01 01:21:16,078 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'}) 
2022-04-01 01:21:16,079 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'}) 
2022-04-01 01:21:16,083 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'}) 
2022-04-01 01:21:16,083 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'}) 
2022-04-01 01:21:16,094 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'}) 
2022-04-01 01:21:16,097 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'}) 
2022-04-01 01:21:16,100 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'}) 
2022-04-01 01:21:16,100 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'}) 
2022-04-01 01:21:16,112 p=80090 u=moonja n=ansible | TASK [pgsql94-bdr : Configure pg_hba.conf to enable communication with password authentication between servers] ***
2022-04-01 01:21:16,172 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.100.82']) 
2022-04-01 01:21:16,173 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.100.83']) 
2022-04-01 01:21:16,176 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.100.84']) 
2022-04-01 01:21:16,176 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.100.85']) 
2022-04-01 01:21:16,185 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.100.82']) 
2022-04-01 01:21:16,188 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.100.83']) 
2022-04-01 01:21:16,191 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.100.84']) 
2022-04-01 01:21:16,191 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.100.85']) 
2022-04-01 01:21:16,201 p=80090 u=moonja n=ansible | TASK [pgsql94-bdr : Configure pg_hba.conf to enable communication with trust authentication between servers] ***
2022-04-01 01:21:16,259 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.100.82']) 
2022-04-01 01:21:16,264 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.100.83']) 
2022-04-01 01:21:16,264 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.100.84']) 
2022-04-01 01:21:16,264 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.100.85']) 
2022-04-01 01:21:16,271 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.100.82']) 
2022-04-01 01:21:16,271 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.100.83']) 
2022-04-01 01:21:16,272 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.100.84']) 
2022-04-01 01:21:16,272 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.100.82']) 
2022-04-01 01:21:16,273 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.100.85']) 
2022-04-01 01:21:16,275 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.100.83']) 
2022-04-01 01:21:16,278 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.100.84']) 
2022-04-01 01:21:16,281 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.100.85']) 
2022-04-01 01:21:16,284 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.100.82']) 
2022-04-01 01:21:16,289 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.100.83']) 
2022-04-01 01:21:16,289 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.100.84']) 
2022-04-01 01:21:16,290 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.100.85']) 
2022-04-01 01:21:16,300 p=80090 u=moonja n=ansible | TASK [pgsql94-bdr : Configure postgresql.conf with shared GUCs of PostgreSQL for BDR] ****************
2022-04-01 01:21:16,324 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"}) 
2022-04-01 01:21:16,326 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'}) 
2022-04-01 01:21:16,328 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'}) 
2022-04-01 01:21:16,330 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"}) 
2022-04-01 01:21:16,335 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'}) 
2022-04-01 01:21:16,337 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"}) 
2022-04-01 01:21:16,338 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"}) 
2022-04-01 01:21:16,338 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'}) 
2022-04-01 01:21:16,343 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'}) 
2022-04-01 01:21:16,351 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'}) 
2022-04-01 01:21:16,352 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"}) 
2022-04-01 01:21:16,355 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'}) 
2022-04-01 01:21:16,355 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"}) 
2022-04-01 01:21:16,355 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'}) 
2022-04-01 01:21:16,366 p=80090 u=moonja n=ansible | TASK [pgsql94-bdr : Start PostgreSQL] ****************************************************************
2022-04-01 01:21:16,387 p=80090 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 01:21:16,400 p=80090 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 01:21:16,409 p=80090 u=moonja n=ansible | TASK [pgsql94-bdr : Configure Primary Master's postgresql.conf] **************************************
2022-04-01 01:21:16,444 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 01:21:16,444 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.demo_dsn = 'host=192.168.100.81 dbname=bdrdemo user=postgres'"}) 
2022-04-01 01:21:16,458 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 01:21:16,459 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.demo_dsn = 'host=192.168.100.82 dbname=bdrdemo user=postgres'"}) 
2022-04-01 01:21:16,471 p=80090 u=moonja n=ansible | TASK [pgsql94-bdr : Configure Slave Master's postgresql.conf] ****************************************
2022-04-01 01:21:16,505 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 01:21:16,506 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.demo_dsn = 'host=192.168.100.83 dbname=bdrdemo user=postgres'"}) 
2022-04-01 01:21:16,508 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': 'bdr.demo_init_replica = on'}) 
2022-04-01 01:21:16,509 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"}) 
2022-04-01 01:21:16,521 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 01:21:16,524 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.demo_dsn = 'host=192.168.100.83 dbname=bdrdemo user=postgres'"}) 
2022-04-01 01:21:16,526 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': 'bdr.demo_init_replica = on'}) 
2022-04-01 01:21:16,527 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"}) 
2022-04-01 01:21:16,537 p=80090 u=moonja n=ansible | TASK [pgsql94-bdr : Final PostgreSQL restart] ********************************************************
2022-04-01 01:21:16,559 p=80090 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 01:21:16,569 p=80090 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 01:21:16,579 p=80090 u=moonja n=ansible | TASK [pgsql94-bdr : Create database to sync between Master Servers] **********************************
2022-04-01 01:21:16,601 p=80090 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 01:21:16,615 p=80090 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 01:21:16,624 p=80090 u=moonja n=ansible | TASK [pgsql94-bdr : Connect to database, create user and grant access for all Master Servers] ********
2022-04-01 01:21:16,645 p=80090 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 01:21:16,658 p=80090 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 01:21:16,669 p=80090 u=moonja n=ansible | TASK [pgsql94-bdr : Create extentions for BDR] *******************************************************
2022-04-01 01:21:16,750 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item=CREATE EXTENSION btree_gist;) 
2022-04-01 01:21:16,750 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item=CREATE EXTENSION bdr;) 
2022-04-01 01:21:16,755 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item=CREATE EXTENSION btree_gist;) 
2022-04-01 01:21:16,755 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item=CREATE EXTENSION bdr;) 
2022-04-01 01:21:16,768 p=80090 u=moonja n=ansible | TASK [pgsql94-bdr : Create group on Primary Master Server for BDR] ***********************************
2022-04-01 01:21:16,805 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item=SELECT bdr.bdr_group_create ( local_node_name := 'co7-master', node_external_dsn := 'host=192.168.100.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-01 01:21:16,819 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item=SELECT bdr.bdr_group_create ( local_node_name := 'co7-slave', node_external_dsn := 'host=192.168.100.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-01 01:21:16,830 p=80090 u=moonja n=ansible | TASK [pgsql94-bdr : Join group from other Master Servers] ********************************************
2022-04-01 01:21:16,870 p=80090 u=moonja n=ansible | skipping: [co7-master] => (item=SELECT bdr.bdr_group_join ( local_node_name := 'co7-master', node_external_dsn := 'host=192.168.100.81 user=bdrsync dbname=bdrdemo password=changeme', join_using_dsn := 'host=192.168.100.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-01 01:21:16,883 p=80090 u=moonja n=ansible | skipping: [co7-slave] => (item=SELECT bdr.bdr_group_join ( local_node_name := 'co7-slave', node_external_dsn := 'host=192.168.100.82 user=bdrsync dbname=bdrdemo password=changeme', join_using_dsn := 'host=192.168.100.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-01 01:21:16,917 p=80090 u=moonja n=ansible | PLAY RECAP *******************************************************************************************
2022-04-01 01:21:16,917 p=80090 u=moonja n=ansible | co7-master                 : ok=1    changed=0    unreachable=0    failed=0    skipped=20   rescued=0    ignored=0   
2022-04-01 01:21:16,917 p=80090 u=moonja n=ansible | co7-node01                 : ok=1    changed=0    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2022-04-01 01:21:16,917 p=80090 u=moonja n=ansible | co7-node02                 : ok=1    changed=0    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2022-04-01 01:21:16,917 p=80090 u=moonja n=ansible | co7-node03                 : ok=1    changed=0    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2022-04-01 01:21:16,917 p=80090 u=moonja n=ansible | co7-slave                  : ok=1    changed=0    unreachable=0    failed=0    skipped=20   rescued=0    ignored=0   
2022-04-01 01:27:22,143 p=81860 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be 
removed from ansible-core in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False 
in ansible.cfg.
2022-04-01 01:27:22,155 p=81860 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-04-01 01:27:22,413 p=81860 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed 
in version 2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-04-01 01:27:22,450 p=81860 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgsql94-bdr/tasks/upgrade.yml is empty and had no tasks to
include

2022-04-01 01:27:22,466 p=81860 u=moonja n=ansible | PLAY [all] ************************************************************************************************************
2022-04-01 01:27:22,489 p=81860 u=moonja n=ansible | TASK [Gathering Facts] ************************************************************************************************
2022-04-01 01:27:24,825 p=81860 u=moonja n=ansible | ok: [co7-master]
2022-04-01 01:27:24,852 p=81860 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 01:27:24,940 p=81860 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 01:27:24,988 p=81860 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 01:27:25,361 p=81860 u=moonja n=ansible | ok: [co7-slave]
2022-04-01 01:27:25,378 p=81860 u=moonja n=ansible | TASK [pgsql94-bdr : Check OS support] *********************************************************************************
2022-04-01 01:27:25,401 p=81860 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 01:27:25,418 p=81860 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 01:27:25,450 p=81860 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 01:27:25,451 p=81860 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 01:27:25,464 p=81860 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 01:27:25,475 p=81860 u=moonja n=ansible | TASK [pgsql94-bdr : Check packet manager support] *********************************************************************
2022-04-01 01:27:25,496 p=81860 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 01:27:25,512 p=81860 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 01:27:25,529 p=81860 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 01:27:25,545 p=81860 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 01:27:25,557 p=81860 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 01:27:25,569 p=81860 u=moonja n=ansible | TASK [pgsql94-bdr : Copy the vmwawre-postgres rpm file to all hosts in cluster] ***************************************
2022-04-01 01:27:26,995 p=81860 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:27:27,022 p=81860 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:27:27,023 p=81860 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:27:27,592 p=81860 u=moonja n=ansible | changed: [co7-slave]
2022-04-01 01:27:28,176 p=81860 u=moonja n=ansible | changed: [co7-master]
2022-04-01 01:27:28,190 p=81860 u=moonja n=ansible | TASK [pgsql94-bdr : Install VMware Postgres on all hosts as root] *****************************************************
2022-04-01 01:27:40,919 p=81860 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"ansible_job_id": "8917057533.25739", "changed": false, "changes": {"installed": ["/home/jomoon/postgresql-bdr94-bdr-1.0.5-1.el7.x86_64.rpm"]}, "finished": 1, "msg": "There are unfinished transactions remaining. You might consider running yum-complete-transaction, or \"yum-complete-transaction --cleanup-only\" and \"yum history redo last\", first to finish them. If those don't work you'll have to try removing/installing packages by hand (maybe package-cleanup can help).\nError: Package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64 (/postgresql-bdr94-bdr-1.0.5-1.el7.x86_64)\n           Requires: postgresql-bdr94-server(x86-64) >= 9.4.17_bdr1\nError: Package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64 (/postgresql-bdr94-bdr-1.0.5-1.el7.x86_64)\n           Requires: postgresql-bdr94(x86-64) >= 9.4.17_bdr1\nError: Package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64 (/postgresql-bdr94-bdr-1.0.5-1.el7.x86_64)\n           Requires: postgresql-bdr94-contrib(x86-64) >= 9.4.17_bdr1\n", "rc": 1, "results": ["Loaded plugins: fastestmirror, product-id, search-disabled-repos, subscription-\n              : manager, versionlock\n\nThis system is not registered with an entitlement server. You can use subscription-manager to register.\n\nExamining /home/jomoon/postgresql-bdr94-bdr-1.0.5-1.el7.x86_64.rpm: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\nMarking /home/jomoon/postgresql-bdr94-bdr-1.0.5-1.el7.x86_64.rpm to be installed\nResolving Dependencies\n--> Running transaction check\n---> Package postgresql-bdr94-bdr.x86_64 0:1.0.5-1.el7 will be installed\n--> Processing Dependency: postgresql-bdr94(x86-64) >= 9.4.17_bdr1 for package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\nLoading mirror speeds from cached hostfile\n * base: mirror.anigil.com\n * centos-sclo-rh: ftp.kaist.ac.kr\n * epel: ftp.riken.jp\n * extras: mirror.anigil.com\n * updates: mirror.kakao.com\n--> Processing Dependency: postgresql-bdr94-contrib(x86-64) >= 9.4.17_bdr1 for package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\n--> Processing Dependency: postgresql-bdr94-server(x86-64) >= 9.4.17_bdr1 for package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\n--> Processing Dependency: libpq.so.5()(64bit) for package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\n--> Running transaction check\n---> Package postgresql-bdr94-bdr.x86_64 0:1.0.5-1.el7 will be installed\n--> Processing Dependency: postgresql-bdr94(x86-64) >= 9.4.17_bdr1 for package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\n--> Processing Dependency: postgresql-bdr94-contrib(x86-64) >= 9.4.17_bdr1 for package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\n--> Processing Dependency: postgresql-bdr94-server(x86-64) >= 9.4.17_bdr1 for package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\n---> Package postgresql-libs.x86_64 0:9.2.24-7.el7_9 will be installed\n--> Finished Dependency Resolution\n You could try using --skip-broken to work around the problem\n You could try running: rpm -Va --nofiles --nodigest\n"], "results_file": "/root/.ansible_async/8917057533.25739", "started": 1, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2022-04-01 01:27:41,139 p=81860 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"ansible_job_id": "339209911645.14086", "changed": false, "changes": {"installed": ["/home/jomoon/postgresql-bdr94-bdr-1.0.5-1.el7.x86_64.rpm"]}, "finished": 1, "msg": "There are unfinished transactions remaining. You might consider running yum-complete-transaction, or \"yum-complete-transaction --cleanup-only\" and \"yum history redo last\", first to finish them. If those don't work you'll have to try removing/installing packages by hand (maybe package-cleanup can help).\nError: Package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64 (/postgresql-bdr94-bdr-1.0.5-1.el7.x86_64)\n           Requires: postgresql-bdr94-server(x86-64) >= 9.4.17_bdr1\nError: Package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64 (/postgresql-bdr94-bdr-1.0.5-1.el7.x86_64)\n           Requires: postgresql-bdr94(x86-64) >= 9.4.17_bdr1\nError: Package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64 (/postgresql-bdr94-bdr-1.0.5-1.el7.x86_64)\n           Requires: postgresql-bdr94-contrib(x86-64) >= 9.4.17_bdr1\n", "rc": 1, "results": ["Loaded plugins: fastestmirror, product-id, search-disabled-repos, subscription-\n              : manager, versionlock\n\nThis system is not registered with an entitlement server. You can use subscription-manager to register.\n\nExamining /home/jomoon/postgresql-bdr94-bdr-1.0.5-1.el7.x86_64.rpm: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\nMarking /home/jomoon/postgresql-bdr94-bdr-1.0.5-1.el7.x86_64.rpm to be installed\nResolving Dependencies\n--> Running transaction check\n---> Package postgresql-bdr94-bdr.x86_64 0:1.0.5-1.el7 will be installed\n--> Processing Dependency: postgresql-bdr94(x86-64) >= 9.4.17_bdr1 for package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\nLoading mirror speeds from cached hostfile\n * base: ftp.kaist.ac.kr\n * centos-sclo-rh: ftp.kaist.ac.kr\n * epel: ftp.jaist.ac.jp\n * extras: ftp.kaist.ac.kr\n * updates: ftp.tsukuba.wide.ad.jp\n--> Processing Dependency: postgresql-bdr94-contrib(x86-64) >= 9.4.17_bdr1 for package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\n--> Processing Dependency: postgresql-bdr94-server(x86-64) >= 9.4.17_bdr1 for package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\n--> Processing Dependency: libpq.so.5()(64bit) for package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\n--> Running transaction check\n---> Package postgresql-bdr94-bdr.x86_64 0:1.0.5-1.el7 will be installed\n--> Processing Dependency: postgresql-bdr94(x86-64) >= 9.4.17_bdr1 for package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\n--> Processing Dependency: postgresql-bdr94-contrib(x86-64) >= 9.4.17_bdr1 for package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\n--> Processing Dependency: postgresql-bdr94-server(x86-64) >= 9.4.17_bdr1 for package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\n---> Package postgresql-libs.x86_64 0:9.2.24-7.el7_9 will be installed\n--> Finished Dependency Resolution\n You could try using --skip-broken to work around the problem\n You could try running: rpm -Va --nofiles --nodigest\n"], "results_file": "/root/.ansible_async/339209911645.14086", "started": 1, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2022-04-01 01:27:41,159 p=81860 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"ansible_job_id": "660443424351.13867", "changed": false, "changes": {"installed": ["/home/jomoon/postgresql-bdr94-bdr-1.0.5-1.el7.x86_64.rpm"]}, "finished": 1, "msg": "There are unfinished transactions remaining. You might consider running yum-complete-transaction, or \"yum-complete-transaction --cleanup-only\" and \"yum history redo last\", first to finish them. If those don't work you'll have to try removing/installing packages by hand (maybe package-cleanup can help).\nError: Package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64 (/postgresql-bdr94-bdr-1.0.5-1.el7.x86_64)\n           Requires: postgresql-bdr94-server(x86-64) >= 9.4.17_bdr1\nError: Package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64 (/postgresql-bdr94-bdr-1.0.5-1.el7.x86_64)\n           Requires: postgresql-bdr94(x86-64) >= 9.4.17_bdr1\nError: Package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64 (/postgresql-bdr94-bdr-1.0.5-1.el7.x86_64)\n           Requires: postgresql-bdr94-contrib(x86-64) >= 9.4.17_bdr1\n", "rc": 1, "results": ["Loaded plugins: fastestmirror, product-id, search-disabled-repos, subscription-\n              : manager, versionlock\n\nThis system is not registered with an entitlement server. You can use subscription-manager to register.\n\nExamining /home/jomoon/postgresql-bdr94-bdr-1.0.5-1.el7.x86_64.rpm: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\nMarking /home/jomoon/postgresql-bdr94-bdr-1.0.5-1.el7.x86_64.rpm to be installed\nResolving Dependencies\n--> Running transaction check\n---> Package postgresql-bdr94-bdr.x86_64 0:1.0.5-1.el7 will be installed\n--> Processing Dependency: postgresql-bdr94(x86-64) >= 9.4.17_bdr1 for package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\nLoading mirror speeds from cached hostfile\n * base: mirror.anigil.com\n * centos-sclo-rh: mirror.kakao.com\n * epel: ftp.iij.ad.jp\n * extras: mirror.anigil.com\n * updates: mirror.kakao.com\n--> Processing Dependency: postgresql-bdr94-contrib(x86-64) >= 9.4.17_bdr1 for package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\n--> Processing Dependency: postgresql-bdr94-server(x86-64) >= 9.4.17_bdr1 for package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\n--> Processing Dependency: libpq.so.5()(64bit) for package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\n--> Running transaction check\n---> Package postgresql-bdr94-bdr.x86_64 0:1.0.5-1.el7 will be installed\n--> Processing Dependency: postgresql-bdr94(x86-64) >= 9.4.17_bdr1 for package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\n--> Processing Dependency: postgresql-bdr94-contrib(x86-64) >= 9.4.17_bdr1 for package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\n--> Processing Dependency: postgresql-bdr94-server(x86-64) >= 9.4.17_bdr1 for package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\n---> Package postgresql-libs.x86_64 0:9.2.24-7.el7_9 will be installed\n--> Finished Dependency Resolution\n You could try using --skip-broken to work around the problem\n You could try running: rpm -Va --nofiles --nodigest\n"], "results_file": "/root/.ansible_async/660443424351.13867", "started": 1, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2022-04-01 01:28:27,922 p=81860 u=moonja n=ansible | fatal: [co7-master]: FAILED! => {"ansible_job_id": "980485837271.2793", "changed": false, "changes": {"installed": ["/home/jomoon/postgresql-bdr94-bdr-1.0.5-1.el7.x86_64.rpm"]}, "finished": 1, "msg": "There are unfinished transactions remaining. You might consider running yum-complete-transaction, or \"yum-complete-transaction --cleanup-only\" and \"yum history redo last\", first to finish them. If those don't work you'll have to try removing/installing packages by hand (maybe package-cleanup can help).\nError: Package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64 (/postgresql-bdr94-bdr-1.0.5-1.el7.x86_64)\n           Requires: postgresql-bdr94-server(x86-64) >= 9.4.17_bdr1\nError: Package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64 (/postgresql-bdr94-bdr-1.0.5-1.el7.x86_64)\n           Requires: postgresql-bdr94(x86-64) >= 9.4.17_bdr1\nError: Package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64 (/postgresql-bdr94-bdr-1.0.5-1.el7.x86_64)\n           Requires: postgresql-bdr94-contrib(x86-64) >= 9.4.17_bdr1\n", "rc": 1, "results": ["Loaded plugins: fastestmirror, product-id, search-disabled-repos, subscription-\n              : manager, versionlock\n\nThis system is not registered with an entitlement server. You can use subscription-manager to register.\n\nExamining /home/jomoon/postgresql-bdr94-bdr-1.0.5-1.el7.x86_64.rpm: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\nMarking /home/jomoon/postgresql-bdr94-bdr-1.0.5-1.el7.x86_64.rpm to be installed\nResolving Dependencies\n--> Running transaction check\n---> Package postgresql-bdr94-bdr.x86_64 0:1.0.5-1.el7 will be installed\n--> Processing Dependency: postgresql-bdr94(x86-64) >= 9.4.17_bdr1 for package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\nLoading mirror speeds from cached hostfile\n * base: mirror.anigil.com\n * centos-sclo-rh: mirror.navercorp.com\n * epel: ftp.riken.jp\n * extras: mirror.anigil.com\n * updates: mirror.navercorp.com\n--> Processing Dependency: postgresql-bdr94-contrib(x86-64) >= 9.4.17_bdr1 for package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\n--> Processing Dependency: postgresql-bdr94-server(x86-64) >= 9.4.17_bdr1 for package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\n--> Processing Dependency: libpq.so.5()(64bit) for package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\n--> Running transaction check\n---> Package postgresql-bdr94-bdr.x86_64 0:1.0.5-1.el7 will be installed\n--> Processing Dependency: postgresql-bdr94(x86-64) >= 9.4.17_bdr1 for package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\n--> Processing Dependency: postgresql-bdr94-contrib(x86-64) >= 9.4.17_bdr1 for package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\n--> Processing Dependency: postgresql-bdr94-server(x86-64) >= 9.4.17_bdr1 for package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\n---> Package postgresql-libs.x86_64 0:9.2.24-7.el7_9 will be installed\n--> Finished Dependency Resolution\n You could try using --skip-broken to work around the problem\n** Found 5 pre-existing rpmdb problem(s), 'yum check' output follows:\n1:grub2-pc-2.02-0.87.el7.centos.7.x86_64 has missing requires of grub2-tools = ('1', '2.02', '0.87.el7.centos.7')\n1:grub2-tools-2.02-0.65.el7.centos.2.x86_64 has missing requires of grub2-common = ('1', '2.02', '0.65.el7.centos.2')\n1:grub2-tools-2.02-0.65.el7.centos.2.x86_64 has missing requires of grub2-tools-minimal = ('1', '2.02', '0.65.el7.centos.2')\n1:grub2-tools-extra-2.02-0.87.el7.centos.7.x86_64 has missing requires of grub2-tools = ('1', '2.02', '0.87.el7.centos.7')\nselinux-policy-targeted-3.13.1-252.el7_7.6.noarch has missing requires of selinux-policy = ('0', '3.13.1', '252.el7_7.6')\n"], "results_file": "/root/.ansible_async/980485837271.2793", "started": 1, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2022-04-01 01:28:43,242 p=81860 u=moonja n=ansible | fatal: [co7-slave]: FAILED! => {"ansible_job_id": "475114422034.29943", "changed": false, "changes": {"installed": ["/home/jomoon/postgresql-bdr94-bdr-1.0.5-1.el7.x86_64.rpm"]}, "finished": 1, "msg": "There are unfinished transactions remaining. You might consider running yum-complete-transaction, or \"yum-complete-transaction --cleanup-only\" and \"yum history redo last\", first to finish them. If those don't work you'll have to try removing/installing packages by hand (maybe package-cleanup can help).\nError: Package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64 (/postgresql-bdr94-bdr-1.0.5-1.el7.x86_64)\n           Requires: postgresql-bdr94-server(x86-64) >= 9.4.17_bdr1\nError: Package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64 (/postgresql-bdr94-bdr-1.0.5-1.el7.x86_64)\n           Requires: postgresql-bdr94(x86-64) >= 9.4.17_bdr1\nError: Package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64 (/postgresql-bdr94-bdr-1.0.5-1.el7.x86_64)\n           Requires: postgresql-bdr94-contrib(x86-64) >= 9.4.17_bdr1\n", "rc": 1, "results": ["Loaded plugins: fastestmirror, product-id, search-disabled-repos, subscription-\n              : manager\n\nThis system is not registered with an entitlement server. You can use subscription-manager to register.\n\nExamining /home/jomoon/postgresql-bdr94-bdr-1.0.5-1.el7.x86_64.rpm: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\nMarking /home/jomoon/postgresql-bdr94-bdr-1.0.5-1.el7.x86_64.rpm to be installed\nResolving Dependencies\n--> Running transaction check\n---> Package postgresql-bdr94-bdr.x86_64 0:1.0.5-1.el7 will be installed\n--> Processing Dependency: postgresql-bdr94(x86-64) >= 9.4.17_bdr1 for package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\nLoading mirror speeds from cached hostfile\n * base: ftp.kaist.ac.kr\n * centos-sclo-rh: ftp.kaist.ac.kr\n * extras: ftp.kaist.ac.kr\n * updates: mirror.kakao.com\n--> Processing Dependency: postgresql-bdr94-contrib(x86-64) >= 9.4.17_bdr1 for package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\n--> Processing Dependency: postgresql-bdr94-server(x86-64) >= 9.4.17_bdr1 for package: postgresql-bdr94-bdr-1.0.5-1.el7.x86_64\n--> Finished Dependency Resolution\n You could try using --skip-broken to work around the problem\n** Found 6 pre-existing rpmdb problem(s), 'yum check' output follows:\n1:NetworkManager-tui-1.18.8-2.el7_9.x86_64 has missing requires of NetworkManager = ('1', '1.18.8', '2.el7_9')\n1:NetworkManager-tui-1.18.8-2.el7_9.x86_64 has missing requires of NetworkManager-libnm(x86-64) = ('1', '1.18.8', '2.el7_9')\n1:NetworkManager-tui-1.18.8-2.el7_9.x86_64 has missing requires of libnm.so.0(libnm_1_12_0)(64bit)\n1:NetworkManager-tui-1.18.8-2.el7_9.x86_64 has missing requires of libnm.so.0(libnm_1_14_0)(64bit)\n1:NetworkManager-tui-1.18.8-2.el7_9.x86_64 has missing requires of libnm.so.0(libnm_1_16_0)(64bit)\n1:NetworkManager-tui-1.18.8-2.el7_9.x86_64 has missing requires of libnm.so.0(libnm_1_18_0)(64bit)\n"], "results_file": "/root/.ansible_async/475114422034.29943", "started": 1, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2022-04-01 01:28:43,245 p=81860 u=moonja n=ansible | PLAY RECAP ************************************************************************************************************
2022-04-01 01:28:43,246 p=81860 u=moonja n=ansible | co7-master                 : ok=2    changed=1    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2022-04-01 01:28:43,246 p=81860 u=moonja n=ansible | co7-node01                 : ok=2    changed=1    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2022-04-01 01:28:43,246 p=81860 u=moonja n=ansible | co7-node02                 : ok=2    changed=1    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2022-04-01 01:28:43,246 p=81860 u=moonja n=ansible | co7-node03                 : ok=2    changed=1    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2022-04-01 01:28:43,246 p=81860 u=moonja n=ansible | co7-slave                  : ok=2    changed=1    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2022-04-01 01:52:32,618 p=90048 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from ansible-core in version 2.14. 
Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-04-01 01:52:32,631 p=90048 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-04-01 01:52:32,922 p=90048 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 2.16. Deprecation warnings can be
 disabled by setting deprecation_warnings=False in ansible.cfg.
2022-04-01 01:52:32,960 p=90048 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgsql94-bdr/tasks/upgrade.yml is empty and had no tasks to include

2022-04-01 01:52:32,974 p=90048 u=moonja n=ansible | PLAY [all] *******************************************************************************************************************************************************
2022-04-01 01:52:32,998 p=90048 u=moonja n=ansible | TASK [Gathering Facts] *******************************************************************************************************************************************
2022-04-01 01:52:35,319 p=90048 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 01:52:35,321 p=90048 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 01:52:35,349 p=90048 u=moonja n=ansible | ok: [co7-master]
2022-04-01 01:52:35,475 p=90048 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 01:52:35,856 p=90048 u=moonja n=ansible | ok: [co7-slave]
2022-04-01 01:52:35,874 p=90048 u=moonja n=ansible | TASK [pgsql94-bdr : Check OS support] ****************************************************************************************************************************
2022-04-01 01:52:35,895 p=90048 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 01:52:35,911 p=90048 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 01:52:35,944 p=90048 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 01:52:35,946 p=90048 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 01:52:35,958 p=90048 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 01:52:35,969 p=90048 u=moonja n=ansible | TASK [pgsql94-bdr : Check packet manager support] ****************************************************************************************************************
2022-04-01 01:52:36,005 p=90048 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 01:52:36,022 p=90048 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 01:52:36,039 p=90048 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 01:52:36,041 p=90048 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 01:52:36,052 p=90048 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 01:52:36,064 p=90048 u=moonja n=ansible | TASK [pgsql94-bdr : Add bdr94 repository] ************************************************************************************************************************
2022-04-01 01:52:36,085 p=90048 u=moonja n=ansible | fatal: [co7-master]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'rhel_version' is undefined\n\nThe error appears to be in '/Users/moonja/postgres-cluster/roles/pgsql94-bdr/tasks/install.yml': line 16, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Add bdr94 repository\n  ^ here\n"}
2022-04-01 01:52:36,103 p=90048 u=moonja n=ansible | fatal: [co7-slave]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'rhel_version' is undefined\n\nThe error appears to be in '/Users/moonja/postgres-cluster/roles/pgsql94-bdr/tasks/install.yml': line 16, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Add bdr94 repository\n  ^ here\n"}
2022-04-01 01:52:36,120 p=90048 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'rhel_version' is undefined\n\nThe error appears to be in '/Users/moonja/postgres-cluster/roles/pgsql94-bdr/tasks/install.yml': line 16, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Add bdr94 repository\n  ^ here\n"}
2022-04-01 01:52:36,137 p=90048 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'rhel_version' is undefined\n\nThe error appears to be in '/Users/moonja/postgres-cluster/roles/pgsql94-bdr/tasks/install.yml': line 16, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Add bdr94 repository\n  ^ here\n"}
2022-04-01 01:52:36,149 p=90048 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'rhel_version' is undefined\n\nThe error appears to be in '/Users/moonja/postgres-cluster/roles/pgsql94-bdr/tasks/install.yml': line 16, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Add bdr94 repository\n  ^ here\n"}
2022-04-01 01:52:36,151 p=90048 u=moonja n=ansible | PLAY RECAP *******************************************************************************************************************************************************
2022-04-01 01:52:36,151 p=90048 u=moonja n=ansible | co7-master                 : ok=1    changed=0    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2022-04-01 01:52:36,151 p=90048 u=moonja n=ansible | co7-node01                 : ok=1    changed=0    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2022-04-01 01:52:36,151 p=90048 u=moonja n=ansible | co7-node02                 : ok=1    changed=0    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2022-04-01 01:52:36,151 p=90048 u=moonja n=ansible | co7-node03                 : ok=1    changed=0    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2022-04-01 01:52:36,151 p=90048 u=moonja n=ansible | co7-slave                  : ok=1    changed=0    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2022-04-01 01:53:10,354 p=90279 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from ansible-core in version 2.14. 
Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-04-01 01:53:10,365 p=90279 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-04-01 01:53:10,620 p=90279 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 2.16. Deprecation warnings can be
 disabled by setting deprecation_warnings=False in ansible.cfg.
2022-04-01 01:53:10,658 p=90279 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgsql94-bdr/tasks/upgrade.yml is empty and had no tasks to include

2022-04-01 01:53:10,674 p=90279 u=moonja n=ansible | PLAY [all] *******************************************************************************************************************************************************
2022-04-01 01:53:10,697 p=90279 u=moonja n=ansible | TASK [Gathering Facts] *******************************************************************************************************************************************
2022-04-01 01:53:12,786 p=90279 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 01:53:12,792 p=90279 u=moonja n=ansible | ok: [co7-master]
2022-04-01 01:53:12,812 p=90279 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 01:53:12,888 p=90279 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 01:53:13,388 p=90279 u=moonja n=ansible | ok: [co7-slave]
2022-04-01 01:53:13,407 p=90279 u=moonja n=ansible | TASK [pgsql94-bdr : Check OS support] ****************************************************************************************************************************
2022-04-01 01:53:13,444 p=90279 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 01:53:13,460 p=90279 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 01:53:13,478 p=90279 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 01:53:13,478 p=90279 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 01:53:13,490 p=90279 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 01:53:13,501 p=90279 u=moonja n=ansible | TASK [pgsql94-bdr : Check packet manager support] ****************************************************************************************************************
2022-04-01 01:53:13,536 p=90279 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 01:53:13,553 p=90279 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 01:53:13,570 p=90279 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 01:53:13,571 p=90279 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 01:53:13,582 p=90279 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 01:53:13,593 p=90279 u=moonja n=ansible | TASK [pgsql94-bdr : Add bdr94 repository] ************************************************************************************************************************
2022-04-01 01:53:14,235 p=90279 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:53:14,238 p=90279 u=moonja n=ansible | changed: [co7-slave]
2022-04-01 01:53:14,238 p=90279 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:53:14,264 p=90279 u=moonja n=ansible | changed: [co7-master]
2022-04-01 01:53:14,271 p=90279 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:53:14,280 p=90279 u=moonja n=ansible | TASK [pgsql94-bdr : debug] ***************************************************************************************************************************************
2022-04-01 01:53:14,317 p=90279 u=moonja n=ansible | ok: [co7-master] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 01:53:14,335 p=90279 u=moonja n=ansible | ok: [co7-slave] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 01:53:14,351 p=90279 u=moonja n=ansible | ok: [co7-node01] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 01:53:14,354 p=90279 u=moonja n=ansible | ok: [co7-node02] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 01:53:14,366 p=90279 u=moonja n=ansible | ok: [co7-node03] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 01:53:14,376 p=90279 u=moonja n=ansible | TASK [pgsql94-bdr : meta] ****************************************************************************************************************************************
2022-04-01 01:53:14,384 p=90279 u=moonja n=ansible | PLAY RECAP *******************************************************************************************************************************************************
2022-04-01 01:53:14,384 p=90279 u=moonja n=ansible | co7-master                 : ok=3    changed=1    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2022-04-01 01:53:14,384 p=90279 u=moonja n=ansible | co7-node01                 : ok=3    changed=1    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2022-04-01 01:53:14,384 p=90279 u=moonja n=ansible | co7-node02                 : ok=3    changed=1    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2022-04-01 01:53:14,384 p=90279 u=moonja n=ansible | co7-node03                 : ok=3    changed=1    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2022-04-01 01:53:14,384 p=90279 u=moonja n=ansible | co7-slave                  : ok=3    changed=1    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2022-04-01 01:53:58,086 p=90587 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from ansible-core in version 2.14. 
Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-04-01 01:53:58,096 p=90587 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-04-01 01:53:58,340 p=90587 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 2.16. Deprecation warnings can be
 disabled by setting deprecation_warnings=False in ansible.cfg.
2022-04-01 01:53:58,376 p=90587 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgsql94-bdr/tasks/upgrade.yml is empty and had no tasks to include

2022-04-01 01:53:58,391 p=90587 u=moonja n=ansible | PLAY [all] *******************************************************************************************************************************************************
2022-04-01 01:53:58,411 p=90587 u=moonja n=ansible | TASK [Gathering Facts] *******************************************************************************************************************************************
2022-04-01 01:54:00,681 p=90587 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 01:54:00,704 p=90587 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 01:54:00,707 p=90587 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 01:54:00,732 p=90587 u=moonja n=ansible | ok: [co7-master]
2022-04-01 01:54:01,187 p=90587 u=moonja n=ansible | ok: [co7-slave]
2022-04-01 01:54:01,204 p=90587 u=moonja n=ansible | TASK [pgsql94-bdr : Check OS support] ****************************************************************************************************************************
2022-04-01 01:54:01,241 p=90587 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 01:54:01,256 p=90587 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 01:54:01,273 p=90587 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 01:54:01,275 p=90587 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 01:54:01,286 p=90587 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 01:54:01,297 p=90587 u=moonja n=ansible | TASK [pgsql94-bdr : Check packet manager support] ****************************************************************************************************************
2022-04-01 01:54:01,317 p=90587 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 01:54:01,334 p=90587 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 01:54:01,366 p=90587 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 01:54:01,367 p=90587 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 01:54:01,379 p=90587 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 01:54:01,389 p=90587 u=moonja n=ansible | TASK [pgsql94-bdr : Add bdr94 repository] ************************************************************************************************************************
2022-04-01 01:54:02,143 p=90587 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:54:02,143 p=90587 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:54:02,155 p=90587 u=moonja n=ansible | changed: [co7-master]
2022-04-01 01:54:02,162 p=90587 u=moonja n=ansible | changed: [co7-slave]
2022-04-01 01:54:02,163 p=90587 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:54:02,172 p=90587 u=moonja n=ansible | TASK [pgsql94-bdr : debug] ***************************************************************************************************************************************
2022-04-01 01:54:02,211 p=90587 u=moonja n=ansible | ok: [co7-master] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 01:54:02,229 p=90587 u=moonja n=ansible | ok: [co7-slave] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 01:54:02,246 p=90587 u=moonja n=ansible | ok: [co7-node01] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 01:54:02,247 p=90587 u=moonja n=ansible | ok: [co7-node02] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 01:54:02,260 p=90587 u=moonja n=ansible | ok: [co7-node03] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 01:54:02,271 p=90587 u=moonja n=ansible | TASK [pgsql94-bdr : Install PostgreSQL BDR packages] *************************************************************************************************************
2022-04-01 01:54:02,296 p=90587 u=moonja n=ansible | skipping: [co7-master] => (item=python-psycopg2) 
2022-04-01 01:54:02,297 p=90587 u=moonja n=ansible | skipping: [co7-master] => (item=postgresql-bdr94-bdr) 
2022-04-01 01:54:02,312 p=90587 u=moonja n=ansible | skipping: [co7-slave] => (item=python-psycopg2) 
2022-04-01 01:54:02,313 p=90587 u=moonja n=ansible | skipping: [co7-slave] => (item=postgresql-bdr94-bdr) 
2022-04-01 01:54:37,165 p=90587 u=moonja n=ansible | changed: [co7-node01] => (item=python-psycopg2)
2022-04-01 01:54:37,186 p=90587 u=moonja n=ansible | changed: [co7-node02] => (item=python-psycopg2)
2022-04-01 01:54:37,445 p=90587 u=moonja n=ansible | changed: [co7-node03] => (item=python-psycopg2)
2022-04-01 01:55:00,181 p=90587 u=moonja n=ansible | changed: [co7-node01] => (item=postgresql-bdr94-bdr)
2022-04-01 01:55:00,585 p=90587 u=moonja n=ansible | changed: [co7-node03] => (item=postgresql-bdr94-bdr)
2022-04-01 01:55:06,663 p=90587 u=moonja n=ansible | changed: [co7-node02] => (item=postgresql-bdr94-bdr)
2022-04-01 01:55:06,677 p=90587 u=moonja n=ansible | TASK [pgsql94-bdr : meta] ****************************************************************************************************************************************
2022-04-01 01:55:06,686 p=90587 u=moonja n=ansible | PLAY RECAP *******************************************************************************************************************************************************
2022-04-01 01:55:06,686 p=90587 u=moonja n=ansible | co7-master                 : ok=3    changed=1    unreachable=0    failed=0    skipped=3    rescued=0    ignored=0   
2022-04-01 01:55:06,686 p=90587 u=moonja n=ansible | co7-node01                 : ok=4    changed=2    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2022-04-01 01:55:06,687 p=90587 u=moonja n=ansible | co7-node02                 : ok=4    changed=2    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2022-04-01 01:55:06,687 p=90587 u=moonja n=ansible | co7-node03                 : ok=4    changed=2    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2022-04-01 01:55:06,687 p=90587 u=moonja n=ansible | co7-slave                  : ok=3    changed=1    unreachable=0    failed=0    skipped=3    rescued=0    ignored=0   
2022-04-01 01:55:40,368 p=91060 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from ansible-core in version 2.14. 
Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-04-01 01:55:40,378 p=91060 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-04-01 01:55:40,601 p=91060 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 2.16. Deprecation warnings can be
 disabled by setting deprecation_warnings=False in ansible.cfg.
2022-04-01 01:55:40,637 p=91060 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgsql94-bdr/tasks/upgrade.yml is empty and had no tasks to include

2022-04-01 01:55:40,649 p=91060 u=moonja n=ansible | PLAY [all] *******************************************************************************************************************************************************
2022-04-01 01:55:40,670 p=91060 u=moonja n=ansible | TASK [Gathering Facts] *******************************************************************************************************************************************
2022-04-01 01:55:42,868 p=91060 u=moonja n=ansible | ok: [co7-master]
2022-04-01 01:55:42,870 p=91060 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 01:55:42,932 p=91060 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 01:55:42,953 p=91060 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 01:55:43,304 p=91060 u=moonja n=ansible | ok: [co7-slave]
2022-04-01 01:55:43,322 p=91060 u=moonja n=ansible | TASK [pgsql94-bdr : Check OS support] ****************************************************************************************************************************
2022-04-01 01:55:43,344 p=91060 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 01:55:43,361 p=91060 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 01:55:43,393 p=91060 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 01:55:43,395 p=91060 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 01:55:43,406 p=91060 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 01:55:43,417 p=91060 u=moonja n=ansible | TASK [pgsql94-bdr : Check packet manager support] ****************************************************************************************************************
2022-04-01 01:55:43,437 p=91060 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 01:55:43,469 p=91060 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 01:55:43,486 p=91060 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 01:55:43,488 p=91060 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 01:55:43,499 p=91060 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 01:55:43,509 p=91060 u=moonja n=ansible | TASK [pgsql94-bdr : Add bdr94 repository] ************************************************************************************************************************
2022-04-01 01:55:44,186 p=91060 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:55:44,187 p=91060 u=moonja n=ansible | changed: [co7-master]
2022-04-01 01:55:44,193 p=91060 u=moonja n=ansible | changed: [co7-slave]
2022-04-01 01:55:44,198 p=91060 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:55:44,206 p=91060 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:55:44,217 p=91060 u=moonja n=ansible | TASK [pgsql94-bdr : debug] ***************************************************************************************************************************************
2022-04-01 01:55:44,254 p=91060 u=moonja n=ansible | ok: [co7-master] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 01:55:44,272 p=91060 u=moonja n=ansible | ok: [co7-slave] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 01:55:44,287 p=91060 u=moonja n=ansible | ok: [co7-node01] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 01:55:44,289 p=91060 u=moonja n=ansible | ok: [co7-node02] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 01:55:44,301 p=91060 u=moonja n=ansible | ok: [co7-node03] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 01:55:44,313 p=91060 u=moonja n=ansible | TASK [pgsql94-bdr : Install PostgreSQL BDR packages] *************************************************************************************************************
2022-04-01 01:55:44,338 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item=python-psycopg2) 
2022-04-01 01:55:44,339 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item=postgresql-bdr94-bdr) 
2022-04-01 01:55:44,353 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item=python-psycopg2) 
2022-04-01 01:55:44,354 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item=postgresql-bdr94-bdr) 
2022-04-01 01:55:48,590 p=91060 u=moonja n=ansible | ok: [co7-node01] => (item=python-psycopg2)
2022-04-01 01:55:49,039 p=91060 u=moonja n=ansible | ok: [co7-node03] => (item=python-psycopg2)
2022-04-01 01:55:49,152 p=91060 u=moonja n=ansible | ok: [co7-node02] => (item=python-psycopg2)
2022-04-01 01:55:51,029 p=91060 u=moonja n=ansible | ok: [co7-node01] => (item=postgresql-bdr94-bdr)
2022-04-01 01:55:51,946 p=91060 u=moonja n=ansible | ok: [co7-node03] => (item=postgresql-bdr94-bdr)
2022-04-01 01:55:52,071 p=91060 u=moonja n=ansible | ok: [co7-node02] => (item=postgresql-bdr94-bdr)
2022-04-01 01:55:52,086 p=91060 u=moonja n=ansible | TASK [pgsql94-bdr : Stop PostgreSQL if are running] **************************************************************************************************************
2022-04-01 01:55:52,109 p=91060 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 01:55:52,140 p=91060 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 01:55:52,810 p=91060 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "stop"], "delta": "0:00:00.030557", "end": "2022-04-01 01:55:52.968090", "msg": "non-zero return code", "rc": 1, "start": "2022-04-01 01:55:52.937533", "stderr": "pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory", "stderr_lines": ["pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory"], "stdout": "", "stdout_lines": []}
2022-04-01 01:55:52,810 p=91060 u=moonja n=ansible | ...ignoring
2022-04-01 01:55:52,824 p=91060 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "stop"], "delta": "0:00:00.030989", "end": "2022-04-01 01:55:52.988514", "msg": "non-zero return code", "rc": 1, "start": "2022-04-01 01:55:52.957525", "stderr": "pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory", "stderr_lines": ["pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory"], "stdout": "", "stdout_lines": []}
2022-04-01 01:55:52,824 p=91060 u=moonja n=ansible | ...ignoring
2022-04-01 01:55:52,824 p=91060 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "stop"], "delta": "0:00:00.030519", "end": "2022-04-01 01:55:52.989154", "msg": "non-zero return code", "rc": 1, "start": "2022-04-01 01:55:52.958635", "stderr": "pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory", "stderr_lines": ["pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory"], "stdout": "", "stdout_lines": []}
2022-04-01 01:55:52,825 p=91060 u=moonja n=ansible | ...ignoring
2022-04-01 01:55:52,837 p=91060 u=moonja n=ansible | TASK [pgsql94-bdr : Remove old PostgreSQL data directory if exists] **********************************************************************************************
2022-04-01 01:55:52,896 p=91060 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 01:55:52,914 p=91060 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 01:55:53,566 p=91060 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:55:53,566 p=91060 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:55:53,567 p=91060 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:55:53,576 p=91060 u=moonja n=ansible | TASK [pgsql94-bdr : Initialize new PostgreSQL BDR cluster on upstream server] ************************************************************************************
2022-04-01 01:55:53,596 p=91060 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 01:55:53,614 p=91060 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 01:56:12,169 p=91060 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:56:15,075 p=91060 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:56:16,639 p=91060 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:56:16,648 p=91060 u=moonja n=ansible | TASK [pgsql94-bdr : Configure pg_hba.conf for basic authentication] **********************************************************************************************
2022-04-01 01:56:16,674 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'}) 
2022-04-01 01:56:16,675 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'}) 
2022-04-01 01:56:16,679 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'}) 
2022-04-01 01:56:16,680 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'}) 
2022-04-01 01:56:16,691 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'}) 
2022-04-01 01:56:16,693 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'}) 
2022-04-01 01:56:16,696 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'}) 
2022-04-01 01:56:16,696 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'}) 
2022-04-01 01:56:17,358 p=91060 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'})
2022-04-01 01:56:17,366 p=91060 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'})
2022-04-01 01:56:17,367 p=91060 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'})
2022-04-01 01:56:17,783 p=91060 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'})
2022-04-01 01:56:17,797 p=91060 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'})
2022-04-01 01:56:17,811 p=91060 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'})
2022-04-01 01:56:18,194 p=91060 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'})
2022-04-01 01:56:18,210 p=91060 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'})
2022-04-01 01:56:18,212 p=91060 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'})
2022-04-01 01:56:18,579 p=91060 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'})
2022-04-01 01:56:18,624 p=91060 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'})
2022-04-01 01:56:18,625 p=91060 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'})
2022-04-01 01:56:18,638 p=91060 u=moonja n=ansible | TASK [pgsql94-bdr : Configure pg_hba.conf to enable communication with password authentication between servers] **************************************************
2022-04-01 01:56:18,699 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.100.82']) 
2022-04-01 01:56:18,700 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.100.83']) 
2022-04-01 01:56:18,706 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.100.84']) 
2022-04-01 01:56:18,707 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.100.85']) 
2022-04-01 01:56:18,714 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.100.82']) 
2022-04-01 01:56:18,716 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.100.83']) 
2022-04-01 01:56:18,720 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.100.84']) 
2022-04-01 01:56:18,720 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.100.85']) 
2022-04-01 01:56:19,211 p=91060 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.100.82'])
2022-04-01 01:56:19,231 p=91060 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.100.82'])
2022-04-01 01:56:19,232 p=91060 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.100.82'])
2022-04-01 01:56:19,610 p=91060 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.100.83'])
2022-04-01 01:56:19,660 p=91060 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.100.83'])
2022-04-01 01:56:19,663 p=91060 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.100.83'])
2022-04-01 01:56:20,018 p=91060 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.100.84'])
2022-04-01 01:56:20,099 p=91060 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.100.84'])
2022-04-01 01:56:20,100 p=91060 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.100.84'])
2022-04-01 01:56:20,464 p=91060 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.100.85'])
2022-04-01 01:56:20,566 p=91060 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.100.85'])
2022-04-01 01:56:20,566 p=91060 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.100.85'])
2022-04-01 01:56:20,580 p=91060 u=moonja n=ansible | TASK [pgsql94-bdr : Configure pg_hba.conf to enable communication with trust authentication between servers] *****************************************************
2022-04-01 01:56:20,643 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.100.82']) 
2022-04-01 01:56:20,644 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.100.83']) 
2022-04-01 01:56:20,650 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.100.84']) 
2022-04-01 01:56:20,653 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.100.85']) 
2022-04-01 01:56:20,658 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.100.82']) 
2022-04-01 01:56:20,658 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.100.83']) 
2022-04-01 01:56:20,659 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.100.84']) 
2022-04-01 01:56:20,659 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.100.85']) 
2022-04-01 01:56:20,660 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.100.82']) 
2022-04-01 01:56:20,661 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.100.83']) 
2022-04-01 01:56:20,664 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.100.84']) 
2022-04-01 01:56:20,670 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.100.85']) 
2022-04-01 01:56:20,675 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.100.82']) 
2022-04-01 01:56:20,676 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.100.83']) 
2022-04-01 01:56:20,676 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.100.84']) 
2022-04-01 01:56:20,677 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.100.85']) 
2022-04-01 01:56:21,164 p=91060 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.100.82'])
2022-04-01 01:56:21,171 p=91060 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.100.82'])
2022-04-01 01:56:21,172 p=91060 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.100.82'])
2022-04-01 01:56:21,592 p=91060 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.100.83'])
2022-04-01 01:56:21,608 p=91060 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.100.83'])
2022-04-01 01:56:21,608 p=91060 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.100.83'])
2022-04-01 01:56:22,086 p=91060 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.100.84'])
2022-04-01 01:56:22,086 p=91060 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.100.84'])
2022-04-01 01:56:22,088 p=91060 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.100.84'])
2022-04-01 01:56:22,490 p=91060 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.100.85'])
2022-04-01 01:56:22,531 p=91060 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.100.85'])
2022-04-01 01:56:22,532 p=91060 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.100.85'])
2022-04-01 01:56:22,993 p=91060 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.100.82'])
2022-04-01 01:56:23,041 p=91060 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.100.82'])
2022-04-01 01:56:23,041 p=91060 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.100.82'])
2022-04-01 01:56:23,411 p=91060 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.100.83'])
2022-04-01 01:56:23,457 p=91060 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.100.83'])
2022-04-01 01:56:23,458 p=91060 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.100.83'])
2022-04-01 01:56:23,826 p=91060 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.100.84'])
2022-04-01 01:56:23,871 p=91060 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.100.84'])
2022-04-01 01:56:23,872 p=91060 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.100.84'])
2022-04-01 01:56:24,236 p=91060 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.100.85'])
2022-04-01 01:56:24,274 p=91060 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.100.85'])
2022-04-01 01:56:24,277 p=91060 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.100.85'])
2022-04-01 01:56:24,290 p=91060 u=moonja n=ansible | TASK [pgsql94-bdr : Configure postgresql.conf with shared GUCs of PostgreSQL for BDR] ****************************************************************************
2022-04-01 01:56:24,316 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"}) 
2022-04-01 01:56:24,323 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'}) 
2022-04-01 01:56:24,323 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'}) 
2022-04-01 01:56:24,324 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"}) 
2022-04-01 01:56:24,331 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'}) 
2022-04-01 01:56:24,332 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"}) 
2022-04-01 01:56:24,332 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'}) 
2022-04-01 01:56:24,333 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"}) 
2022-04-01 01:56:24,334 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'}) 
2022-04-01 01:56:24,340 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'}) 
2022-04-01 01:56:24,341 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"}) 
2022-04-01 01:56:24,350 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'}) 
2022-04-01 01:56:24,351 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"}) 
2022-04-01 01:56:24,353 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'}) 
2022-04-01 01:56:24,841 p=91060 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"})
2022-04-01 01:56:24,861 p=91060 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"})
2022-04-01 01:56:24,868 p=91060 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"})
2022-04-01 01:56:25,252 p=91060 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'})
2022-04-01 01:56:25,318 p=91060 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'})
2022-04-01 01:56:25,327 p=91060 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'})
2022-04-01 01:56:25,680 p=91060 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'})
2022-04-01 01:56:25,751 p=91060 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'})
2022-04-01 01:56:25,766 p=91060 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'})
2022-04-01 01:56:26,089 p=91060 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"})
2022-04-01 01:56:26,234 p=91060 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"})
2022-04-01 01:56:26,235 p=91060 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"})
2022-04-01 01:56:26,502 p=91060 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'})
2022-04-01 01:56:26,695 p=91060 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'})
2022-04-01 01:56:26,696 p=91060 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'})
2022-04-01 01:56:26,916 p=91060 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"})
2022-04-01 01:56:27,129 p=91060 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"})
2022-04-01 01:56:27,135 p=91060 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"})
2022-04-01 01:56:27,316 p=91060 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'})
2022-04-01 01:56:27,546 p=91060 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'})
2022-04-01 01:56:27,555 p=91060 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'})
2022-04-01 01:56:27,576 p=91060 u=moonja n=ansible | TASK [pgsql94-bdr : Start PostgreSQL] ****************************************************************************************************************************
2022-04-01 01:56:27,616 p=91060 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 01:56:27,631 p=91060 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 01:56:29,158 p=91060 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 01:56:29,164 p=91060 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 01:56:29,178 p=91060 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 01:56:29,189 p=91060 u=moonja n=ansible | TASK [pgsql94-bdr : Configure Primary Master's postgresql.conf] **************************************************************************************************
2022-04-01 01:56:29,226 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 01:56:29,227 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.demo_dsn = 'host=192.168.100.81 dbname=bdrdemo user=postgres'"}) 
2022-04-01 01:56:29,243 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 01:56:29,243 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.demo_dsn = 'host=192.168.100.82 dbname=bdrdemo user=postgres'"}) 
2022-04-01 01:56:29,731 p=91060 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 01:56:29,738 p=91060 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 01:56:29,759 p=91060 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 01:56:30,133 p=91060 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': "bdr.demo_dsn = 'host=192.168.100.83 dbname=bdrdemo user=postgres'"})
2022-04-01 01:56:30,136 p=91060 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.demo_dsn = 'host=192.168.100.84 dbname=bdrdemo user=postgres'"})
2022-04-01 01:56:30,167 p=91060 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.demo_dsn = 'host=192.168.100.85 dbname=bdrdemo user=postgres'"})
2022-04-01 01:56:30,179 p=91060 u=moonja n=ansible | TASK [pgsql94-bdr : Configure Slave Master's postgresql.conf] ****************************************************************************************************
2022-04-01 01:56:30,217 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 01:56:30,219 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.demo_dsn = 'host=192.168.100.83 dbname=bdrdemo user=postgres'"}) 
2022-04-01 01:56:30,222 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': 'bdr.demo_init_replica = on'}) 
2022-04-01 01:56:30,223 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"}) 
2022-04-01 01:56:30,238 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 01:56:30,240 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.demo_dsn = 'host=192.168.100.83 dbname=bdrdemo user=postgres'"}) 
2022-04-01 01:56:30,242 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': 'bdr.demo_init_replica = on'}) 
2022-04-01 01:56:30,243 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"}) 
2022-04-01 01:56:30,783 p=91060 u=moonja n=ansible | ok: [co7-node01] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 01:56:30,785 p=91060 u=moonja n=ansible | ok: [co7-node03] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 01:56:30,787 p=91060 u=moonja n=ansible | ok: [co7-node02] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 01:56:31,199 p=91060 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.demo_dsn = 'host=192.168.100.83 dbname=bdrdemo user=postgres'"})
2022-04-01 01:56:31,215 p=91060 u=moonja n=ansible | ok: [co7-node01] => (item={'guc': "bdr.demo_dsn = 'host=192.168.100.83 dbname=bdrdemo user=postgres'"})
2022-04-01 01:56:31,215 p=91060 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.demo_dsn = 'host=192.168.100.83 dbname=bdrdemo user=postgres'"})
2022-04-01 01:56:31,611 p=91060 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': 'bdr.demo_init_replica = on'})
2022-04-01 01:56:31,630 p=91060 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': 'bdr.demo_init_replica = on'})
2022-04-01 01:56:31,642 p=91060 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': 'bdr.demo_init_replica = on'})
2022-04-01 01:56:32,028 p=91060 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"})
2022-04-01 01:56:32,030 p=91060 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"})
2022-04-01 01:56:32,070 p=91060 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"})
2022-04-01 01:56:32,081 p=91060 u=moonja n=ansible | TASK [pgsql94-bdr : Final PostgreSQL restart] ********************************************************************************************************************
2022-04-01 01:56:32,102 p=91060 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 01:56:32,120 p=91060 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 01:56:38,857 p=91060 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"ansible_job_id": "580989633305.21162", "changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "restart"], "delta": "0:00:00.030887", "end": "2022-04-01 01:56:33.164297", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/var/lib/pgsql/.ansible_async/580989633305.21162", "start": "2022-04-01 01:56:33.133410", "started": 1, "stderr": "pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist\nIs server running?\nstarting server anyway\npg_ctl: could not read file \"/var/lib/pgsql/9.4-bdr/data/postmaster.opts\"", "stderr_lines": ["pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist", "Is server running?", "starting server anyway", "pg_ctl: could not read file \"/var/lib/pgsql/9.4-bdr/data/postmaster.opts\""], "stdout": "", "stdout_lines": []}
2022-04-01 01:56:38,919 p=91060 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"ansible_job_id": "661349534089.20949", "changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "restart"], "delta": "0:00:00.030263", "end": "2022-04-01 01:56:33.192345", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/var/lib/pgsql/.ansible_async/661349534089.20949", "start": "2022-04-01 01:56:33.162082", "started": 1, "stderr": "pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist\nIs server running?\nstarting server anyway\npg_ctl: could not read file \"/var/lib/pgsql/9.4-bdr/data/postmaster.opts\"", "stderr_lines": ["pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist", "Is server running?", "starting server anyway", "pg_ctl: could not read file \"/var/lib/pgsql/9.4-bdr/data/postmaster.opts\""], "stdout": "", "stdout_lines": []}
2022-04-01 01:56:39,074 p=91060 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"ansible_job_id": "601940334706.344", "changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "restart"], "delta": "0:00:00.030554", "end": "2022-04-01 01:56:33.197700", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/var/lib/pgsql/.ansible_async/601940334706.344", "start": "2022-04-01 01:56:33.167146", "started": 1, "stderr": "pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist\nIs server running?\nstarting server anyway\npg_ctl: could not read file \"/var/lib/pgsql/9.4-bdr/data/postmaster.opts\"", "stderr_lines": ["pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist", "Is server running?", "starting server anyway", "pg_ctl: could not read file \"/var/lib/pgsql/9.4-bdr/data/postmaster.opts\""], "stdout": "", "stdout_lines": []}
2022-04-01 01:56:39,083 p=91060 u=moonja n=ansible | TASK [pgsql94-bdr : Create database to sync between Master Servers] **********************************************************************************************
2022-04-01 01:56:39,107 p=91060 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 01:56:39,121 p=91060 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 01:56:39,131 p=91060 u=moonja n=ansible | TASK [pgsql94-bdr : Connect to database, create user and grant access for all Master Servers] ********************************************************************
2022-04-01 01:56:39,153 p=91060 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 01:56:39,165 p=91060 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 01:56:39,177 p=91060 u=moonja n=ansible | TASK [pgsql94-bdr : Create extentions for BDR] *******************************************************************************************************************
2022-04-01 01:56:39,205 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item=CREATE EXTENSION btree_gist;) 
2022-04-01 01:56:39,207 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item=CREATE EXTENSION bdr;) 
2022-04-01 01:56:39,220 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item=CREATE EXTENSION btree_gist;) 
2022-04-01 01:56:39,221 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item=CREATE EXTENSION bdr;) 
2022-04-01 01:56:39,234 p=91060 u=moonja n=ansible | TASK [pgsql94-bdr : Create group on Primary Master Server for BDR] ***********************************************************************************************
2022-04-01 01:56:39,280 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item=SELECT bdr.bdr_group_create ( local_node_name := 'co7-master', node_external_dsn := 'host=192.168.100.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-01 01:56:39,296 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item=SELECT bdr.bdr_group_create ( local_node_name := 'co7-slave', node_external_dsn := 'host=192.168.100.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-01 01:56:39,308 p=91060 u=moonja n=ansible | TASK [pgsql94-bdr : Join group from other Master Servers] ********************************************************************************************************
2022-04-01 01:56:39,351 p=91060 u=moonja n=ansible | skipping: [co7-master] => (item=SELECT bdr.bdr_group_join ( local_node_name := 'co7-master', node_external_dsn := 'host=192.168.100.81 user=bdrsync dbname=bdrdemo password=changeme', join_using_dsn := 'host=192.168.100.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-01 01:56:39,366 p=91060 u=moonja n=ansible | skipping: [co7-slave] => (item=SELECT bdr.bdr_group_join ( local_node_name := 'co7-slave', node_external_dsn := 'host=192.168.100.82 user=bdrsync dbname=bdrdemo password=changeme', join_using_dsn := 'host=192.168.100.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-01 01:56:39,400 p=91060 u=moonja n=ansible | PLAY RECAP *******************************************************************************************************************************************************
2022-04-01 01:56:39,400 p=91060 u=moonja n=ansible | co7-master                 : ok=3    changed=1    unreachable=0    failed=0    skipped=19   rescued=0    ignored=0   
2022-04-01 01:56:39,400 p=91060 u=moonja n=ansible | co7-node01                 : ok=14   changed=11   unreachable=0    failed=1    skipped=2    rescued=0    ignored=1   
2022-04-01 01:56:39,400 p=91060 u=moonja n=ansible | co7-node02                 : ok=14   changed=11   unreachable=0    failed=1    skipped=2    rescued=0    ignored=1   
2022-04-01 01:56:39,401 p=91060 u=moonja n=ansible | co7-node03                 : ok=14   changed=11   unreachable=0    failed=1    skipped=2    rescued=0    ignored=1   
2022-04-01 01:56:39,401 p=91060 u=moonja n=ansible | co7-slave                  : ok=3    changed=1    unreachable=0    failed=0    skipped=19   rescued=0    ignored=0   
2022-04-01 02:00:19,934 p=94113 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from 
ansible-core in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-04-01 02:00:19,947 p=94113 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-04-01 02:00:20,229 p=94113 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 
2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-04-01 02:00:20,264 p=94113 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgsql94-bdr/tasks/upgrade.yml is empty and had no tasks to include

2022-04-01 02:00:20,279 p=94113 u=moonja n=ansible | PLAY [all] ************************************************************************************************************************
2022-04-01 02:00:20,298 p=94113 u=moonja n=ansible | TASK [Gathering Facts] ************************************************************************************************************
2022-04-01 02:00:22,677 p=94113 u=moonja n=ansible | ok: [co7-master]
2022-04-01 02:00:22,721 p=94113 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 02:00:22,723 p=94113 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 02:00:22,753 p=94113 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 02:00:23,222 p=94113 u=moonja n=ansible | ok: [co7-slave]
2022-04-01 02:00:23,239 p=94113 u=moonja n=ansible | TASK [pgsql94-bdr : Check OS support] *********************************************************************************************
2022-04-01 02:00:23,258 p=94113 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:00:23,288 p=94113 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:00:23,303 p=94113 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 02:00:23,305 p=94113 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 02:00:23,315 p=94113 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 02:00:23,326 p=94113 u=moonja n=ansible | TASK [pgsql94-bdr : Check if PostgreSQL is running] *******************************************************************************
2022-04-01 02:00:23,348 p=94113 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:00:23,363 p=94113 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:00:24,068 p=94113 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "status"], "delta": "0:00:00.030132", "end": "2022-04-01 02:00:24.218301", "msg": "non-zero return code", "rc": 3, "start": "2022-04-01 02:00:24.188169", "stderr": "", "stderr_lines": [], "stdout": "pg_ctl: no server running", "stdout_lines": ["pg_ctl: no server running"]}
2022-04-01 02:00:24,075 p=94113 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "status"], "delta": "0:00:00.032147", "end": "2022-04-01 02:00:24.227975", "msg": "non-zero return code", "rc": 3, "start": "2022-04-01 02:00:24.195828", "stderr": "", "stderr_lines": [], "stdout": "pg_ctl: no server running", "stdout_lines": ["pg_ctl: no server running"]}
2022-04-01 02:00:24,080 p=94113 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "status"], "delta": "0:00:00.031366", "end": "2022-04-01 02:00:24.234546", "msg": "non-zero return code", "rc": 3, "start": "2022-04-01 02:00:24.203180", "stderr": "", "stderr_lines": [], "stdout": "pg_ctl: no server running", "stdout_lines": ["pg_ctl: no server running"]}
2022-04-01 02:00:24,090 p=94113 u=moonja n=ansible | TASK [pgsql94-bdr : Start PostgreSQL] *********************************************************************************************
2022-04-01 02:00:24,111 p=94113 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:00:24,121 p=94113 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:00:24,132 p=94113 u=moonja n=ansible | TASK [pgsql94-bdr : Check if database is available] *******************************************************************************
2022-04-01 02:00:24,153 p=94113 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:00:24,163 p=94113 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:00:24,174 p=94113 u=moonja n=ansible | TASK [pgsql94-bdr : Remove logical replications of BDR] ***************************************************************************
2022-04-01 02:00:24,194 p=94113 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:00:24,207 p=94113 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:00:24,216 p=94113 u=moonja n=ansible | TASK [pgsql94-bdr : Check if database is existed] *********************************************************************************
2022-04-01 02:00:24,236 p=94113 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:00:24,249 p=94113 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:00:24,259 p=94113 u=moonja n=ansible | TASK [pgsql94-bdr : Kill all postgresql connections for removing session held by user] ********************************************
2022-04-01 02:00:24,278 p=94113 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:00:24,291 p=94113 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:00:24,300 p=94113 u=moonja n=ansible | TASK [pgsql94-bdr : Drop the database] ********************************************************************************************
2022-04-01 02:00:24,321 p=94113 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:00:24,333 p=94113 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:00:24,343 p=94113 u=moonja n=ansible | TASK [pgsql94-bdr : Stop PostgreSQL if are running] *******************************************************************************
2022-04-01 02:00:24,362 p=94113 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:00:24,376 p=94113 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:00:24,384 p=94113 u=moonja n=ansible | TASK [pgsql94-bdr : Remove old PostgreSQL data directory if exists] ***************************************************************
2022-04-01 02:00:24,407 p=94113 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:00:24,417 p=94113 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:00:24,428 p=94113 u=moonja n=ansible | TASK [pgsql94-bdr : Check package manager support] ********************************************************************************
2022-04-01 02:00:24,448 p=94113 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:00:24,460 p=94113 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:00:24,471 p=94113 u=moonja n=ansible | TASK [pgsql94-bdr : Remove PostgreSQL BDR packages] *******************************************************************************
2022-04-01 02:00:24,493 p=94113 u=moonja n=ansible | skipping: [co7-master] => (item=python-psycopg2) 
2022-04-01 02:00:24,494 p=94113 u=moonja n=ansible | skipping: [co7-master] => (item=postgresql-bdr94) 
2022-04-01 02:00:24,497 p=94113 u=moonja n=ansible | skipping: [co7-master] => (item=postgresql-bdr94-bdr) 
2022-04-01 02:00:24,498 p=94113 u=moonja n=ansible | skipping: [co7-master] => (item=postgresql-bdr94-2ndquadrant-redhat) 
2022-04-01 02:00:24,507 p=94113 u=moonja n=ansible | skipping: [co7-slave] => (item=python-psycopg2) 
2022-04-01 02:00:24,510 p=94113 u=moonja n=ansible | skipping: [co7-slave] => (item=postgresql-bdr94) 
2022-04-01 02:00:24,513 p=94113 u=moonja n=ansible | skipping: [co7-slave] => (item=postgresql-bdr94-bdr) 
2022-04-01 02:00:24,513 p=94113 u=moonja n=ansible | skipping: [co7-slave] => (item=postgresql-bdr94-2ndquadrant-redhat) 
2022-04-01 02:00:24,546 p=94113 u=moonja n=ansible | PLAY RECAP ************************************************************************************************************************
2022-04-01 02:00:24,546 p=94113 u=moonja n=ansible | co7-master                 : ok=1    changed=0    unreachable=0    failed=0    skipped=12   rescued=0    ignored=0   
2022-04-01 02:00:24,546 p=94113 u=moonja n=ansible | co7-node01                 : ok=1    changed=0    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2022-04-01 02:00:24,546 p=94113 u=moonja n=ansible | co7-node02                 : ok=1    changed=0    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2022-04-01 02:00:24,546 p=94113 u=moonja n=ansible | co7-node03                 : ok=1    changed=0    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2022-04-01 02:00:24,546 p=94113 u=moonja n=ansible | co7-slave                  : ok=1    changed=0    unreachable=0    failed=0    skipped=12   rescued=0    ignored=0   
2022-04-01 02:00:36,890 p=94341 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from 
ansible-core in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-04-01 02:00:36,901 p=94341 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-04-01 02:00:37,125 p=94341 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 
2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-04-01 02:00:37,161 p=94341 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgsql94-bdr/tasks/upgrade.yml is empty and had no tasks to include

2022-04-01 02:00:37,176 p=94341 u=moonja n=ansible | PLAY [all] ************************************************************************************************************************
2022-04-01 02:00:37,198 p=94341 u=moonja n=ansible | TASK [Gathering Facts] ************************************************************************************************************
2022-04-01 02:00:39,455 p=94341 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 02:00:39,503 p=94341 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 02:00:39,535 p=94341 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 02:00:39,542 p=94341 u=moonja n=ansible | ok: [co7-master]
2022-04-01 02:00:39,937 p=94341 u=moonja n=ansible | ok: [co7-slave]
2022-04-01 02:00:39,955 p=94341 u=moonja n=ansible | TASK [pgsql94-bdr : Check OS support] *********************************************************************************************
2022-04-01 02:00:39,991 p=94341 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:00:40,006 p=94341 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:00:40,023 p=94341 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 02:00:40,025 p=94341 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 02:00:40,037 p=94341 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 02:00:40,047 p=94341 u=moonja n=ansible | TASK [pgsql94-bdr : Check packet manager support] *********************************************************************************
2022-04-01 02:00:40,082 p=94341 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:00:40,099 p=94341 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:00:40,114 p=94341 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 02:00:40,116 p=94341 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 02:00:40,129 p=94341 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 02:00:40,139 p=94341 u=moonja n=ansible | TASK [pgsql94-bdr : Add bdr94 repository] *****************************************************************************************
2022-04-01 02:00:40,787 p=94341 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:00:40,793 p=94341 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:00:40,805 p=94341 u=moonja n=ansible | changed: [co7-slave]
2022-04-01 02:00:40,809 p=94341 u=moonja n=ansible | changed: [co7-master]
2022-04-01 02:00:40,830 p=94341 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:00:40,839 p=94341 u=moonja n=ansible | TASK [pgsql94-bdr : debug] ********************************************************************************************************
2022-04-01 02:00:40,876 p=94341 u=moonja n=ansible | ok: [co7-master] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 02:00:40,892 p=94341 u=moonja n=ansible | ok: [co7-slave] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 02:00:40,909 p=94341 u=moonja n=ansible | ok: [co7-node01] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 02:00:40,911 p=94341 u=moonja n=ansible | ok: [co7-node02] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 02:00:40,923 p=94341 u=moonja n=ansible | ok: [co7-node03] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 02:00:40,934 p=94341 u=moonja n=ansible | TASK [pgsql94-bdr : Install PostgreSQL BDR packages] ******************************************************************************
2022-04-01 02:00:40,959 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item=python-psycopg2) 
2022-04-01 02:00:40,960 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item=postgresql-bdr94-bdr) 
2022-04-01 02:00:40,975 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item=python-psycopg2) 
2022-04-01 02:00:40,976 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item=postgresql-bdr94-bdr) 
2022-04-01 02:00:50,305 p=94341 u=moonja n=ansible | ok: [co7-node01] => (item=python-psycopg2)
2022-04-01 02:00:50,644 p=94341 u=moonja n=ansible | ok: [co7-node03] => (item=python-psycopg2)
2022-04-01 02:00:50,794 p=94341 u=moonja n=ansible | ok: [co7-node02] => (item=python-psycopg2)
2022-04-01 02:00:52,676 p=94341 u=moonja n=ansible | ok: [co7-node01] => (item=postgresql-bdr94-bdr)
2022-04-01 02:00:53,583 p=94341 u=moonja n=ansible | ok: [co7-node03] => (item=postgresql-bdr94-bdr)
2022-04-01 02:00:53,686 p=94341 u=moonja n=ansible | ok: [co7-node02] => (item=postgresql-bdr94-bdr)
2022-04-01 02:00:53,698 p=94341 u=moonja n=ansible | TASK [pgsql94-bdr : Stop PostgreSQL if are running] *******************************************************************************
2022-04-01 02:00:53,734 p=94341 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:00:53,748 p=94341 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:00:54,448 p=94341 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "stop"], "delta": "0:00:00.030632", "end": "2022-04-01 02:00:54.600119", "msg": "non-zero return code", "rc": 1, "start": "2022-04-01 02:00:54.569487", "stderr": "pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist\nIs server running?", "stderr_lines": ["pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist", "Is server running?"], "stdout": "", "stdout_lines": []}
2022-04-01 02:00:54,449 p=94341 u=moonja n=ansible | ...ignoring
2022-04-01 02:00:54,449 p=94341 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "stop"], "delta": "0:00:00.030471", "end": "2022-04-01 02:00:54.598370", "msg": "non-zero return code", "rc": 1, "start": "2022-04-01 02:00:54.567899", "stderr": "pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist\nIs server running?", "stderr_lines": ["pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist", "Is server running?"], "stdout": "", "stdout_lines": []}
2022-04-01 02:00:54,449 p=94341 u=moonja n=ansible | ...ignoring
2022-04-01 02:00:54,449 p=94341 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "stop"], "delta": "0:00:00.030678", "end": "2022-04-01 02:00:54.602451", "msg": "non-zero return code", "rc": 1, "start": "2022-04-01 02:00:54.571773", "stderr": "pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist\nIs server running?", "stderr_lines": ["pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist", "Is server running?"], "stdout": "", "stdout_lines": []}
2022-04-01 02:00:54,449 p=94341 u=moonja n=ansible | ...ignoring
2022-04-01 02:00:54,458 p=94341 u=moonja n=ansible | TASK [pgsql94-bdr : Remove old PostgreSQL data directory if exists] ***************************************************************
2022-04-01 02:00:54,479 p=94341 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:00:54,495 p=94341 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:00:55,264 p=94341 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:00:55,268 p=94341 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:00:56,072 p=94341 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:00:56,081 p=94341 u=moonja n=ansible | TASK [pgsql94-bdr : Initialize new PostgreSQL BDR cluster on upstream server] *****************************************************
2022-04-01 02:00:56,103 p=94341 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:00:56,119 p=94341 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:01:01,045 p=94341 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:01:01,827 p=94341 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:01:01,835 p=94341 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:01:01,845 p=94341 u=moonja n=ansible | TASK [pgsql94-bdr : Configure pg_hba.conf for basic authentication] ***************************************************************
2022-04-01 02:01:01,869 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'}) 
2022-04-01 02:01:01,873 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'}) 
2022-04-01 02:01:01,876 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'}) 
2022-04-01 02:01:01,878 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'}) 
2022-04-01 02:01:01,888 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'}) 
2022-04-01 02:01:01,893 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'}) 
2022-04-01 02:01:01,893 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'}) 
2022-04-01 02:01:01,894 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'}) 
2022-04-01 02:01:02,616 p=94341 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'})
2022-04-01 02:01:02,635 p=94341 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'})
2022-04-01 02:01:02,636 p=94341 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'})
2022-04-01 02:01:03,036 p=94341 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'})
2022-04-01 02:01:03,040 p=94341 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'})
2022-04-01 02:01:03,049 p=94341 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'})
2022-04-01 02:01:03,467 p=94341 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'})
2022-04-01 02:01:03,481 p=94341 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'})
2022-04-01 02:01:03,481 p=94341 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'})
2022-04-01 02:01:03,891 p=94341 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'})
2022-04-01 02:01:03,895 p=94341 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'})
2022-04-01 02:01:03,896 p=94341 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'})
2022-04-01 02:01:03,909 p=94341 u=moonja n=ansible | TASK [pgsql94-bdr : Configure pg_hba.conf to enable communication with password authentication between servers] *******************
2022-04-01 02:01:03,970 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.100.82']) 
2022-04-01 02:01:03,973 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.100.83']) 
2022-04-01 02:01:03,976 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.100.84']) 
2022-04-01 02:01:03,977 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.100.85']) 
2022-04-01 02:01:03,984 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.100.82']) 
2022-04-01 02:01:03,987 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.100.83']) 
2022-04-01 02:01:03,990 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.100.84']) 
2022-04-01 02:01:03,990 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.100.85']) 
2022-04-01 02:01:04,443 p=94341 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.100.82'])
2022-04-01 02:01:04,444 p=94341 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.100.82'])
2022-04-01 02:01:04,488 p=94341 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.100.82'])
2022-04-01 02:01:04,876 p=94341 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.100.83'])
2022-04-01 02:01:04,886 p=94341 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.100.83'])
2022-04-01 02:01:04,941 p=94341 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.100.83'])
2022-04-01 02:01:05,286 p=94341 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.100.84'])
2022-04-01 02:01:05,321 p=94341 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.100.84'])
2022-04-01 02:01:05,357 p=94341 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.100.84'])
2022-04-01 02:01:05,689 p=94341 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.100.85'])
2022-04-01 02:01:05,729 p=94341 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.100.85'])
2022-04-01 02:01:05,752 p=94341 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.100.85'])
2022-04-01 02:01:05,764 p=94341 u=moonja n=ansible | TASK [pgsql94-bdr : Configure pg_hba.conf to enable communication with trust authentication between servers] **********************
2022-04-01 02:01:05,823 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.100.82']) 
2022-04-01 02:01:05,824 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.100.83']) 
2022-04-01 02:01:05,830 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.100.84']) 
2022-04-01 02:01:05,831 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.100.85']) 
2022-04-01 02:01:05,832 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.100.82']) 
2022-04-01 02:01:05,837 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.100.83']) 
2022-04-01 02:01:05,838 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.100.84']) 
2022-04-01 02:01:05,839 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.100.85']) 
2022-04-01 02:01:05,840 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.100.82']) 
2022-04-01 02:01:05,841 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.100.83']) 
2022-04-01 02:01:05,844 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.100.84']) 
2022-04-01 02:01:05,849 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.100.85']) 
2022-04-01 02:01:05,855 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.100.82']) 
2022-04-01 02:01:05,855 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.100.83']) 
2022-04-01 02:01:05,855 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.100.84']) 
2022-04-01 02:01:05,856 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.100.85']) 
2022-04-01 02:01:06,386 p=94341 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.100.82'])
2022-04-01 02:01:06,456 p=94341 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.100.82'])
2022-04-01 02:01:06,464 p=94341 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.100.82'])
2022-04-01 02:01:06,887 p=94341 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.100.83'])
2022-04-01 02:01:06,924 p=94341 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.100.83'])
2022-04-01 02:01:06,929 p=94341 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.100.83'])
2022-04-01 02:01:07,332 p=94341 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.100.84'])
2022-04-01 02:01:07,332 p=94341 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.100.84'])
2022-04-01 02:01:07,366 p=94341 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.100.84'])
2022-04-01 02:01:07,764 p=94341 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.100.85'])
2022-04-01 02:01:07,765 p=94341 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.100.85'])
2022-04-01 02:01:07,853 p=94341 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.100.85'])
2022-04-01 02:01:08,362 p=94341 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.100.82'])
2022-04-01 02:01:08,364 p=94341 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.100.82'])
2022-04-01 02:01:08,391 p=94341 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.100.82'])
2022-04-01 02:01:08,788 p=94341 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.100.83'])
2022-04-01 02:01:08,789 p=94341 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.100.83'])
2022-04-01 02:01:08,800 p=94341 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.100.83'])
2022-04-01 02:01:09,263 p=94341 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.100.84'])
2022-04-01 02:01:09,267 p=94341 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.100.84'])
2022-04-01 02:01:09,268 p=94341 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.100.84'])
2022-04-01 02:01:09,766 p=94341 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.100.85'])
2022-04-01 02:01:09,766 p=94341 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.100.85'])
2022-04-01 02:01:09,767 p=94341 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.100.85'])
2022-04-01 02:01:09,781 p=94341 u=moonja n=ansible | TASK [pgsql94-bdr : Configure postgresql.conf with shared GUCs of PostgreSQL for BDR] *********************************************
2022-04-01 02:01:09,805 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"}) 
2022-04-01 02:01:09,806 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'}) 
2022-04-01 02:01:09,809 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'}) 
2022-04-01 02:01:09,813 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"}) 
2022-04-01 02:01:09,819 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'}) 
2022-04-01 02:01:09,820 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"}) 
2022-04-01 02:01:09,821 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'}) 
2022-04-01 02:01:09,822 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"}) 
2022-04-01 02:01:09,824 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'}) 
2022-04-01 02:01:09,826 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'}) 
2022-04-01 02:01:09,830 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"}) 
2022-04-01 02:01:09,834 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'}) 
2022-04-01 02:01:09,835 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"}) 
2022-04-01 02:01:09,835 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'}) 
2022-04-01 02:01:10,394 p=94341 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"})
2022-04-01 02:01:10,395 p=94341 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"})
2022-04-01 02:01:10,396 p=94341 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"})
2022-04-01 02:01:11,157 p=94341 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'})
2022-04-01 02:01:11,158 p=94341 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'})
2022-04-01 02:01:11,158 p=94341 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'})
2022-04-01 02:01:11,590 p=94341 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'})
2022-04-01 02:01:11,590 p=94341 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'})
2022-04-01 02:01:11,591 p=94341 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'})
2022-04-01 02:01:12,007 p=94341 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"})
2022-04-01 02:01:12,037 p=94341 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"})
2022-04-01 02:01:12,039 p=94341 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"})
2022-04-01 02:01:12,414 p=94341 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'})
2022-04-01 02:01:12,503 p=94341 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'})
2022-04-01 02:01:12,524 p=94341 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'})
2022-04-01 02:01:12,839 p=94341 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"})
2022-04-01 02:01:12,902 p=94341 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"})
2022-04-01 02:01:12,928 p=94341 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"})
2022-04-01 02:01:13,240 p=94341 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'})
2022-04-01 02:01:13,296 p=94341 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'})
2022-04-01 02:01:13,323 p=94341 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'})
2022-04-01 02:01:13,335 p=94341 u=moonja n=ansible | TASK [pgsql94-bdr : Start PostgreSQL] *********************************************************************************************
2022-04-01 02:01:13,355 p=94341 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:01:13,372 p=94341 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:01:14,954 p=94341 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:01:14,955 p=94341 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:01:14,976 p=94341 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:01:14,986 p=94341 u=moonja n=ansible | TASK [pgsql94-bdr : Configure Primary Master's postgresql.conf] *******************************************************************
2022-04-01 02:01:15,023 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 02:01:15,024 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.demo_dsn = 'host=192.168.100.81 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:01:15,040 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 02:01:15,042 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.demo_dsn = 'host=192.168.100.82 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:01:15,532 p=94341 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:01:15,533 p=94341 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:01:15,533 p=94341 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:01:16,012 p=94341 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.demo_dsn = 'host=192.168.100.84 dbname=bdrdemo user=postgres'"})
2022-04-01 02:01:16,018 p=94341 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': "bdr.demo_dsn = 'host=192.168.100.83 dbname=bdrdemo user=postgres'"})
2022-04-01 02:01:16,019 p=94341 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.demo_dsn = 'host=192.168.100.85 dbname=bdrdemo user=postgres'"})
2022-04-01 02:01:16,030 p=94341 u=moonja n=ansible | TASK [pgsql94-bdr : Configure Slave Master's postgresql.conf] *********************************************************************
2022-04-01 02:01:16,066 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 02:01:16,068 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.demo_dsn = 'host=192.168.100.83 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:01:16,070 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': 'bdr.demo_init_replica = on'}) 
2022-04-01 02:01:16,071 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:01:16,084 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 02:01:16,085 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.demo_dsn = 'host=192.168.100.83 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:01:16,087 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': 'bdr.demo_init_replica = on'}) 
2022-04-01 02:01:16,088 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:01:16,669 p=94341 u=moonja n=ansible | ok: [co7-node03] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:01:16,669 p=94341 u=moonja n=ansible | ok: [co7-node01] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:01:16,670 p=94341 u=moonja n=ansible | ok: [co7-node02] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:01:17,153 p=94341 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.demo_dsn = 'host=192.168.100.83 dbname=bdrdemo user=postgres'"})
2022-04-01 02:01:17,156 p=94341 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.demo_dsn = 'host=192.168.100.83 dbname=bdrdemo user=postgres'"})
2022-04-01 02:01:17,157 p=94341 u=moonja n=ansible | ok: [co7-node01] => (item={'guc': "bdr.demo_dsn = 'host=192.168.100.83 dbname=bdrdemo user=postgres'"})
2022-04-01 02:01:17,596 p=94341 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': 'bdr.demo_init_replica = on'})
2022-04-01 02:01:17,598 p=94341 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': 'bdr.demo_init_replica = on'})
2022-04-01 02:01:17,599 p=94341 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': 'bdr.demo_init_replica = on'})
2022-04-01 02:01:18,066 p=94341 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"})
2022-04-01 02:01:18,066 p=94341 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"})
2022-04-01 02:01:18,067 p=94341 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"})
2022-04-01 02:01:18,080 p=94341 u=moonja n=ansible | TASK [pgsql94-bdr : Final PostgreSQL restart] *************************************************************************************
2022-04-01 02:01:18,100 p=94341 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:01:18,130 p=94341 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:01:24,796 p=94341 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"ansible_job_id": "652549436881.6269", "changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "restart"], "delta": "0:00:00.030431", "end": "2022-04-01 02:01:19.200593", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/var/lib/pgsql/.ansible_async/652549436881.6269", "start": "2022-04-01 02:01:19.170162", "started": 1, "stderr": "pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist\nIs server running?\nstarting server anyway\npg_ctl: could not read file \"/var/lib/pgsql/9.4-bdr/data/postmaster.opts\"", "stderr_lines": ["pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist", "Is server running?", "starting server anyway", "pg_ctl: could not read file \"/var/lib/pgsql/9.4-bdr/data/postmaster.opts\""], "stdout": "", "stdout_lines": []}
2022-04-01 02:01:24,871 p=94341 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"ansible_job_id": "476678960742.26753", "changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "restart"], "delta": "0:00:00.030421", "end": "2022-04-01 02:01:19.215882", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/var/lib/pgsql/.ansible_async/476678960742.26753", "start": "2022-04-01 02:01:19.185461", "started": 1, "stderr": "pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist\nIs server running?\nstarting server anyway\npg_ctl: could not read file \"/var/lib/pgsql/9.4-bdr/data/postmaster.opts\"", "stderr_lines": ["pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist", "Is server running?", "starting server anyway", "pg_ctl: could not read file \"/var/lib/pgsql/9.4-bdr/data/postmaster.opts\""], "stdout": "", "stdout_lines": []}
2022-04-01 02:01:24,880 p=94341 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"ansible_job_id": "937193914401.26978", "changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "restart"], "delta": "0:00:00.030301", "end": "2022-04-01 02:01:19.180828", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/var/lib/pgsql/.ansible_async/937193914401.26978", "start": "2022-04-01 02:01:19.150527", "started": 1, "stderr": "pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist\nIs server running?\nstarting server anyway\npg_ctl: could not read file \"/var/lib/pgsql/9.4-bdr/data/postmaster.opts\"", "stderr_lines": ["pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist", "Is server running?", "starting server anyway", "pg_ctl: could not read file \"/var/lib/pgsql/9.4-bdr/data/postmaster.opts\""], "stdout": "", "stdout_lines": []}
2022-04-01 02:01:24,891 p=94341 u=moonja n=ansible | TASK [pgsql94-bdr : Create database to sync between Master Servers] ***************************************************************
2022-04-01 02:01:24,916 p=94341 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:01:24,930 p=94341 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:01:24,940 p=94341 u=moonja n=ansible | TASK [pgsql94-bdr : Connect to database, create user and grant access for all Master Servers] *************************************
2022-04-01 02:01:24,962 p=94341 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:01:24,974 p=94341 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:01:24,984 p=94341 u=moonja n=ansible | TASK [pgsql94-bdr : Create extentions for BDR] ************************************************************************************
2022-04-01 02:01:25,010 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item=CREATE EXTENSION btree_gist;) 
2022-04-01 02:01:25,010 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item=CREATE EXTENSION bdr;) 
2022-04-01 02:01:25,023 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item=CREATE EXTENSION btree_gist;) 
2022-04-01 02:01:25,023 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item=CREATE EXTENSION bdr;) 
2022-04-01 02:01:25,035 p=94341 u=moonja n=ansible | TASK [pgsql94-bdr : Create group on Primary Master Server for BDR] ****************************************************************
2022-04-01 02:01:25,068 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item=SELECT bdr.bdr_group_create ( local_node_name := 'co7-master', node_external_dsn := 'host=192.168.100.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-01 02:01:25,080 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item=SELECT bdr.bdr_group_create ( local_node_name := 'co7-slave', node_external_dsn := 'host=192.168.100.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-01 02:01:25,091 p=94341 u=moonja n=ansible | TASK [pgsql94-bdr : Join group from other Master Servers] *************************************************************************
2022-04-01 02:01:25,132 p=94341 u=moonja n=ansible | skipping: [co7-master] => (item=SELECT bdr.bdr_group_join ( local_node_name := 'co7-master', node_external_dsn := 'host=192.168.100.81 user=bdrsync dbname=bdrdemo password=changeme', join_using_dsn := 'host=192.168.100.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-01 02:01:25,146 p=94341 u=moonja n=ansible | skipping: [co7-slave] => (item=SELECT bdr.bdr_group_join ( local_node_name := 'co7-slave', node_external_dsn := 'host=192.168.100.82 user=bdrsync dbname=bdrdemo password=changeme', join_using_dsn := 'host=192.168.100.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-01 02:01:25,179 p=94341 u=moonja n=ansible | PLAY RECAP ************************************************************************************************************************
2022-04-01 02:01:25,179 p=94341 u=moonja n=ansible | co7-master                 : ok=3    changed=1    unreachable=0    failed=0    skipped=19   rescued=0    ignored=0   
2022-04-01 02:01:25,179 p=94341 u=moonja n=ansible | co7-node01                 : ok=14   changed=11   unreachable=0    failed=1    skipped=2    rescued=0    ignored=1   
2022-04-01 02:01:25,179 p=94341 u=moonja n=ansible | co7-node02                 : ok=14   changed=11   unreachable=0    failed=1    skipped=2    rescued=0    ignored=1   
2022-04-01 02:01:25,179 p=94341 u=moonja n=ansible | co7-node03                 : ok=14   changed=11   unreachable=0    failed=1    skipped=2    rescued=0    ignored=1   
2022-04-01 02:01:25,179 p=94341 u=moonja n=ansible | co7-slave                  : ok=3    changed=1    unreachable=0    failed=0    skipped=19   rescued=0    ignored=0   
2022-04-01 02:01:40,165 p=96246 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from 
ansible-core in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-04-01 02:01:40,176 p=96246 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-04-01 02:01:40,403 p=96246 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 
2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-04-01 02:01:40,436 p=96246 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgsql94-bdr/tasks/upgrade.yml is empty and had no tasks to include

2022-04-01 02:01:40,448 p=96246 u=moonja n=ansible | PLAY [all] ************************************************************************************************************************
2022-04-01 02:01:40,467 p=96246 u=moonja n=ansible | TASK [Gathering Facts] ************************************************************************************************************
2022-04-01 02:01:42,885 p=96246 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 02:01:42,903 p=96246 u=moonja n=ansible | ok: [co7-master]
2022-04-01 02:01:42,905 p=96246 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 02:01:42,953 p=96246 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 02:01:43,437 p=96246 u=moonja n=ansible | ok: [co7-slave]
2022-04-01 02:01:43,454 p=96246 u=moonja n=ansible | TASK [pgsql94-bdr : Check OS support] *********************************************************************************************
2022-04-01 02:01:43,490 p=96246 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:01:43,506 p=96246 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:01:43,523 p=96246 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 02:01:43,524 p=96246 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 02:01:43,536 p=96246 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 02:01:43,546 p=96246 u=moonja n=ansible | TASK [pgsql94-bdr : Check if PostgreSQL is running] *******************************************************************************
2022-04-01 02:01:43,566 p=96246 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:01:43,582 p=96246 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:01:44,283 p=96246 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "status"], "delta": "0:00:00.030301", "end": "2022-04-01 02:01:44.443626", "msg": "non-zero return code", "rc": 3, "start": "2022-04-01 02:01:44.413325", "stderr": "", "stderr_lines": [], "stdout": "pg_ctl: no server running", "stdout_lines": ["pg_ctl: no server running"]}
2022-04-01 02:01:44,286 p=96246 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "status"], "delta": "0:00:00.031459", "end": "2022-04-01 02:01:44.448008", "msg": "non-zero return code", "rc": 3, "start": "2022-04-01 02:01:44.416549", "stderr": "", "stderr_lines": [], "stdout": "pg_ctl: no server running", "stdout_lines": ["pg_ctl: no server running"]}
2022-04-01 02:01:44,287 p=96246 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "status"], "delta": "0:00:00.031750", "end": "2022-04-01 02:01:44.451392", "msg": "non-zero return code", "rc": 3, "start": "2022-04-01 02:01:44.419642", "stderr": "", "stderr_lines": [], "stdout": "pg_ctl: no server running", "stdout_lines": ["pg_ctl: no server running"]}
2022-04-01 02:01:44,298 p=96246 u=moonja n=ansible | TASK [pgsql94-bdr : Start PostgreSQL] *********************************************************************************************
2022-04-01 02:01:44,318 p=96246 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:01:44,328 p=96246 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:01:44,339 p=96246 u=moonja n=ansible | TASK [pgsql94-bdr : Check if database is available] *******************************************************************************
2022-04-01 02:01:44,358 p=96246 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:01:44,370 p=96246 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:01:44,380 p=96246 u=moonja n=ansible | TASK [pgsql94-bdr : Remove logical replications of BDR] ***************************************************************************
2022-04-01 02:01:44,401 p=96246 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:01:44,411 p=96246 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:01:44,421 p=96246 u=moonja n=ansible | TASK [pgsql94-bdr : Check if database is existed] *********************************************************************************
2022-04-01 02:01:44,442 p=96246 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:01:44,453 p=96246 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:01:44,463 p=96246 u=moonja n=ansible | TASK [pgsql94-bdr : Kill all postgresql connections for removing session held by user] ********************************************
2022-04-01 02:01:44,483 p=96246 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:01:44,496 p=96246 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:01:44,505 p=96246 u=moonja n=ansible | TASK [pgsql94-bdr : Drop the database] ********************************************************************************************
2022-04-01 02:01:44,527 p=96246 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:01:44,540 p=96246 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:01:44,549 p=96246 u=moonja n=ansible | TASK [pgsql94-bdr : Stop PostgreSQL if are running] *******************************************************************************
2022-04-01 02:01:44,568 p=96246 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:01:44,581 p=96246 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:01:44,590 p=96246 u=moonja n=ansible | TASK [pgsql94-bdr : Remove old PostgreSQL data directory if exists] ***************************************************************
2022-04-01 02:01:44,611 p=96246 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:01:44,621 p=96246 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:01:44,631 p=96246 u=moonja n=ansible | TASK [pgsql94-bdr : Check package manager support] ********************************************************************************
2022-04-01 02:01:44,651 p=96246 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:01:44,664 p=96246 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:01:44,674 p=96246 u=moonja n=ansible | TASK [pgsql94-bdr : Remove PostgreSQL BDR packages] *******************************************************************************
2022-04-01 02:01:44,696 p=96246 u=moonja n=ansible | skipping: [co7-master] => (item=python-psycopg2) 
2022-04-01 02:01:44,697 p=96246 u=moonja n=ansible | skipping: [co7-master] => (item=postgresql-bdr94) 
2022-04-01 02:01:44,700 p=96246 u=moonja n=ansible | skipping: [co7-master] => (item=postgresql-bdr94-bdr) 
2022-04-01 02:01:44,700 p=96246 u=moonja n=ansible | skipping: [co7-master] => (item=postgresql-bdr94-2ndquadrant-redhat) 
2022-04-01 02:01:44,711 p=96246 u=moonja n=ansible | skipping: [co7-slave] => (item=python-psycopg2) 
2022-04-01 02:01:44,713 p=96246 u=moonja n=ansible | skipping: [co7-slave] => (item=postgresql-bdr94) 
2022-04-01 02:01:44,716 p=96246 u=moonja n=ansible | skipping: [co7-slave] => (item=postgresql-bdr94-bdr) 
2022-04-01 02:01:44,717 p=96246 u=moonja n=ansible | skipping: [co7-slave] => (item=postgresql-bdr94-2ndquadrant-redhat) 
2022-04-01 02:01:44,749 p=96246 u=moonja n=ansible | PLAY RECAP ************************************************************************************************************************
2022-04-01 02:01:44,749 p=96246 u=moonja n=ansible | co7-master                 : ok=1    changed=0    unreachable=0    failed=0    skipped=12   rescued=0    ignored=0   
2022-04-01 02:01:44,749 p=96246 u=moonja n=ansible | co7-node01                 : ok=1    changed=0    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2022-04-01 02:01:44,749 p=96246 u=moonja n=ansible | co7-node02                 : ok=1    changed=0    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2022-04-01 02:01:44,749 p=96246 u=moonja n=ansible | co7-node03                 : ok=1    changed=0    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2022-04-01 02:01:44,749 p=96246 u=moonja n=ansible | co7-slave                  : ok=1    changed=0    unreachable=0    failed=0    skipped=12   rescued=0    ignored=0   
2022-04-01 02:03:33,952 p=96653 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from 
ansible-core in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-04-01 02:03:33,963 p=96653 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-04-01 02:03:34,190 p=96653 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 
2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-04-01 02:03:34,225 p=96653 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgsql94-bdr/tasks/upgrade.yml is empty and had no tasks to include

2022-04-01 02:03:34,238 p=96653 u=moonja n=ansible | PLAY [all] ************************************************************************************************************************
2022-04-01 02:03:34,258 p=96653 u=moonja n=ansible | TASK [Gathering Facts] ************************************************************************************************************
2022-04-01 02:03:36,575 p=96653 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 02:03:36,584 p=96653 u=moonja n=ansible | ok: [co7-master]
2022-04-01 02:03:36,631 p=96653 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 02:03:37,101 p=96653 u=moonja n=ansible | ok: [co7-slave]
2022-04-01 02:03:37,524 p=96653 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 02:03:37,542 p=96653 u=moonja n=ansible | TASK [pgsql94-bdr : Check OS support] *********************************************************************************************
2022-04-01 02:03:37,578 p=96653 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:03:37,594 p=96653 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:03:37,610 p=96653 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 02:03:37,611 p=96653 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 02:03:37,623 p=96653 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 02:03:37,633 p=96653 u=moonja n=ansible | TASK [pgsql94-bdr : Check if PostgreSQL is running] *******************************************************************************
2022-04-01 02:03:37,670 p=96653 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:03:37,684 p=96653 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:03:38,329 p=96653 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "status"], "delta": "0:00:00.030564", "end": "2022-04-01 02:03:38.476988", "msg": "non-zero return code", "rc": 3, "start": "2022-04-01 02:03:38.446424", "stderr": "", "stderr_lines": [], "stdout": "pg_ctl: no server running", "stdout_lines": ["pg_ctl: no server running"]}
2022-04-01 02:03:38,330 p=96653 u=moonja n=ansible | ...ignoring
2022-04-01 02:03:38,330 p=96653 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "status"], "delta": "0:00:00.029973", "end": "2022-04-01 02:03:38.473063", "msg": "non-zero return code", "rc": 3, "start": "2022-04-01 02:03:38.443090", "stderr": "", "stderr_lines": [], "stdout": "pg_ctl: no server running", "stdout_lines": ["pg_ctl: no server running"]}
2022-04-01 02:03:38,330 p=96653 u=moonja n=ansible | ...ignoring
2022-04-01 02:03:38,331 p=96653 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "status"], "delta": "0:00:00.030649", "end": "2022-04-01 02:03:38.478129", "msg": "non-zero return code", "rc": 3, "start": "2022-04-01 02:03:38.447480", "stderr": "", "stderr_lines": [], "stdout": "pg_ctl: no server running", "stdout_lines": ["pg_ctl: no server running"]}
2022-04-01 02:03:38,331 p=96653 u=moonja n=ansible | ...ignoring
2022-04-01 02:03:38,341 p=96653 u=moonja n=ansible | TASK [pgsql94-bdr : Start PostgreSQL] *********************************************************************************************
2022-04-01 02:03:38,362 p=96653 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:03:38,392 p=96653 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:03:39,775 p=96653 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:03:39,788 p=96653 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:03:39,811 p=96653 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:03:39,821 p=96653 u=moonja n=ansible | TASK [pgsql94-bdr : Check if database is available] *******************************************************************************
2022-04-01 02:03:39,842 p=96653 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:03:39,859 p=96653 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:03:40,746 p=96653 u=moonja n=ansible | [WARNING]: PostgreSQL server is unavailable: could not connect to server: No such file or directory         Is the server running
locally and accepting         connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?

2022-04-01 02:03:40,747 p=96653 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": false, "failed_when_result": true, "is_available": false, "server_version": {}}
2022-04-01 02:03:40,747 p=96653 u=moonja n=ansible | ...ignoring
2022-04-01 02:03:40,807 p=96653 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": false, "failed_when_result": true, "is_available": false, "server_version": {}}
2022-04-01 02:03:40,807 p=96653 u=moonja n=ansible | ...ignoring
2022-04-01 02:03:41,339 p=96653 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": false, "failed_when_result": true, "is_available": false, "server_version": {}}
2022-04-01 02:03:41,339 p=96653 u=moonja n=ansible | ...ignoring
2022-04-01 02:03:41,350 p=96653 u=moonja n=ansible | TASK [pgsql94-bdr : Remove logical replications of BDR] ***************************************************************************
2022-04-01 02:03:41,371 p=96653 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:03:41,388 p=96653 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:03:42,154 p=96653 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n"}
2022-04-01 02:03:42,155 p=96653 u=moonja n=ansible | ...ignoring
2022-04-01 02:03:42,155 p=96653 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n"}
2022-04-01 02:03:42,155 p=96653 u=moonja n=ansible | ...ignoring
2022-04-01 02:03:42,156 p=96653 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n"}
2022-04-01 02:03:42,156 p=96653 u=moonja n=ansible | ...ignoring
2022-04-01 02:03:42,168 p=96653 u=moonja n=ansible | TASK [pgsql94-bdr : Check if database is existed] *********************************************************************************
2022-04-01 02:03:42,192 p=96653 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:03:42,209 p=96653 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:03:42,792 p=96653 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": false, "failed_when_result": true, "is_available": false, "server_version": {}}
2022-04-01 02:03:42,792 p=96653 u=moonja n=ansible | ...ignoring
2022-04-01 02:03:42,793 p=96653 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": false, "failed_when_result": true, "is_available": false, "server_version": {}}
2022-04-01 02:03:42,793 p=96653 u=moonja n=ansible | ...ignoring
2022-04-01 02:03:42,794 p=96653 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": false, "failed_when_result": true, "is_available": false, "server_version": {}}
2022-04-01 02:03:42,794 p=96653 u=moonja n=ansible | ...ignoring
2022-04-01 02:03:42,804 p=96653 u=moonja n=ansible | TASK [pgsql94-bdr : Kill all postgresql connections for removing session held by user] ********************************************
2022-04-01 02:03:42,826 p=96653 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:03:42,857 p=96653 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:03:42,874 p=96653 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 02:03:42,880 p=96653 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 02:03:42,895 p=96653 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 02:03:42,905 p=96653 u=moonja n=ansible | TASK [pgsql94-bdr : Drop the database] ********************************************************************************************
2022-04-01 02:03:42,926 p=96653 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:03:42,943 p=96653 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:03:43,646 p=96653 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: 	TCP/IP connections on port 5432?
2022-04-01 02:03:43,647 p=96653 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: Connection refused\n\tIs the server running on host \"co7-node03\" (192.168.0.85) and accepting\n\tTCP/IP connections on port 5432?\n"}
2022-04-01 02:03:43,647 p=96653 u=moonja n=ansible | ...ignoring
2022-04-01 02:03:43,666 p=96653 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: 	TCP/IP connections on port 5432?
2022-04-01 02:03:43,666 p=96653 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: Connection refused\n\tIs the server running on host \"co7-node02\" (192.168.0.84) and accepting\n\tTCP/IP connections on port 5432?\n"}
2022-04-01 02:03:43,667 p=96653 u=moonja n=ansible | ...ignoring
2022-04-01 02:03:43,668 p=96653 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: 	TCP/IP connections on port 5432?
2022-04-01 02:03:43,668 p=96653 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: Connection refused\n\tIs the server running on host \"co7-node01\" (192.168.0.83) and accepting\n\tTCP/IP connections on port 5432?\n"}
2022-04-01 02:03:43,668 p=96653 u=moonja n=ansible | ...ignoring
2022-04-01 02:03:43,678 p=96653 u=moonja n=ansible | TASK [pgsql94-bdr : Stop PostgreSQL if are running] *******************************************************************************
2022-04-01 02:03:43,699 p=96653 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:03:43,715 p=96653 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:03:44,386 p=96653 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "stop"], "delta": "0:00:00.030792", "end": "2022-04-01 02:03:44.521635", "msg": "non-zero return code", "rc": 1, "start": "2022-04-01 02:03:44.490843", "stderr": "pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist\nIs server running?", "stderr_lines": ["pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist", "Is server running?"], "stdout": "", "stdout_lines": []}
2022-04-01 02:03:44,386 p=96653 u=moonja n=ansible | ...ignoring
2022-04-01 02:03:44,389 p=96653 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "stop"], "delta": "0:00:00.031520", "end": "2022-04-01 02:03:44.530136", "msg": "non-zero return code", "rc": 1, "start": "2022-04-01 02:03:44.498616", "stderr": "pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist\nIs server running?", "stderr_lines": ["pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist", "Is server running?"], "stdout": "", "stdout_lines": []}
2022-04-01 02:03:44,389 p=96653 u=moonja n=ansible | ...ignoring
2022-04-01 02:03:44,389 p=96653 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "stop"], "delta": "0:00:00.031553", "end": "2022-04-01 02:03:44.529330", "msg": "non-zero return code", "rc": 1, "start": "2022-04-01 02:03:44.497777", "stderr": "pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist\nIs server running?", "stderr_lines": ["pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist", "Is server running?"], "stdout": "", "stdout_lines": []}
2022-04-01 02:03:44,389 p=96653 u=moonja n=ansible | ...ignoring
2022-04-01 02:03:44,402 p=96653 u=moonja n=ansible | TASK [pgsql94-bdr : Remove old PostgreSQL data directory if exists] ***************************************************************
2022-04-01 02:03:44,441 p=96653 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:03:44,455 p=96653 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:03:45,269 p=96653 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:03:45,272 p=96653 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:03:45,273 p=96653 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:03:45,284 p=96653 u=moonja n=ansible | TASK [pgsql94-bdr : Check package manager support] ********************************************************************************
2022-04-01 02:03:45,306 p=96653 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:03:45,339 p=96653 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:03:45,355 p=96653 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 02:03:45,356 p=96653 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 02:03:45,368 p=96653 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 02:03:45,377 p=96653 u=moonja n=ansible | TASK [pgsql94-bdr : Remove PostgreSQL BDR packages] *******************************************************************************
2022-04-01 02:03:45,400 p=96653 u=moonja n=ansible | skipping: [co7-master] => (item=python-psycopg2) 
2022-04-01 02:03:45,402 p=96653 u=moonja n=ansible | skipping: [co7-master] => (item=postgresql-bdr94) 
2022-04-01 02:03:45,411 p=96653 u=moonja n=ansible | skipping: [co7-master] => (item=postgresql-bdr94-bdr) 
2022-04-01 02:03:45,411 p=96653 u=moonja n=ansible | skipping: [co7-master] => (item=postgresql-bdr94-2ndquadrant-redhat) 
2022-04-01 02:03:45,418 p=96653 u=moonja n=ansible | skipping: [co7-slave] => (item=python-psycopg2) 
2022-04-01 02:03:45,420 p=96653 u=moonja n=ansible | skipping: [co7-slave] => (item=postgresql-bdr94) 
2022-04-01 02:03:45,425 p=96653 u=moonja n=ansible | skipping: [co7-slave] => (item=postgresql-bdr94-bdr) 
2022-04-01 02:03:45,425 p=96653 u=moonja n=ansible | skipping: [co7-slave] => (item=postgresql-bdr94-2ndquadrant-redhat) 
2022-04-01 02:03:54,927 p=96653 u=moonja n=ansible | changed: [co7-node03] => (item=python-psycopg2)
2022-04-01 02:03:54,934 p=96653 u=moonja n=ansible | changed: [co7-node02] => (item=python-psycopg2)
2022-04-01 02:03:55,037 p=96653 u=moonja n=ansible | changed: [co7-node01] => (item=python-psycopg2)
2022-04-01 02:04:19,190 p=96653 u=moonja n=ansible | changed: [co7-node03] => (item=postgresql-bdr94)
2022-04-01 02:04:19,469 p=96653 u=moonja n=ansible | changed: [co7-node02] => (item=postgresql-bdr94)
2022-04-01 02:04:19,516 p=96653 u=moonja n=ansible | changed: [co7-node01] => (item=postgresql-bdr94)
2022-04-01 02:04:19,937 p=96653 u=moonja n=ansible | ok: [co7-node03] => (item=postgresql-bdr94-bdr)
2022-04-01 02:04:20,207 p=96653 u=moonja n=ansible | ok: [co7-node02] => (item=postgresql-bdr94-bdr)
2022-04-01 02:04:20,219 p=96653 u=moonja n=ansible | ok: [co7-node01] => (item=postgresql-bdr94-bdr)
2022-04-01 02:04:20,636 p=96653 u=moonja n=ansible | ok: [co7-node03] => (item=postgresql-bdr94-2ndquadrant-redhat)
2022-04-01 02:04:20,911 p=96653 u=moonja n=ansible | ok: [co7-node02] => (item=postgresql-bdr94-2ndquadrant-redhat)
2022-04-01 02:04:20,919 p=96653 u=moonja n=ansible | ok: [co7-node01] => (item=postgresql-bdr94-2ndquadrant-redhat)
2022-04-01 02:04:20,978 p=96653 u=moonja n=ansible | PLAY RECAP ************************************************************************************************************************
2022-04-01 02:04:20,978 p=96653 u=moonja n=ansible | co7-master                 : ok=1    changed=0    unreachable=0    failed=0    skipped=12   rescued=0    ignored=0   
2022-04-01 02:04:20,978 p=96653 u=moonja n=ansible | co7-node01                 : ok=10   changed=5    unreachable=0    failed=0    skipped=3    rescued=0    ignored=6   
2022-04-01 02:04:20,978 p=96653 u=moonja n=ansible | co7-node02                 : ok=10   changed=5    unreachable=0    failed=0    skipped=3    rescued=0    ignored=6   
2022-04-01 02:04:20,979 p=96653 u=moonja n=ansible | co7-node03                 : ok=10   changed=5    unreachable=0    failed=0    skipped=3    rescued=0    ignored=6   
2022-04-01 02:04:20,979 p=96653 u=moonja n=ansible | co7-slave                  : ok=1    changed=0    unreachable=0    failed=0    skipped=12   rescued=0    ignored=0   
2022-04-01 02:04:44,734 p=97467 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from 
ansible-core in version 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-04-01 02:04:44,744 p=97467 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-04-01 02:04:44,973 p=97467 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 
2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-04-01 02:04:45,009 p=97467 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgsql94-bdr/tasks/upgrade.yml is empty and had no tasks to include

2022-04-01 02:04:45,022 p=97467 u=moonja n=ansible | PLAY [all] ************************************************************************************************************************
2022-04-01 02:04:45,042 p=97467 u=moonja n=ansible | TASK [Gathering Facts] ************************************************************************************************************
2022-04-01 02:04:47,260 p=97467 u=moonja n=ansible | ok: [co7-master]
2022-04-01 02:04:47,267 p=97467 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 02:04:47,288 p=97467 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 02:04:47,303 p=97467 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 02:04:47,739 p=97467 u=moonja n=ansible | ok: [co7-slave]
2022-04-01 02:04:47,756 p=97467 u=moonja n=ansible | TASK [pgsql94-bdr : Check OS support] *********************************************************************************************
2022-04-01 02:04:47,777 p=97467 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:04:47,794 p=97467 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:04:47,827 p=97467 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 02:04:47,827 p=97467 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 02:04:47,838 p=97467 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 02:04:47,850 p=97467 u=moonja n=ansible | TASK [pgsql94-bdr : Check packet manager support] *********************************************************************************
2022-04-01 02:04:47,870 p=97467 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:04:47,885 p=97467 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:04:47,918 p=97467 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 02:04:47,919 p=97467 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 02:04:47,930 p=97467 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 02:04:47,940 p=97467 u=moonja n=ansible | TASK [pgsql94-bdr : Add bdr94 repository] *****************************************************************************************
2022-04-01 02:04:48,673 p=97467 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:04:48,675 p=97467 u=moonja n=ansible | changed: [co7-slave]
2022-04-01 02:04:48,684 p=97467 u=moonja n=ansible | changed: [co7-master]
2022-04-01 02:04:48,689 p=97467 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:04:48,699 p=97467 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:04:48,709 p=97467 u=moonja n=ansible | TASK [pgsql94-bdr : debug] ********************************************************************************************************
2022-04-01 02:04:48,753 p=97467 u=moonja n=ansible | ok: [co7-master] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 02:04:48,774 p=97467 u=moonja n=ansible | ok: [co7-slave] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 02:04:48,793 p=97467 u=moonja n=ansible | ok: [co7-node01] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 02:04:48,794 p=97467 u=moonja n=ansible | ok: [co7-node02] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 02:04:48,807 p=97467 u=moonja n=ansible | ok: [co7-node03] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 02:04:48,818 p=97467 u=moonja n=ansible | TASK [pgsql94-bdr : Install PostgreSQL BDR packages] ******************************************************************************
2022-04-01 02:04:48,843 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item=python-psycopg2) 
2022-04-01 02:04:48,845 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item=postgresql-bdr94-bdr) 
2022-04-01 02:04:48,861 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item=python-psycopg2) 
2022-04-01 02:04:48,862 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item=postgresql-bdr94-bdr) 
2022-04-01 02:05:00,966 p=97467 u=moonja n=ansible | changed: [co7-node01] => (item=python-psycopg2)
2022-04-01 02:05:03,482 p=97467 u=moonja n=ansible | changed: [co7-node02] => (item=python-psycopg2)
2022-04-01 02:05:04,144 p=97467 u=moonja n=ansible | changed: [co7-node03] => (item=python-psycopg2)
2022-04-01 02:05:18,913 p=97467 u=moonja n=ansible | changed: [co7-node01] => (item=postgresql-bdr94-bdr)
2022-04-01 02:05:22,540 p=97467 u=moonja n=ansible | changed: [co7-node02] => (item=postgresql-bdr94-bdr)
2022-04-01 02:06:51,161 p=97467 u=moonja n=ansible | changed: [co7-node03] => (item=postgresql-bdr94-bdr)
2022-04-01 02:06:51,173 p=97467 u=moonja n=ansible | TASK [pgsql94-bdr : Stop PostgreSQL if are running] *******************************************************************************
2022-04-01 02:06:51,196 p=97467 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:06:51,214 p=97467 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:06:52,017 p=97467 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "stop"], "delta": "0:00:00.030709", "end": "2022-04-01 02:06:52.167370", "msg": "non-zero return code", "rc": 1, "start": "2022-04-01 02:06:52.136661", "stderr": "pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory", "stderr_lines": ["pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory"], "stdout": "", "stdout_lines": []}
2022-04-01 02:06:52,017 p=97467 u=moonja n=ansible | ...ignoring
2022-04-01 02:06:52,018 p=97467 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "stop"], "delta": "0:00:00.030766", "end": "2022-04-01 02:06:52.167666", "msg": "non-zero return code", "rc": 1, "start": "2022-04-01 02:06:52.136900", "stderr": "pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory", "stderr_lines": ["pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory"], "stdout": "", "stdout_lines": []}
2022-04-01 02:06:52,018 p=97467 u=moonja n=ansible | ...ignoring
2022-04-01 02:06:52,018 p=97467 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "stop"], "delta": "0:00:00.030984", "end": "2022-04-01 02:06:52.170088", "msg": "non-zero return code", "rc": 1, "start": "2022-04-01 02:06:52.139104", "stderr": "pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory", "stderr_lines": ["pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory"], "stdout": "", "stdout_lines": []}
2022-04-01 02:06:52,018 p=97467 u=moonja n=ansible | ...ignoring
2022-04-01 02:06:52,026 p=97467 u=moonja n=ansible | TASK [pgsql94-bdr : Remove old PostgreSQL data directory if exists] ***************************************************************
2022-04-01 02:06:52,048 p=97467 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:06:52,065 p=97467 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:06:52,859 p=97467 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:06:52,882 p=97467 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:06:52,882 p=97467 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:06:52,893 p=97467 u=moonja n=ansible | TASK [pgsql94-bdr : Initialize new PostgreSQL BDR cluster on upstream server] *****************************************************
2022-04-01 02:06:52,918 p=97467 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:06:52,936 p=97467 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:06:58,685 p=97467 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:06:58,736 p=97467 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:06:58,745 p=97467 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:06:58,755 p=97467 u=moonja n=ansible | TASK [pgsql94-bdr : Configure pg_hba.conf for basic authentication] ***************************************************************
2022-04-01 02:06:58,780 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'}) 
2022-04-01 02:06:58,781 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'}) 
2022-04-01 02:06:58,786 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'}) 
2022-04-01 02:06:58,787 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'}) 
2022-04-01 02:06:58,798 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'}) 
2022-04-01 02:06:58,800 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'}) 
2022-04-01 02:06:58,803 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'}) 
2022-04-01 02:06:58,804 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'}) 
2022-04-01 02:06:59,567 p=97467 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'})
2022-04-01 02:06:59,568 p=97467 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'})
2022-04-01 02:06:59,569 p=97467 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'})
2022-04-01 02:07:00,236 p=97467 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'})
2022-04-01 02:07:00,261 p=97467 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'})
2022-04-01 02:07:00,263 p=97467 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'})
2022-04-01 02:07:00,653 p=97467 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'})
2022-04-01 02:07:00,671 p=97467 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'})
2022-04-01 02:07:00,702 p=97467 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'})
2022-04-01 02:07:01,163 p=97467 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'})
2022-04-01 02:07:01,276 p=97467 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'})
2022-04-01 02:07:01,279 p=97467 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'})
2022-04-01 02:07:01,289 p=97467 u=moonja n=ansible | TASK [pgsql94-bdr : Configure pg_hba.conf to enable communication with password authentication between servers] *******************
2022-04-01 02:07:01,428 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.82']) 
2022-04-01 02:07:01,432 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.82']) 
2022-04-01 02:07:01,432 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.83']) 
2022-04-01 02:07:01,433 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.83']) 
2022-04-01 02:07:01,433 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.84']) 
2022-04-01 02:07:01,434 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.84']) 
2022-04-01 02:07:01,435 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.85']) 
2022-04-01 02:07:01,435 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.85']) 
2022-04-01 02:07:01,994 p=97467 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.82'])
2022-04-01 02:07:01,995 p=97467 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.82'])
2022-04-01 02:07:02,359 p=97467 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.82'])
2022-04-01 02:07:02,433 p=97467 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.83'])
2022-04-01 02:07:02,455 p=97467 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.83'])
2022-04-01 02:07:02,767 p=97467 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.83'])
2022-04-01 02:07:02,836 p=97467 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.84'])
2022-04-01 02:07:02,863 p=97467 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.84'])
2022-04-01 02:07:03,264 p=97467 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.84'])
2022-04-01 02:07:03,265 p=97467 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.85'])
2022-04-01 02:07:03,294 p=97467 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.85'])
2022-04-01 02:07:03,684 p=97467 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.85'])
2022-04-01 02:07:03,696 p=97467 u=moonja n=ansible | TASK [pgsql94-bdr : Configure pg_hba.conf to enable communication with trust authentication between servers] **********************
2022-04-01 02:07:03,812 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.0.82']) 
2022-04-01 02:07:03,815 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.0.83']) 
2022-04-01 02:07:03,816 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.0.84']) 
2022-04-01 02:07:03,819 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.0.85']) 
2022-04-01 02:07:03,822 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.0.82']) 
2022-04-01 02:07:03,823 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.82']) 
2022-04-01 02:07:03,825 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.0.83']) 
2022-04-01 02:07:03,826 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.83']) 
2022-04-01 02:07:03,829 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.84']) 
2022-04-01 02:07:03,830 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.85']) 
2022-04-01 02:07:03,830 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.0.84']) 
2022-04-01 02:07:03,833 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.0.85']) 
2022-04-01 02:07:03,836 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.82']) 
2022-04-01 02:07:03,839 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.83']) 
2022-04-01 02:07:03,843 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.84']) 
2022-04-01 02:07:03,844 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.85']) 
2022-04-01 02:07:04,328 p=97467 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.0.82'])
2022-04-01 02:07:04,331 p=97467 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.0.82'])
2022-04-01 02:07:04,349 p=97467 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.0.82'])
2022-04-01 02:07:04,753 p=97467 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.0.83'])
2022-04-01 02:07:04,769 p=97467 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.0.83'])
2022-04-01 02:07:04,782 p=97467 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.0.83'])
2022-04-01 02:07:05,190 p=97467 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.0.84'])
2022-04-01 02:07:05,246 p=97467 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.0.84'])
2022-04-01 02:07:05,262 p=97467 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.0.84'])
2022-04-01 02:07:05,659 p=97467 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.0.85'])
2022-04-01 02:07:05,703 p=97467 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.0.85'])
2022-04-01 02:07:05,735 p=97467 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.0.85'])
2022-04-01 02:07:06,216 p=97467 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.82'])
2022-04-01 02:07:06,260 p=97467 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.82'])
2022-04-01 02:07:06,281 p=97467 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.82'])
2022-04-01 02:07:06,686 p=97467 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.83'])
2022-04-01 02:07:06,722 p=97467 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.83'])
2022-04-01 02:07:06,744 p=97467 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.83'])
2022-04-01 02:07:07,109 p=97467 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.84'])
2022-04-01 02:07:07,131 p=97467 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.84'])
2022-04-01 02:07:07,166 p=97467 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.84'])
2022-04-01 02:07:07,513 p=97467 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.85'])
2022-04-01 02:07:07,552 p=97467 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.85'])
2022-04-01 02:07:07,604 p=97467 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.85'])
2022-04-01 02:07:07,615 p=97467 u=moonja n=ansible | TASK [pgsql94-bdr : Configure postgresql.conf with shared GUCs of PostgreSQL for BDR] *********************************************
2022-04-01 02:07:07,641 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"}) 
2022-04-01 02:07:07,642 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'}) 
2022-04-01 02:07:07,645 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'}) 
2022-04-01 02:07:07,650 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"}) 
2022-04-01 02:07:07,657 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'}) 
2022-04-01 02:07:07,658 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"}) 
2022-04-01 02:07:07,658 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'}) 
2022-04-01 02:07:07,659 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"}) 
2022-04-01 02:07:07,661 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'}) 
2022-04-01 02:07:07,663 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'}) 
2022-04-01 02:07:07,668 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"}) 
2022-04-01 02:07:07,672 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'}) 
2022-04-01 02:07:07,673 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"}) 
2022-04-01 02:07:07,674 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'}) 
2022-04-01 02:07:08,152 p=97467 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"})
2022-04-01 02:07:08,175 p=97467 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"})
2022-04-01 02:07:08,188 p=97467 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"})
2022-04-01 02:07:08,585 p=97467 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'})
2022-04-01 02:07:08,645 p=97467 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'})
2022-04-01 02:07:08,647 p=97467 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'})
2022-04-01 02:07:09,102 p=97467 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'})
2022-04-01 02:07:09,204 p=97467 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'})
2022-04-01 02:07:09,207 p=97467 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'})
2022-04-01 02:07:09,619 p=97467 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"})
2022-04-01 02:07:09,651 p=97467 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"})
2022-04-01 02:07:09,678 p=97467 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"})
2022-04-01 02:07:10,057 p=97467 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'})
2022-04-01 02:07:10,057 p=97467 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'})
2022-04-01 02:07:10,137 p=97467 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'})
2022-04-01 02:07:10,619 p=97467 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"})
2022-04-01 02:07:10,634 p=97467 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"})
2022-04-01 02:07:10,677 p=97467 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"})
2022-04-01 02:07:11,041 p=97467 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'})
2022-04-01 02:07:11,056 p=97467 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'})
2022-04-01 02:07:11,081 p=97467 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'})
2022-04-01 02:07:11,095 p=97467 u=moonja n=ansible | TASK [pgsql94-bdr : Start PostgreSQL] *********************************************************************************************
2022-04-01 02:07:11,117 p=97467 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:07:11,135 p=97467 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:07:12,593 p=97467 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:07:12,604 p=97467 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:07:12,622 p=97467 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:07:12,633 p=97467 u=moonja n=ansible | TASK [pgsql94-bdr : Configure Primary Master's postgresql.conf] *******************************************************************
2022-04-01 02:07:12,671 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 02:07:12,672 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.81 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:07:12,693 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 02:07:12,694 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.82 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:07:13,176 p=97467 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:07:13,194 p=97467 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:07:13,194 p=97467 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:07:13,705 p=97467 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.85 dbname=bdrdemo user=postgres'"})
2022-04-01 02:07:13,714 p=97467 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"})
2022-04-01 02:07:13,715 p=97467 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.84 dbname=bdrdemo user=postgres'"})
2022-04-01 02:07:13,727 p=97467 u=moonja n=ansible | TASK [pgsql94-bdr : Configure Slave Master's postgresql.conf] *********************************************************************
2022-04-01 02:07:13,766 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 02:07:13,767 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:07:13,769 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': 'bdr.demo_init_replica = on'}) 
2022-04-01 02:07:13,770 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:07:13,830 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 02:07:13,834 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:07:13,840 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': 'bdr.demo_init_replica = on'}) 
2022-04-01 02:07:13,840 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:07:14,384 p=97467 u=moonja n=ansible | ok: [co7-node01] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:07:14,385 p=97467 u=moonja n=ansible | ok: [co7-node03] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:07:14,385 p=97467 u=moonja n=ansible | ok: [co7-node02] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:07:14,794 p=97467 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"})
2022-04-01 02:07:14,817 p=97467 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"})
2022-04-01 02:07:14,818 p=97467 u=moonja n=ansible | ok: [co7-node01] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"})
2022-04-01 02:07:15,263 p=97467 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': 'bdr.demo_init_replica = on'})
2022-04-01 02:07:15,325 p=97467 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': 'bdr.demo_init_replica = on'})
2022-04-01 02:07:15,329 p=97467 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': 'bdr.demo_init_replica = on'})
2022-04-01 02:07:15,690 p=97467 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"})
2022-04-01 02:07:15,783 p=97467 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"})
2022-04-01 02:07:15,784 p=97467 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"})
2022-04-01 02:07:15,797 p=97467 u=moonja n=ansible | TASK [pgsql94-bdr : Final PostgreSQL restart] *************************************************************************************
2022-04-01 02:07:15,819 p=97467 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:07:15,837 p=97467 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:07:22,764 p=97467 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"ansible_job_id": "855544342616.14022", "changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "restart"], "delta": "0:00:00.031520", "end": "2022-04-01 02:07:16.990818", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/var/lib/pgsql/.ansible_async/855544342616.14022", "start": "2022-04-01 02:07:16.959298", "started": 1, "stderr": "pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist\nIs server running?\nstarting server anyway\npg_ctl: could not read file \"/var/lib/pgsql/9.4-bdr/data/postmaster.opts\"", "stderr_lines": ["pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist", "Is server running?", "starting server anyway", "pg_ctl: could not read file \"/var/lib/pgsql/9.4-bdr/data/postmaster.opts\""], "stdout": "", "stdout_lines": []}
2022-04-01 02:07:22,819 p=97467 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"ansible_job_id": "981750471046.2337", "changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "restart"], "delta": "0:00:00.031350", "end": "2022-04-01 02:07:16.993021", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/var/lib/pgsql/.ansible_async/981750471046.2337", "start": "2022-04-01 02:07:16.961671", "started": 1, "stderr": "pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist\nIs server running?\nstarting server anyway\npg_ctl: could not read file \"/var/lib/pgsql/9.4-bdr/data/postmaster.opts\"", "stderr_lines": ["pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist", "Is server running?", "starting server anyway", "pg_ctl: could not read file \"/var/lib/pgsql/9.4-bdr/data/postmaster.opts\""], "stdout": "", "stdout_lines": []}
2022-04-01 02:07:22,819 p=97467 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"ansible_job_id": "791903534831.2128", "changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "restart"], "delta": "0:00:00.030153", "end": "2022-04-01 02:07:16.982584", "finished": 1, "msg": "non-zero return code", "rc": 1, "results_file": "/var/lib/pgsql/.ansible_async/791903534831.2128", "start": "2022-04-01 02:07:16.952431", "started": 1, "stderr": "pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist\nIs server running?\nstarting server anyway\npg_ctl: could not read file \"/var/lib/pgsql/9.4-bdr/data/postmaster.opts\"", "stderr_lines": ["pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist", "Is server running?", "starting server anyway", "pg_ctl: could not read file \"/var/lib/pgsql/9.4-bdr/data/postmaster.opts\""], "stdout": "", "stdout_lines": []}
2022-04-01 02:07:22,834 p=97467 u=moonja n=ansible | TASK [pgsql94-bdr : Create database to sync between Master Servers] ***************************************************************
2022-04-01 02:07:22,858 p=97467 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:07:22,873 p=97467 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:07:22,882 p=97467 u=moonja n=ansible | TASK [pgsql94-bdr : Connect to database, create user and grant access for all Master Servers] *************************************
2022-04-01 02:07:22,905 p=97467 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:07:22,920 p=97467 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:07:22,930 p=97467 u=moonja n=ansible | TASK [pgsql94-bdr : Create extentions for BDR] ************************************************************************************
2022-04-01 02:07:22,958 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item=CREATE EXTENSION btree_gist;) 
2022-04-01 02:07:22,959 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item=CREATE EXTENSION bdr;) 
2022-04-01 02:07:22,971 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item=CREATE EXTENSION btree_gist;) 
2022-04-01 02:07:22,971 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item=CREATE EXTENSION bdr;) 
2022-04-01 02:07:22,982 p=97467 u=moonja n=ansible | TASK [pgsql94-bdr : Create group on Primary Master Server for BDR] ****************************************************************
2022-04-01 02:07:23,017 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item=SELECT bdr.bdr_group_create ( local_node_name := 'co7-master', node_external_dsn := 'host=192.168.0.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-01 02:07:23,030 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item=SELECT bdr.bdr_group_create ( local_node_name := 'co7-slave', node_external_dsn := 'host=192.168.0.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-01 02:07:23,043 p=97467 u=moonja n=ansible | TASK [pgsql94-bdr : Join group from other Master Servers] *************************************************************************
2022-04-01 02:07:23,085 p=97467 u=moonja n=ansible | skipping: [co7-master] => (item=SELECT bdr.bdr_group_join ( local_node_name := 'co7-master', node_external_dsn := 'host=192.168.0.81 user=bdrsync dbname=bdrdemo password=changeme', join_using_dsn := 'host=192.168.0.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-01 02:07:23,100 p=97467 u=moonja n=ansible | skipping: [co7-slave] => (item=SELECT bdr.bdr_group_join ( local_node_name := 'co7-slave', node_external_dsn := 'host=192.168.0.82 user=bdrsync dbname=bdrdemo password=changeme', join_using_dsn := 'host=192.168.0.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-01 02:07:23,134 p=97467 u=moonja n=ansible | PLAY RECAP ************************************************************************************************************************
2022-04-01 02:07:23,134 p=97467 u=moonja n=ansible | co7-master                 : ok=3    changed=1    unreachable=0    failed=0    skipped=19   rescued=0    ignored=0   
2022-04-01 02:07:23,134 p=97467 u=moonja n=ansible | co7-node01                 : ok=14   changed=12   unreachable=0    failed=1    skipped=2    rescued=0    ignored=1   
2022-04-01 02:07:23,134 p=97467 u=moonja n=ansible | co7-node02                 : ok=14   changed=12   unreachable=0    failed=1    skipped=2    rescued=0    ignored=1   
2022-04-01 02:07:23,134 p=97467 u=moonja n=ansible | co7-node03                 : ok=14   changed=12   unreachable=0    failed=1    skipped=2    rescued=0    ignored=1   
2022-04-01 02:07:23,134 p=97467 u=moonja n=ansible | co7-slave                  : ok=3    changed=1    unreachable=0    failed=0    skipped=19   rescued=0    ignored=0   
2022-04-01 02:11:45,902 p=2242 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. 
This feature will be removed from ansible-core in version 2.14. Deprecation warnings can be 
disabled by setting deprecation_warnings=False in ansible.cfg.
2022-04-01 02:11:45,911 p=2242 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see
details

2022-04-01 02:11:46,130 p=2242 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This 
feature will be removed in version 2.16. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2022-04-01 02:11:46,167 p=2242 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgsql94-bdr/tasks/upgrade.yml is empty and
had no tasks to include

2022-04-01 02:11:46,181 p=2242 u=moonja n=ansible | PLAY [all] ***************************************************************************************
2022-04-01 02:11:46,201 p=2242 u=moonja n=ansible | TASK [Gathering Facts] ***************************************************************************
2022-04-01 02:11:48,506 p=2242 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 02:11:48,507 p=2242 u=moonja n=ansible | ok: [co7-master]
2022-04-01 02:11:48,568 p=2242 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 02:11:48,571 p=2242 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 02:11:48,964 p=2242 u=moonja n=ansible | ok: [co7-slave]
2022-04-01 02:11:48,982 p=2242 u=moonja n=ansible | TASK [pgsql94-bdr : Check OS support] ************************************************************
2022-04-01 02:11:49,003 p=2242 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:11:49,019 p=2242 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:11:49,050 p=2242 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 02:11:49,052 p=2242 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 02:11:49,063 p=2242 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 02:11:49,073 p=2242 u=moonja n=ansible | TASK [pgsql94-bdr : Check packet manager support] ************************************************
2022-04-01 02:11:49,107 p=2242 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:11:49,123 p=2242 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:11:49,139 p=2242 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 02:11:49,141 p=2242 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 02:11:49,155 p=2242 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 02:11:49,165 p=2242 u=moonja n=ansible | TASK [pgsql94-bdr : Add bdr94 repository] ********************************************************
2022-04-01 02:11:49,846 p=2242 u=moonja n=ansible | changed: [co7-master]
2022-04-01 02:11:49,856 p=2242 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:11:49,858 p=2242 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:11:49,865 p=2242 u=moonja n=ansible | changed: [co7-slave]
2022-04-01 02:11:49,873 p=2242 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:11:49,883 p=2242 u=moonja n=ansible | TASK [pgsql94-bdr : debug] ***********************************************************************
2022-04-01 02:11:49,921 p=2242 u=moonja n=ansible | ok: [co7-master] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 02:11:49,938 p=2242 u=moonja n=ansible | ok: [co7-slave] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 02:11:49,953 p=2242 u=moonja n=ansible | ok: [co7-node01] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 02:11:49,955 p=2242 u=moonja n=ansible | ok: [co7-node02] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 02:11:49,968 p=2242 u=moonja n=ansible | ok: [co7-node03] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 02:11:49,979 p=2242 u=moonja n=ansible | TASK [pgsql94-bdr : Install PostgreSQL BDR packages] *********************************************
2022-04-01 02:11:50,002 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item=python-psycopg2) 
2022-04-01 02:11:50,003 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item=postgresql-bdr94-bdr) 
2022-04-01 02:11:50,018 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item=python-psycopg2) 
2022-04-01 02:11:50,019 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item=postgresql-bdr94-bdr) 
2022-04-01 02:11:59,093 p=2242 u=moonja n=ansible | ok: [co7-node01] => (item=python-psycopg2)
2022-04-01 02:11:59,446 p=2242 u=moonja n=ansible | ok: [co7-node02] => (item=python-psycopg2)
2022-04-01 02:11:59,461 p=2242 u=moonja n=ansible | ok: [co7-node03] => (item=python-psycopg2)
2022-04-01 02:12:01,515 p=2242 u=moonja n=ansible | ok: [co7-node01] => (item=postgresql-bdr94-bdr)
2022-04-01 02:12:02,306 p=2242 u=moonja n=ansible | ok: [co7-node02] => (item=postgresql-bdr94-bdr)
2022-04-01 02:12:03,462 p=2242 u=moonja n=ansible | ok: [co7-node03] => (item=postgresql-bdr94-bdr)
2022-04-01 02:12:03,475 p=2242 u=moonja n=ansible | TASK [pgsql94-bdr : Change the permissions on the /tmp directory] ********************************
2022-04-01 02:12:03,497 p=2242 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:12:03,514 p=2242 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:12:04,178 p=2242 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:12:04,179 p=2242 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:12:04,180 p=2242 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:12:04,189 p=2242 u=moonja n=ansible | TASK [pgsql94-bdr : Stop PostgreSQL if are running] **********************************************
2022-04-01 02:12:04,210 p=2242 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:12:04,227 p=2242 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:12:04,939 p=2242 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "stop"], "delta": "0:00:00.030310", "end": "2022-04-01 02:12:05.117730", "msg": "non-zero return code", "rc": 1, "start": "2022-04-01 02:12:05.087420", "stderr": "pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist\nIs server running?", "stderr_lines": ["pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist", "Is server running?"], "stdout": "", "stdout_lines": []}
2022-04-01 02:12:04,940 p=2242 u=moonja n=ansible | ...ignoring
2022-04-01 02:12:04,943 p=2242 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "stop"], "delta": "0:00:00.031427", "end": "2022-04-01 02:12:05.124464", "msg": "non-zero return code", "rc": 1, "start": "2022-04-01 02:12:05.093037", "stderr": "pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist\nIs server running?", "stderr_lines": ["pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist", "Is server running?"], "stdout": "", "stdout_lines": []}
2022-04-01 02:12:04,943 p=2242 u=moonja n=ansible | ...ignoring
2022-04-01 02:12:04,944 p=2242 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "stop"], "delta": "0:00:00.031108", "end": "2022-04-01 02:12:05.122155", "msg": "non-zero return code", "rc": 1, "start": "2022-04-01 02:12:05.091047", "stderr": "pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist\nIs server running?", "stderr_lines": ["pg_ctl: PID file \"/var/lib/pgsql/9.4-bdr/data/postmaster.pid\" does not exist", "Is server running?"], "stdout": "", "stdout_lines": []}
2022-04-01 02:12:04,944 p=2242 u=moonja n=ansible | ...ignoring
2022-04-01 02:12:04,954 p=2242 u=moonja n=ansible | TASK [pgsql94-bdr : Remove old PostgreSQL data directory if exists] ******************************
2022-04-01 02:12:04,990 p=2242 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:12:05,005 p=2242 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:12:05,530 p=2242 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:12:05,551 p=2242 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:12:05,559 p=2242 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:12:05,568 p=2242 u=moonja n=ansible | TASK [pgsql94-bdr : Initialize new PostgreSQL BDR cluster on upstream server] ********************
2022-04-01 02:12:05,588 p=2242 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:12:05,604 p=2242 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:12:11,304 p=2242 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:12:11,329 p=2242 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:12:11,345 p=2242 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:12:11,354 p=2242 u=moonja n=ansible | TASK [pgsql94-bdr : Configure pg_hba.conf for basic authentication] ******************************
2022-04-01 02:12:11,379 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'}) 
2022-04-01 02:12:11,381 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'}) 
2022-04-01 02:12:11,384 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'}) 
2022-04-01 02:12:11,385 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'}) 
2022-04-01 02:12:11,396 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'}) 
2022-04-01 02:12:11,398 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'}) 
2022-04-01 02:12:11,401 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'}) 
2022-04-01 02:12:11,401 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'}) 
2022-04-01 02:12:12,093 p=2242 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'})
2022-04-01 02:12:12,099 p=2242 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'})
2022-04-01 02:12:12,114 p=2242 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'})
2022-04-01 02:12:12,495 p=2242 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'})
2022-04-01 02:12:12,536 p=2242 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'})
2022-04-01 02:12:12,557 p=2242 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'})
2022-04-01 02:12:12,898 p=2242 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'})
2022-04-01 02:12:12,950 p=2242 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'})
2022-04-01 02:12:12,978 p=2242 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'})
2022-04-01 02:12:13,310 p=2242 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'})
2022-04-01 02:12:13,377 p=2242 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'})
2022-04-01 02:12:13,380 p=2242 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'})
2022-04-01 02:12:13,391 p=2242 u=moonja n=ansible | TASK [pgsql94-bdr : Configure pg_hba.conf to enable communication with password authentication between servers] ***
2022-04-01 02:12:13,451 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.82']) 
2022-04-01 02:12:13,457 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.83']) 
2022-04-01 02:12:13,458 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.84']) 
2022-04-01 02:12:13,459 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.85']) 
2022-04-01 02:12:13,466 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.82']) 
2022-04-01 02:12:13,469 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.83']) 
2022-04-01 02:12:13,472 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.84']) 
2022-04-01 02:12:13,473 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.85']) 
2022-04-01 02:12:13,926 p=2242 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.82'])
2022-04-01 02:12:13,926 p=2242 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.82'])
2022-04-01 02:12:13,931 p=2242 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.82'])
2022-04-01 02:12:14,339 p=2242 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.83'])
2022-04-01 02:12:14,345 p=2242 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.83'])
2022-04-01 02:12:14,346 p=2242 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.83'])
2022-04-01 02:12:14,749 p=2242 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.84'])
2022-04-01 02:12:14,757 p=2242 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.84'])
2022-04-01 02:12:14,759 p=2242 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.84'])
2022-04-01 02:12:15,154 p=2242 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.85'])
2022-04-01 02:12:15,172 p=2242 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.85'])
2022-04-01 02:12:15,196 p=2242 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.85'])
2022-04-01 02:12:15,207 p=2242 u=moonja n=ansible | TASK [pgsql94-bdr : Configure pg_hba.conf to enable communication with trust authentication between servers] ***
2022-04-01 02:12:15,268 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.0.82']) 
2022-04-01 02:12:15,269 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.0.83']) 
2022-04-01 02:12:15,275 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.0.84']) 
2022-04-01 02:12:15,276 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.0.85']) 
2022-04-01 02:12:15,279 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.82']) 
2022-04-01 02:12:15,282 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.83']) 
2022-04-01 02:12:15,284 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.0.82']) 
2022-04-01 02:12:15,285 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.84']) 
2022-04-01 02:12:15,285 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.85']) 
2022-04-01 02:12:15,287 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.0.83']) 
2022-04-01 02:12:15,290 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.0.84']) 
2022-04-01 02:12:15,293 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.0.85']) 
2022-04-01 02:12:15,300 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.82']) 
2022-04-01 02:12:15,300 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.83']) 
2022-04-01 02:12:15,301 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.84']) 
2022-04-01 02:12:15,302 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.85']) 
2022-04-01 02:12:15,764 p=2242 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.0.82'])
2022-04-01 02:12:15,791 p=2242 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.0.82'])
2022-04-01 02:12:15,792 p=2242 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.0.82'])
2022-04-01 02:12:16,166 p=2242 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.0.83'])
2022-04-01 02:12:16,202 p=2242 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.0.83'])
2022-04-01 02:12:16,202 p=2242 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.0.83'])
2022-04-01 02:12:16,574 p=2242 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.0.84'])
2022-04-01 02:12:16,610 p=2242 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.0.84'])
2022-04-01 02:12:16,613 p=2242 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.0.84'])
2022-04-01 02:12:16,979 p=2242 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.0.85'])
2022-04-01 02:12:17,015 p=2242 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.0.85'])
2022-04-01 02:12:17,016 p=2242 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.0.85'])
2022-04-01 02:12:17,399 p=2242 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.82'])
2022-04-01 02:12:17,416 p=2242 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.82'])
2022-04-01 02:12:17,427 p=2242 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.82'])
2022-04-01 02:12:17,815 p=2242 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.83'])
2022-04-01 02:12:17,825 p=2242 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.83'])
2022-04-01 02:12:17,827 p=2242 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.83'])
2022-04-01 02:12:18,257 p=2242 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.84'])
2022-04-01 02:12:18,262 p=2242 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.84'])
2022-04-01 02:12:18,263 p=2242 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.84'])
2022-04-01 02:12:18,663 p=2242 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.85'])
2022-04-01 02:12:18,668 p=2242 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.85'])
2022-04-01 02:12:18,679 p=2242 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.85'])
2022-04-01 02:12:18,692 p=2242 u=moonja n=ansible | TASK [pgsql94-bdr : Configure postgresql.conf with shared GUCs of PostgreSQL for BDR] ************
2022-04-01 02:12:18,717 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"}) 
2022-04-01 02:12:18,718 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'}) 
2022-04-01 02:12:18,721 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'}) 
2022-04-01 02:12:18,726 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"}) 
2022-04-01 02:12:18,732 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'}) 
2022-04-01 02:12:18,733 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"}) 
2022-04-01 02:12:18,733 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'}) 
2022-04-01 02:12:18,734 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"}) 
2022-04-01 02:12:18,735 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'}) 
2022-04-01 02:12:18,738 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'}) 
2022-04-01 02:12:18,743 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"}) 
2022-04-01 02:12:18,823 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'}) 
2022-04-01 02:12:18,824 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"}) 
2022-04-01 02:12:18,824 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'}) 
2022-04-01 02:12:19,205 p=2242 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"})
2022-04-01 02:12:19,243 p=2242 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"})
2022-04-01 02:12:19,264 p=2242 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"})
2022-04-01 02:12:19,610 p=2242 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'})
2022-04-01 02:12:19,660 p=2242 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'})
2022-04-01 02:12:19,671 p=2242 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'})
2022-04-01 02:12:20,036 p=2242 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'})
2022-04-01 02:12:20,061 p=2242 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'})
2022-04-01 02:12:20,102 p=2242 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'})
2022-04-01 02:12:20,459 p=2242 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"})
2022-04-01 02:12:20,460 p=2242 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"})
2022-04-01 02:12:20,519 p=2242 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"})
2022-04-01 02:12:20,871 p=2242 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'})
2022-04-01 02:12:20,878 p=2242 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'})
2022-04-01 02:12:20,945 p=2242 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'})
2022-04-01 02:12:21,272 p=2242 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"})
2022-04-01 02:12:21,289 p=2242 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"})
2022-04-01 02:12:21,359 p=2242 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"})
2022-04-01 02:12:21,668 p=2242 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'})
2022-04-01 02:12:21,691 p=2242 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'})
2022-04-01 02:12:21,755 p=2242 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'})
2022-04-01 02:12:21,767 p=2242 u=moonja n=ansible | TASK [pgsql94-bdr : Start PostgreSQL] ************************************************************
2022-04-01 02:12:21,803 p=2242 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:12:21,818 p=2242 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:12:23,330 p=2242 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:12:23,346 p=2242 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:12:24,616 p=2242 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:12:24,628 p=2242 u=moonja n=ansible | TASK [pgsql94-bdr : Configure Primary Master's postgresql.conf] **********************************
2022-04-01 02:12:24,667 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 02:12:24,667 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.81 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:12:24,685 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 02:12:24,685 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.82 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:12:25,388 p=2242 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:12:25,410 p=2242 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:12:25,415 p=2242 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:12:26,139 p=2242 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"})
2022-04-01 02:12:26,230 p=2242 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.85 dbname=bdrdemo user=postgres'"})
2022-04-01 02:12:26,257 p=2242 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.84 dbname=bdrdemo user=postgres'"})
2022-04-01 02:12:26,269 p=2242 u=moonja n=ansible | TASK [pgsql94-bdr : Configure Slave Master's postgresql.conf] ************************************
2022-04-01 02:12:26,305 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 02:12:26,306 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:12:26,309 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': 'bdr.demo_init_replica = on'}) 
2022-04-01 02:12:26,309 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:12:26,318 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 02:12:26,325 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:12:26,325 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': 'bdr.demo_init_replica = on'}) 
2022-04-01 02:12:26,326 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:12:26,856 p=2242 u=moonja n=ansible | ok: [co7-node01] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:12:26,895 p=2242 u=moonja n=ansible | ok: [co7-node03] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:12:26,896 p=2242 u=moonja n=ansible | ok: [co7-node02] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:12:27,285 p=2242 u=moonja n=ansible | ok: [co7-node01] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"})
2022-04-01 02:12:27,340 p=2242 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"})
2022-04-01 02:12:27,364 p=2242 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"})
2022-04-01 02:12:28,118 p=2242 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': 'bdr.demo_init_replica = on'})
2022-04-01 02:12:28,133 p=2242 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': 'bdr.demo_init_replica = on'})
2022-04-01 02:12:28,145 p=2242 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': 'bdr.demo_init_replica = on'})
2022-04-01 02:12:28,532 p=2242 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"})
2022-04-01 02:12:28,555 p=2242 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"})
2022-04-01 02:12:28,605 p=2242 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"})
2022-04-01 02:12:28,619 p=2242 u=moonja n=ansible | TASK [pgsql94-bdr : Final PostgreSQL restart] ****************************************************
2022-04-01 02:12:28,640 p=2242 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:12:28,657 p=2242 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:12:36,026 p=2242 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:12:36,027 p=2242 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:12:37,821 p=2242 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:12:37,832 p=2242 u=moonja n=ansible | TASK [pgsql94-bdr : Create database to sync between Master Servers] ******************************
2022-04-01 02:12:37,871 p=2242 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:12:37,904 p=2242 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:12:39,835 p=2242 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: 	connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?
2022-04-01 02:12:39,835 p=2242 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n"}
2022-04-01 02:12:39,853 p=2242 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: 	connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?
2022-04-01 02:12:39,853 p=2242 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n"}
2022-04-01 02:12:39,893 p=2242 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: 	connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?
2022-04-01 02:12:39,893 p=2242 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n"}
2022-04-01 02:12:39,903 p=2242 u=moonja n=ansible | TASK [pgsql94-bdr : Connect to database, create user and grant access for all Master Servers] ****
2022-04-01 02:12:39,926 p=2242 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:12:39,940 p=2242 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:12:39,949 p=2242 u=moonja n=ansible | TASK [pgsql94-bdr : Create extentions for BDR] ***************************************************
2022-04-01 02:12:39,974 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item=CREATE EXTENSION btree_gist;) 
2022-04-01 02:12:39,975 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item=CREATE EXTENSION bdr;) 
2022-04-01 02:12:39,988 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item=CREATE EXTENSION btree_gist;) 
2022-04-01 02:12:39,989 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item=CREATE EXTENSION bdr;) 
2022-04-01 02:12:40,000 p=2242 u=moonja n=ansible | TASK [pgsql94-bdr : Create group on Primary Master Server for BDR] *******************************
2022-04-01 02:12:40,033 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item=SELECT bdr.bdr_group_create ( local_node_name := 'co7-master', node_external_dsn := 'host=192.168.0.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-01 02:12:40,045 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item=SELECT bdr.bdr_group_create ( local_node_name := 'co7-slave', node_external_dsn := 'host=192.168.0.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-01 02:12:40,056 p=2242 u=moonja n=ansible | TASK [pgsql94-bdr : Join group from other Master Servers] ****************************************
2022-04-01 02:12:40,096 p=2242 u=moonja n=ansible | skipping: [co7-master] => (item=SELECT bdr.bdr_group_join ( local_node_name := 'co7-master', node_external_dsn := 'host=192.168.0.81 user=bdrsync dbname=bdrdemo password=changeme', join_using_dsn := 'host=192.168.0.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-01 02:12:40,112 p=2242 u=moonja n=ansible | skipping: [co7-slave] => (item=SELECT bdr.bdr_group_join ( local_node_name := 'co7-slave', node_external_dsn := 'host=192.168.0.82 user=bdrsync dbname=bdrdemo password=changeme', join_using_dsn := 'host=192.168.0.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-01 02:12:40,146 p=2242 u=moonja n=ansible | PLAY RECAP ***************************************************************************************
2022-04-01 02:12:40,146 p=2242 u=moonja n=ansible | co7-master                 : ok=3    changed=1    unreachable=0    failed=0    skipped=20   rescued=0    ignored=0   
2022-04-01 02:12:40,146 p=2242 u=moonja n=ansible | co7-node01                 : ok=16   changed=13   unreachable=0    failed=1    skipped=2    rescued=0    ignored=1   
2022-04-01 02:12:40,146 p=2242 u=moonja n=ansible | co7-node02                 : ok=16   changed=13   unreachable=0    failed=1    skipped=2    rescued=0    ignored=1   
2022-04-01 02:12:40,146 p=2242 u=moonja n=ansible | co7-node03                 : ok=16   changed=13   unreachable=0    failed=1    skipped=2    rescued=0    ignored=1   
2022-04-01 02:12:40,146 p=2242 u=moonja n=ansible | co7-slave                  : ok=3    changed=1    unreachable=0    failed=0    skipped=20   rescued=0    ignored=0   
2022-04-01 02:15:16,873 p=4585 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature 
will be removed from ansible-core in version 2.14. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2022-04-01 02:15:16,884 p=4585 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-04-01 02:15:17,144 p=4585 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be 
removed in version 2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in 
ansible.cfg.
2022-04-01 02:15:17,182 p=4585 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgsql94-bdr/tasks/upgrade.yml is empty and had no tasks
to include

2022-04-01 02:15:17,197 p=4585 u=moonja n=ansible | PLAY [all] ****************************************************************************************************
2022-04-01 02:15:17,219 p=4585 u=moonja n=ansible | TASK [Gathering Facts] ****************************************************************************************
2022-04-01 02:15:19,488 p=4585 u=moonja n=ansible | ok: [co7-master]
2022-04-01 02:15:19,489 p=4585 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 02:15:19,517 p=4585 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 02:15:19,589 p=4585 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 02:15:20,100 p=4585 u=moonja n=ansible | ok: [co7-slave]
2022-04-01 02:15:20,119 p=4585 u=moonja n=ansible | TASK [pgsql94-bdr : Check OS support] *************************************************************************
2022-04-01 02:15:20,140 p=4585 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:15:20,156 p=4585 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:15:20,172 p=4585 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 02:15:20,191 p=4585 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 02:15:20,202 p=4585 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 02:15:20,213 p=4585 u=moonja n=ansible | TASK [pgsql94-bdr : Check if PostgreSQL is running] ***********************************************************
2022-04-01 02:15:20,236 p=4585 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:15:20,255 p=4585 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:15:20,991 p=4585 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:15:20,992 p=4585 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:15:20,994 p=4585 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:15:21,004 p=4585 u=moonja n=ansible | TASK [pgsql94-bdr : Start PostgreSQL] *************************************************************************
2022-04-01 02:15:21,026 p=4585 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:15:21,042 p=4585 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:15:21,076 p=4585 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 02:15:21,076 p=4585 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 02:15:21,088 p=4585 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 02:15:21,099 p=4585 u=moonja n=ansible | TASK [pgsql94-bdr : Check if database is available] ***********************************************************
2022-04-01 02:15:21,121 p=4585 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:15:21,138 p=4585 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:15:23,245 p=4585 u=moonja n=ansible | [WARNING]: PostgreSQL server is unavailable: could not connect to server: No such file or directory         Is
the server running locally and accepting         connections on Unix domain socket
"/var/run/postgresql/.s.PGSQL.5432"?

2022-04-01 02:15:23,246 p=4585 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": false, "failed_when_result": true, "is_available": false, "server_version": {}}
2022-04-01 02:15:23,246 p=4585 u=moonja n=ansible | ...ignoring
2022-04-01 02:15:23,256 p=4585 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": false, "failed_when_result": true, "is_available": false, "server_version": {}}
2022-04-01 02:15:23,256 p=4585 u=moonja n=ansible | ...ignoring
2022-04-01 02:15:23,274 p=4585 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": false, "failed_when_result": true, "is_available": false, "server_version": {}}
2022-04-01 02:15:23,274 p=4585 u=moonja n=ansible | ...ignoring
2022-04-01 02:15:23,284 p=4585 u=moonja n=ansible | TASK [pgsql94-bdr : Remove logical replications of BDR] *******************************************************
2022-04-01 02:15:23,307 p=4585 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:15:23,325 p=4585 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:15:24,048 p=4585 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n"}
2022-04-01 02:15:24,049 p=4585 u=moonja n=ansible | ...ignoring
2022-04-01 02:15:24,071 p=4585 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n"}
2022-04-01 02:15:24,072 p=4585 u=moonja n=ansible | ...ignoring
2022-04-01 02:15:24,098 p=4585 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n"}
2022-04-01 02:15:24,099 p=4585 u=moonja n=ansible | ...ignoring
2022-04-01 02:15:24,109 p=4585 u=moonja n=ansible | TASK [pgsql94-bdr : Check if database is existed] *************************************************************
2022-04-01 02:15:24,131 p=4585 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:15:24,148 p=4585 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:15:24,672 p=4585 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": false, "failed_when_result": true, "is_available": false, "server_version": {}}
2022-04-01 02:15:24,672 p=4585 u=moonja n=ansible | ...ignoring
2022-04-01 02:15:24,730 p=4585 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": false, "failed_when_result": true, "is_available": false, "server_version": {}}
2022-04-01 02:15:24,731 p=4585 u=moonja n=ansible | ...ignoring
2022-04-01 02:15:24,744 p=4585 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": false, "failed_when_result": true, "is_available": false, "server_version": {}}
2022-04-01 02:15:24,744 p=4585 u=moonja n=ansible | ...ignoring
2022-04-01 02:15:24,754 p=4585 u=moonja n=ansible | TASK [pgsql94-bdr : Kill all postgresql connections for removing session held by user] ************************
2022-04-01 02:15:24,792 p=4585 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:15:24,807 p=4585 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:15:24,825 p=4585 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 02:15:24,831 p=4585 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 02:15:24,846 p=4585 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 02:15:24,856 p=4585 u=moonja n=ansible | TASK [pgsql94-bdr : Drop the database] ************************************************************************
2022-04-01 02:15:24,895 p=4585 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:15:24,912 p=4585 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:15:25,700 p=4585 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OperationalError: FATAL:  password authentication failed for user "bdrsync"
2022-04-01 02:15:25,700 p=4585 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": false, "msg": "unable to connect to database: FATAL:  password authentication failed for user \"bdrsync\"\n"}
2022-04-01 02:15:25,700 p=4585 u=moonja n=ansible | ...ignoring
2022-04-01 02:15:25,722 p=4585 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OperationalError: FATAL:  password authentication failed for user "bdrsync"
2022-04-01 02:15:25,722 p=4585 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": false, "msg": "unable to connect to database: FATAL:  password authentication failed for user \"bdrsync\"\n"}
2022-04-01 02:15:25,722 p=4585 u=moonja n=ansible | ...ignoring
2022-04-01 02:15:25,730 p=4585 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OperationalError: FATAL:  password authentication failed for user "bdrsync"
2022-04-01 02:15:25,730 p=4585 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": false, "msg": "unable to connect to database: FATAL:  password authentication failed for user \"bdrsync\"\n"}
2022-04-01 02:15:25,730 p=4585 u=moonja n=ansible | ...ignoring
2022-04-01 02:15:25,741 p=4585 u=moonja n=ansible | TASK [pgsql94-bdr : Stop PostgreSQL if are running] ***********************************************************
2022-04-01 02:15:25,764 p=4585 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:15:25,782 p=4585 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:15:28,335 p=4585 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:15:28,343 p=4585 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:15:28,349 p=4585 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:15:28,359 p=4585 u=moonja n=ansible | TASK [pgsql94-bdr : Remove old PostgreSQL data directory if exists] *******************************************
2022-04-01 02:15:28,381 p=4585 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:15:28,399 p=4585 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:15:29,166 p=4585 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:15:29,167 p=4585 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:15:29,168 p=4585 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:15:29,178 p=4585 u=moonja n=ansible | TASK [pgsql94-bdr : Check package manager support] ************************************************************
2022-04-01 02:15:29,199 p=4585 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:15:29,216 p=4585 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:15:29,233 p=4585 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 02:15:29,251 p=4585 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 02:15:29,261 p=4585 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 02:15:29,272 p=4585 u=moonja n=ansible | TASK [pgsql94-bdr : Remove PostgreSQL BDR packages] ***********************************************************
2022-04-01 02:15:29,296 p=4585 u=moonja n=ansible | skipping: [co7-master] => (item=python-psycopg2) 
2022-04-01 02:15:29,297 p=4585 u=moonja n=ansible | skipping: [co7-master] => (item=postgresql-bdr94) 
2022-04-01 02:15:29,301 p=4585 u=moonja n=ansible | skipping: [co7-master] => (item=postgresql-bdr94-bdr) 
2022-04-01 02:15:29,302 p=4585 u=moonja n=ansible | skipping: [co7-master] => (item=postgresql-bdr94-2ndquadrant-redhat) 
2022-04-01 02:15:29,313 p=4585 u=moonja n=ansible | skipping: [co7-slave] => (item=python-psycopg2) 
2022-04-01 02:15:29,314 p=4585 u=moonja n=ansible | skipping: [co7-slave] => (item=postgresql-bdr94) 
2022-04-01 02:15:29,317 p=4585 u=moonja n=ansible | skipping: [co7-slave] => (item=postgresql-bdr94-bdr) 
2022-04-01 02:15:29,317 p=4585 u=moonja n=ansible | skipping: [co7-slave] => (item=postgresql-bdr94-2ndquadrant-redhat) 
2022-04-01 02:15:36,404 p=4585 u=moonja n=ansible | changed: [co7-node02] => (item=python-psycopg2)
2022-04-01 02:15:36,424 p=4585 u=moonja n=ansible | changed: [co7-node03] => (item=python-psycopg2)
2022-04-01 02:15:36,503 p=4585 u=moonja n=ansible | changed: [co7-node01] => (item=python-psycopg2)
2022-04-01 02:15:47,398 p=4585 u=moonja n=ansible | changed: [co7-node02] => (item=postgresql-bdr94)
2022-04-01 02:15:47,583 p=4585 u=moonja n=ansible | changed: [co7-node03] => (item=postgresql-bdr94)
2022-04-01 02:15:47,948 p=4585 u=moonja n=ansible | changed: [co7-node01] => (item=postgresql-bdr94)
2022-04-01 02:15:48,099 p=4585 u=moonja n=ansible | ok: [co7-node02] => (item=postgresql-bdr94-bdr)
2022-04-01 02:15:48,302 p=4585 u=moonja n=ansible | ok: [co7-node03] => (item=postgresql-bdr94-bdr)
2022-04-01 02:15:48,672 p=4585 u=moonja n=ansible | ok: [co7-node01] => (item=postgresql-bdr94-bdr)
2022-04-01 02:15:48,821 p=4585 u=moonja n=ansible | ok: [co7-node02] => (item=postgresql-bdr94-2ndquadrant-redhat)
2022-04-01 02:15:48,990 p=4585 u=moonja n=ansible | ok: [co7-node03] => (item=postgresql-bdr94-2ndquadrant-redhat)
2022-04-01 02:15:49,356 p=4585 u=moonja n=ansible | ok: [co7-node01] => (item=postgresql-bdr94-2ndquadrant-redhat)
2022-04-01 02:15:49,411 p=4585 u=moonja n=ansible | PLAY RECAP ****************************************************************************************************
2022-04-01 02:15:49,411 p=4585 u=moonja n=ansible | co7-master                 : ok=1    changed=0    unreachable=0    failed=0    skipped=12   rescued=0    ignored=0   
2022-04-01 02:15:49,411 p=4585 u=moonja n=ansible | co7-node01                 : ok=9    changed=4    unreachable=0    failed=0    skipped=4    rescued=0    ignored=4   
2022-04-01 02:15:49,411 p=4585 u=moonja n=ansible | co7-node02                 : ok=9    changed=4    unreachable=0    failed=0    skipped=4    rescued=0    ignored=4   
2022-04-01 02:15:49,411 p=4585 u=moonja n=ansible | co7-node03                 : ok=9    changed=4    unreachable=0    failed=0    skipped=4    rescued=0    ignored=4   
2022-04-01 02:15:49,411 p=4585 u=moonja n=ansible | co7-slave                  : ok=1    changed=0    unreachable=0    failed=0    skipped=12   rescued=0    ignored=0   
2022-04-01 02:16:11,029 p=5329 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature 
will be removed from ansible-core in version 2.14. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2022-04-01 02:16:11,040 p=5329 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-04-01 02:16:11,283 p=5329 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be 
removed in version 2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in 
ansible.cfg.
2022-04-01 02:16:11,318 p=5329 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgsql94-bdr/tasks/upgrade.yml is empty and had no tasks
to include

2022-04-01 02:16:11,332 p=5329 u=moonja n=ansible | PLAY [all] ****************************************************************************************************
2022-04-01 02:16:11,355 p=5329 u=moonja n=ansible | TASK [Gathering Facts] ****************************************************************************************
2022-04-01 02:16:13,571 p=5329 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 02:16:13,602 p=5329 u=moonja n=ansible | ok: [co7-master]
2022-04-01 02:16:13,629 p=5329 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 02:16:13,651 p=5329 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 02:16:13,998 p=5329 u=moonja n=ansible | ok: [co7-slave]
2022-04-01 02:16:14,016 p=5329 u=moonja n=ansible | TASK [pgsql94-bdr : Check OS support] *************************************************************************
2022-04-01 02:16:14,039 p=5329 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:16:14,055 p=5329 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:16:14,090 p=5329 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 02:16:14,090 p=5329 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 02:16:14,102 p=5329 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 02:16:14,114 p=5329 u=moonja n=ansible | TASK [pgsql94-bdr : Check packet manager support] *************************************************************
2022-04-01 02:16:14,135 p=5329 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:16:14,152 p=5329 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:16:14,185 p=5329 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 02:16:14,186 p=5329 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 02:16:14,199 p=5329 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 02:16:14,210 p=5329 u=moonja n=ansible | TASK [pgsql94-bdr : Add bdr94 repository] *********************************************************************
2022-04-01 02:16:14,940 p=5329 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:16:14,941 p=5329 u=moonja n=ansible | changed: [co7-slave]
2022-04-01 02:16:14,947 p=5329 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:16:14,952 p=5329 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:16:14,961 p=5329 u=moonja n=ansible | changed: [co7-master]
2022-04-01 02:16:14,973 p=5329 u=moonja n=ansible | TASK [pgsql94-bdr : debug] ************************************************************************************
2022-04-01 02:16:15,012 p=5329 u=moonja n=ansible | ok: [co7-master] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 02:16:15,031 p=5329 u=moonja n=ansible | ok: [co7-slave] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 02:16:15,048 p=5329 u=moonja n=ansible | ok: [co7-node01] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 02:16:15,049 p=5329 u=moonja n=ansible | ok: [co7-node02] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 02:16:15,062 p=5329 u=moonja n=ansible | ok: [co7-node03] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 02:16:15,073 p=5329 u=moonja n=ansible | TASK [pgsql94-bdr : Install PostgreSQL BDR packages] **********************************************************
2022-04-01 02:16:15,097 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item=python-psycopg2) 
2022-04-01 02:16:15,099 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item=postgresql-bdr94-bdr) 
2022-04-01 02:16:15,113 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item=python-psycopg2) 
2022-04-01 02:16:15,115 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item=postgresql-bdr94-bdr) 
2022-04-01 02:16:30,777 p=5329 u=moonja n=ansible | changed: [co7-node01] => (item=python-psycopg2)
2022-04-01 02:16:31,016 p=5329 u=moonja n=ansible | changed: [co7-node03] => (item=python-psycopg2)
2022-04-01 02:16:31,640 p=5329 u=moonja n=ansible | changed: [co7-node02] => (item=python-psycopg2)
2022-04-01 02:17:04,706 p=5329 u=moonja n=ansible | changed: [co7-node01] => (item=postgresql-bdr94-bdr)
2022-04-01 02:17:05,381 p=5329 u=moonja n=ansible | changed: [co7-node03] => (item=postgresql-bdr94-bdr)
2022-04-01 02:17:05,402 p=5329 u=moonja n=ansible | changed: [co7-node02] => (item=postgresql-bdr94-bdr)
2022-04-01 02:17:05,413 p=5329 u=moonja n=ansible | TASK [pgsql94-bdr : Change the permissions on the /tmp directory] *********************************************
2022-04-01 02:17:05,435 p=5329 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:17:05,467 p=5329 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:17:06,095 p=5329 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 02:17:06,107 p=5329 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 02:17:06,118 p=5329 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 02:17:06,129 p=5329 u=moonja n=ansible | TASK [pgsql94-bdr : Stop PostgreSQL if are running] ***********************************************************
2022-04-01 02:17:06,151 p=5329 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:17:06,168 p=5329 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:17:06,811 p=5329 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "stop"], "delta": "0:00:00.032235", "end": "2022-04-01 02:17:06.961187", "msg": "non-zero return code", "rc": 1, "start": "2022-04-01 02:17:06.928952", "stderr": "pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory", "stderr_lines": ["pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory"], "stdout": "", "stdout_lines": []}
2022-04-01 02:17:06,811 p=5329 u=moonja n=ansible | ...ignoring
2022-04-01 02:17:06,812 p=5329 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "stop"], "delta": "0:00:00.031352", "end": "2022-04-01 02:17:06.959987", "msg": "non-zero return code", "rc": 1, "start": "2022-04-01 02:17:06.928635", "stderr": "pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory", "stderr_lines": ["pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory"], "stdout": "", "stdout_lines": []}
2022-04-01 02:17:06,812 p=5329 u=moonja n=ansible | ...ignoring
2022-04-01 02:17:06,812 p=5329 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "stop"], "delta": "0:00:00.031658", "end": "2022-04-01 02:17:06.965747", "msg": "non-zero return code", "rc": 1, "start": "2022-04-01 02:17:06.934089", "stderr": "pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory", "stderr_lines": ["pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory"], "stdout": "", "stdout_lines": []}
2022-04-01 02:17:06,813 p=5329 u=moonja n=ansible | ...ignoring
2022-04-01 02:17:06,824 p=5329 u=moonja n=ansible | TASK [pgsql94-bdr : Remove old PostgreSQL data directory if exists] *******************************************
2022-04-01 02:17:06,860 p=5329 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:17:06,874 p=5329 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:17:07,309 p=5329 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:17:07,340 p=5329 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:17:07,349 p=5329 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:17:07,360 p=5329 u=moonja n=ansible | TASK [pgsql94-bdr : Initialize new PostgreSQL BDR cluster on upstream server] *********************************
2022-04-01 02:17:07,397 p=5329 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:17:07,410 p=5329 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:17:12,137 p=5329 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:17:12,595 p=5329 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:17:12,638 p=5329 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:17:12,648 p=5329 u=moonja n=ansible | TASK [pgsql94-bdr : Configure pg_hba.conf for basic authentication] *******************************************
2022-04-01 02:17:12,672 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'}) 
2022-04-01 02:17:12,674 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'}) 
2022-04-01 02:17:12,677 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'}) 
2022-04-01 02:17:12,678 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'}) 
2022-04-01 02:17:12,689 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'}) 
2022-04-01 02:17:12,690 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'}) 
2022-04-01 02:17:12,693 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'}) 
2022-04-01 02:17:12,693 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'}) 
2022-04-01 02:17:13,366 p=5329 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'})
2022-04-01 02:17:13,387 p=5329 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'})
2022-04-01 02:17:13,387 p=5329 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'})
2022-04-01 02:17:13,782 p=5329 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'})
2022-04-01 02:17:13,799 p=5329 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'})
2022-04-01 02:17:13,809 p=5329 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'})
2022-04-01 02:17:14,198 p=5329 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'})
2022-04-01 02:17:14,201 p=5329 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'})
2022-04-01 02:17:14,214 p=5329 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'})
2022-04-01 02:17:14,612 p=5329 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'})
2022-04-01 02:17:14,613 p=5329 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'})
2022-04-01 02:17:14,620 p=5329 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'})
2022-04-01 02:17:14,633 p=5329 u=moonja n=ansible | TASK [pgsql94-bdr : Configure pg_hba.conf to enable communication with password authentication between servers] ***
2022-04-01 02:17:14,692 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.82']) 
2022-04-01 02:17:14,697 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.83']) 
2022-04-01 02:17:14,699 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.84']) 
2022-04-01 02:17:14,699 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.85']) 
2022-04-01 02:17:14,707 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.82']) 
2022-04-01 02:17:14,710 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.83']) 
2022-04-01 02:17:14,713 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.84']) 
2022-04-01 02:17:14,713 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.85']) 
2022-04-01 02:17:15,210 p=5329 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.82'])
2022-04-01 02:17:15,222 p=5329 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.82'])
2022-04-01 02:17:15,228 p=5329 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.82'])
2022-04-01 02:17:15,624 p=5329 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.83'])
2022-04-01 02:17:15,638 p=5329 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.83'])
2022-04-01 02:17:15,640 p=5329 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.83'])
2022-04-01 02:17:16,043 p=5329 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.84'])
2022-04-01 02:17:16,064 p=5329 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.84'])
2022-04-01 02:17:16,066 p=5329 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.84'])
2022-04-01 02:17:16,441 p=5329 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.85'])
2022-04-01 02:17:16,463 p=5329 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.85'])
2022-04-01 02:17:16,464 p=5329 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.85'])
2022-04-01 02:17:16,476 p=5329 u=moonja n=ansible | TASK [pgsql94-bdr : Configure pg_hba.conf to enable communication with trust authentication between servers] ***
2022-04-01 02:17:16,536 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.0.82']) 
2022-04-01 02:17:16,543 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.0.83']) 
2022-04-01 02:17:16,544 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.0.84']) 
2022-04-01 02:17:16,544 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.0.85']) 
2022-04-01 02:17:16,546 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.82']) 
2022-04-01 02:17:16,549 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.83']) 
2022-04-01 02:17:16,551 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.0.82']) 
2022-04-01 02:17:16,552 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.84']) 
2022-04-01 02:17:16,552 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.85']) 
2022-04-01 02:17:16,555 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.0.83']) 
2022-04-01 02:17:16,557 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.0.84']) 
2022-04-01 02:17:16,560 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.0.85']) 
2022-04-01 02:17:16,565 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.82']) 
2022-04-01 02:17:16,566 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.83']) 
2022-04-01 02:17:16,566 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.84']) 
2022-04-01 02:17:16,568 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.85']) 
2022-04-01 02:17:17,052 p=5329 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.0.82'])
2022-04-01 02:17:17,078 p=5329 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.0.82'])
2022-04-01 02:17:17,079 p=5329 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.0.82'])
2022-04-01 02:17:17,456 p=5329 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.0.83'])
2022-04-01 02:17:17,482 p=5329 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.0.83'])
2022-04-01 02:17:17,485 p=5329 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.0.83'])
2022-04-01 02:17:17,859 p=5329 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.0.84'])
2022-04-01 02:17:17,885 p=5329 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.0.84'])
2022-04-01 02:17:17,887 p=5329 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.0.84'])
2022-04-01 02:17:18,268 p=5329 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.0.85'])
2022-04-01 02:17:18,285 p=5329 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.0.85'])
2022-04-01 02:17:18,311 p=5329 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.0.85'])
2022-04-01 02:17:18,674 p=5329 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.82'])
2022-04-01 02:17:18,685 p=5329 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.82'])
2022-04-01 02:17:18,711 p=5329 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.82'])
2022-04-01 02:17:19,078 p=5329 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.83'])
2022-04-01 02:17:19,084 p=5329 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.83'])
2022-04-01 02:17:19,102 p=5329 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.83'])
2022-04-01 02:17:19,480 p=5329 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.84'])
2022-04-01 02:17:19,481 p=5329 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.84'])
2022-04-01 02:17:19,499 p=5329 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.84'])
2022-04-01 02:17:19,886 p=5329 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.85'])
2022-04-01 02:17:19,887 p=5329 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.85'])
2022-04-01 02:17:19,899 p=5329 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.85'])
2022-04-01 02:17:19,912 p=5329 u=moonja n=ansible | TASK [pgsql94-bdr : Configure postgresql.conf with shared GUCs of PostgreSQL for BDR] *************************
2022-04-01 02:17:19,936 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"}) 
2022-04-01 02:17:19,937 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'}) 
2022-04-01 02:17:19,940 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'}) 
2022-04-01 02:17:19,944 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"}) 
2022-04-01 02:17:19,948 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'}) 
2022-04-01 02:17:19,950 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"}) 
2022-04-01 02:17:19,952 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'}) 
2022-04-01 02:17:19,953 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"}) 
2022-04-01 02:17:19,953 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'}) 
2022-04-01 02:17:19,955 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'}) 
2022-04-01 02:17:19,958 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"}) 
2022-04-01 02:17:19,965 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'}) 
2022-04-01 02:17:19,966 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"}) 
2022-04-01 02:17:19,966 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'}) 
2022-04-01 02:17:20,448 p=5329 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"})
2022-04-01 02:17:20,449 p=5329 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"})
2022-04-01 02:17:20,449 p=5329 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"})
2022-04-01 02:17:20,922 p=5329 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'})
2022-04-01 02:17:20,932 p=5329 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'})
2022-04-01 02:17:20,953 p=5329 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'})
2022-04-01 02:17:21,357 p=5329 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'})
2022-04-01 02:17:21,358 p=5329 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'})
2022-04-01 02:17:21,361 p=5329 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'})
2022-04-01 02:17:21,770 p=5329 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"})
2022-04-01 02:17:21,780 p=5329 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"})
2022-04-01 02:17:21,789 p=5329 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"})
2022-04-01 02:17:22,175 p=5329 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'})
2022-04-01 02:17:22,198 p=5329 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'})
2022-04-01 02:17:22,220 p=5329 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'})
2022-04-01 02:17:22,588 p=5329 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"})
2022-04-01 02:17:22,610 p=5329 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"})
2022-04-01 02:17:22,652 p=5329 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"})
2022-04-01 02:17:23,002 p=5329 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'})
2022-04-01 02:17:23,006 p=5329 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'})
2022-04-01 02:17:23,063 p=5329 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'})
2022-04-01 02:17:23,077 p=5329 u=moonja n=ansible | TASK [pgsql94-bdr : Start PostgreSQL] *************************************************************************
2022-04-01 02:17:23,113 p=5329 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:17:23,128 p=5329 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:17:25,323 p=5329 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:17:25,337 p=5329 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:17:25,374 p=5329 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:17:25,385 p=5329 u=moonja n=ansible | TASK [pgsql94-bdr : Configure Primary Master's postgresql.conf] ***********************************************
2022-04-01 02:17:25,422 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 02:17:25,422 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.81 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:17:25,438 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 02:17:25,440 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.82 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:17:26,033 p=5329 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:17:26,035 p=5329 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:17:26,036 p=5329 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:17:26,489 p=5329 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"})
2022-04-01 02:17:26,495 p=5329 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.84 dbname=bdrdemo user=postgres'"})
2022-04-01 02:17:26,536 p=5329 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.85 dbname=bdrdemo user=postgres'"})
2022-04-01 02:17:26,548 p=5329 u=moonja n=ansible | TASK [pgsql94-bdr : Configure Slave Master's postgresql.conf] *************************************************
2022-04-01 02:17:26,588 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 02:17:26,592 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:17:26,592 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': 'bdr.demo_init_replica = on'}) 
2022-04-01 02:17:26,594 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:17:26,609 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 02:17:26,611 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:17:26,612 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': 'bdr.demo_init_replica = on'}) 
2022-04-01 02:17:26,612 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:17:27,115 p=5329 u=moonja n=ansible | ok: [co7-node02] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:17:27,138 p=5329 u=moonja n=ansible | ok: [co7-node01] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:17:27,165 p=5329 u=moonja n=ansible | ok: [co7-node03] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:17:28,164 p=5329 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"})
2022-04-01 02:17:28,168 p=5329 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"})
2022-04-01 02:17:28,276 p=5329 u=moonja n=ansible | ok: [co7-node01] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"})
2022-04-01 02:17:28,635 p=5329 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': 'bdr.demo_init_replica = on'})
2022-04-01 02:17:28,662 p=5329 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': 'bdr.demo_init_replica = on'})
2022-04-01 02:17:28,728 p=5329 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': 'bdr.demo_init_replica = on'})
2022-04-01 02:17:29,120 p=5329 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"})
2022-04-01 02:17:29,153 p=5329 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"})
2022-04-01 02:17:29,163 p=5329 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"})
2022-04-01 02:17:29,177 p=5329 u=moonja n=ansible | TASK [pgsql94-bdr : Final PostgreSQL restart] *****************************************************************
2022-04-01 02:17:29,200 p=5329 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:17:29,218 p=5329 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:17:36,780 p=5329 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:17:36,796 p=5329 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:17:36,796 p=5329 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:17:36,807 p=5329 u=moonja n=ansible | TASK [pgsql94-bdr : Create database to sync between Master Servers] *******************************************
2022-04-01 02:17:36,829 p=5329 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:17:36,847 p=5329 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:17:39,174 p=5329 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: 	connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?
2022-04-01 02:17:39,175 p=5329 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n"}
2022-04-01 02:17:39,225 p=5329 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: 	connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?
2022-04-01 02:17:39,226 p=5329 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n"}
2022-04-01 02:17:39,270 p=5329 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: 	connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?
2022-04-01 02:17:39,270 p=5329 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n"}
2022-04-01 02:17:39,279 p=5329 u=moonja n=ansible | TASK [pgsql94-bdr : Connect to database, create user and grant access for all Master Servers] *****************
2022-04-01 02:17:39,305 p=5329 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:17:39,319 p=5329 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:17:39,329 p=5329 u=moonja n=ansible | TASK [pgsql94-bdr : Create extentions for BDR] ****************************************************************
2022-04-01 02:17:39,354 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item=CREATE EXTENSION btree_gist;) 
2022-04-01 02:17:39,355 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item=CREATE EXTENSION bdr;) 
2022-04-01 02:17:39,369 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item=CREATE EXTENSION btree_gist;) 
2022-04-01 02:17:39,370 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item=CREATE EXTENSION bdr;) 
2022-04-01 02:17:39,381 p=5329 u=moonja n=ansible | TASK [pgsql94-bdr : Create group on Primary Master Server for BDR] ********************************************
2022-04-01 02:17:39,415 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item=SELECT bdr.bdr_group_create ( local_node_name := 'co7-master', node_external_dsn := 'host=192.168.0.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-01 02:17:39,427 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item=SELECT bdr.bdr_group_create ( local_node_name := 'co7-slave', node_external_dsn := 'host=192.168.0.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-01 02:17:39,438 p=5329 u=moonja n=ansible | TASK [pgsql94-bdr : Join group from other Master Servers] *****************************************************
2022-04-01 02:17:39,481 p=5329 u=moonja n=ansible | skipping: [co7-master] => (item=SELECT bdr.bdr_group_join ( local_node_name := 'co7-master', node_external_dsn := 'host=192.168.0.81 user=bdrsync dbname=bdrdemo password=changeme', join_using_dsn := 'host=192.168.0.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-01 02:17:39,495 p=5329 u=moonja n=ansible | skipping: [co7-slave] => (item=SELECT bdr.bdr_group_join ( local_node_name := 'co7-slave', node_external_dsn := 'host=192.168.0.82 user=bdrsync dbname=bdrdemo password=changeme', join_using_dsn := 'host=192.168.0.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-01 02:17:39,529 p=5329 u=moonja n=ansible | PLAY RECAP ****************************************************************************************************
2022-04-01 02:17:39,529 p=5329 u=moonja n=ansible | co7-master                 : ok=3    changed=1    unreachable=0    failed=0    skipped=20   rescued=0    ignored=0   
2022-04-01 02:17:39,529 p=5329 u=moonja n=ansible | co7-node01                 : ok=16   changed=13   unreachable=0    failed=1    skipped=2    rescued=0    ignored=1   
2022-04-01 02:17:39,529 p=5329 u=moonja n=ansible | co7-node02                 : ok=16   changed=13   unreachable=0    failed=1    skipped=2    rescued=0    ignored=1   
2022-04-01 02:17:39,529 p=5329 u=moonja n=ansible | co7-node03                 : ok=16   changed=13   unreachable=0    failed=1    skipped=2    rescued=0    ignored=1   
2022-04-01 02:17:39,529 p=5329 u=moonja n=ansible | co7-slave                  : ok=3    changed=1    unreachable=0    failed=0    skipped=20   rescued=0    ignored=0   
2022-04-01 02:26:48,424 p=9429 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being 
removed. This feature will be removed from ansible-core in version 2.14. Deprecation 
warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-04-01 02:26:48,439 p=9429 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to
see details

2022-04-01 02:26:48,707 p=9429 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. 
This feature will be removed in version 2.16. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2022-04-01 02:26:48,744 p=9429 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgsql94-bdr/tasks/upgrade.yml is
empty and had no tasks to include

2022-04-01 02:26:48,760 p=9429 u=moonja n=ansible | PLAY [all] *******************************************************************************
2022-04-01 02:26:48,784 p=9429 u=moonja n=ansible | TASK [Gathering Facts] *******************************************************************
2022-04-01 02:26:51,080 p=9429 u=moonja n=ansible | ok: [co7-master]
2022-04-01 02:26:51,115 p=9429 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 02:26:51,119 p=9429 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 02:26:51,260 p=9429 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 02:26:52,619 p=9429 u=moonja n=ansible | ok: [co7-slave]
2022-04-01 02:26:52,637 p=9429 u=moonja n=ansible | TASK [pgsql94-bdr : Check OS support] ****************************************************
2022-04-01 02:26:52,658 p=9429 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:26:52,674 p=9429 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:26:52,706 p=9429 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 02:26:52,708 p=9429 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 02:26:52,719 p=9429 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 02:26:52,729 p=9429 u=moonja n=ansible | TASK [pgsql94-bdr : Check packet manager support] ****************************************
2022-04-01 02:26:52,750 p=9429 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:26:52,781 p=9429 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:26:52,798 p=9429 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 02:26:52,798 p=9429 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 02:26:52,810 p=9429 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 02:26:52,820 p=9429 u=moonja n=ansible | TASK [pgsql94-bdr : Add bdr94 repository] ************************************************
2022-04-01 02:26:53,503 p=9429 u=moonja n=ansible | changed: [co7-slave]
2022-04-01 02:26:53,515 p=9429 u=moonja n=ansible | changed: [co7-master]
2022-04-01 02:26:53,533 p=9429 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:26:53,552 p=9429 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:26:53,612 p=9429 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:26:53,624 p=9429 u=moonja n=ansible | TASK [pgsql94-bdr : debug] ***************************************************************
2022-04-01 02:26:53,665 p=9429 u=moonja n=ansible | ok: [co7-master] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 02:26:53,683 p=9429 u=moonja n=ansible | ok: [co7-slave] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 02:26:53,699 p=9429 u=moonja n=ansible | ok: [co7-node01] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 02:26:53,702 p=9429 u=moonja n=ansible | ok: [co7-node02] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 02:26:53,714 p=9429 u=moonja n=ansible | ok: [co7-node03] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 02:26:53,726 p=9429 u=moonja n=ansible | TASK [pgsql94-bdr : Install PostgreSQL BDR packages] *************************************
2022-04-01 02:26:53,750 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item=python-psycopg2) 
2022-04-01 02:26:53,751 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item=postgresql-bdr94-bdr) 
2022-04-01 02:26:53,765 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item=python-psycopg2) 
2022-04-01 02:26:53,766 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item=postgresql-bdr94-bdr) 
2022-04-01 02:27:03,997 p=9429 u=moonja n=ansible | ok: [co7-node03] => (item=python-psycopg2)
2022-04-01 02:27:04,170 p=9429 u=moonja n=ansible | ok: [co7-node02] => (item=python-psycopg2)
2022-04-01 02:27:04,450 p=9429 u=moonja n=ansible | ok: [co7-node01] => (item=python-psycopg2)
2022-04-01 02:27:06,935 p=9429 u=moonja n=ansible | ok: [co7-node03] => (item=postgresql-bdr94-bdr)
2022-04-01 02:27:08,324 p=9429 u=moonja n=ansible | ok: [co7-node01] => (item=postgresql-bdr94-bdr)
2022-04-01 02:27:08,763 p=9429 u=moonja n=ansible | ok: [co7-node02] => (item=postgresql-bdr94-bdr)
2022-04-01 02:27:08,774 p=9429 u=moonja n=ansible | TASK [pgsql94-bdr : Change the permissions on the /tmp directory] ************************
2022-04-01 02:27:08,795 p=9429 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:27:08,827 p=9429 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:27:09,562 p=9429 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 02:27:09,569 p=9429 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 02:27:09,578 p=9429 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 02:27:09,591 p=9429 u=moonja n=ansible | TASK [pgsql94-bdr : Stop PostgreSQL if are running] **************************************
2022-04-01 02:27:09,627 p=9429 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:27:09,643 p=9429 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:27:12,483 p=9429 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:27:12,548 p=9429 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:27:12,548 p=9429 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:27:12,558 p=9429 u=moonja n=ansible | TASK [pgsql94-bdr : Remove old PostgreSQL data directory if exists] **********************
2022-04-01 02:27:12,579 p=9429 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:27:12,597 p=9429 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:27:13,151 p=9429 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:27:13,182 p=9429 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:27:13,183 p=9429 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:27:13,195 p=9429 u=moonja n=ansible | TASK [pgsql94-bdr : Initialize new PostgreSQL BDR cluster on upstream server] ************
2022-04-01 02:27:13,216 p=9429 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:27:13,233 p=9429 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:27:15,503 p=9429 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:27:18,876 p=9429 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:27:18,971 p=9429 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:27:18,982 p=9429 u=moonja n=ansible | TASK [pgsql94-bdr : Configure pg_hba.conf for basic authentication] **********************
2022-04-01 02:27:19,006 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'}) 
2022-04-01 02:27:19,008 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'}) 
2022-04-01 02:27:19,011 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'}) 
2022-04-01 02:27:19,012 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'}) 
2022-04-01 02:27:19,023 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'}) 
2022-04-01 02:27:19,025 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'}) 
2022-04-01 02:27:19,028 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'}) 
2022-04-01 02:27:19,028 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'}) 
2022-04-01 02:27:19,714 p=9429 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'})
2022-04-01 02:27:19,716 p=9429 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'})
2022-04-01 02:27:19,718 p=9429 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'})
2022-04-01 02:27:20,209 p=9429 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'})
2022-04-01 02:27:20,216 p=9429 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'})
2022-04-01 02:27:20,218 p=9429 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'})
2022-04-01 02:27:20,712 p=9429 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'})
2022-04-01 02:27:20,714 p=9429 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'})
2022-04-01 02:27:20,715 p=9429 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'})
2022-04-01 02:27:21,266 p=9429 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'})
2022-04-01 02:27:21,274 p=9429 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'})
2022-04-01 02:27:21,274 p=9429 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'})
2022-04-01 02:27:21,290 p=9429 u=moonja n=ansible | TASK [pgsql94-bdr : Configure pg_hba.conf to enable communication with password authentication between servers] ***
2022-04-01 02:27:21,353 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.82']) 
2022-04-01 02:27:21,358 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.83']) 
2022-04-01 02:27:21,359 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.84']) 
2022-04-01 02:27:21,359 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.85']) 
2022-04-01 02:27:21,366 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.82']) 
2022-04-01 02:27:21,369 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.83']) 
2022-04-01 02:27:21,372 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.84']) 
2022-04-01 02:27:21,372 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.85']) 
2022-04-01 02:27:21,972 p=9429 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.82'])
2022-04-01 02:27:21,994 p=9429 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.82'])
2022-04-01 02:27:21,997 p=9429 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.82'])
2022-04-01 02:27:22,428 p=9429 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.83'])
2022-04-01 02:27:22,516 p=9429 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.83'])
2022-04-01 02:27:22,517 p=9429 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.83'])
2022-04-01 02:27:22,830 p=9429 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.84'])
2022-04-01 02:27:22,941 p=9429 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.84'])
2022-04-01 02:27:22,942 p=9429 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.84'])
2022-04-01 02:27:23,345 p=9429 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.85'])
2022-04-01 02:27:23,453 p=9429 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.85'])
2022-04-01 02:27:23,454 p=9429 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.85'])
2022-04-01 02:27:23,468 p=9429 u=moonja n=ansible | TASK [pgsql94-bdr : Configure pg_hba.conf to enable communication with trust authentication between servers] ***
2022-04-01 02:27:23,530 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.0.82']) 
2022-04-01 02:27:23,531 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.0.83']) 
2022-04-01 02:27:23,535 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.0.84']) 
2022-04-01 02:27:23,537 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.0.85']) 
2022-04-01 02:27:23,539 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.82']) 
2022-04-01 02:27:23,542 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.83']) 
2022-04-01 02:27:23,544 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.0.82']) 
2022-04-01 02:27:23,545 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.84']) 
2022-04-01 02:27:23,545 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.85']) 
2022-04-01 02:27:23,547 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.0.83']) 
2022-04-01 02:27:23,550 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.0.84']) 
2022-04-01 02:27:23,552 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.0.85']) 
2022-04-01 02:27:23,555 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.82']) 
2022-04-01 02:27:23,558 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.83']) 
2022-04-01 02:27:23,560 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.84']) 
2022-04-01 02:27:23,561 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.85']) 
2022-04-01 02:27:24,238 p=9429 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.0.82'])
2022-04-01 02:27:24,239 p=9429 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.0.82'])
2022-04-01 02:27:24,241 p=9429 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.0.82'])
2022-04-01 02:27:24,706 p=9429 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.0.83'])
2022-04-01 02:27:24,707 p=9429 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.0.83'])
2022-04-01 02:27:24,709 p=9429 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.0.83'])
2022-04-01 02:27:25,228 p=9429 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.0.84'])
2022-04-01 02:27:25,246 p=9429 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.0.84'])
2022-04-01 02:27:25,247 p=9429 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.0.84'])
2022-04-01 02:27:25,633 p=9429 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.0.85'])
2022-04-01 02:27:25,665 p=9429 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.0.85'])
2022-04-01 02:27:25,665 p=9429 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.0.85'])
2022-04-01 02:27:26,050 p=9429 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.82'])
2022-04-01 02:27:26,088 p=9429 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.82'])
2022-04-01 02:27:26,093 p=9429 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.82'])
2022-04-01 02:27:26,483 p=9429 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.83'])
2022-04-01 02:27:26,566 p=9429 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.83'])
2022-04-01 02:27:26,567 p=9429 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.83'])
2022-04-01 02:27:27,002 p=9429 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.84'])
2022-04-01 02:27:27,057 p=9429 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.84'])
2022-04-01 02:27:27,058 p=9429 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.84'])
2022-04-01 02:27:27,521 p=9429 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.85'])
2022-04-01 02:27:27,594 p=9429 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.85'])
2022-04-01 02:27:27,595 p=9429 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.85'])
2022-04-01 02:27:27,610 p=9429 u=moonja n=ansible | TASK [pgsql94-bdr : Configure postgresql.conf with shared GUCs of PostgreSQL for BDR] ****
2022-04-01 02:27:27,637 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"}) 
2022-04-01 02:27:27,642 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'}) 
2022-04-01 02:27:27,642 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'}) 
2022-04-01 02:27:27,642 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"}) 
2022-04-01 02:27:27,653 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'}) 
2022-04-01 02:27:27,654 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"}) 
2022-04-01 02:27:27,654 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'}) 
2022-04-01 02:27:27,655 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"}) 
2022-04-01 02:27:27,655 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'}) 
2022-04-01 02:27:27,657 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'}) 
2022-04-01 02:27:27,660 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"}) 
2022-04-01 02:27:27,663 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'}) 
2022-04-01 02:27:27,669 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"}) 
2022-04-01 02:27:27,669 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'}) 
2022-04-01 02:27:28,253 p=9429 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"})
2022-04-01 02:27:28,255 p=9429 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"})
2022-04-01 02:27:28,256 p=9429 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"})
2022-04-01 02:27:28,786 p=9429 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'})
2022-04-01 02:27:28,787 p=9429 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'})
2022-04-01 02:27:28,788 p=9429 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'})
2022-04-01 02:27:29,247 p=9429 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'})
2022-04-01 02:27:29,248 p=9429 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'})
2022-04-01 02:27:29,250 p=9429 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'})
2022-04-01 02:27:29,678 p=9429 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"})
2022-04-01 02:27:29,678 p=9429 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"})
2022-04-01 02:27:29,679 p=9429 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"})
2022-04-01 02:27:30,110 p=9429 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'})
2022-04-01 02:27:30,111 p=9429 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'})
2022-04-01 02:27:30,112 p=9429 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'})
2022-04-01 02:27:30,611 p=9429 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"})
2022-04-01 02:27:30,614 p=9429 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"})
2022-04-01 02:27:30,615 p=9429 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"})
2022-04-01 02:27:31,304 p=9429 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'})
2022-04-01 02:27:31,306 p=9429 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'})
2022-04-01 02:27:31,307 p=9429 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'})
2022-04-01 02:27:31,322 p=9429 u=moonja n=ansible | TASK [pgsql94-bdr : Start PostgreSQL] ****************************************************
2022-04-01 02:27:31,362 p=9429 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:27:31,377 p=9429 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:27:33,268 p=9429 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:27:33,268 p=9429 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:27:33,269 p=9429 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:27:33,279 p=9429 u=moonja n=ansible | TASK [pgsql94-bdr : Configure Primary Master's postgresql.conf] **************************
2022-04-01 02:27:33,319 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 02:27:33,319 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.81 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:27:33,334 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 02:27:33,335 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.82 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:27:33,988 p=9429 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:27:33,992 p=9429 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:27:34,021 p=9429 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:27:34,406 p=9429 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.84 dbname=bdrdemo user=postgres'"})
2022-04-01 02:27:34,437 p=9429 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.85 dbname=bdrdemo user=postgres'"})
2022-04-01 02:27:34,489 p=9429 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"})
2022-04-01 02:27:34,503 p=9429 u=moonja n=ansible | TASK [pgsql94-bdr : Configure Slave Master's postgresql.conf] ****************************
2022-04-01 02:27:34,539 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 02:27:34,539 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:27:34,542 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': 'bdr.demo_init_replica = on'}) 
2022-04-01 02:27:34,543 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:27:34,557 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 02:27:34,558 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:27:34,559 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': 'bdr.demo_init_replica = on'}) 
2022-04-01 02:27:34,559 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:27:36,379 p=9429 u=moonja n=ansible | ok: [co7-node01] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:27:36,380 p=9429 u=moonja n=ansible | ok: [co7-node02] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:27:36,404 p=9429 u=moonja n=ansible | ok: [co7-node03] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:27:38,347 p=9429 u=moonja n=ansible | ok: [co7-node01] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"})
2022-04-01 02:27:38,348 p=9429 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"})
2022-04-01 02:27:38,357 p=9429 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"})
2022-04-01 02:27:40,052 p=9429 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': 'bdr.demo_init_replica = on'})
2022-04-01 02:27:40,177 p=9429 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': 'bdr.demo_init_replica = on'})
2022-04-01 02:27:40,228 p=9429 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': 'bdr.demo_init_replica = on'})
2022-04-01 02:27:40,479 p=9429 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"})
2022-04-01 02:27:40,598 p=9429 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"})
2022-04-01 02:27:40,643 p=9429 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"})
2022-04-01 02:27:40,655 p=9429 u=moonja n=ansible | TASK [pgsql94-bdr : Final PostgreSQL restart] ********************************************
2022-04-01 02:27:40,676 p=9429 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:27:40,707 p=9429 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:27:49,020 p=9429 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:27:49,037 p=9429 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:27:49,037 p=9429 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:27:49,051 p=9429 u=moonja n=ansible | TASK [pgsql94-bdr : Create a new database with name "bdrdemo"] ***************************
2022-04-01 02:27:49,073 p=9429 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:27:49,091 p=9429 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:27:49,923 p=9429 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OperationalError: FATAL:  password authentication failed for user "postgres"
2022-04-01 02:27:49,923 p=9429 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": false, "msg": "unable to connect to database: FATAL:  password authentication failed for user \"postgres\"\n"}
2022-04-01 02:27:49,938 p=9429 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OperationalError: FATAL:  password authentication failed for user "postgres"
2022-04-01 02:27:49,938 p=9429 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": false, "msg": "unable to connect to database: FATAL:  password authentication failed for user \"postgres\"\n"}
2022-04-01 02:27:49,939 p=9429 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OperationalError: FATAL:  password authentication failed for user "postgres"
2022-04-01 02:27:49,939 p=9429 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": false, "msg": "unable to connect to database: FATAL:  password authentication failed for user \"postgres\"\n"}
2022-04-01 02:27:49,952 p=9429 u=moonja n=ansible | TASK [pgsql94-bdr : Connect to database, create user and grant access for all Master Servers] ***
2022-04-01 02:27:49,975 p=9429 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:27:49,987 p=9429 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:27:49,997 p=9429 u=moonja n=ansible | TASK [pgsql94-bdr : Create extentions for BDR] *******************************************
2022-04-01 02:27:50,022 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item=CREATE EXTENSION btree_gist;) 
2022-04-01 02:27:50,023 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item=CREATE EXTENSION bdr;) 
2022-04-01 02:27:50,035 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item=CREATE EXTENSION btree_gist;) 
2022-04-01 02:27:50,036 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item=CREATE EXTENSION bdr;) 
2022-04-01 02:27:50,048 p=9429 u=moonja n=ansible | TASK [pgsql94-bdr : Create group on Primary Master Server for BDR] ***********************
2022-04-01 02:27:50,080 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item=SELECT bdr.bdr_group_create ( local_node_name := 'co7-master', node_external_dsn := 'host=192.168.0.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-01 02:27:50,092 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item=SELECT bdr.bdr_group_create ( local_node_name := 'co7-slave', node_external_dsn := 'host=192.168.0.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-01 02:27:50,103 p=9429 u=moonja n=ansible | TASK [pgsql94-bdr : Join group from other Master Servers] ********************************
2022-04-01 02:27:50,144 p=9429 u=moonja n=ansible | skipping: [co7-master] => (item=SELECT bdr.bdr_group_join ( local_node_name := 'co7-master', node_external_dsn := 'host=192.168.0.81 user=bdrsync dbname=bdrdemo password=changeme', join_using_dsn := 'host=192.168.0.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-01 02:27:50,157 p=9429 u=moonja n=ansible | skipping: [co7-slave] => (item=SELECT bdr.bdr_group_join ( local_node_name := 'co7-slave', node_external_dsn := 'host=192.168.0.82 user=bdrsync dbname=bdrdemo password=changeme', join_using_dsn := 'host=192.168.0.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-01 02:27:50,191 p=9429 u=moonja n=ansible | PLAY RECAP *******************************************************************************
2022-04-01 02:27:50,191 p=9429 u=moonja n=ansible | co7-master                 : ok=3    changed=1    unreachable=0    failed=0    skipped=20   rescued=0    ignored=0   
2022-04-01 02:27:50,191 p=9429 u=moonja n=ansible | co7-node01                 : ok=16   changed=12   unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2022-04-01 02:27:50,191 p=9429 u=moonja n=ansible | co7-node02                 : ok=16   changed=12   unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2022-04-01 02:27:50,191 p=9429 u=moonja n=ansible | co7-node03                 : ok=16   changed=12   unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2022-04-01 02:27:50,191 p=9429 u=moonja n=ansible | co7-slave                  : ok=3    changed=1    unreachable=0    failed=0    skipped=20   rescued=0    ignored=0   
2022-04-01 02:29:07,882 p=12340 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being 
removed. This feature will be removed from ansible-core in version 2.14. Deprecation 
warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-04-01 02:29:07,892 p=12340 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to
see details

2022-04-01 02:29:08,123 p=12340 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. 
This feature will be removed in version 2.16. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2022-04-01 02:29:08,162 p=12340 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgsql94-bdr/tasks/upgrade.yml is
empty and had no tasks to include

2022-04-01 02:29:08,175 p=12340 u=moonja n=ansible | PLAY [all] *******************************************************************************
2022-04-01 02:29:08,197 p=12340 u=moonja n=ansible | TASK [Gathering Facts] *******************************************************************
2022-04-01 02:29:10,493 p=12340 u=moonja n=ansible | ok: [co7-master]
2022-04-01 02:29:10,521 p=12340 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 02:29:10,601 p=12340 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 02:29:10,660 p=12340 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 02:29:11,058 p=12340 u=moonja n=ansible | ok: [co7-slave]
2022-04-01 02:29:11,077 p=12340 u=moonja n=ansible | TASK [pgsql94-bdr : Check OS support] ****************************************************
2022-04-01 02:29:11,098 p=12340 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:29:11,114 p=12340 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:29:11,147 p=12340 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 02:29:11,148 p=12340 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 02:29:11,162 p=12340 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 02:29:11,172 p=12340 u=moonja n=ansible | TASK [pgsql94-bdr : Check packet manager support] ****************************************
2022-04-01 02:29:11,192 p=12340 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:29:11,210 p=12340 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:29:11,242 p=12340 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 02:29:11,244 p=12340 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 02:29:11,255 p=12340 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 02:29:11,266 p=12340 u=moonja n=ansible | TASK [pgsql94-bdr : Add bdr94 repository] ************************************************
2022-04-01 02:29:11,946 p=12340 u=moonja n=ansible | changed: [co7-slave]
2022-04-01 02:29:11,952 p=12340 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:29:11,960 p=12340 u=moonja n=ansible | changed: [co7-master]
2022-04-01 02:29:11,967 p=12340 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:29:11,982 p=12340 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:29:11,992 p=12340 u=moonja n=ansible | TASK [pgsql94-bdr : debug] ***************************************************************
2022-04-01 02:29:12,029 p=12340 u=moonja n=ansible | ok: [co7-master] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 02:29:12,048 p=12340 u=moonja n=ansible | ok: [co7-slave] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 02:29:12,064 p=12340 u=moonja n=ansible | ok: [co7-node01] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 02:29:12,065 p=12340 u=moonja n=ansible | ok: [co7-node02] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 02:29:12,078 p=12340 u=moonja n=ansible | ok: [co7-node03] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 02:29:12,088 p=12340 u=moonja n=ansible | TASK [pgsql94-bdr : Install PostgreSQL BDR packages] *************************************
2022-04-01 02:29:12,112 p=12340 u=moonja n=ansible | skipping: [co7-master] => (item=python-psycopg2) 
2022-04-01 02:29:12,113 p=12340 u=moonja n=ansible | skipping: [co7-master] => (item=postgresql-bdr94-bdr) 
2022-04-01 02:29:12,128 p=12340 u=moonja n=ansible | skipping: [co7-slave] => (item=python-psycopg2) 
2022-04-01 02:29:12,129 p=12340 u=moonja n=ansible | skipping: [co7-slave] => (item=postgresql-bdr94-bdr) 
2022-04-01 02:29:16,765 p=12340 u=moonja n=ansible | ok: [co7-node01] => (item=python-psycopg2)
2022-04-01 02:29:16,921 p=12340 u=moonja n=ansible | ok: [co7-node03] => (item=python-psycopg2)
2022-04-01 02:29:17,247 p=12340 u=moonja n=ansible | ok: [co7-node02] => (item=python-psycopg2)
2022-04-01 02:29:19,737 p=12340 u=moonja n=ansible | ok: [co7-node01] => (item=postgresql-bdr94-bdr)
2022-04-01 02:29:20,287 p=12340 u=moonja n=ansible | ok: [co7-node03] => (item=postgresql-bdr94-bdr)
2022-04-01 02:29:20,624 p=12340 u=moonja n=ansible | ok: [co7-node02] => (item=postgresql-bdr94-bdr)
2022-04-01 02:29:20,637 p=12340 u=moonja n=ansible | TASK [pgsql94-bdr : Change the permissions on the /tmp directory] ************************
2022-04-01 02:29:20,659 p=12340 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:29:20,676 p=12340 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:29:21,421 p=12340 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 02:29:21,441 p=12340 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 02:29:21,442 p=12340 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 02:29:21,453 p=12340 u=moonja n=ansible | TASK [pgsql94-bdr : Stop PostgreSQL if are running] **************************************
2022-04-01 02:29:21,475 p=12340 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:29:21,492 p=12340 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:29:25,239 p=12340 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:29:25,240 p=12340 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:29:25,242 p=12340 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:29:25,255 p=12340 u=moonja n=ansible | TASK [pgsql94-bdr : Remove old PostgreSQL data directory if exists] **********************
2022-04-01 02:29:25,276 p=12340 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:29:25,293 p=12340 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:29:25,831 p=12340 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:29:25,832 p=12340 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:29:25,833 p=12340 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:29:25,843 p=12340 u=moonja n=ansible | TASK [pgsql94-bdr : Initialize new PostgreSQL BDR cluster on upstream server] ************
2022-04-01 02:29:25,865 p=12340 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:29:25,895 p=12340 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:29:30,952 p=12340 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:29:32,514 p=12340 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:29:32,521 p=12340 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:29:32,531 p=12340 u=moonja n=ansible | TASK [pgsql94-bdr : Configure pg_hba.conf for basic authentication] **********************
2022-04-01 02:29:32,556 p=12340 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'}) 
2022-04-01 02:29:32,558 p=12340 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'}) 
2022-04-01 02:29:32,563 p=12340 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'}) 
2022-04-01 02:29:32,563 p=12340 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'}) 
2022-04-01 02:29:32,574 p=12340 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'}) 
2022-04-01 02:29:32,576 p=12340 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'}) 
2022-04-01 02:29:32,578 p=12340 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'}) 
2022-04-01 02:29:32,579 p=12340 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'}) 
2022-04-01 02:29:33,284 p=12340 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'})
2022-04-01 02:29:33,315 p=12340 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'})
2022-04-01 02:29:33,317 p=12340 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'})
2022-04-01 02:29:33,705 p=12340 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'})
2022-04-01 02:29:33,737 p=12340 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'})
2022-04-01 02:29:33,747 p=12340 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'})
2022-04-01 02:29:34,128 p=12340 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'})
2022-04-01 02:29:34,144 p=12340 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'})
2022-04-01 02:29:34,145 p=12340 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'})
2022-04-01 02:29:34,585 p=12340 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'})
2022-04-01 02:29:34,596 p=12340 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'})
2022-04-01 02:29:34,599 p=12340 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'})
2022-04-01 02:29:34,612 p=12340 u=moonja n=ansible | TASK [pgsql94-bdr : Configure pg_hba.conf to enable communication with password authentication between servers] ***
2022-04-01 02:29:34,673 p=12340 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.82']) 
2022-04-01 02:29:34,675 p=12340 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.83']) 
2022-04-01 02:29:34,680 p=12340 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.84']) 
2022-04-01 02:29:34,681 p=12340 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.85']) 
2022-04-01 02:29:34,689 p=12340 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.82']) 
2022-04-01 02:29:34,694 p=12340 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.83']) 
2022-04-01 02:29:34,695 p=12340 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.84']) 
2022-04-01 02:29:34,696 p=12340 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.85']) 
2022-04-01 02:29:35,191 p=12340 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.82'])
2022-04-01 02:29:35,193 p=12340 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.82'])
2022-04-01 02:29:35,193 p=12340 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.82'])
2022-04-01 02:29:35,660 p=12340 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.83'])
2022-04-01 02:29:35,666 p=12340 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.83'])
2022-04-01 02:29:35,666 p=12340 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.83'])
2022-04-01 02:29:36,210 p=12340 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.84'])
2022-04-01 02:29:36,216 p=12340 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.84'])
2022-04-01 02:29:36,222 p=12340 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.84'])
2022-04-01 02:29:36,635 p=12340 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.85'])
2022-04-01 02:29:36,640 p=12340 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.85'])
2022-04-01 02:29:36,647 p=12340 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.85'])
2022-04-01 02:29:36,661 p=12340 u=moonja n=ansible | TASK [pgsql94-bdr : Configure pg_hba.conf to enable communication with trust authentication between servers] ***
2022-04-01 02:29:36,723 p=12340 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.0.82']) 
2022-04-01 02:29:36,725 p=12340 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.0.83']) 
2022-04-01 02:29:36,730 p=12340 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.0.84']) 
2022-04-01 02:29:36,731 p=12340 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.0.85']) 
2022-04-01 02:29:36,733 p=12340 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.82']) 
2022-04-01 02:29:36,736 p=12340 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.83']) 
2022-04-01 02:29:36,738 p=12340 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.84']) 
2022-04-01 02:29:36,739 p=12340 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.0.82']) 
2022-04-01 02:29:36,740 p=12340 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.85']) 
2022-04-01 02:29:36,742 p=12340 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.0.83']) 
2022-04-01 02:29:36,745 p=12340 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.0.84']) 
2022-04-01 02:29:36,750 p=12340 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.0.85']) 
2022-04-01 02:29:36,751 p=12340 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.82']) 
2022-04-01 02:29:36,751 p=12340 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.83']) 
2022-04-01 02:29:36,756 p=12340 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.84']) 
2022-04-01 02:29:36,756 p=12340 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.85']) 
2022-04-01 02:29:37,219 p=12340 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.0.82'])
2022-04-01 02:29:37,220 p=12340 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.0.82'])
2022-04-01 02:29:37,244 p=12340 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.0.82'])
2022-04-01 02:29:37,616 p=12340 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.0.83'])
2022-04-01 02:29:37,628 p=12340 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.0.83'])
2022-04-01 02:29:37,649 p=12340 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.0.83'])
2022-04-01 02:29:38,042 p=12340 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.0.84'])
2022-04-01 02:29:38,044 p=12340 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.0.84'])
2022-04-01 02:29:38,088 p=12340 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.0.84'])
2022-04-01 02:29:38,524 p=12340 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.0.85'])
2022-04-01 02:29:38,547 p=12340 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.0.85'])
2022-04-01 02:29:38,605 p=12340 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.0.85'])
2022-04-01 02:29:38,923 p=12340 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.82'])
2022-04-01 02:29:38,964 p=12340 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.82'])
2022-04-01 02:29:39,018 p=12340 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.82'])
2022-04-01 02:29:39,340 p=12340 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.83'])
2022-04-01 02:29:39,381 p=12340 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.83'])
2022-04-01 02:29:39,438 p=12340 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.83'])
2022-04-01 02:29:39,816 p=12340 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.84'])
2022-04-01 02:29:39,868 p=12340 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.84'])
2022-04-01 02:29:39,892 p=12340 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.84'])
2022-04-01 02:29:40,243 p=12340 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.85'])
2022-04-01 02:29:40,288 p=12340 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.85'])
2022-04-01 02:29:40,291 p=12340 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.85'])
2022-04-01 02:29:40,303 p=12340 u=moonja n=ansible | TASK [pgsql94-bdr : Configure postgresql.conf with shared GUCs of PostgreSQL for BDR] ****
2022-04-01 02:29:40,327 p=12340 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"}) 
2022-04-01 02:29:40,328 p=12340 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'}) 
2022-04-01 02:29:40,332 p=12340 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'}) 
2022-04-01 02:29:40,336 p=12340 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"}) 
2022-04-01 02:29:40,343 p=12340 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'}) 
2022-04-01 02:29:40,344 p=12340 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"}) 
2022-04-01 02:29:40,345 p=12340 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'}) 
2022-04-01 02:29:40,345 p=12340 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"}) 
2022-04-01 02:29:40,346 p=12340 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'}) 
2022-04-01 02:29:40,348 p=12340 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'}) 
2022-04-01 02:29:40,353 p=12340 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"}) 
2022-04-01 02:29:40,357 p=12340 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'}) 
2022-04-01 02:29:40,359 p=12340 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"}) 
2022-04-01 02:29:40,364 p=12340 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'}) 
2022-04-01 02:29:40,897 p=12340 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"})
2022-04-01 02:29:40,920 p=12340 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"})
2022-04-01 02:29:40,924 p=12340 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"})
2022-04-01 02:29:41,366 p=12340 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'})
2022-04-01 02:29:41,375 p=12340 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'})
2022-04-01 02:29:41,401 p=12340 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'})
2022-04-01 02:29:41,787 p=12340 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'})
2022-04-01 02:29:41,796 p=12340 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'})
2022-04-01 02:29:41,803 p=12340 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'})
2022-04-01 02:29:42,269 p=12340 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"})
2022-04-01 02:29:42,270 p=12340 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"})
2022-04-01 02:29:42,271 p=12340 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"})
2022-04-01 02:29:42,852 p=12340 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'})
2022-04-01 02:29:42,855 p=12340 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'})
2022-04-01 02:29:42,855 p=12340 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'})
2022-04-01 02:29:43,333 p=12340 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"})
2022-04-01 02:29:43,399 p=12340 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"})
2022-04-01 02:29:43,400 p=12340 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"})
2022-04-01 02:29:43,752 p=12340 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'})
2022-04-01 02:29:43,850 p=12340 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'})
2022-04-01 02:29:43,850 p=12340 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'})
2022-04-01 02:29:43,862 p=12340 u=moonja n=ansible | TASK [pgsql94-bdr : Start PostgreSQL] ****************************************************
2022-04-01 02:29:43,884 p=12340 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:29:43,900 p=12340 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:29:46,463 p=12340 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:29:46,464 p=12340 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:29:46,464 p=12340 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:29:46,474 p=12340 u=moonja n=ansible | TASK [pgsql94-bdr : Configure Primary Master's postgresql.conf] **************************
2022-04-01 02:29:46,512 p=12340 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 02:29:46,513 p=12340 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.81 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:29:46,526 p=12340 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 02:29:46,527 p=12340 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.82 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:29:47,061 p=12340 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:29:47,072 p=12340 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:29:47,080 p=12340 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:29:47,472 p=12340 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.84 dbname=bdrdemo user=postgres'"})
2022-04-01 02:29:47,504 p=12340 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"})
2022-04-01 02:29:47,518 p=12340 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.85 dbname=bdrdemo user=postgres'"})
2022-04-01 02:29:47,530 p=12340 u=moonja n=ansible | TASK [pgsql94-bdr : Configure Slave Master's postgresql.conf] ****************************
2022-04-01 02:29:47,566 p=12340 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 02:29:47,567 p=12340 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:29:47,570 p=12340 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': 'bdr.demo_init_replica = on'}) 
2022-04-01 02:29:47,570 p=12340 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:29:47,585 p=12340 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 02:29:47,586 p=12340 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:29:47,587 p=12340 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': 'bdr.demo_init_replica = on'}) 
2022-04-01 02:29:47,588 p=12340 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"}) 
2022-04-01 02:29:49,560 p=12340 u=moonja n=ansible | ok: [co7-node02] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:29:49,572 p=12340 u=moonja n=ansible | ok: [co7-node03] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:29:49,609 p=12340 u=moonja n=ansible | ok: [co7-node01] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 02:29:49,987 p=12340 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"})
2022-04-01 02:29:50,054 p=12340 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"})
2022-04-01 02:29:50,091 p=12340 u=moonja n=ansible | ok: [co7-node01] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"})
2022-04-01 02:29:50,454 p=12340 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': 'bdr.demo_init_replica = on'})
2022-04-01 02:29:50,520 p=12340 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': 'bdr.demo_init_replica = on'})
2022-04-01 02:29:50,578 p=12340 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': 'bdr.demo_init_replica = on'})
2022-04-01 02:29:50,897 p=12340 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"})
2022-04-01 02:29:52,320 p=12340 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"})
2022-04-01 02:29:52,321 p=12340 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"})
2022-04-01 02:29:52,337 p=12340 u=moonja n=ansible | TASK [pgsql94-bdr : Final PostgreSQL restart] ********************************************
2022-04-01 02:29:52,363 p=12340 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:29:52,383 p=12340 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:30:02,724 p=12340 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 02:30:02,740 p=12340 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 02:30:02,740 p=12340 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 02:30:02,752 p=12340 u=moonja n=ansible | TASK [pgsql94-bdr : Create database to sync between Master Servers] **********************
2022-04-01 02:30:02,794 p=12340 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 02:30:02,810 p=12340 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 02:30:03,587 p=12340 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: 	connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?
2022-04-01 02:30:03,588 p=12340 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n"}
2022-04-01 02:30:03,589 p=12340 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: 	connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?
2022-04-01 02:30:03,589 p=12340 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n"}
2022-04-01 02:30:04,972 p=12340 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: 	connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?
2022-04-01 02:30:04,973 p=12340 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n"}
2022-04-01 02:30:04,983 p=12340 u=moonja n=ansible | TASK [pgsql94-bdr : meta] ****************************************************************
2022-04-01 02:30:04,991 p=12340 u=moonja n=ansible | PLAY RECAP *******************************************************************************
2022-04-01 02:30:04,992 p=12340 u=moonja n=ansible | co7-master                 : ok=3    changed=1    unreachable=0    failed=0    skipped=16   rescued=0    ignored=0   
2022-04-01 02:30:04,992 p=12340 u=moonja n=ansible | co7-node01                 : ok=16   changed=12   unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2022-04-01 02:30:04,992 p=12340 u=moonja n=ansible | co7-node02                 : ok=16   changed=12   unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2022-04-01 02:30:04,992 p=12340 u=moonja n=ansible | co7-node03                 : ok=16   changed=12   unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2022-04-01 02:30:04,992 p=12340 u=moonja n=ansible | co7-slave                  : ok=3    changed=1    unreachable=0    failed=0    skipped=16   rescued=0    ignored=0   
2022-04-01 03:19:54,862 p=27651 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being 
removed. This feature will be removed from ansible-core in version 2.14. Deprecation 
warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-04-01 03:19:54,876 p=27651 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see
details

2022-04-01 03:19:55,110 p=27651 u=moonja n=ansible | ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  did not find expected ',' or '}'

The error appears to be in '/Users/moonja/postgres-cluster/roles/pgsql94-bdr/vars/main.yml': line 31, column 14, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

#postgresql_upstream_guc:
#  - { guc: "bdr.connections = 'demo'" }
             ^ here
This one looks easy to fix. It seems that there is a value started
with a quote, and the YAML parser is expecting to see the line ended
with the same kind of quote. For instance:

    when: "ok" in result.stdout

Could be written as:

   when: '"ok" in result.stdout'

Or equivalently:

   when: "'ok' in result.stdout"

2022-04-01 03:20:29,019 p=27729 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from ansible-core in version
 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-04-01 03:20:29,030 p=27729 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-04-01 03:20:29,268 p=27729 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 2.16. Deprecation 
warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-04-01 03:20:29,310 p=27729 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgsql94-bdr/tasks/upgrade.yml is empty and had no tasks to include

2022-04-01 03:20:29,325 p=27729 u=moonja n=ansible | PLAY [all] **********************************************************************************************************************************************
2022-04-01 03:20:29,350 p=27729 u=moonja n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************
2022-04-01 03:20:31,750 p=27729 u=moonja n=ansible | ok: [co7-master]
2022-04-01 03:20:32,244 p=27729 u=moonja n=ansible | ok: [co7-slave]
2022-04-01 03:20:32,920 p=27729 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 03:20:32,978 p=27729 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 03:20:32,984 p=27729 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 03:20:33,003 p=27729 u=moonja n=ansible | TASK [pgsql94-bdr : Check OS support] *******************************************************************************************************************
2022-04-01 03:20:33,024 p=27729 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 03:20:33,041 p=27729 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 03:20:33,057 p=27729 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 03:20:33,074 p=27729 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 03:20:33,085 p=27729 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 03:20:33,098 p=27729 u=moonja n=ansible | TASK [pgsql94-bdr : Check if PostgreSQL is running] *****************************************************************************************************
2022-04-01 03:20:33,118 p=27729 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 03:20:33,136 p=27729 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 03:20:33,997 p=27729 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 03:20:33,998 p=27729 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 03:20:33,998 p=27729 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 03:20:34,008 p=27729 u=moonja n=ansible | TASK [pgsql94-bdr : Start PostgreSQL] *******************************************************************************************************************
2022-04-01 03:20:34,028 p=27729 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 03:20:34,045 p=27729 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 03:20:34,062 p=27729 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 03:20:34,079 p=27729 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 03:20:34,090 p=27729 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 03:20:34,101 p=27729 u=moonja n=ansible | TASK [pgsql94-bdr : Check if database is available] *****************************************************************************************************
2022-04-01 03:20:34,121 p=27729 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 03:20:34,139 p=27729 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 03:20:34,968 p=27729 u=moonja n=ansible | [WARNING]: PostgreSQL server is unavailable: could not connect to server: No such file or directory         Is the server running locally and accepting
connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?

2022-04-01 03:20:34,969 p=27729 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": false, "failed_when_result": true, "is_available": false, "server_version": {}}
2022-04-01 03:20:34,969 p=27729 u=moonja n=ansible | ...ignoring
2022-04-01 03:20:34,969 p=27729 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": false, "failed_when_result": true, "is_available": false, "server_version": {}}
2022-04-01 03:20:34,969 p=27729 u=moonja n=ansible | ...ignoring
2022-04-01 03:20:34,969 p=27729 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": false, "failed_when_result": true, "is_available": false, "server_version": {}}
2022-04-01 03:20:34,970 p=27729 u=moonja n=ansible | ...ignoring
2022-04-01 03:20:34,978 p=27729 u=moonja n=ansible | TASK [pgsql94-bdr : Remove logical replications of BDR] *************************************************************************************************
2022-04-01 03:20:34,999 p=27729 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 03:20:35,015 p=27729 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 03:20:35,762 p=27729 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n"}
2022-04-01 03:20:35,763 p=27729 u=moonja n=ansible | ...ignoring
2022-04-01 03:20:35,768 p=27729 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n"}
2022-04-01 03:20:35,769 p=27729 u=moonja n=ansible | ...ignoring
2022-04-01 03:20:35,772 p=27729 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n"}
2022-04-01 03:20:35,772 p=27729 u=moonja n=ansible | ...ignoring
2022-04-01 03:20:35,783 p=27729 u=moonja n=ansible | TASK [pgsql94-bdr : Check if database is existed] *******************************************************************************************************
2022-04-01 03:20:35,803 p=27729 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 03:20:35,821 p=27729 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 03:20:36,434 p=27729 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": false, "failed_when_result": true, "is_available": false, "server_version": {}}
2022-04-01 03:20:36,434 p=27729 u=moonja n=ansible | ...ignoring
2022-04-01 03:20:36,436 p=27729 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": false, "failed_when_result": true, "is_available": false, "server_version": {}}
2022-04-01 03:20:36,436 p=27729 u=moonja n=ansible | ...ignoring
2022-04-01 03:20:36,443 p=27729 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": false, "failed_when_result": true, "is_available": false, "server_version": {}}
2022-04-01 03:20:36,444 p=27729 u=moonja n=ansible | ...ignoring
2022-04-01 03:20:36,453 p=27729 u=moonja n=ansible | TASK [pgsql94-bdr : Kill all postgresql connections for removing session held by user] ******************************************************************
2022-04-01 03:20:36,473 p=27729 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 03:20:36,490 p=27729 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 03:20:36,520 p=27729 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 03:20:36,527 p=27729 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 03:20:36,540 p=27729 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 03:20:36,551 p=27729 u=moonja n=ansible | TASK [pgsql94-bdr : Drop the database] ******************************************************************************************************************
2022-04-01 03:20:36,587 p=27729 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 03:20:36,602 p=27729 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 03:20:37,344 p=27729 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OperationalError: FATAL:  password authentication failed for user "bdrsync"
2022-04-01 03:20:37,345 p=27729 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": false, "msg": "unable to connect to database: FATAL:  password authentication failed for user \"bdrsync\"\n"}
2022-04-01 03:20:37,345 p=27729 u=moonja n=ansible | ...ignoring
2022-04-01 03:20:37,372 p=27729 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OperationalError: FATAL:  password authentication failed for user "bdrsync"
2022-04-01 03:20:37,373 p=27729 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": false, "msg": "unable to connect to database: FATAL:  password authentication failed for user \"bdrsync\"\n"}
2022-04-01 03:20:37,373 p=27729 u=moonja n=ansible | ...ignoring
2022-04-01 03:20:37,384 p=27729 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OperationalError: FATAL:  password authentication failed for user "bdrsync"
2022-04-01 03:20:37,384 p=27729 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": false, "msg": "unable to connect to database: FATAL:  password authentication failed for user \"bdrsync\"\n"}
2022-04-01 03:20:37,384 p=27729 u=moonja n=ansible | ...ignoring
2022-04-01 03:20:37,394 p=27729 u=moonja n=ansible | TASK [pgsql94-bdr : Stop PostgreSQL if are running] *****************************************************************************************************
2022-04-01 03:20:37,415 p=27729 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 03:20:37,431 p=27729 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 03:20:40,118 p=27729 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 03:20:40,497 p=27729 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 03:20:40,497 p=27729 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 03:20:40,510 p=27729 u=moonja n=ansible | TASK [pgsql94-bdr : Remove old PostgreSQL data directory if exists] *************************************************************************************
2022-04-01 03:20:40,532 p=27729 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 03:20:40,549 p=27729 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 03:20:41,335 p=27729 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 03:20:41,337 p=27729 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 03:20:41,341 p=27729 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 03:20:41,351 p=27729 u=moonja n=ansible | TASK [pgsql94-bdr : Check package manager support] ******************************************************************************************************
2022-04-01 03:20:41,372 p=27729 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 03:20:41,390 p=27729 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 03:20:41,406 p=27729 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 03:20:41,422 p=27729 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 03:20:41,437 p=27729 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 03:20:41,447 p=27729 u=moonja n=ansible | TASK [pgsql94-bdr : Remove PostgreSQL BDR packages] *****************************************************************************************************
2022-04-01 03:20:41,470 p=27729 u=moonja n=ansible | skipping: [co7-master] => (item=python-psycopg2) 
2022-04-01 03:20:41,472 p=27729 u=moonja n=ansible | skipping: [co7-master] => (item=postgresql-bdr94) 
2022-04-01 03:20:41,477 p=27729 u=moonja n=ansible | skipping: [co7-master] => (item=postgresql-bdr94-bdr) 
2022-04-01 03:20:41,477 p=27729 u=moonja n=ansible | skipping: [co7-master] => (item=postgresql-bdr94-2ndquadrant-redhat) 
2022-04-01 03:20:41,487 p=27729 u=moonja n=ansible | skipping: [co7-slave] => (item=python-psycopg2) 
2022-04-01 03:20:41,488 p=27729 u=moonja n=ansible | skipping: [co7-slave] => (item=postgresql-bdr94) 
2022-04-01 03:20:41,491 p=27729 u=moonja n=ansible | skipping: [co7-slave] => (item=postgresql-bdr94-bdr) 
2022-04-01 03:20:41,491 p=27729 u=moonja n=ansible | skipping: [co7-slave] => (item=postgresql-bdr94-2ndquadrant-redhat) 
2022-04-01 03:20:59,359 p=27729 u=moonja n=ansible | changed: [co7-node03] => (item=python-psycopg2)
2022-04-01 03:20:59,408 p=27729 u=moonja n=ansible | changed: [co7-node02] => (item=python-psycopg2)
2022-04-01 03:21:06,414 p=27729 u=moonja n=ansible | changed: [co7-node01] => (item=python-psycopg2)
2022-04-01 03:21:20,603 p=27729 u=moonja n=ansible | changed: [co7-node03] => (item=postgresql-bdr94)
2022-04-01 03:21:20,776 p=27729 u=moonja n=ansible | changed: [co7-node02] => (item=postgresql-bdr94)
2022-04-01 03:21:21,324 p=27729 u=moonja n=ansible | ok: [co7-node03] => (item=postgresql-bdr94-bdr)
2022-04-01 03:21:21,456 p=27729 u=moonja n=ansible | ok: [co7-node02] => (item=postgresql-bdr94-bdr)
2022-04-01 03:21:21,987 p=27729 u=moonja n=ansible | ok: [co7-node03] => (item=postgresql-bdr94-2ndquadrant-redhat)
2022-04-01 03:21:22,166 p=27729 u=moonja n=ansible | ok: [co7-node02] => (item=postgresql-bdr94-2ndquadrant-redhat)
2022-04-01 03:21:24,138 p=27729 u=moonja n=ansible | changed: [co7-node01] => (item=postgresql-bdr94)
2022-04-01 03:21:24,867 p=27729 u=moonja n=ansible | ok: [co7-node01] => (item=postgresql-bdr94-bdr)
2022-04-01 03:21:25,647 p=27729 u=moonja n=ansible | ok: [co7-node01] => (item=postgresql-bdr94-2ndquadrant-redhat)
2022-04-01 03:21:25,707 p=27729 u=moonja n=ansible | PLAY RECAP **********************************************************************************************************************************************
2022-04-01 03:21:25,707 p=27729 u=moonja n=ansible | co7-master                 : ok=1    changed=0    unreachable=0    failed=0    skipped=12   rescued=0    ignored=0   
2022-04-01 03:21:25,708 p=27729 u=moonja n=ansible | co7-node01                 : ok=9    changed=4    unreachable=0    failed=0    skipped=4    rescued=0    ignored=4   
2022-04-01 03:21:25,708 p=27729 u=moonja n=ansible | co7-node02                 : ok=9    changed=4    unreachable=0    failed=0    skipped=4    rescued=0    ignored=4   
2022-04-01 03:21:25,708 p=27729 u=moonja n=ansible | co7-node03                 : ok=9    changed=4    unreachable=0    failed=0    skipped=4    rescued=0    ignored=4   
2022-04-01 03:21:25,708 p=27729 u=moonja n=ansible | co7-slave                  : ok=1    changed=0    unreachable=0    failed=0    skipped=12   rescued=0    ignored=0   
2022-04-01 03:22:32,548 p=28646 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from ansible-core in version
 2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-04-01 03:22:32,559 p=28646 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-04-01 03:22:32,804 p=28646 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 2.16. Deprecation 
warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-04-01 03:22:32,841 p=28646 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgsql94-bdr/tasks/upgrade.yml is empty and had no tasks to include

2022-04-01 03:22:32,857 p=28646 u=moonja n=ansible | PLAY [all] **********************************************************************************************************************************************
2022-04-01 03:22:32,880 p=28646 u=moonja n=ansible | TASK [Gathering Facts] **********************************************************************************************************************************
2022-04-01 03:22:35,238 p=28646 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 03:22:35,262 p=28646 u=moonja n=ansible | ok: [co7-master]
2022-04-01 03:22:35,305 p=28646 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 03:22:35,363 p=28646 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 03:22:35,679 p=28646 u=moonja n=ansible | ok: [co7-slave]
2022-04-01 03:22:35,697 p=28646 u=moonja n=ansible | TASK [pgsql94-bdr : Check OS support] *******************************************************************************************************************
2022-04-01 03:22:35,717 p=28646 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 03:22:35,733 p=28646 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 03:22:35,764 p=28646 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 03:22:35,766 p=28646 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 03:22:35,777 p=28646 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 03:22:35,787 p=28646 u=moonja n=ansible | TASK [pgsql94-bdr : Check packet manager support] *******************************************************************************************************
2022-04-01 03:22:35,823 p=28646 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 03:22:35,840 p=28646 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 03:22:35,857 p=28646 u=moonja n=ansible | skipping: [co7-node01]
2022-04-01 03:22:35,857 p=28646 u=moonja n=ansible | skipping: [co7-node02]
2022-04-01 03:22:35,868 p=28646 u=moonja n=ansible | skipping: [co7-node03]
2022-04-01 03:22:35,879 p=28646 u=moonja n=ansible | TASK [pgsql94-bdr : Add bdr94 repository] ***************************************************************************************************************
2022-04-01 03:22:36,623 p=28646 u=moonja n=ansible | changed: [co7-master]
2022-04-01 03:22:36,625 p=28646 u=moonja n=ansible | changed: [co7-slave]
2022-04-01 03:22:36,629 p=28646 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 03:22:36,629 p=28646 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 03:22:36,658 p=28646 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 03:22:36,670 p=28646 u=moonja n=ansible | TASK [pgsql94-bdr : debug] ******************************************************************************************************************************
2022-04-01 03:22:36,709 p=28646 u=moonja n=ansible | ok: [co7-master] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 03:22:36,726 p=28646 u=moonja n=ansible | ok: [co7-slave] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 03:22:36,742 p=28646 u=moonja n=ansible | ok: [co7-node01] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 03:22:36,744 p=28646 u=moonja n=ansible | ok: [co7-node02] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 03:22:36,756 p=28646 u=moonja n=ansible | ok: [co7-node03] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-01 03:22:36,767 p=28646 u=moonja n=ansible | TASK [pgsql94-bdr : Install PostgreSQL BDR packages] ****************************************************************************************************
2022-04-01 03:22:36,792 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item=python-psycopg2) 
2022-04-01 03:22:36,793 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item=postgresql-bdr94-bdr) 
2022-04-01 03:22:36,808 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item=python-psycopg2) 
2022-04-01 03:22:36,809 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item=postgresql-bdr94-bdr) 
2022-04-01 03:22:56,123 p=28646 u=moonja n=ansible | changed: [co7-node03] => (item=python-psycopg2)
2022-04-01 03:22:56,124 p=28646 u=moonja n=ansible | changed: [co7-node01] => (item=python-psycopg2)
2022-04-01 03:22:56,200 p=28646 u=moonja n=ansible | changed: [co7-node02] => (item=python-psycopg2)
2022-04-01 03:23:28,314 p=28646 u=moonja n=ansible | changed: [co7-node01] => (item=postgresql-bdr94-bdr)
2022-04-01 03:23:28,699 p=28646 u=moonja n=ansible | changed: [co7-node03] => (item=postgresql-bdr94-bdr)
2022-04-01 03:23:28,715 p=28646 u=moonja n=ansible | changed: [co7-node02] => (item=postgresql-bdr94-bdr)
2022-04-01 03:23:28,730 p=28646 u=moonja n=ansible | TASK [pgsql94-bdr : Change the permissions on the /tmp directory] ***************************************************************************************
2022-04-01 03:23:28,755 p=28646 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 03:23:28,774 p=28646 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 03:23:29,438 p=28646 u=moonja n=ansible | ok: [co7-node01]
2022-04-01 03:23:29,439 p=28646 u=moonja n=ansible | ok: [co7-node03]
2022-04-01 03:23:29,441 p=28646 u=moonja n=ansible | ok: [co7-node02]
2022-04-01 03:23:29,451 p=28646 u=moonja n=ansible | TASK [pgsql94-bdr : Stop PostgreSQL if are running] *****************************************************************************************************
2022-04-01 03:23:29,488 p=28646 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 03:23:29,502 p=28646 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 03:23:30,160 p=28646 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "stop"], "delta": "0:00:00.030053", "end": "2022-04-01 03:23:30.253529", "msg": "non-zero return code", "rc": 1, "start": "2022-04-01 03:23:30.223476", "stderr": "pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory", "stderr_lines": ["pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory"], "stdout": "", "stdout_lines": []}
2022-04-01 03:23:30,160 p=28646 u=moonja n=ansible | ...ignoring
2022-04-01 03:23:30,183 p=28646 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "stop"], "delta": "0:00:00.031041", "end": "2022-04-01 03:23:30.269240", "msg": "non-zero return code", "rc": 1, "start": "2022-04-01 03:23:30.238199", "stderr": "pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory", "stderr_lines": ["pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory"], "stdout": "", "stdout_lines": []}
2022-04-01 03:23:30,183 p=28646 u=moonja n=ansible | ...ignoring
2022-04-01 03:23:30,184 p=28646 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "stop"], "delta": "0:00:00.032491", "end": "2022-04-01 03:23:30.273647", "msg": "non-zero return code", "rc": 1, "start": "2022-04-01 03:23:30.241156", "stderr": "pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory", "stderr_lines": ["pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory"], "stdout": "", "stdout_lines": []}
2022-04-01 03:23:30,185 p=28646 u=moonja n=ansible | ...ignoring
2022-04-01 03:23:30,195 p=28646 u=moonja n=ansible | TASK [pgsql94-bdr : Remove old PostgreSQL data directory if exists] *************************************************************************************
2022-04-01 03:23:30,216 p=28646 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 03:23:30,233 p=28646 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 03:23:30,731 p=28646 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 03:23:30,744 p=28646 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 03:23:30,746 p=28646 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 03:23:30,755 p=28646 u=moonja n=ansible | TASK [pgsql94-bdr : Initialize new PostgreSQL BDR cluster on upstream server] ***************************************************************************
2022-04-01 03:23:30,776 p=28646 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 03:23:30,793 p=28646 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 03:23:34,730 p=28646 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 03:23:34,916 p=28646 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 03:23:34,939 p=28646 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 03:23:34,949 p=28646 u=moonja n=ansible | TASK [pgsql94-bdr : Configure pg_hba.conf for basic authentication] *************************************************************************************
2022-04-01 03:23:34,973 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'}) 
2022-04-01 03:23:34,975 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'}) 
2022-04-01 03:23:34,979 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'}) 
2022-04-01 03:23:34,980 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'}) 
2022-04-01 03:23:34,990 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'}) 
2022-04-01 03:23:34,991 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'}) 
2022-04-01 03:23:34,994 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'}) 
2022-04-01 03:23:34,995 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'}) 
2022-04-01 03:23:35,676 p=28646 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'})
2022-04-01 03:23:35,677 p=28646 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'})
2022-04-01 03:23:35,678 p=28646 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'})
2022-04-01 03:23:36,096 p=28646 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'})
2022-04-01 03:23:36,097 p=28646 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'})
2022-04-01 03:23:36,097 p=28646 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'})
2022-04-01 03:23:36,511 p=28646 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'})
2022-04-01 03:23:36,512 p=28646 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'})
2022-04-01 03:23:36,513 p=28646 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'})
2022-04-01 03:23:36,932 p=28646 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'})
2022-04-01 03:23:36,933 p=28646 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'})
2022-04-01 03:23:36,934 p=28646 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'})
2022-04-01 03:23:36,946 p=28646 u=moonja n=ansible | TASK [pgsql94-bdr : Configure pg_hba.conf to enable communication with password authentication between servers] *****************************************
2022-04-01 03:23:37,019 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.82']) 
2022-04-01 03:23:37,020 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.83']) 
2022-04-01 03:23:37,026 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.84']) 
2022-04-01 03:23:37,027 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.85']) 
2022-04-01 03:23:37,034 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.82']) 
2022-04-01 03:23:37,037 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.83']) 
2022-04-01 03:23:37,040 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.84']) 
2022-04-01 03:23:37,041 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.85']) 
2022-04-01 03:23:37,530 p=28646 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.82'])
2022-04-01 03:23:37,537 p=28646 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.82'])
2022-04-01 03:23:37,542 p=28646 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.82'])
2022-04-01 03:23:37,941 p=28646 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.83'])
2022-04-01 03:23:37,943 p=28646 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.83'])
2022-04-01 03:23:37,952 p=28646 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.83'])
2022-04-01 03:23:38,345 p=28646 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.84'])
2022-04-01 03:23:38,359 p=28646 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.84'])
2022-04-01 03:23:38,390 p=28646 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.84'])
2022-04-01 03:23:38,738 p=28646 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.85'])
2022-04-01 03:23:38,758 p=28646 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.85'])
2022-04-01 03:23:38,794 p=28646 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.85'])
2022-04-01 03:23:38,805 p=28646 u=moonja n=ansible | TASK [pgsql94-bdr : Configure pg_hba.conf to enable communication with trust authentication between servers] ********************************************
2022-04-01 03:23:38,869 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.0.82']) 
2022-04-01 03:23:38,874 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.0.83']) 
2022-04-01 03:23:38,875 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.0.84']) 
2022-04-01 03:23:38,876 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.0.85']) 
2022-04-01 03:23:38,879 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.82']) 
2022-04-01 03:23:38,882 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.83']) 
2022-04-01 03:23:38,884 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.0.82']) 
2022-04-01 03:23:38,885 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.84']) 
2022-04-01 03:23:38,885 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.85']) 
2022-04-01 03:23:38,887 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.0.83']) 
2022-04-01 03:23:38,889 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.0.84']) 
2022-04-01 03:23:38,892 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.0.85']) 
2022-04-01 03:23:38,896 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.82']) 
2022-04-01 03:23:38,898 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.83']) 
2022-04-01 03:23:38,901 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.84']) 
2022-04-01 03:23:38,901 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.85']) 
2022-04-01 03:23:39,394 p=28646 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.0.82'])
2022-04-01 03:23:39,398 p=28646 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.0.82'])
2022-04-01 03:23:39,406 p=28646 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.0.82'])
2022-04-01 03:23:39,813 p=28646 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.0.83'])
2022-04-01 03:23:39,816 p=28646 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.0.83'])
2022-04-01 03:23:39,822 p=28646 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.0.83'])
2022-04-01 03:23:40,240 p=28646 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.0.84'])
2022-04-01 03:23:40,242 p=28646 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.0.84'])
2022-04-01 03:23:40,246 p=28646 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.0.84'])
2022-04-01 03:23:40,652 p=28646 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.0.85'])
2022-04-01 03:23:40,665 p=28646 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.0.85'])
2022-04-01 03:23:40,673 p=28646 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.0.85'])
2022-04-01 03:23:41,093 p=28646 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.82'])
2022-04-01 03:23:41,094 p=28646 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.82'])
2022-04-01 03:23:41,109 p=28646 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.82'])
2022-04-01 03:23:41,503 p=28646 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.83'])
2022-04-01 03:23:41,503 p=28646 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.83'])
2022-04-01 03:23:41,515 p=28646 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.83'])
2022-04-01 03:23:41,911 p=28646 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.84'])
2022-04-01 03:23:41,935 p=28646 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.84'])
2022-04-01 03:23:41,942 p=28646 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.84'])
2022-04-01 03:23:42,331 p=28646 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.85'])
2022-04-01 03:23:42,370 p=28646 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.85'])
2022-04-01 03:23:42,383 p=28646 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.85'])
2022-04-01 03:23:42,396 p=28646 u=moonja n=ansible | TASK [pgsql94-bdr : Configure postgresql.conf with shared GUCs of PostgreSQL for BDR] *******************************************************************
2022-04-01 03:23:42,462 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"}) 
2022-04-01 03:23:42,463 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'}) 
2022-04-01 03:23:42,470 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'}) 
2022-04-01 03:23:42,470 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"}) 
2022-04-01 03:23:42,471 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"}) 
2022-04-01 03:23:42,472 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'}) 
2022-04-01 03:23:42,473 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'}) 
2022-04-01 03:23:42,475 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"}) 
2022-04-01 03:23:42,476 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'}) 
2022-04-01 03:23:42,481 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'}) 
2022-04-01 03:23:42,481 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?unix_socket_directories = .*$', 'guc': "unix_socket_directories = '/tmp'"}) 
2022-04-01 03:23:42,483 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"}) 
2022-04-01 03:23:42,486 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'}) 
2022-04-01 03:23:42,487 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"}) 
2022-04-01 03:23:42,488 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'}) 
2022-04-01 03:23:42,494 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?unix_socket_directories = .*$', 'guc': "unix_socket_directories = '/tmp'"}) 
2022-04-01 03:23:42,969 p=28646 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"})
2022-04-01 03:23:42,993 p=28646 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"})
2022-04-01 03:23:42,996 p=28646 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"})
2022-04-01 03:23:43,369 p=28646 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'})
2022-04-01 03:23:43,426 p=28646 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'})
2022-04-01 03:23:43,431 p=28646 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'})
2022-04-01 03:23:43,779 p=28646 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'})
2022-04-01 03:23:43,844 p=28646 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'})
2022-04-01 03:23:43,858 p=28646 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'})
2022-04-01 03:23:44,182 p=28646 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"})
2022-04-01 03:23:44,248 p=28646 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"})
2022-04-01 03:23:44,263 p=28646 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"})
2022-04-01 03:23:44,584 p=28646 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'})
2022-04-01 03:23:44,650 p=28646 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'})
2022-04-01 03:23:44,670 p=28646 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'})
2022-04-01 03:23:44,997 p=28646 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"})
2022-04-01 03:23:45,049 p=28646 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"})
2022-04-01 03:23:45,069 p=28646 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"})
2022-04-01 03:23:45,396 p=28646 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'})
2022-04-01 03:23:45,468 p=28646 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'})
2022-04-01 03:23:45,481 p=28646 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'})
2022-04-01 03:23:45,791 p=28646 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?unix_socket_directories = .*$', 'guc': "unix_socket_directories = '/tmp'"})
2022-04-01 03:23:45,901 p=28646 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?unix_socket_directories = .*$', 'guc': "unix_socket_directories = '/tmp'"})
2022-04-01 03:23:45,902 p=28646 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?unix_socket_directories = .*$', 'guc': "unix_socket_directories = '/tmp'"})
2022-04-01 03:23:45,915 p=28646 u=moonja n=ansible | TASK [pgsql94-bdr : Start PostgreSQL] *******************************************************************************************************************
2022-04-01 03:23:45,950 p=28646 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 03:23:45,965 p=28646 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 03:23:47,519 p=28646 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 03:23:47,534 p=28646 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 03:23:47,548 p=28646 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 03:23:47,559 p=28646 u=moonja n=ansible | TASK [pgsql94-bdr : Configure Primary Master's postgresql.conf] *****************************************************************************************
2022-04-01 03:23:47,595 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 03:23:47,596 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.81 dbname=bdrdemo user=postgres'"}) 
2022-04-01 03:23:47,612 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 03:23:47,613 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.82 dbname=bdrdemo user=postgres'"}) 
2022-04-01 03:23:48,096 p=28646 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 03:23:48,117 p=28646 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 03:23:48,310 p=28646 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 03:23:48,488 p=28646 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"})
2022-04-01 03:23:49,145 p=28646 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.85 dbname=bdrdemo user=postgres'"})
2022-04-01 03:23:50,074 p=28646 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.84 dbname=bdrdemo user=postgres'"})
2022-04-01 03:23:50,088 p=28646 u=moonja n=ansible | TASK [pgsql94-bdr : Configure Slave Master's postgresql.conf] *******************************************************************************************
2022-04-01 03:23:50,129 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 03:23:50,129 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"}) 
2022-04-01 03:23:50,131 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': 'bdr.demo_init_replica = on'}) 
2022-04-01 03:23:50,132 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"}) 
2022-04-01 03:23:50,147 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-01 03:23:50,148 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"}) 
2022-04-01 03:23:50,148 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': 'bdr.demo_init_replica = on'}) 
2022-04-01 03:23:50,149 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"}) 
2022-04-01 03:23:50,689 p=28646 u=moonja n=ansible | ok: [co7-node02] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 03:23:50,691 p=28646 u=moonja n=ansible | ok: [co7-node03] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 03:23:50,692 p=28646 u=moonja n=ansible | ok: [co7-node01] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-01 03:23:51,188 p=28646 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"})
2022-04-01 03:23:51,191 p=28646 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"})
2022-04-01 03:23:51,232 p=28646 u=moonja n=ansible | ok: [co7-node01] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"})
2022-04-01 03:23:52,091 p=28646 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': 'bdr.demo_init_replica = on'})
2022-04-01 03:23:52,112 p=28646 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': 'bdr.demo_init_replica = on'})
2022-04-01 03:23:52,113 p=28646 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': 'bdr.demo_init_replica = on'})
2022-04-01 03:23:52,529 p=28646 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"})
2022-04-01 03:23:52,560 p=28646 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"})
2022-04-01 03:23:52,585 p=28646 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"})
2022-04-01 03:23:52,596 p=28646 u=moonja n=ansible | TASK [pgsql94-bdr : Final PostgreSQL restart] ***********************************************************************************************************
2022-04-01 03:23:52,618 p=28646 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 03:23:52,634 p=28646 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 03:23:59,404 p=28646 u=moonja n=ansible | changed: [co7-node01]
2022-04-01 03:23:59,475 p=28646 u=moonja n=ansible | changed: [co7-node03]
2022-04-01 03:23:59,538 p=28646 u=moonja n=ansible | changed: [co7-node02]
2022-04-01 03:23:59,547 p=28646 u=moonja n=ansible | TASK [pgsql94-bdr : Create database to sync between Master Servers] *************************************************************************************
2022-04-01 03:23:59,569 p=28646 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 03:23:59,587 p=28646 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 03:24:00,365 p=28646 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: 	connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?
2022-04-01 03:24:00,366 p=28646 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n"}
2022-04-01 03:24:00,388 p=28646 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: 	connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?
2022-04-01 03:24:00,388 p=28646 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n"}
2022-04-01 03:24:00,404 p=28646 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: 	connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?
2022-04-01 03:24:00,404 p=28646 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n"}
2022-04-01 03:24:00,414 p=28646 u=moonja n=ansible | TASK [pgsql94-bdr : Connect to database, create user and grant access for all Master Servers] ***********************************************************
2022-04-01 03:24:00,438 p=28646 u=moonja n=ansible | skipping: [co7-master]
2022-04-01 03:24:00,450 p=28646 u=moonja n=ansible | skipping: [co7-slave]
2022-04-01 03:24:00,460 p=28646 u=moonja n=ansible | TASK [pgsql94-bdr : Create extentions for BDR] **********************************************************************************************************
2022-04-01 03:24:00,486 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item=CREATE EXTENSION btree_gist;) 
2022-04-01 03:24:00,487 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item=CREATE EXTENSION bdr;) 
2022-04-01 03:24:00,498 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item=CREATE EXTENSION btree_gist;) 
2022-04-01 03:24:00,499 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item=CREATE EXTENSION bdr;) 
2022-04-01 03:24:00,511 p=28646 u=moonja n=ansible | TASK [pgsql94-bdr : Create group on Primary Master Server for BDR] **************************************************************************************
2022-04-01 03:24:00,543 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item=SELECT bdr.bdr_group_create ( local_node_name := 'co7-master', node_external_dsn := 'host=192.168.0.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-01 03:24:00,557 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item=SELECT bdr.bdr_group_create ( local_node_name := 'co7-slave', node_external_dsn := 'host=192.168.0.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-01 03:24:00,568 p=28646 u=moonja n=ansible | TASK [pgsql94-bdr : Join group from other Master Servers] ***********************************************************************************************
2022-04-01 03:24:00,609 p=28646 u=moonja n=ansible | skipping: [co7-master] => (item=SELECT bdr.bdr_group_join ( local_node_name := 'co7-master', node_external_dsn := 'host=192.168.0.81 user=bdrsync dbname=bdrdemo password=changeme', join_using_dsn := 'host=192.168.0.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-01 03:24:00,623 p=28646 u=moonja n=ansible | skipping: [co7-slave] => (item=SELECT bdr.bdr_group_join ( local_node_name := 'co7-slave', node_external_dsn := 'host=192.168.0.82 user=bdrsync dbname=bdrdemo password=changeme', join_using_dsn := 'host=192.168.0.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-01 03:24:00,656 p=28646 u=moonja n=ansible | PLAY RECAP **********************************************************************************************************************************************
2022-04-01 03:24:00,656 p=28646 u=moonja n=ansible | co7-master                 : ok=3    changed=1    unreachable=0    failed=0    skipped=20   rescued=0    ignored=0   
2022-04-01 03:24:00,657 p=28646 u=moonja n=ansible | co7-node01                 : ok=16   changed=13   unreachable=0    failed=1    skipped=2    rescued=0    ignored=1   
2022-04-01 03:24:00,657 p=28646 u=moonja n=ansible | co7-node02                 : ok=16   changed=13   unreachable=0    failed=1    skipped=2    rescued=0    ignored=1   
2022-04-01 03:24:00,657 p=28646 u=moonja n=ansible | co7-node03                 : ok=16   changed=13   unreachable=0    failed=1    skipped=2    rescued=0    ignored=1   
2022-04-01 03:24:00,657 p=28646 u=moonja n=ansible | co7-slave                  : ok=3    changed=1    unreachable=0    failed=0    skipped=20   rescued=0    ignored=0   
2022-04-05 10:41:30,628 p=84892 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will 
be removed from ansible-core in version 2.14. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2022-04-05 10:41:30,641 p=84892 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-04-05 10:41:30,962 p=84892 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be 
removed in version 2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in 
ansible.cfg.
2022-04-05 10:41:31,000 p=84892 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgsql94-bdr/tasks/upgrade.yml is empty and had no tasks to
include

2022-04-05 10:41:31,017 p=84892 u=moonja n=ansible | PLAY [all] ********************************************************************************************************
2022-04-05 10:41:31,041 p=84892 u=moonja n=ansible | TASK [Gathering Facts] ********************************************************************************************
2022-04-05 10:41:48,229 p=84892 u=moonja n=ansible | ok: [co7-node02]
2022-04-05 10:41:49,000 p=84892 u=moonja n=ansible | ok: [co7-master]
2022-04-05 10:41:49,640 p=84892 u=moonja n=ansible | ok: [co7-node03]
2022-04-05 10:41:50,069 p=84892 u=moonja n=ansible | ok: [co7-slave]
2022-04-05 10:41:50,224 p=84892 u=moonja n=ansible | ok: [co7-node01]
2022-04-05 10:41:50,243 p=84892 u=moonja n=ansible | TASK [pgsql94-bdr : Check OS support] *****************************************************************************
2022-04-05 10:41:50,264 p=84892 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 10:41:50,280 p=84892 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 10:41:50,297 p=84892 u=moonja n=ansible | skipping: [co7-node01]
2022-04-05 10:41:50,314 p=84892 u=moonja n=ansible | skipping: [co7-node02]
2022-04-05 10:41:50,325 p=84892 u=moonja n=ansible | skipping: [co7-node03]
2022-04-05 10:41:50,337 p=84892 u=moonja n=ansible | TASK [pgsql94-bdr : Check if PostgreSQL is running] ***************************************************************
2022-04-05 10:41:50,357 p=84892 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 10:41:50,375 p=84892 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 10:41:52,604 p=84892 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "status"], "delta": "0:00:00.732388", "end": "2022-04-05 10:41:52.783921", "msg": "non-zero return code", "rc": 3, "start": "2022-04-05 10:41:52.051533", "stderr": "", "stderr_lines": [], "stdout": "pg_ctl: no server running", "stdout_lines": ["pg_ctl: no server running"]}
2022-04-05 10:41:52,605 p=84892 u=moonja n=ansible | ...ignoring
2022-04-05 10:41:52,697 p=84892 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "status"], "delta": "0:00:00.640579", "end": "2022-04-05 10:41:52.859279", "msg": "non-zero return code", "rc": 3, "start": "2022-04-05 10:41:52.218700", "stderr": "", "stderr_lines": [], "stdout": "pg_ctl: no server running", "stdout_lines": ["pg_ctl: no server running"]}
2022-04-05 10:41:52,698 p=84892 u=moonja n=ansible | ...ignoring
2022-04-05 10:41:52,895 p=84892 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "status"], "delta": "0:00:00.992426", "end": "2022-04-05 10:41:53.053507", "msg": "non-zero return code", "rc": 3, "start": "2022-04-05 10:41:52.061081", "stderr": "", "stderr_lines": [], "stdout": "pg_ctl: no server running", "stdout_lines": ["pg_ctl: no server running"]}
2022-04-05 10:41:52,896 p=84892 u=moonja n=ansible | ...ignoring
2022-04-05 10:41:52,905 p=84892 u=moonja n=ansible | TASK [pgsql94-bdr : Start PostgreSQL] *****************************************************************************
2022-04-05 10:41:52,926 p=84892 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 10:41:52,943 p=84892 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 10:41:56,413 p=84892 u=moonja n=ansible | changed: [co7-node03]
2022-04-05 10:41:56,435 p=84892 u=moonja n=ansible | changed: [co7-node02]
2022-04-05 10:41:56,660 p=84892 u=moonja n=ansible | changed: [co7-node01]
2022-04-05 10:41:56,670 p=84892 u=moonja n=ansible | TASK [pgsql94-bdr : Check if database is available] ***************************************************************
2022-04-05 10:41:56,691 p=84892 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 10:41:56,709 p=84892 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 10:41:59,101 p=84892 u=moonja n=ansible | [WARNING]: PostgreSQL server is unavailable: could not connect to server: No such file or directory         Is the
server running locally and accepting         connections on Unix domain socket
"/var/run/postgresql/.s.PGSQL.5432"?

2022-04-05 10:41:59,101 p=84892 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": false, "failed_when_result": true, "is_available": false, "server_version": {}}
2022-04-05 10:41:59,102 p=84892 u=moonja n=ansible | ...ignoring
2022-04-05 10:41:59,233 p=84892 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": false, "failed_when_result": true, "is_available": false, "server_version": {}}
2022-04-05 10:41:59,233 p=84892 u=moonja n=ansible | ...ignoring
2022-04-05 10:42:00,048 p=84892 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": false, "failed_when_result": true, "is_available": false, "server_version": {}}
2022-04-05 10:42:00,048 p=84892 u=moonja n=ansible | ...ignoring
2022-04-05 10:42:00,058 p=84892 u=moonja n=ansible | TASK [pgsql94-bdr : Remove logical replications of BDR] ***********************************************************
2022-04-05 10:42:00,078 p=84892 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 10:42:00,095 p=84892 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 10:42:00,716 p=84892 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n"}
2022-04-05 10:42:00,717 p=84892 u=moonja n=ansible | ...ignoring
2022-04-05 10:42:00,735 p=84892 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n"}
2022-04-05 10:42:00,735 p=84892 u=moonja n=ansible | ...ignoring
2022-04-05 10:42:00,737 p=84892 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n"}
2022-04-05 10:42:00,737 p=84892 u=moonja n=ansible | ...ignoring
2022-04-05 10:42:00,748 p=84892 u=moonja n=ansible | TASK [pgsql94-bdr : Check if database is existed] *****************************************************************
2022-04-05 10:42:00,769 p=84892 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 10:42:00,787 p=84892 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 10:42:01,490 p=84892 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": false, "failed_when_result": true, "is_available": false, "server_version": {}}
2022-04-05 10:42:01,491 p=84892 u=moonja n=ansible | ...ignoring
2022-04-05 10:42:01,577 p=84892 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": false, "failed_when_result": true, "is_available": false, "server_version": {}}
2022-04-05 10:42:01,577 p=84892 u=moonja n=ansible | ...ignoring
2022-04-05 10:42:01,578 p=84892 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": false, "failed_when_result": true, "is_available": false, "server_version": {}}
2022-04-05 10:42:01,578 p=84892 u=moonja n=ansible | ...ignoring
2022-04-05 10:42:01,590 p=84892 u=moonja n=ansible | TASK [pgsql94-bdr : Kill all postgresql connections for removing session held by user] ****************************
2022-04-05 10:42:01,611 p=84892 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 10:42:01,629 p=84892 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 10:42:01,661 p=84892 u=moonja n=ansible | skipping: [co7-node01]
2022-04-05 10:42:01,666 p=84892 u=moonja n=ansible | skipping: [co7-node02]
2022-04-05 10:42:01,681 p=84892 u=moonja n=ansible | skipping: [co7-node03]
2022-04-05 10:42:01,691 p=84892 u=moonja n=ansible | TASK [pgsql94-bdr : Drop the database] ****************************************************************************
2022-04-05 10:42:01,713 p=84892 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 10:42:01,730 p=84892 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 10:42:02,998 p=84892 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OperationalError: FATAL:  password authentication failed for user "bdrsync"
2022-04-05 10:42:02,999 p=84892 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": false, "msg": "unable to connect to database: FATAL:  password authentication failed for user \"bdrsync\"\n"}
2022-04-05 10:42:02,999 p=84892 u=moonja n=ansible | ...ignoring
2022-04-05 10:42:02,999 p=84892 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OperationalError: FATAL:  password authentication failed for user "bdrsync"
2022-04-05 10:42:02,999 p=84892 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": false, "msg": "unable to connect to database: FATAL:  password authentication failed for user \"bdrsync\"\n"}
2022-04-05 10:42:02,999 p=84892 u=moonja n=ansible | ...ignoring
2022-04-05 10:42:03,009 p=84892 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OperationalError: FATAL:  password authentication failed for user "bdrsync"
2022-04-05 10:42:03,010 p=84892 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": false, "msg": "unable to connect to database: FATAL:  password authentication failed for user \"bdrsync\"\n"}
2022-04-05 10:42:03,010 p=84892 u=moonja n=ansible | ...ignoring
2022-04-05 10:42:03,019 p=84892 u=moonja n=ansible | TASK [pgsql94-bdr : Stop PostgreSQL if are running] ***************************************************************
2022-04-05 10:42:03,040 p=84892 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 10:42:03,059 p=84892 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 10:42:04,560 p=84892 u=moonja n=ansible | changed: [co7-node02]
2022-04-05 10:42:04,591 p=84892 u=moonja n=ansible | changed: [co7-node03]
2022-04-05 10:42:04,594 p=84892 u=moonja n=ansible | changed: [co7-node01]
2022-04-05 10:42:04,607 p=84892 u=moonja n=ansible | TASK [pgsql94-bdr : Remove old PostgreSQL data directory if exists] ***********************************************
2022-04-05 10:42:04,631 p=84892 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 10:42:04,649 p=84892 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 10:42:07,200 p=84892 u=moonja n=ansible | changed: [co7-node02]
2022-04-05 10:42:07,224 p=84892 u=moonja n=ansible | changed: [co7-node03]
2022-04-05 10:42:07,850 p=84892 u=moonja n=ansible | changed: [co7-node01]
2022-04-05 10:42:07,862 p=84892 u=moonja n=ansible | TASK [pgsql94-bdr : Check package manager support] ****************************************************************
2022-04-05 10:42:07,884 p=84892 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 10:42:07,901 p=84892 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 10:42:07,918 p=84892 u=moonja n=ansible | skipping: [co7-node01]
2022-04-05 10:42:07,934 p=84892 u=moonja n=ansible | skipping: [co7-node02]
2022-04-05 10:42:07,948 p=84892 u=moonja n=ansible | skipping: [co7-node03]
2022-04-05 10:42:07,959 p=84892 u=moonja n=ansible | TASK [pgsql94-bdr : Remove PostgreSQL BDR packages] ***************************************************************
2022-04-05 10:42:07,983 p=84892 u=moonja n=ansible | skipping: [co7-master] => (item=python-psycopg2) 
2022-04-05 10:42:07,985 p=84892 u=moonja n=ansible | skipping: [co7-master] => (item=postgresql-bdr94) 
2022-04-05 10:42:07,988 p=84892 u=moonja n=ansible | skipping: [co7-master] => (item=postgresql-bdr94-bdr) 
2022-04-05 10:42:07,989 p=84892 u=moonja n=ansible | skipping: [co7-master] => (item=postgresql-bdr94-2ndquadrant-redhat) 
2022-04-05 10:42:07,999 p=84892 u=moonja n=ansible | skipping: [co7-slave] => (item=python-psycopg2) 
2022-04-05 10:42:08,004 p=84892 u=moonja n=ansible | skipping: [co7-slave] => (item=postgresql-bdr94) 
2022-04-05 10:42:08,004 p=84892 u=moonja n=ansible | skipping: [co7-slave] => (item=postgresql-bdr94-bdr) 
2022-04-05 10:42:08,005 p=84892 u=moonja n=ansible | skipping: [co7-slave] => (item=postgresql-bdr94-2ndquadrant-redhat) 
2022-04-05 10:43:43,904 p=84892 u=moonja n=ansible | changed: [co7-node03] => (item=python-psycopg2)
2022-04-05 10:44:00,467 p=84892 u=moonja n=ansible | changed: [co7-node03] => (item=postgresql-bdr94)
2022-04-05 10:44:01,147 p=84892 u=moonja n=ansible | ok: [co7-node03] => (item=postgresql-bdr94-bdr)
2022-04-05 10:44:01,859 p=84892 u=moonja n=ansible | ok: [co7-node03] => (item=postgresql-bdr94-2ndquadrant-redhat)
2022-04-05 10:44:08,696 p=84892 u=moonja n=ansible | changed: [co7-node01] => (item=python-psycopg2)
2022-04-05 10:44:26,088 p=84892 u=moonja n=ansible | changed: [co7-node01] => (item=postgresql-bdr94)
2022-04-05 10:44:26,827 p=84892 u=moonja n=ansible | ok: [co7-node01] => (item=postgresql-bdr94-bdr)
2022-04-05 10:44:27,601 p=84892 u=moonja n=ansible | ok: [co7-node01] => (item=postgresql-bdr94-2ndquadrant-redhat)
2022-04-05 10:49:46,128 p=84892 u=moonja n=ansible | changed: [co7-node02] => (item=python-psycopg2)
2022-04-05 10:50:04,415 p=84892 u=moonja n=ansible | changed: [co7-node02] => (item=postgresql-bdr94)
2022-04-05 10:50:05,114 p=84892 u=moonja n=ansible | ok: [co7-node02] => (item=postgresql-bdr94-bdr)
2022-04-05 10:50:05,795 p=84892 u=moonja n=ansible | ok: [co7-node02] => (item=postgresql-bdr94-2ndquadrant-redhat)
2022-04-05 10:50:05,853 p=84892 u=moonja n=ansible | PLAY RECAP ********************************************************************************************************
2022-04-05 10:50:05,853 p=84892 u=moonja n=ansible | co7-master                 : ok=1    changed=0    unreachable=0    failed=0    skipped=12   rescued=0    ignored=0   
2022-04-05 10:50:05,854 p=84892 u=moonja n=ansible | co7-node01                 : ok=10   changed=5    unreachable=0    failed=0    skipped=3    rescued=0    ignored=5   
2022-04-05 10:50:05,854 p=84892 u=moonja n=ansible | co7-node02                 : ok=10   changed=5    unreachable=0    failed=0    skipped=3    rescued=0    ignored=5   
2022-04-05 10:50:05,854 p=84892 u=moonja n=ansible | co7-node03                 : ok=10   changed=5    unreachable=0    failed=0    skipped=3    rescued=0    ignored=5   
2022-04-05 10:50:05,854 p=84892 u=moonja n=ansible | co7-slave                  : ok=1    changed=0    unreachable=0    failed=0    skipped=12   rescued=0    ignored=0   
2022-04-05 11:00:52,622 p=90109 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will 
be removed from ansible-core in version 2.14. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2022-04-05 11:00:52,633 p=90109 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-04-05 11:00:52,876 p=90109 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be 
removed in version 2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in 
ansible.cfg.
2022-04-05 11:00:52,912 p=90109 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgsql94-bdr/tasks/upgrade.yml is empty and had no tasks to
include

2022-04-05 11:00:52,926 p=90109 u=moonja n=ansible | PLAY [all] ********************************************************************************************************
2022-04-05 11:00:52,949 p=90109 u=moonja n=ansible | TASK [Gathering Facts] ********************************************************************************************
2022-04-05 11:00:55,187 p=90109 u=moonja n=ansible | ok: [co7-node03]
2022-04-05 11:00:55,344 p=90109 u=moonja n=ansible | ok: [co7-master]
2022-04-05 11:00:55,428 p=90109 u=moonja n=ansible | ok: [co7-node02]
2022-04-05 11:00:55,624 p=90109 u=moonja n=ansible | ok: [co7-node01]
2022-04-05 11:00:55,765 p=90109 u=moonja n=ansible | ok: [co7-slave]
2022-04-05 11:00:55,782 p=90109 u=moonja n=ansible | TASK [pgsql94-bdr : Check OS support] *****************************************************************************
2022-04-05 11:00:55,803 p=90109 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 11:00:55,819 p=90109 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 11:00:55,836 p=90109 u=moonja n=ansible | skipping: [co7-node01]
2022-04-05 11:00:55,853 p=90109 u=moonja n=ansible | skipping: [co7-node02]
2022-04-05 11:00:55,866 p=90109 u=moonja n=ansible | skipping: [co7-node03]
2022-04-05 11:00:55,876 p=90109 u=moonja n=ansible | TASK [pgsql94-bdr : Check packet manager support] *****************************************************************
2022-04-05 11:00:55,896 p=90109 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 11:00:55,913 p=90109 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 11:00:55,945 p=90109 u=moonja n=ansible | skipping: [co7-node01]
2022-04-05 11:00:55,946 p=90109 u=moonja n=ansible | skipping: [co7-node02]
2022-04-05 11:00:55,957 p=90109 u=moonja n=ansible | skipping: [co7-node03]
2022-04-05 11:00:55,968 p=90109 u=moonja n=ansible | TASK [pgsql94-bdr : Add bdr94 repository] *************************************************************************
2022-04-05 11:00:56,711 p=90109 u=moonja n=ansible | changed: [co7-node02]
2022-04-05 11:00:56,712 p=90109 u=moonja n=ansible | changed: [co7-node03]
2022-04-05 11:00:56,713 p=90109 u=moonja n=ansible | changed: [co7-node01]
2022-04-05 11:00:57,578 p=90109 u=moonja n=ansible | changed: [co7-master]
2022-04-05 11:00:57,628 p=90109 u=moonja n=ansible | changed: [co7-slave]
2022-04-05 11:00:57,637 p=90109 u=moonja n=ansible | TASK [pgsql94-bdr : debug] ****************************************************************************************
2022-04-05 11:00:57,675 p=90109 u=moonja n=ansible | ok: [co7-master] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-05 11:00:57,693 p=90109 u=moonja n=ansible | ok: [co7-slave] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-05 11:00:57,710 p=90109 u=moonja n=ansible | ok: [co7-node01] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-05 11:00:57,711 p=90109 u=moonja n=ansible | ok: [co7-node02] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-05 11:00:57,724 p=90109 u=moonja n=ansible | ok: [co7-node03] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-05 11:00:57,735 p=90109 u=moonja n=ansible | TASK [pgsql94-bdr : Install PostgreSQL BDR packages] **************************************************************
2022-04-05 11:00:57,760 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item=python-psycopg2) 
2022-04-05 11:00:57,761 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item=postgresql-bdr94-bdr) 
2022-04-05 11:00:57,776 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item=python-psycopg2) 
2022-04-05 11:00:57,777 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item=postgresql-bdr94-bdr) 
2022-04-05 11:01:35,762 p=90109 u=moonja n=ansible | changed: [co7-node03] => (item=python-psycopg2)
2022-04-05 11:01:35,766 p=90109 u=moonja n=ansible | changed: [co7-node01] => (item=python-psycopg2)
2022-04-05 11:01:35,771 p=90109 u=moonja n=ansible | changed: [co7-node02] => (item=python-psycopg2)
2022-04-05 11:02:13,934 p=90109 u=moonja n=ansible | changed: [co7-node01] => (item=postgresql-bdr94-bdr)
2022-04-05 11:02:13,974 p=90109 u=moonja n=ansible | changed: [co7-node02] => (item=postgresql-bdr94-bdr)
2022-04-05 11:02:14,038 p=90109 u=moonja n=ansible | changed: [co7-node03] => (item=postgresql-bdr94-bdr)
2022-04-05 11:02:14,050 p=90109 u=moonja n=ansible | TASK [pgsql94-bdr : Change the permissions on the /tmp directory] *************************************************
2022-04-05 11:02:14,071 p=90109 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 11:02:14,089 p=90109 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 11:02:14,754 p=90109 u=moonja n=ansible | changed: [co7-node03]
2022-04-05 11:02:14,790 p=90109 u=moonja n=ansible | changed: [co7-node02]
2022-04-05 11:02:14,796 p=90109 u=moonja n=ansible | changed: [co7-node01]
2022-04-05 11:02:14,806 p=90109 u=moonja n=ansible | TASK [pgsql94-bdr : Stop PostgreSQL if are running] ***************************************************************
2022-04-05 11:02:14,827 p=90109 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 11:02:14,844 p=90109 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 11:02:15,539 p=90109 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "stop"], "delta": "0:00:00.029933", "end": "2022-04-05 11:02:15.702433", "msg": "non-zero return code", "rc": 1, "start": "2022-04-05 11:02:15.672500", "stderr": "pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory", "stderr_lines": ["pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory"], "stdout": "", "stdout_lines": []}
2022-04-05 11:02:15,540 p=90109 u=moonja n=ansible | ...ignoring
2022-04-05 11:02:15,562 p=90109 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "stop"], "delta": "0:00:00.030602", "end": "2022-04-05 11:02:15.729585", "msg": "non-zero return code", "rc": 1, "start": "2022-04-05 11:02:15.698983", "stderr": "pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory", "stderr_lines": ["pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory"], "stdout": "", "stdout_lines": []}
2022-04-05 11:02:15,563 p=90109 u=moonja n=ansible | ...ignoring
2022-04-05 11:02:15,584 p=90109 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "stop"], "delta": "0:00:00.040162", "end": "2022-04-05 11:02:15.744855", "msg": "non-zero return code", "rc": 1, "start": "2022-04-05 11:02:15.704693", "stderr": "pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory", "stderr_lines": ["pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory"], "stdout": "", "stdout_lines": []}
2022-04-05 11:02:15,584 p=90109 u=moonja n=ansible | ...ignoring
2022-04-05 11:02:15,594 p=90109 u=moonja n=ansible | TASK [pgsql94-bdr : Remove old PostgreSQL data directory if exists] ***********************************************
2022-04-05 11:02:15,616 p=90109 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 11:02:15,634 p=90109 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 11:02:16,132 p=90109 u=moonja n=ansible | changed: [co7-node02]
2022-04-05 11:02:16,132 p=90109 u=moonja n=ansible | changed: [co7-node03]
2022-04-05 11:02:16,143 p=90109 u=moonja n=ansible | changed: [co7-node01]
2022-04-05 11:02:16,153 p=90109 u=moonja n=ansible | TASK [pgsql94-bdr : Initialize new PostgreSQL BDR cluster on upstream server] *************************************
2022-04-05 11:02:16,173 p=90109 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 11:02:16,190 p=90109 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 11:02:34,512 p=90109 u=moonja n=ansible | changed: [co7-node03]
2022-04-05 11:02:34,687 p=90109 u=moonja n=ansible | changed: [co7-node02]
2022-04-05 11:02:36,075 p=90109 u=moonja n=ansible | changed: [co7-node01]
2022-04-05 11:02:36,085 p=90109 u=moonja n=ansible | TASK [pgsql94-bdr : Configure pg_hba.conf for basic authentication] ***********************************************
2022-04-05 11:02:36,109 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'}) 
2022-04-05 11:02:36,114 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'}) 
2022-04-05 11:02:36,115 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'}) 
2022-04-05 11:02:36,116 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'}) 
2022-04-05 11:02:36,126 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'}) 
2022-04-05 11:02:36,128 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'}) 
2022-04-05 11:02:36,135 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'}) 
2022-04-05 11:02:36,136 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'}) 
2022-04-05 11:02:36,803 p=90109 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'})
2022-04-05 11:02:36,807 p=90109 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'})
2022-04-05 11:02:36,825 p=90109 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'})
2022-04-05 11:02:37,224 p=90109 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'})
2022-04-05 11:02:37,229 p=90109 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'})
2022-04-05 11:02:37,270 p=90109 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'})
2022-04-05 11:02:37,672 p=90109 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'})
2022-04-05 11:02:37,673 p=90109 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'})
2022-04-05 11:02:37,721 p=90109 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'})
2022-04-05 11:02:38,085 p=90109 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'})
2022-04-05 11:02:38,086 p=90109 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'})
2022-04-05 11:02:38,144 p=90109 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'})
2022-04-05 11:02:38,155 p=90109 u=moonja n=ansible | TASK [pgsql94-bdr : Configure pg_hba.conf to enable communication with password authentication between servers] ***
2022-04-05 11:02:38,269 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.82']) 
2022-04-05 11:02:38,270 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.83']) 
2022-04-05 11:02:38,273 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.84']) 
2022-04-05 11:02:38,274 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.85']) 
2022-04-05 11:02:38,283 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.82']) 
2022-04-05 11:02:38,286 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.83']) 
2022-04-05 11:02:38,289 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.84']) 
2022-04-05 11:02:38,289 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.85']) 
2022-04-05 11:02:38,752 p=90109 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.82'])
2022-04-05 11:02:38,754 p=90109 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.82'])
2022-04-05 11:02:38,762 p=90109 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.82'])
2022-04-05 11:02:39,197 p=90109 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.83'])
2022-04-05 11:02:39,197 p=90109 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.83'])
2022-04-05 11:02:39,207 p=90109 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.83'])
2022-04-05 11:02:39,634 p=90109 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.84'])
2022-04-05 11:02:39,662 p=90109 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.84'])
2022-04-05 11:02:39,680 p=90109 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.84'])
2022-04-05 11:02:40,028 p=90109 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.85'])
2022-04-05 11:02:40,091 p=90109 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.85'])
2022-04-05 11:02:40,098 p=90109 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.85'])
2022-04-05 11:02:40,108 p=90109 u=moonja n=ansible | TASK [pgsql94-bdr : Configure pg_hba.conf to enable communication with trust authentication between servers] ******
2022-04-05 11:02:40,169 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.0.82']) 
2022-04-05 11:02:40,173 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.0.83']) 
2022-04-05 11:02:40,174 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.0.84']) 
2022-04-05 11:02:40,175 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.0.85']) 
2022-04-05 11:02:40,178 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.82']) 
2022-04-05 11:02:40,181 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.83']) 
2022-04-05 11:02:40,184 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.84']) 
2022-04-05 11:02:40,190 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.0.82']) 
2022-04-05 11:02:40,191 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.85']) 
2022-04-05 11:02:40,191 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.0.83']) 
2022-04-05 11:02:40,192 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.0.84']) 
2022-04-05 11:02:40,195 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.0.85']) 
2022-04-05 11:02:40,196 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.82']) 
2022-04-05 11:02:40,201 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.83']) 
2022-04-05 11:02:40,201 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.84']) 
2022-04-05 11:02:40,202 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.85']) 
2022-04-05 11:02:40,724 p=90109 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.0.82'])
2022-04-05 11:02:40,729 p=90109 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.0.82'])
2022-04-05 11:02:40,743 p=90109 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.0.82'])
2022-04-05 11:02:41,143 p=90109 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.0.83'])
2022-04-05 11:02:41,162 p=90109 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.0.83'])
2022-04-05 11:02:41,218 p=90109 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.0.83'])
2022-04-05 11:02:41,553 p=90109 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.0.84'])
2022-04-05 11:02:41,595 p=90109 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.0.84'])
2022-04-05 11:02:41,668 p=90109 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.0.84'])
2022-04-05 11:02:41,974 p=90109 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.0.85'])
2022-04-05 11:02:42,073 p=90109 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.0.85'])
2022-04-05 11:02:42,467 p=90109 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.82'])
2022-04-05 11:02:42,514 p=90109 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.82'])
2022-04-05 11:02:42,861 p=90109 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.83'])
2022-04-05 11:02:42,904 p=90109 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.83'])
2022-04-05 11:02:43,315 p=90109 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.84'])
2022-04-05 11:02:43,359 p=90109 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.84'])
2022-04-05 11:02:43,705 p=90109 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.85'])
2022-04-05 11:02:43,748 p=90109 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.85'])
2022-04-05 11:02:43,927 p=90109 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.0.85'])
2022-04-05 11:02:44,532 p=90109 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.82'])
2022-04-05 11:02:44,992 p=90109 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.83'])
2022-04-05 11:02:45,449 p=90109 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.84'])
2022-04-05 11:02:45,887 p=90109 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.85'])
2022-04-05 11:02:45,901 p=90109 u=moonja n=ansible | TASK [pgsql94-bdr : Configure postgresql.conf with shared GUCs of PostgreSQL for BDR] *****************************
2022-04-05 11:02:45,924 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"}) 
2022-04-05 11:02:45,926 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'}) 
2022-04-05 11:02:45,930 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'}) 
2022-04-05 11:02:45,935 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"}) 
2022-04-05 11:02:45,940 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'}) 
2022-04-05 11:02:45,941 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"}) 
2022-04-05 11:02:45,942 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'}) 
2022-04-05 11:02:45,942 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"}) 
2022-04-05 11:02:45,942 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?unix_socket_directories = .*$', 'guc': "unix_socket_directories = '/tmp'"}) 
2022-04-05 11:02:45,943 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'}) 
2022-04-05 11:02:45,946 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'}) 
2022-04-05 11:02:45,950 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"}) 
2022-04-05 11:02:45,954 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'}) 
2022-04-05 11:02:45,955 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"}) 
2022-04-05 11:02:45,960 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'}) 
2022-04-05 11:02:45,961 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?unix_socket_directories = .*$', 'guc': "unix_socket_directories = '/tmp'"}) 
2022-04-05 11:02:46,431 p=90109 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"})
2022-04-05 11:02:46,434 p=90109 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"})
2022-04-05 11:02:46,467 p=90109 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"})
2022-04-05 11:02:46,841 p=90109 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'})
2022-04-05 11:02:46,850 p=90109 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'})
2022-04-05 11:02:46,901 p=90109 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'})
2022-04-05 11:02:47,256 p=90109 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'})
2022-04-05 11:02:47,266 p=90109 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'})
2022-04-05 11:02:47,319 p=90109 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'})
2022-04-05 11:02:47,664 p=90109 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"})
2022-04-05 11:02:47,696 p=90109 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"})
2022-04-05 11:02:47,771 p=90109 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"})
2022-04-05 11:02:48,085 p=90109 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'})
2022-04-05 11:02:48,109 p=90109 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'})
2022-04-05 11:02:48,235 p=90109 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'})
2022-04-05 11:02:48,509 p=90109 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"})
2022-04-05 11:02:48,523 p=90109 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"})
2022-04-05 11:02:48,692 p=90109 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"})
2022-04-05 11:02:48,933 p=90109 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'})
2022-04-05 11:02:49,006 p=90109 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'})
2022-04-05 11:02:49,185 p=90109 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'})
2022-04-05 11:02:49,328 p=90109 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?unix_socket_directories = .*$', 'guc': "unix_socket_directories = '/tmp'"})
2022-04-05 11:02:49,467 p=90109 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?unix_socket_directories = .*$', 'guc': "unix_socket_directories = '/tmp'"})
2022-04-05 11:02:49,613 p=90109 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?unix_socket_directories = .*$', 'guc': "unix_socket_directories = '/tmp'"})
2022-04-05 11:02:49,626 p=90109 u=moonja n=ansible | TASK [pgsql94-bdr : Start PostgreSQL] *****************************************************************************
2022-04-05 11:02:49,647 p=90109 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 11:02:49,663 p=90109 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 11:02:51,169 p=90109 u=moonja n=ansible | changed: [co7-node03]
2022-04-05 11:02:51,205 p=90109 u=moonja n=ansible | changed: [co7-node02]
2022-04-05 11:02:51,223 p=90109 u=moonja n=ansible | changed: [co7-node01]
2022-04-05 11:02:51,233 p=90109 u=moonja n=ansible | TASK [pgsql94-bdr : Configure Primary Master's postgresql.conf] ***************************************************
2022-04-05 11:02:51,269 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-05 11:02:51,270 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.81 dbname=bdrdemo user=postgres'"}) 
2022-04-05 11:02:51,282 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-05 11:02:51,282 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.82 dbname=bdrdemo user=postgres'"}) 
2022-04-05 11:02:51,806 p=90109 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-05 11:02:51,813 p=90109 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-05 11:02:51,826 p=90109 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-05 11:02:52,247 p=90109 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.84 dbname=bdrdemo user=postgres'"})
2022-04-05 11:02:52,291 p=90109 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.85 dbname=bdrdemo user=postgres'"})
2022-04-05 11:02:52,357 p=90109 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"})
2022-04-05 11:02:52,369 p=90109 u=moonja n=ansible | TASK [pgsql94-bdr : Configure Slave Master's postgresql.conf] *****************************************************
2022-04-05 11:02:52,409 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-05 11:02:52,409 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"}) 
2022-04-05 11:02:52,411 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': 'bdr.demo_init_replica = on'}) 
2022-04-05 11:02:52,412 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"}) 
2022-04-05 11:02:52,427 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-05 11:02:52,428 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"}) 
2022-04-05 11:02:52,430 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': 'bdr.demo_init_replica = on'}) 
2022-04-05 11:02:52,430 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"}) 
2022-04-05 11:02:53,034 p=90109 u=moonja n=ansible | ok: [co7-node03] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-05 11:02:53,035 p=90109 u=moonja n=ansible | ok: [co7-node01] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-05 11:02:53,070 p=90109 u=moonja n=ansible | ok: [co7-node02] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-05 11:02:53,896 p=90109 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"})
2022-04-05 11:02:53,928 p=90109 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"})
2022-04-05 11:02:54,065 p=90109 u=moonja n=ansible | ok: [co7-node01] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"})
2022-04-05 11:02:54,338 p=90109 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': 'bdr.demo_init_replica = on'})
2022-04-05 11:02:54,360 p=90109 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': 'bdr.demo_init_replica = on'})
2022-04-05 11:02:54,543 p=90109 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': 'bdr.demo_init_replica = on'})
2022-04-05 11:02:54,790 p=90109 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"})
2022-04-05 11:02:54,807 p=90109 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"})
2022-04-05 11:02:55,025 p=90109 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"})
2022-04-05 11:02:55,038 p=90109 u=moonja n=ansible | TASK [pgsql94-bdr : Final PostgreSQL restart] *********************************************************************
2022-04-05 11:02:55,083 p=90109 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 11:02:55,103 p=90109 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 11:03:03,533 p=90109 u=moonja n=ansible | changed: [co7-node02]
2022-04-05 11:03:03,862 p=90109 u=moonja n=ansible | changed: [co7-node03]
2022-04-05 11:03:03,862 p=90109 u=moonja n=ansible | changed: [co7-node01]
2022-04-05 11:03:03,873 p=90109 u=moonja n=ansible | TASK [pgsql94-bdr : Create database to sync between Master Servers] ***********************************************
2022-04-05 11:03:03,897 p=90109 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 11:03:03,914 p=90109 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 11:03:05,005 p=90109 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: 	connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?
2022-04-05 11:03:05,006 p=90109 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n"}
2022-04-05 11:03:05,030 p=90109 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: 	connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?
2022-04-05 11:03:05,030 p=90109 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n"}
2022-04-05 11:03:05,044 p=90109 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: 	connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?
2022-04-05 11:03:05,044 p=90109 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n"}
2022-04-05 11:03:05,055 p=90109 u=moonja n=ansible | TASK [pgsql94-bdr : Connect to database, create user and grant access for all Master Servers] *********************
2022-04-05 11:03:05,077 p=90109 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 11:03:05,090 p=90109 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 11:03:05,100 p=90109 u=moonja n=ansible | TASK [pgsql94-bdr : Create extentions for BDR] ********************************************************************
2022-04-05 11:03:05,124 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item=CREATE EXTENSION btree_gist;) 
2022-04-05 11:03:05,125 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item=CREATE EXTENSION bdr;) 
2022-04-05 11:03:05,139 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item=CREATE EXTENSION btree_gist;) 
2022-04-05 11:03:05,139 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item=CREATE EXTENSION bdr;) 
2022-04-05 11:03:05,150 p=90109 u=moonja n=ansible | TASK [pgsql94-bdr : Create group on Primary Master Server for BDR] ************************************************
2022-04-05 11:03:05,184 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item=SELECT bdr.bdr_group_create ( local_node_name := 'co7-master', node_external_dsn := 'host=192.168.0.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-05 11:03:05,196 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item=SELECT bdr.bdr_group_create ( local_node_name := 'co7-slave', node_external_dsn := 'host=192.168.0.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-05 11:03:05,207 p=90109 u=moonja n=ansible | TASK [pgsql94-bdr : Join group from other Master Servers] *********************************************************
2022-04-05 11:03:05,247 p=90109 u=moonja n=ansible | skipping: [co7-master] => (item=SELECT bdr.bdr_group_join ( local_node_name := 'co7-master', node_external_dsn := 'host=192.168.0.81 user=bdrsync dbname=bdrdemo password=changeme', join_using_dsn := 'host=192.168.0.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-05 11:03:05,261 p=90109 u=moonja n=ansible | skipping: [co7-slave] => (item=SELECT bdr.bdr_group_join ( local_node_name := 'co7-slave', node_external_dsn := 'host=192.168.0.82 user=bdrsync dbname=bdrdemo password=changeme', join_using_dsn := 'host=192.168.0.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-05 11:03:05,294 p=90109 u=moonja n=ansible | PLAY RECAP ********************************************************************************************************
2022-04-05 11:03:05,294 p=90109 u=moonja n=ansible | co7-master                 : ok=3    changed=1    unreachable=0    failed=0    skipped=20   rescued=0    ignored=0   
2022-04-05 11:03:05,295 p=90109 u=moonja n=ansible | co7-node01                 : ok=16   changed=14   unreachable=0    failed=1    skipped=2    rescued=0    ignored=1   
2022-04-05 11:03:05,295 p=90109 u=moonja n=ansible | co7-node02                 : ok=16   changed=14   unreachable=0    failed=1    skipped=2    rescued=0    ignored=1   
2022-04-05 11:03:05,295 p=90109 u=moonja n=ansible | co7-node03                 : ok=16   changed=14   unreachable=0    failed=1    skipped=2    rescued=0    ignored=1   
2022-04-05 11:03:05,295 p=90109 u=moonja n=ansible | co7-slave                  : ok=3    changed=1    unreachable=0    failed=0    skipped=20   rescued=0    ignored=0   
2022-04-05 11:12:12,530 p=94175 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from ansible-core in version 
2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-04-05 11:12:12,541 p=94175 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-04-05 11:12:12,777 p=94175 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 2.16. Deprecation warnings 
can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-04-05 11:12:12,812 p=94175 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgsql94-bdr/tasks/upgrade.yml is empty and had no tasks to include

2022-04-05 11:12:12,827 p=94175 u=moonja n=ansible | PLAY [all] **************************************************************************************************************************************************
2022-04-05 11:12:12,848 p=94175 u=moonja n=ansible | TASK [Gathering Facts] **************************************************************************************************************************************
2022-04-05 11:12:15,325 p=94175 u=moonja n=ansible | ok: [co7-master]
2022-04-05 11:12:15,516 p=94175 u=moonja n=ansible | ok: [co7-node03]
2022-04-05 11:12:15,644 p=94175 u=moonja n=ansible | ok: [co7-node02]
2022-04-05 11:12:15,697 p=94175 u=moonja n=ansible | ok: [co7-slave]
2022-04-05 11:12:15,749 p=94175 u=moonja n=ansible | ok: [co7-node01]
2022-04-05 11:12:15,767 p=94175 u=moonja n=ansible | TASK [pgsql94-bdr : Check OS support] ***********************************************************************************************************************
2022-04-05 11:12:15,803 p=94175 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 11:12:15,819 p=94175 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 11:12:15,835 p=94175 u=moonja n=ansible | skipping: [co7-node01]
2022-04-05 11:12:15,837 p=94175 u=moonja n=ansible | skipping: [co7-node02]
2022-04-05 11:12:15,846 p=94175 u=moonja n=ansible | skipping: [co7-node03]
2022-04-05 11:12:15,857 p=94175 u=moonja n=ansible | TASK [pgsql94-bdr : Check if PostgreSQL is running] *********************************************************************************************************
2022-04-05 11:12:15,877 p=94175 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 11:12:15,893 p=94175 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 11:12:16,931 p=94175 u=moonja n=ansible | changed: [co7-node01]
2022-04-05 11:12:16,940 p=94175 u=moonja n=ansible | changed: [co7-node03]
2022-04-05 11:12:17,021 p=94175 u=moonja n=ansible | changed: [co7-node02]
2022-04-05 11:12:17,031 p=94175 u=moonja n=ansible | TASK [pgsql94-bdr : Start PostgreSQL] ***********************************************************************************************************************
2022-04-05 11:12:17,051 p=94175 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 11:12:17,068 p=94175 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 11:12:17,099 p=94175 u=moonja n=ansible | skipping: [co7-node01]
2022-04-05 11:12:17,101 p=94175 u=moonja n=ansible | skipping: [co7-node02]
2022-04-05 11:12:17,112 p=94175 u=moonja n=ansible | skipping: [co7-node03]
2022-04-05 11:12:17,122 p=94175 u=moonja n=ansible | TASK [pgsql94-bdr : Check if database is available] *********************************************************************************************************
2022-04-05 11:12:17,143 p=94175 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 11:12:17,158 p=94175 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 11:12:18,088 p=94175 u=moonja n=ansible | [WARNING]: PostgreSQL server is unavailable: could not connect to server: No such file or directory         Is the server running locally and accepting
connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?

2022-04-05 11:12:18,088 p=94175 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": false, "failed_when_result": true, "is_available": false, "server_version": {}}
2022-04-05 11:12:18,088 p=94175 u=moonja n=ansible | ...ignoring
2022-04-05 11:12:18,089 p=94175 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": false, "failed_when_result": true, "is_available": false, "server_version": {}}
2022-04-05 11:12:18,089 p=94175 u=moonja n=ansible | ...ignoring
2022-04-05 11:12:18,099 p=94175 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": false, "failed_when_result": true, "is_available": false, "server_version": {}}
2022-04-05 11:12:18,100 p=94175 u=moonja n=ansible | ...ignoring
2022-04-05 11:12:18,109 p=94175 u=moonja n=ansible | TASK [pgsql94-bdr : Remove logical replications of BDR] *****************************************************************************************************
2022-04-05 11:12:18,132 p=94175 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 11:12:18,149 p=94175 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 11:12:19,007 p=94175 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n"}
2022-04-05 11:12:19,008 p=94175 u=moonja n=ansible | ...ignoring
2022-04-05 11:12:19,008 p=94175 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n"}
2022-04-05 11:12:19,008 p=94175 u=moonja n=ansible | ...ignoring
2022-04-05 11:12:19,043 p=94175 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n"}
2022-04-05 11:12:19,043 p=94175 u=moonja n=ansible | ...ignoring
2022-04-05 11:12:19,053 p=94175 u=moonja n=ansible | TASK [pgsql94-bdr : Check if database is existed] ***********************************************************************************************************
2022-04-05 11:12:19,074 p=94175 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 11:12:19,090 p=94175 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 11:12:19,827 p=94175 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": false, "failed_when_result": true, "is_available": false, "server_version": {}}
2022-04-05 11:12:19,828 p=94175 u=moonja n=ansible | ...ignoring
2022-04-05 11:12:19,833 p=94175 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": false, "failed_when_result": true, "is_available": false, "server_version": {}}
2022-04-05 11:12:19,833 p=94175 u=moonja n=ansible | ...ignoring
2022-04-05 11:12:19,895 p=94175 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": false, "failed_when_result": true, "is_available": false, "server_version": {}}
2022-04-05 11:12:19,895 p=94175 u=moonja n=ansible | ...ignoring
2022-04-05 11:12:19,906 p=94175 u=moonja n=ansible | TASK [pgsql94-bdr : Kill all postgresql connections for removing session held by user] **********************************************************************
2022-04-05 11:12:19,927 p=94175 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 11:12:19,944 p=94175 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 11:12:19,975 p=94175 u=moonja n=ansible | skipping: [co7-node01]
2022-04-05 11:12:19,983 p=94175 u=moonja n=ansible | skipping: [co7-node02]
2022-04-05 11:12:19,996 p=94175 u=moonja n=ansible | skipping: [co7-node03]
2022-04-05 11:12:20,006 p=94175 u=moonja n=ansible | TASK [pgsql94-bdr : Drop the database] **********************************************************************************************************************
2022-04-05 11:12:20,027 p=94175 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 11:12:20,044 p=94175 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 11:12:21,040 p=94175 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OperationalError: FATAL:  password authentication failed for user "bdrsync"
2022-04-05 11:12:21,040 p=94175 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": false, "msg": "unable to connect to database: FATAL:  password authentication failed for user \"bdrsync\"\n"}
2022-04-05 11:12:21,040 p=94175 u=moonja n=ansible | ...ignoring
2022-04-05 11:12:21,075 p=94175 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OperationalError: FATAL:  password authentication failed for user "bdrsync"
2022-04-05 11:12:21,075 p=94175 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": false, "msg": "unable to connect to database: FATAL:  password authentication failed for user \"bdrsync\"\n"}
2022-04-05 11:12:21,075 p=94175 u=moonja n=ansible | ...ignoring
2022-04-05 11:12:21,078 p=94175 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OperationalError: FATAL:  password authentication failed for user "bdrsync"
2022-04-05 11:12:21,078 p=94175 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": false, "msg": "unable to connect to database: FATAL:  password authentication failed for user \"bdrsync\"\n"}
2022-04-05 11:12:21,078 p=94175 u=moonja n=ansible | ...ignoring
2022-04-05 11:12:21,087 p=94175 u=moonja n=ansible | TASK [pgsql94-bdr : Stop PostgreSQL if are running] *********************************************************************************************************
2022-04-05 11:12:21,108 p=94175 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 11:12:21,124 p=94175 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 11:12:23,276 p=94175 u=moonja n=ansible | changed: [co7-node03]
2022-04-05 11:12:23,282 p=94175 u=moonja n=ansible | changed: [co7-node02]
2022-04-05 11:12:23,284 p=94175 u=moonja n=ansible | changed: [co7-node01]
2022-04-05 11:12:23,294 p=94175 u=moonja n=ansible | TASK [pgsql94-bdr : Remove old PostgreSQL data directory if exists] *****************************************************************************************
2022-04-05 11:12:23,315 p=94175 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 11:12:23,332 p=94175 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 11:12:24,092 p=94175 u=moonja n=ansible | changed: [co7-node03]
2022-04-05 11:12:24,094 p=94175 u=moonja n=ansible | changed: [co7-node02]
2022-04-05 11:12:24,131 p=94175 u=moonja n=ansible | changed: [co7-node01]
2022-04-05 11:12:24,140 p=94175 u=moonja n=ansible | TASK [pgsql94-bdr : Check package manager support] **********************************************************************************************************
2022-04-05 11:12:24,161 p=94175 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 11:12:24,178 p=94175 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 11:12:24,195 p=94175 u=moonja n=ansible | skipping: [co7-node01]
2022-04-05 11:12:24,212 p=94175 u=moonja n=ansible | skipping: [co7-node02]
2022-04-05 11:12:24,226 p=94175 u=moonja n=ansible | skipping: [co7-node03]
2022-04-05 11:12:24,235 p=94175 u=moonja n=ansible | TASK [pgsql94-bdr : Remove PostgreSQL BDR packages] *********************************************************************************************************
2022-04-05 11:12:24,258 p=94175 u=moonja n=ansible | skipping: [co7-master] => (item=python-psycopg2) 
2022-04-05 11:12:24,260 p=94175 u=moonja n=ansible | skipping: [co7-master] => (item=postgresql-bdr94) 
2022-04-05 11:12:24,263 p=94175 u=moonja n=ansible | skipping: [co7-master] => (item=postgresql-bdr94-bdr) 
2022-04-05 11:12:24,263 p=94175 u=moonja n=ansible | skipping: [co7-master] => (item=postgresql-bdr94-2ndquadrant-redhat) 
2022-04-05 11:12:24,274 p=94175 u=moonja n=ansible | skipping: [co7-slave] => (item=python-psycopg2) 
2022-04-05 11:12:24,276 p=94175 u=moonja n=ansible | skipping: [co7-slave] => (item=postgresql-bdr94) 
2022-04-05 11:12:24,278 p=94175 u=moonja n=ansible | skipping: [co7-slave] => (item=postgresql-bdr94-bdr) 
2022-04-05 11:12:24,278 p=94175 u=moonja n=ansible | skipping: [co7-slave] => (item=postgresql-bdr94-2ndquadrant-redhat) 
2022-04-05 11:12:36,312 p=94175 u=moonja n=ansible | changed: [co7-node01] => (item=python-psycopg2)
2022-04-05 11:12:39,528 p=94175 u=moonja n=ansible | changed: [co7-node03] => (item=python-psycopg2)
2022-04-05 11:12:39,687 p=94175 u=moonja n=ansible | changed: [co7-node02] => (item=python-psycopg2)
2022-04-05 11:12:55,775 p=94175 u=moonja n=ansible | changed: [co7-node01] => (item=postgresql-bdr94)
2022-04-05 11:12:56,643 p=94175 u=moonja n=ansible | ok: [co7-node01] => (item=postgresql-bdr94-bdr)
2022-04-05 11:12:57,599 p=94175 u=moonja n=ansible | ok: [co7-node01] => (item=postgresql-bdr94-2ndquadrant-redhat)
2022-04-05 11:13:02,172 p=94175 u=moonja n=ansible | changed: [co7-node03] => (item=postgresql-bdr94)
2022-04-05 11:13:02,349 p=94175 u=moonja n=ansible | changed: [co7-node02] => (item=postgresql-bdr94)
2022-04-05 11:13:02,853 p=94175 u=moonja n=ansible | ok: [co7-node03] => (item=postgresql-bdr94-bdr)
2022-04-05 11:13:03,077 p=94175 u=moonja n=ansible | ok: [co7-node02] => (item=postgresql-bdr94-bdr)
2022-04-05 11:13:03,536 p=94175 u=moonja n=ansible | ok: [co7-node03] => (item=postgresql-bdr94-2ndquadrant-redhat)
2022-04-05 11:13:03,766 p=94175 u=moonja n=ansible | ok: [co7-node02] => (item=postgresql-bdr94-2ndquadrant-redhat)
2022-04-05 11:13:03,821 p=94175 u=moonja n=ansible | PLAY RECAP **************************************************************************************************************************************************
2022-04-05 11:13:03,821 p=94175 u=moonja n=ansible | co7-master                 : ok=1    changed=0    unreachable=0    failed=0    skipped=12   rescued=0    ignored=0   
2022-04-05 11:13:03,821 p=94175 u=moonja n=ansible | co7-node01                 : ok=9    changed=4    unreachable=0    failed=0    skipped=4    rescued=0    ignored=4   
2022-04-05 11:13:03,821 p=94175 u=moonja n=ansible | co7-node02                 : ok=9    changed=4    unreachable=0    failed=0    skipped=4    rescued=0    ignored=4   
2022-04-05 11:13:03,822 p=94175 u=moonja n=ansible | co7-node03                 : ok=9    changed=4    unreachable=0    failed=0    skipped=4    rescued=0    ignored=4   
2022-04-05 11:13:03,822 p=94175 u=moonja n=ansible | co7-slave                  : ok=1    changed=0    unreachable=0    failed=0    skipped=12   rescued=0    ignored=0   
2022-04-05 11:13:04,421 p=94928 u=moonja n=ansible | [DEPRECATION WARNING]: COMMAND_WARNINGS option, the command warnings feature is being removed. This feature will be removed from ansible-core in version 
2.14. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-04-05 11:13:04,437 p=94928 u=moonja n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2022-04-05 11:13:04,677 p=94928 u=moonja n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. This feature will be removed in version 2.16. Deprecation warnings 
can be disabled by setting deprecation_warnings=False in ansible.cfg.
2022-04-05 11:13:04,712 p=94928 u=moonja n=ansible | [WARNING]: file /Users/moonja/postgres-cluster/roles/pgsql94-bdr/tasks/upgrade.yml is empty and had no tasks to include

2022-04-05 11:13:04,727 p=94928 u=moonja n=ansible | PLAY [all] **************************************************************************************************************************************************
2022-04-05 11:13:04,750 p=94928 u=moonja n=ansible | TASK [Gathering Facts] **************************************************************************************************************************************
2022-04-05 11:13:07,050 p=94928 u=moonja n=ansible | ok: [co7-node03]
2022-04-05 11:13:07,128 p=94928 u=moonja n=ansible | ok: [co7-master]
2022-04-05 11:13:07,212 p=94928 u=moonja n=ansible | ok: [co7-node02]
2022-04-05 11:13:07,452 p=94928 u=moonja n=ansible | ok: [co7-node01]
2022-04-05 11:13:07,648 p=94928 u=moonja n=ansible | ok: [co7-slave]
2022-04-05 11:13:07,666 p=94928 u=moonja n=ansible | TASK [pgsql94-bdr : Check OS support] ***********************************************************************************************************************
2022-04-05 11:13:07,703 p=94928 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 11:13:07,721 p=94928 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 11:13:07,735 p=94928 u=moonja n=ansible | skipping: [co7-node01]
2022-04-05 11:13:07,737 p=94928 u=moonja n=ansible | skipping: [co7-node02]
2022-04-05 11:13:07,749 p=94928 u=moonja n=ansible | skipping: [co7-node03]
2022-04-05 11:13:07,760 p=94928 u=moonja n=ansible | TASK [pgsql94-bdr : Check packet manager support] ***********************************************************************************************************
2022-04-05 11:13:07,779 p=94928 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 11:13:07,796 p=94928 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 11:13:07,826 p=94928 u=moonja n=ansible | skipping: [co7-node01]
2022-04-05 11:13:07,828 p=94928 u=moonja n=ansible | skipping: [co7-node02]
2022-04-05 11:13:07,841 p=94928 u=moonja n=ansible | skipping: [co7-node03]
2022-04-05 11:13:07,852 p=94928 u=moonja n=ansible | TASK [pgsql94-bdr : Add bdr94 repository] *******************************************************************************************************************
2022-04-05 11:13:08,552 p=94928 u=moonja n=ansible | changed: [co7-slave]
2022-04-05 11:13:08,553 p=94928 u=moonja n=ansible | changed: [co7-node02]
2022-04-05 11:13:08,583 p=94928 u=moonja n=ansible | changed: [co7-node03]
2022-04-05 11:13:08,585 p=94928 u=moonja n=ansible | changed: [co7-master]
2022-04-05 11:13:08,597 p=94928 u=moonja n=ansible | changed: [co7-node01]
2022-04-05 11:13:08,607 p=94928 u=moonja n=ansible | TASK [pgsql94-bdr : debug] **********************************************************************************************************************************
2022-04-05 11:13:08,647 p=94928 u=moonja n=ansible | ok: [co7-master] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-05 11:13:08,664 p=94928 u=moonja n=ansible | ok: [co7-slave] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-05 11:13:08,681 p=94928 u=moonja n=ansible | ok: [co7-node01] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-05 11:13:08,682 p=94928 u=moonja n=ansible | ok: [co7-node02] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-05 11:13:08,696 p=94928 u=moonja n=ansible | ok: [co7-node03] => {
    "bdr94_repo_added": {
        "changed": true,
        "diff": {
            "after": "[bdr94_repo]\nasync = 1\nbaseurl =  https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "after_header": "/etc/yum.repos.d/bdr94_repo.repo",
            "before": "[bdr94_repo]\nasync = 1\nbaseurl = https://dl.enterprisedb.com/default/release/browse/rpm/packages/centos/7/x86_64/bdr9.4/\ngpgcheck = 0\nname = Add bdr94 repsotiry\n\n",
            "before_header": "/etc/yum.repos.d/bdr94_repo.repo"
        },
        "failed": false,
        "repo": "bdr94_repo",
        "state": "present"
    }
}
2022-04-05 11:13:08,707 p=94928 u=moonja n=ansible | TASK [pgsql94-bdr : Install PostgreSQL BDR packages] ********************************************************************************************************
2022-04-05 11:13:08,731 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item=python-psycopg2) 
2022-04-05 11:13:08,732 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item=postgresql-bdr94-bdr) 
2022-04-05 11:13:08,747 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item=python-psycopg2) 
2022-04-05 11:13:08,748 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item=postgresql-bdr94-bdr) 
2022-04-05 11:13:22,917 p=94928 u=moonja n=ansible | changed: [co7-node03] => (item=python-psycopg2)
2022-04-05 11:13:28,489 p=94928 u=moonja n=ansible | changed: [co7-node02] => (item=python-psycopg2)
2022-04-05 11:13:28,885 p=94928 u=moonja n=ansible | changed: [co7-node01] => (item=python-psycopg2)
2022-04-05 11:13:48,811 p=94928 u=moonja n=ansible | changed: [co7-node03] => (item=postgresql-bdr94-bdr)
2022-04-05 11:13:53,803 p=94928 u=moonja n=ansible | changed: [co7-node01] => (item=postgresql-bdr94-bdr)
2022-04-05 11:14:57,087 p=94928 u=moonja n=ansible | changed: [co7-node02] => (item=postgresql-bdr94-bdr)
2022-04-05 11:14:57,098 p=94928 u=moonja n=ansible | TASK [pgsql94-bdr : Change the permissions on the /tmp directory] *******************************************************************************************
2022-04-05 11:14:57,119 p=94928 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 11:14:57,137 p=94928 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 11:14:57,805 p=94928 u=moonja n=ansible | ok: [co7-node02]
2022-04-05 11:14:57,821 p=94928 u=moonja n=ansible | ok: [co7-node01]
2022-04-05 11:14:58,861 p=94928 u=moonja n=ansible | ok: [co7-node03]
2022-04-05 11:14:58,872 p=94928 u=moonja n=ansible | TASK [pgsql94-bdr : Stop PostgreSQL if are running] *********************************************************************************************************
2022-04-05 11:14:58,892 p=94928 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 11:14:58,909 p=94928 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 11:14:59,547 p=94928 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "stop"], "delta": "0:00:00.030243", "end": "2022-04-05 11:14:59.635891", "msg": "non-zero return code", "rc": 1, "start": "2022-04-05 11:14:59.605648", "stderr": "pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory", "stderr_lines": ["pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory"], "stdout": "", "stdout_lines": []}
2022-04-05 11:14:59,548 p=94928 u=moonja n=ansible | ...ignoring
2022-04-05 11:14:59,548 p=94928 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "stop"], "delta": "0:00:00.030644", "end": "2022-04-05 11:14:59.641167", "msg": "non-zero return code", "rc": 1, "start": "2022-04-05 11:14:59.610523", "stderr": "pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory", "stderr_lines": ["pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory"], "stdout": "", "stdout_lines": []}
2022-04-05 11:14:59,548 p=94928 u=moonja n=ansible | ...ignoring
2022-04-05 11:14:59,570 p=94928 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": true, "cmd": ["/usr/pgsql-9.4/bin/pg_ctl", "-D", "/var/lib/pgsql/9.4-bdr/data", "stop"], "delta": "0:00:00.039544", "end": "2022-04-05 11:14:59.662261", "msg": "non-zero return code", "rc": 1, "start": "2022-04-05 11:14:59.622717", "stderr": "pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory", "stderr_lines": ["pg_ctl: directory \"/var/lib/pgsql/9.4-bdr/data\" is not a database cluster directory"], "stdout": "", "stdout_lines": []}
2022-04-05 11:14:59,570 p=94928 u=moonja n=ansible | ...ignoring
2022-04-05 11:14:59,580 p=94928 u=moonja n=ansible | TASK [pgsql94-bdr : Remove old PostgreSQL data directory if exists] *****************************************************************************************
2022-04-05 11:14:59,601 p=94928 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 11:14:59,618 p=94928 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 11:15:00,109 p=94928 u=moonja n=ansible | changed: [co7-node02]
2022-04-05 11:15:00,110 p=94928 u=moonja n=ansible | changed: [co7-node03]
2022-04-05 11:15:00,120 p=94928 u=moonja n=ansible | changed: [co7-node01]
2022-04-05 11:15:00,130 p=94928 u=moonja n=ansible | TASK [pgsql94-bdr : Initialize new PostgreSQL BDR cluster on upstream server] *******************************************************************************
2022-04-05 11:15:00,152 p=94928 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 11:15:00,169 p=94928 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 11:15:04,860 p=94928 u=moonja n=ansible | changed: [co7-node03]
2022-04-05 11:15:04,975 p=94928 u=moonja n=ansible | changed: [co7-node01]
2022-04-05 11:15:05,066 p=94928 u=moonja n=ansible | changed: [co7-node02]
2022-04-05 11:15:05,075 p=94928 u=moonja n=ansible | TASK [pgsql94-bdr : Configure pg_hba.conf for basic authentication] *****************************************************************************************
2022-04-05 11:15:05,101 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'}) 
2022-04-05 11:15:05,102 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'}) 
2022-04-05 11:15:05,106 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'}) 
2022-04-05 11:15:05,108 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'}) 
2022-04-05 11:15:05,118 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'}) 
2022-04-05 11:15:05,119 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'}) 
2022-04-05 11:15:05,122 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'}) 
2022-04-05 11:15:05,123 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'}) 
2022-04-05 11:15:05,819 p=94928 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'})
2022-04-05 11:15:05,850 p=94928 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'})
2022-04-05 11:15:05,858 p=94928 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'local', 'database': 'replication', 'user': 'postgres', 'address': '', 'method': 'trust'})
2022-04-05 11:15:06,230 p=94928 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'})
2022-04-05 11:15:06,279 p=94928 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'})
2022-04-05 11:15:06,318 p=94928 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '127.0.0.1/32', 'method': 'trust'})
2022-04-05 11:15:06,637 p=94928 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'})
2022-04-05 11:15:06,700 p=94928 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'})
2022-04-05 11:15:06,759 p=94928 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'host', 'database': 'replication', 'user': 'postgres', 'address': '::1/128', 'method': 'trust'})
2022-04-05 11:15:07,037 p=94928 u=moonja n=ansible | changed: [co7-node03] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'})
2022-04-05 11:15:07,114 p=94928 u=moonja n=ansible | changed: [co7-node02] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'})
2022-04-05 11:15:07,182 p=94928 u=moonja n=ansible | changed: [co7-node01] => (item={'type': 'host', 'database': 'all', 'user': 'all', 'address': '0.0.0.0/0', 'method': 'password'})
2022-04-05 11:15:07,194 p=94928 u=moonja n=ansible | TASK [pgsql94-bdr : Configure pg_hba.conf to enable communication with password authentication between servers] *********************************************
2022-04-05 11:15:07,256 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.82']) 
2022-04-05 11:15:07,263 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.83']) 
2022-04-05 11:15:07,264 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.84']) 
2022-04-05 11:15:07,264 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.85']) 
2022-04-05 11:15:07,272 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.82']) 
2022-04-05 11:15:07,275 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.83']) 
2022-04-05 11:15:07,279 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.84']) 
2022-04-05 11:15:07,280 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.85']) 
2022-04-05 11:15:07,751 p=94928 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.82'])
2022-04-05 11:15:07,766 p=94928 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.82'])
2022-04-05 11:15:07,782 p=94928 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.82'])
2022-04-05 11:15:08,174 p=94928 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.83'])
2022-04-05 11:15:08,181 p=94928 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.83'])
2022-04-05 11:15:08,211 p=94928 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.83'])
2022-04-05 11:15:08,587 p=94928 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.84'])
2022-04-05 11:15:08,614 p=94928 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.84'])
2022-04-05 11:15:08,653 p=94928 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.84'])
2022-04-05 11:15:08,995 p=94928 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.85'])
2022-04-05 11:15:09,048 p=94928 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.85'])
2022-04-05 11:15:09,092 p=94928 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.85'])
2022-04-05 11:15:09,103 p=94928 u=moonja n=ansible | TASK [pgsql94-bdr : Configure pg_hba.conf to enable communication with trust authentication between servers] ************************************************
2022-04-05 11:15:09,163 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.0.82']) 
2022-04-05 11:15:09,164 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.0.83']) 
2022-04-05 11:15:09,169 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.0.84']) 
2022-04-05 11:15:09,170 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item=['all', '192.168.0.85']) 
2022-04-05 11:15:09,174 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.82']) 
2022-04-05 11:15:09,176 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.83']) 
2022-04-05 11:15:09,179 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.84']) 
2022-04-05 11:15:09,186 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.0.82']) 
2022-04-05 11:15:09,186 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item=['replication', '192.168.0.85']) 
2022-04-05 11:15:09,187 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.0.83']) 
2022-04-05 11:15:09,187 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.0.84']) 
2022-04-05 11:15:09,188 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item=['all', '192.168.0.85']) 
2022-04-05 11:15:09,193 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.82']) 
2022-04-05 11:15:09,194 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.83']) 
2022-04-05 11:15:09,195 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.84']) 
2022-04-05 11:15:09,196 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item=['replication', '192.168.0.85']) 
2022-04-05 11:15:09,670 p=94928 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.0.82'])
2022-04-05 11:15:09,701 p=94928 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.0.82'])
2022-04-05 11:15:09,716 p=94928 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.0.82'])
2022-04-05 11:15:10,087 p=94928 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.0.83'])
2022-04-05 11:15:10,141 p=94928 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.0.83'])
2022-04-05 11:15:10,142 p=94928 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.0.83'])
2022-04-05 11:15:10,552 p=94928 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.0.84'])
2022-04-05 11:15:10,595 p=94928 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.0.84'])
2022-04-05 11:15:10,627 p=94928 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.0.84'])
2022-04-05 11:15:10,958 p=94928 u=moonja n=ansible | changed: [co7-node02] => (item=['all', '192.168.0.85'])
2022-04-05 11:15:11,004 p=94928 u=moonja n=ansible | changed: [co7-node03] => (item=['all', '192.168.0.85'])
2022-04-05 11:15:11,052 p=94928 u=moonja n=ansible | changed: [co7-node01] => (item=['all', '192.168.0.85'])
2022-04-05 11:15:11,371 p=94928 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.82'])
2022-04-05 11:15:11,430 p=94928 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.82'])
2022-04-05 11:15:11,500 p=94928 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.82'])
2022-04-05 11:15:11,786 p=94928 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.83'])
2022-04-05 11:15:11,851 p=94928 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.83'])
2022-04-05 11:15:11,934 p=94928 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.83'])
2022-04-05 11:15:12,213 p=94928 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.84'])
2022-04-05 11:15:12,256 p=94928 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.84'])
2022-04-05 11:15:12,392 p=94928 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.84'])
2022-04-05 11:15:12,628 p=94928 u=moonja n=ansible | changed: [co7-node02] => (item=['replication', '192.168.0.85'])
2022-04-05 11:15:12,669 p=94928 u=moonja n=ansible | changed: [co7-node03] => (item=['replication', '192.168.0.85'])
2022-04-05 11:15:12,811 p=94928 u=moonja n=ansible | changed: [co7-node01] => (item=['replication', '192.168.0.85'])
2022-04-05 11:15:12,825 p=94928 u=moonja n=ansible | TASK [pgsql94-bdr : Configure postgresql.conf with shared GUCs of PostgreSQL for BDR] ***********************************************************************
2022-04-05 11:15:12,849 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"}) 
2022-04-05 11:15:12,851 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'}) 
2022-04-05 11:15:12,855 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'}) 
2022-04-05 11:15:12,858 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"}) 
2022-04-05 11:15:12,859 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'}) 
2022-04-05 11:15:12,866 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"}) 
2022-04-05 11:15:12,867 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'}) 
2022-04-05 11:15:12,867 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item={'regexp': '^#?unix_socket_directories = .*$', 'guc': "unix_socket_directories = '/tmp'"}) 
2022-04-05 11:15:12,868 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"}) 
2022-04-05 11:15:12,869 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'}) 
2022-04-05 11:15:12,871 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'}) 
2022-04-05 11:15:12,878 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"}) 
2022-04-05 11:15:12,879 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'}) 
2022-04-05 11:15:12,886 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"}) 
2022-04-05 11:15:12,887 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'}) 
2022-04-05 11:15:12,887 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item={'regexp': '^#?unix_socket_directories = .*$', 'guc': "unix_socket_directories = '/tmp'"}) 
2022-04-05 11:15:13,343 p=94928 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"})
2022-04-05 11:15:13,369 p=94928 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"})
2022-04-05 11:15:13,377 p=94928 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?listen_addresses = .*$', 'guc': "listen_addresses = '*'"})
2022-04-05 11:15:13,742 p=94928 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'})
2022-04-05 11:15:13,768 p=94928 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'})
2022-04-05 11:15:13,803 p=94928 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?max_replication_slots = .*$', 'guc': 'max_replication_slots = 3'})
2022-04-05 11:15:14,144 p=94928 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'})
2022-04-05 11:15:14,171 p=94928 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'})
2022-04-05 11:15:14,227 p=94928 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?max_wal_senders = .*$', 'guc': 'max_wal_senders = 4'})
2022-04-05 11:15:14,548 p=94928 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"})
2022-04-05 11:15:14,616 p=94928 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"})
2022-04-05 11:15:14,680 p=94928 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?wal_level = .*$', 'guc': "wal_level = 'logical'"})
2022-04-05 11:15:15,034 p=94928 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'})
2022-04-05 11:15:15,372 p=94928 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'})
2022-04-05 11:15:15,486 p=94928 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?track_commit_timestamp = .*$', 'guc': 'track_commit_timestamp = on'})
2022-04-05 11:15:15,507 p=94928 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"})
2022-04-05 11:15:15,846 p=94928 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"})
2022-04-05 11:15:15,895 p=94928 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?shared_preload_libraries = .*$', 'guc': "shared_preload_libraries = 'bdr'"})
2022-04-05 11:15:15,942 p=94928 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'})
2022-04-05 11:15:16,298 p=94928 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'})
2022-04-05 11:15:16,300 p=94928 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?max_worker_processes = .*$', 'guc': 'max_worker_processes = 10'})
2022-04-05 11:15:16,353 p=94928 u=moonja n=ansible | changed: [co7-node03] => (item={'regexp': '^#?unix_socket_directories = .*$', 'guc': "unix_socket_directories = '/tmp'"})
2022-04-05 11:15:16,701 p=94928 u=moonja n=ansible | changed: [co7-node02] => (item={'regexp': '^#?unix_socket_directories = .*$', 'guc': "unix_socket_directories = '/tmp'"})
2022-04-05 11:15:16,721 p=94928 u=moonja n=ansible | changed: [co7-node01] => (item={'regexp': '^#?unix_socket_directories = .*$', 'guc': "unix_socket_directories = '/tmp'"})
2022-04-05 11:15:16,732 p=94928 u=moonja n=ansible | TASK [pgsql94-bdr : Start PostgreSQL] ***********************************************************************************************************************
2022-04-05 11:15:16,753 p=94928 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 11:15:16,770 p=94928 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 11:15:19,521 p=94928 u=moonja n=ansible | changed: [co7-node03]
2022-04-05 11:15:19,522 p=94928 u=moonja n=ansible | changed: [co7-node01]
2022-04-05 11:15:19,904 p=94928 u=moonja n=ansible | changed: [co7-node02]
2022-04-05 11:15:19,913 p=94928 u=moonja n=ansible | TASK [pgsql94-bdr : Configure Primary Master's postgresql.conf] *********************************************************************************************
2022-04-05 11:15:19,951 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-05 11:15:19,951 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.81 dbname=bdrdemo user=postgres'"}) 
2022-04-05 11:15:19,968 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-05 11:15:19,969 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.82 dbname=bdrdemo user=postgres'"}) 
2022-04-05 11:15:20,588 p=94928 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-05 11:15:20,627 p=94928 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-05 11:15:20,648 p=94928 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-05 11:15:22,049 p=94928 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.85 dbname=bdrdemo user=postgres'"})
2022-04-05 11:15:22,090 p=94928 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"})
2022-04-05 11:15:22,418 p=94928 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.84 dbname=bdrdemo user=postgres'"})
2022-04-05 11:15:22,429 p=94928 u=moonja n=ansible | TASK [pgsql94-bdr : Configure Slave Master's postgresql.conf] ***********************************************************************************************
2022-04-05 11:15:22,465 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-05 11:15:22,466 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"}) 
2022-04-05 11:15:22,468 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': 'bdr.demo_init_replica = on'}) 
2022-04-05 11:15:22,469 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"}) 
2022-04-05 11:15:22,484 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.connections = 'demo'"}) 
2022-04-05 11:15:22,485 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"}) 
2022-04-05 11:15:22,485 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': 'bdr.demo_init_replica = on'}) 
2022-04-05 11:15:22,486 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"}) 
2022-04-05 11:15:22,948 p=94928 u=moonja n=ansible | ok: [co7-node02] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-05 11:15:22,961 p=94928 u=moonja n=ansible | ok: [co7-node03] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-05 11:15:22,989 p=94928 u=moonja n=ansible | ok: [co7-node01] => (item={'guc': "bdr.connections = 'demo'"})
2022-04-05 11:15:23,392 p=94928 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"})
2022-04-05 11:15:23,404 p=94928 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"})
2022-04-05 11:15:23,443 p=94928 u=moonja n=ansible | ok: [co7-node01] => (item={'guc': "bdr.demo_dsn = 'host=192.168.0.83 dbname=bdrdemo user=postgres'"})
2022-04-05 11:15:23,847 p=94928 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': 'bdr.demo_init_replica = on'})
2022-04-05 11:15:23,848 p=94928 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': 'bdr.demo_init_replica = on'})
2022-04-05 11:15:23,894 p=94928 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': 'bdr.demo_init_replica = on'})
2022-04-05 11:15:24,268 p=94928 u=moonja n=ansible | changed: [co7-node02] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"})
2022-04-05 11:15:24,301 p=94928 u=moonja n=ansible | changed: [co7-node03] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"})
2022-04-05 11:15:24,381 p=94928 u=moonja n=ansible | changed: [co7-node01] => (item={'guc': "bdr.demo_replica_local_dsn = 'host=127.0.0.1 dbname=bdrdemo user=postgres'"})
2022-04-05 11:15:24,393 p=94928 u=moonja n=ansible | TASK [pgsql94-bdr : Final PostgreSQL restart] ***************************************************************************************************************
2022-04-05 11:15:24,414 p=94928 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 11:15:24,431 p=94928 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 11:15:32,812 p=94928 u=moonja n=ansible | changed: [co7-node02]
2022-04-05 11:15:33,364 p=94928 u=moonja n=ansible | changed: [co7-node03]
2022-04-05 11:15:33,364 p=94928 u=moonja n=ansible | changed: [co7-node01]
2022-04-05 11:15:33,375 p=94928 u=moonja n=ansible | TASK [pgsql94-bdr : Create database to sync between Master Servers] *****************************************************************************************
2022-04-05 11:15:33,399 p=94928 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 11:15:33,415 p=94928 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 11:15:34,062 p=94928 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: 	connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?
2022-04-05 11:15:34,062 p=94928 u=moonja n=ansible | fatal: [co7-node02]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n"}
2022-04-05 11:15:34,081 p=94928 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: 	connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?
2022-04-05 11:15:34,081 p=94928 u=moonja n=ansible | fatal: [co7-node03]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n"}
2022-04-05 11:15:34,132 p=94928 u=moonja n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: 	connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?
2022-04-05 11:15:34,133 p=94928 u=moonja n=ansible | fatal: [co7-node01]: FAILED! => {"changed": false, "msg": "unable to connect to database: could not connect to server: No such file or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n"}
2022-04-05 11:15:34,143 p=94928 u=moonja n=ansible | TASK [pgsql94-bdr : Connect to database, create user and grant access for all Master Servers] ***************************************************************
2022-04-05 11:15:34,165 p=94928 u=moonja n=ansible | skipping: [co7-master]
2022-04-05 11:15:34,178 p=94928 u=moonja n=ansible | skipping: [co7-slave]
2022-04-05 11:15:34,187 p=94928 u=moonja n=ansible | TASK [pgsql94-bdr : Create extentions for BDR] **************************************************************************************************************
2022-04-05 11:15:34,213 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item=CREATE EXTENSION btree_gist;) 
2022-04-05 11:15:34,214 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item=CREATE EXTENSION bdr;) 
2022-04-05 11:15:34,226 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item=CREATE EXTENSION btree_gist;) 
2022-04-05 11:15:34,226 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item=CREATE EXTENSION bdr;) 
2022-04-05 11:15:34,237 p=94928 u=moonja n=ansible | TASK [pgsql94-bdr : Create group on Primary Master Server for BDR] ******************************************************************************************
2022-04-05 11:15:34,269 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item=SELECT bdr.bdr_group_create ( local_node_name := 'co7-master', node_external_dsn := 'host=192.168.0.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-05 11:15:34,284 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item=SELECT bdr.bdr_group_create ( local_node_name := 'co7-slave', node_external_dsn := 'host=192.168.0.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-05 11:15:34,296 p=94928 u=moonja n=ansible | TASK [pgsql94-bdr : Join group from other Master Servers] ***************************************************************************************************
2022-04-05 11:15:34,336 p=94928 u=moonja n=ansible | skipping: [co7-master] => (item=SELECT bdr.bdr_group_join ( local_node_name := 'co7-master', node_external_dsn := 'host=192.168.0.81 user=bdrsync dbname=bdrdemo password=changeme', join_using_dsn := 'host=192.168.0.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-05 11:15:34,350 p=94928 u=moonja n=ansible | skipping: [co7-slave] => (item=SELECT bdr.bdr_group_join ( local_node_name := 'co7-slave', node_external_dsn := 'host=192.168.0.82 user=bdrsync dbname=bdrdemo password=changeme', join_using_dsn := 'host=192.168.0.83 user=bdrsync dbname=bdrdemo password=changeme' );) 
2022-04-05 11:15:34,383 p=94928 u=moonja n=ansible | PLAY RECAP **************************************************************************************************************************************************
2022-04-05 11:15:34,383 p=94928 u=moonja n=ansible | co7-master                 : ok=3    changed=1    unreachable=0    failed=0    skipped=20   rescued=0    ignored=0   
2022-04-05 11:15:34,383 p=94928 u=moonja n=ansible | co7-node01                 : ok=16   changed=13   unreachable=0    failed=1    skipped=2    rescued=0    ignored=1   
2022-04-05 11:15:34,383 p=94928 u=moonja n=ansible | co7-node02                 : ok=16   changed=13   unreachable=0    failed=1    skipped=2    rescued=0    ignored=1   
2022-04-05 11:15:34,384 p=94928 u=moonja n=ansible | co7-node03                 : ok=16   changed=13   unreachable=0    failed=1    skipped=2    rescued=0    ignored=1   
2022-04-05 11:15:34,384 p=94928 u=moonja n=ansible | co7-slave                  : ok=3    changed=1    unreachable=0    failed=0    skipped=20   rescued=0    ignored=0   
